{"posts":[{"title":"å¸¸è§æ’åºç®—æ³•ï¼ˆä¸‹ï¼‰","content":"è®¡æ•°æ’åº å‡†å¤‡å¾…æ’åºçš„æ•°ç»„ä¸­æœ€å¤§-maxå’Œæœ€å°-minçš„å…ƒç´ ï¼Œå‡†å¤‡ä¸€ä¸ªé•¿åº¦ä¸ºï¼ˆmax-min+1ï¼‰è¾…åŠ©è®¡æ•°æ•°ç»„helpã€‚ åˆ†é…:ç»Ÿè®¡åŸæ•°ç»„ä¸­å€¼ä¸ºarr[i]çš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå­˜å…¥è¾…åŠ©è®¡æ•°æ•°ç»„å¯¹åº”arr[i]-minçš„ç´¢å¼•ä½ç½®å¤„ã€‚ æ”¶é›†: æ”¶é›†:æ ¹æ®è¾…åŠ©æ•°ç»„çš„åå‘ä»index=0å¼€å§‹å¡«å……ç›®æ ‡æ•°ç»„ã€‚å¾ªç¯åˆ¤æ–­è¾…åŠ©æ•°ç»„ç´¢å¼•ä¸ºiçš„å…ƒç´ å€¼help[i]æ˜¯å¦&gt;0ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™åŸæ•°ç»„arr[index++]=i + min class Solution { public int[] sortArray(int[] nums) { // stream è·å–æœ€å¤§æœ€å°å€¼æ–¹æ³• int max = Arrays.stream(nums).max().getAsInt(); int min = Arrays.stream(nums).min().getAsInt(); int[] support = new int[max - min + 1]; for(int num : nums){ support[num - min]++; } int index = 0; for(int i = 0 ; i &lt; support.length ; i++){ int times = support[i]; while(times-- &gt; 0){ nums[index++] = i + min; } } return nums; } } æ¡¶æ’åº æ¡¶æ’åºï¼ˆBucket sortï¼‰åˆè¢«ç§°ä¸ºç®±æ’åºã€‚å‰é¢è®²çš„è®¡æ•°æ’åºï¼Œæœ€å¤§å€¼å’Œæœ€å°å€¼ç›¸å·®å¤šå°‘å°±å‡†å¤‡å¤šå°‘ä¸ªæ¡¶ï¼Œè¯•æƒ³å¦‚æœæœ€å¤§å€¼å’Œæœ€å°å€¼ç›¸å·®è¿‡å¤§çš„è¯ï¼Œä¼šé€ æˆæ¡¶çš„æ•°é‡è¿‡å¤šï¼Œç©ºé—´å¤æ‚åº¦å¤§å¹…åº¦æå‡ã€‚è®¡æ•°æ’åºä¸å†é€‚ç”¨ï¼Œæ­¤æ—¶å¯ä»¥é‡‡ç”¨æ¡¶æ’åºã€‚ ç¨³å®šæ€§ï¼šæ¡¶æ’åºæ˜¯å¦ç¨³å®šå–å†³äºæ¯ä¸ªæ¡¶é‡‡ç”¨çš„æ’åºç®—æ³•ï¼Œå› ä¸ºæ¡¶æ’åºå¯ä»¥åšåˆ°ç¨³å®šï¼Œæ‰€ä»¥æ¡¶æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚ æ¡¶æ’åºè¯¦ç»†è¿‡ç¨‹å¦‚ä¸‹ï¼š å‡†å¤‡å¾…æ’åºçš„æ•°ç»„ä¸­æœ€å¤§-maxå’Œæœ€å°-minçš„å…ƒç´ ï¼Œå‡†å¤‡ä¸€ä¸ªæ¡¶å®¹å™¨ï¼Œæ¯ä¸ªæ¡¶é‡Œæ”¾çš„å…ƒç´ ç”¨listå­˜å‚¨ï¼Œå› ä¸ºæ¯ä¸ªæ¡¶å­˜æ”¾å…ƒç´ çš„æ•°é‡æ˜¯ä¸å›ºå®šçš„ã€‚æ¡¶çš„æ•°é‡ä¸ºk=(max-min)/arr.length+1ã€‚ éå†æ•°ç»„ arrï¼ŒæŒ‰ä¸€å®šçš„æ˜ å°„è§„åˆ™ï¼ˆè¿™ç±»ä¼¼äºå“ˆå¸Œè¡¨ï¼‰è®¡ç®—æ¯ä¸ªå…ƒç´ æ”¾çš„æ¡¶ä½ç½®ï¼Œå¹¶å°†å¾…æ’åºå…ƒç´ åˆ’åˆ†åˆ°ä¸åŒçš„æ¡¶ã€‚ æ¯ä¸ªæ¡¶å„è‡ªæ’åºï¼Œä¸€èˆ¬é‡‡ç”¨å¿«é€Ÿæ’åºã€‚ é¡ºåºéå†æ¡¶é›†åˆï¼ŒæŠŠæ’åºå¥½çš„å…ƒç´ å›å†™è¿›åŸæ•°ç»„ã€‚ class Solution { public int[] sortArray(int[] nums) { int max = Arrays.stream(nums).max().getAsInt(); int min = Arrays.stream(nums).min().getAsInt(); // è®¡ç®—æ¡¶æ•°ç»„çš„é•¿åº¦ int bucketNums = (max - min) / nums.length + 1; List&lt;Integer&gt;[] buckets = new List[bucketNums]; // è®¡ç®—æ¯ä¸ªæ¡¶çš„è£…è½½èŒƒå›´ int bucketRange = (max - min + 1) / bucketNums; for(int i = 0 ; i &lt; buckets.length ; i++){ buckets[i] = new ArrayList&lt;&gt;(); } for(int num : nums){ // è®¡ç®—å½“å‰æ•°å€¼åº”è¯¥æ”¾å…¥åˆ°å“ªä¸ªæ¡¶ä¸­ int index = (num - min) / (bucketRange + 1); buckets[index].add(num); } int index = 0; for(List&lt;Integer&gt; list : buckets){ Collections.sort(list); for (Integer integer : list) { nums[index++] = integer; } } return nums; } } åŸºæ•°æ’åº æœ‰è´Ÿæ•°ä¸è¡Œ å°†æ‰€æœ‰å¾…æ’åºéè´Ÿæ•´æ•°ç»Ÿä¸€ä¸ºä½æ•°ç›¸åŒçš„æ•´æ•°ï¼Œä½æ•°è¾ƒå°‘çš„å‰é¢è¡¥é›¶ã€‚ä¸€èˆ¬ç”¨10è¿›åˆ¶ï¼Œä¹Ÿå¯ä»¥ç”¨16è¿›åˆ¶ç”šè‡³2è¿›åˆ¶ï¼Œæ‰€æœ‰çš„å‰ææ˜¯èƒ½å¤Ÿæ‰¾åˆ°æœ€å¤§å€¼ï¼Œå¾—åˆ°æœ€é•¿çš„ä½æ•°ï¼Œè®¾kè¿›åˆ¶ä¸‹æœ€é•¿ä¸ºä½æ•°ä¸ºdã€‚å®é™…ä¸Šç›¸åŒä½æ•°ä¸Šçš„å€¼å°±æ˜¯è¦æ¯”è¾ƒçš„å¤šä¸ªé”®ã€‚ å¯¹ç›¸åŒçš„ä½æ•°ä¸Šçš„æ•°å€¼æŒ‰ç…§å¤§å°è¿›è¡Œç¨³å®šæ’åºï¼ˆå› ä¸ºç¨³å®šæ’åºèƒ½å¤Ÿå°†ä¸Šä¸€æ¬¡æ’åºçš„æˆæœä¿ç•™ä¸‹æ¥ã€‚ä¾‹å¦‚åä½æ•°çš„æ’åºè¿‡ç¨‹èƒ½ä¿ç•™ä¸ªä½æ•°çš„æ’åºæˆæœï¼Œç™¾ä½æ•°çš„æ’åºè¿‡ç¨‹èƒ½ä¿ç•™åä½æ•°çš„æ’åºæˆæœï¼‰ã€‚åŸºæ•°æ’åºçš„æ–¹å¼å¯ä»¥é‡‡ç”¨LSDï¼ˆLeast significant digitalï¼‰æˆ–MSDï¼ˆMost significant digitalï¼‰ï¼ŒLSDçš„æ’åºæ–¹å¼ç”±é”®å€¼çš„æœ€å³è¾¹å¼€å§‹ï¼Œè€ŒMSDåˆ™ç›¸åï¼Œç”±é”®å€¼çš„æœ€å·¦è¾¹å¼€å§‹ã€‚ MSDï¼šå…ˆä»é«˜ä½å¼€å§‹è¿›è¡Œæ’åºï¼Œåœ¨æ¯ä¸ªå…³é”®å­—ä¸Šï¼Œå¯é‡‡ç”¨è®¡æ•°æ’åºã€‚ LSDï¼šå…ˆä»ä½ä½å¼€å§‹è¿›è¡Œæ’åºï¼Œåœ¨æ¯ä¸ªå…³é”®å­—ä¸Šï¼Œå¯é‡‡ç”¨æ¡¶æ’åºã€‚ class Solution { int[] digit; public int[] sortArray(int[] nums) { int[] help = new int[10]; int[] temp = new int[nums.length]; int max = Arrays.stream(nums).max().getAsInt(); int len = String.valueOf(max).length(); digit = new int[len]; digit[0] = 1; for(int i = 1 ; i &lt; len ; i++){ digit[i] = digit[i - 1] * 10; } for(int k = 1 ; k &lt;= len ; k++){ Arrays.fill(help, 0); for(int num : nums){ help[getNum(num, k)]++; } // é€šè¿‡helpæ•°ç»„ç›´æ¥æ‰¾åˆ°å¯¹åº”çš„index for(int i = 1; i &lt; help.length ; i++){ help[i] += help[i - 1]; } // ä¸€å®šè¦ä»åå‘å‰éå†ï¼Œä¿è¯ç›¸å¯¹é¡ºåºä¸å˜ for(int i = nums.length - 1 ; i &gt;= 0 ; i--){ temp[help[getNum(nums[i], k)] - 1] = nums[i]; help[getNum(nums[i], k)]--; } for(int i = 0 ; i &lt; nums.length ; i++){ nums[i] = temp[i]; } } return nums; } /** * ç”¨äºè®¡ç®—numä»ä½åˆ°é«˜ä½kä½çš„æ•°å€¼ * @param num * @param k * @return kä½æ•°å€¼ */ public int getNum(int num, int k){ return (num / digit[k - 1]) % 10; } } ","link":"https://yeyuan1107.github.io/post/chang-jian-pai-xu-suan-fa-xia/"},{"title":"å¸¸è§æ’åºç®—æ³•ï¼ˆä¸Šï¼‰","content":" æœ¬æ–‡ç« æ€»ç»“äº†ä¸ƒç§æ¯”è¾ƒæ’åºç®—æ³• å†’æ³¡æ’åº æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚ å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚è¿™æ­¥åšå®Œåï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚ é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚ æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚ O(n2) class Solution { public int[] sortArray(int[] nums) { int len = nums.length; for(int i = 0 ; i &lt; len - 1 ; i++){ boolean flag = true; for(int j = 0 ; j &lt; len - 1 - i ; j++){ if(nums[j] &gt; nums[j + 1]){ swap(nums, j, j+1); flag = false; } } if (flag) break; } return nums; } public void swap(int[] nums, int left, int right){ int temp = nums[left]; nums[left] = nums[right]; nums[right] = temp; } } é€‰æ‹©æ’åº é¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ã€‚ å†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ é‡å¤ç¬¬äºŒæ­¥ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚ O(n2) class Solution { public int[] sortArray(int[] nums) { int len = nums.length; for(int i = 0 ; i &lt; len - 1 ; i++){ int index = i; for(int j = i + 1 ; j &lt; len ; j++){ if(nums[j] &lt; nums[index]){ index = j; } } swap(nums, i, index); } return nums; } public void swap(int[] nums, int left, int right){ int temp = nums[left]; nums[left] = nums[right]; nums[right] = temp; } } æ’å…¥æ’åº å°†ç¬¬ä¸€å¾…æ’åºåºåˆ—ç¬¬ä¸€ä¸ªå…ƒç´ çœ‹åšä¸€ä¸ªæœ‰åºåºåˆ—ï¼ŒæŠŠç¬¬äºŒä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ å½“æˆæ˜¯æœªæ’åºåºåˆ—ã€‚ ä»å¤´åˆ°å°¾ä¾æ¬¡æ‰«ææœªæ’åºåºåˆ—ï¼Œå°†æ‰«æåˆ°çš„æ¯ä¸ªå…ƒç´ æ’å…¥æœ‰åºåºåˆ—çš„é€‚å½“ä½ç½®ã€‚ï¼ˆå¦‚æœå¾…æ’å…¥çš„å…ƒç´ ä¸æœ‰åºåºåˆ—ä¸­çš„æŸä¸ªå…ƒç´ ç›¸ç­‰ï¼Œåˆ™å°†å¾…æ’å…¥å…ƒç´ æ’å…¥åˆ°ç›¸ç­‰å…ƒç´ çš„åé¢ã€‚ï¼‰ O(n2) class Solution { public int[] sortArray(int[] nums) { int len = nums.length; for(int i = 0 ; i &lt; len ; i++){ int temp = nums[i]; int j = i - 1; while(j &gt;= 0 &amp;&amp; nums[j] &gt; temp){ nums[j + 1] = nums[j]; j--; } nums[j + 1] = temp; } return nums; } } å¸Œå°”æ’åº å¸Œå°”æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•&quot;åŸºæœ¬æœ‰åº&quot;æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚ class Solution { public int[] sortArray(int[] nums) { int len = nums.length; int temp; for(int step = len / 2 ; step &gt;= 1 ; step /= 2){ for(int i = step ; i &lt; len ; i++){ temp = nums[i]; int j = i - step; while(j &gt;= 0 &amp;&amp; nums[j] &gt; temp){ nums[j + step] = nums[j]; j -= step; } nums[j + step] = temp; } } return nums; } } å½’å¹¶æ’åº class Solution { public int[] sortArray(int[] nums) { return mergeSort(nums, 0, nums.length); } public int[] mergeSort(int[] nums, int begin, int end){ if(begin &gt;= end) return new int[0]; if(begin + 1 == end) return new int[]{nums[begin]}; int mid = (end + begin) &gt;&gt; 1; int[] left = mergeSort(nums, begin, mid); int[] right = mergeSort(nums, mid, end); int[] ans = new int[end - begin]; int index = 0, lPointer = 0, rPointer = 0; while(lPointer &lt; left.length || rPointer &lt; right.length){ if(lPointer &gt;= left.length){ ans[index++] = right[rPointer++]; }else if(rPointer &gt;= right.length){ ans[index++] = left[lPointer++]; }else{ if(left[lPointer] &gt; right[rPointer]){ ans[index++] = right[rPointer++]; }else{ ans[index++] = left[lPointer++]; } } } return ans; } } å¿«é€Ÿæ’åº class Solution { public int[] sortArray(int[] nums) { quickSort(nums, 0, nums.length); return nums; } public void quickSort(int[] nums, int begin, int end){ if(begin &gt;= end) return; if(begin + 1 == end) return; // éšæœºé€‰å–ä¸€ä¸ªå€¼ä½œä¸ºåŸºå‡†å€¼ int index = new Random().nextInt(end - begin) + begin; swap(nums, begin, index); int cur = begin; // æ¯”åŸºå‡†å€¼å°çš„æ”¾åˆ°æ•°ç»„çš„å·¦è¾¹ï¼Œå¤§çš„æ”¾åˆ°å³è¾¹ for(int i = begin ; i &lt; end ; i++){ if(nums[i] &lt;= nums[begin]){ swap(nums, cur, i); cur++; } } swap(nums, begin, cur - 1); // åˆ†å¼€æ’åº quickSort(nums, begin, cur - 1); quickSort(nums, cur, end); } public void swap(int[] nums, int left, int right){ int temp = nums[left]; nums[left] = nums[right]; nums[right] = temp; } } å †æ’åº class Solution { public int[] sortArray(int[] nums) { for(int i = (nums.length - 2) / 2 ; i &gt;= 0 ; i--){ buildBigHeap(nums, i, nums.length); } for(int i = nums.length - 1 ; i &gt;= 0 ; i--){ swap(nums, 0, i); buildBigHeap(nums, 0, i); } return nums; } public void buildBigHeap(int[] nums, int begin, int end){ int childIndex; for(int i = begin ; i * 2 + 1 &lt; end ; i = childIndex){ childIndex = i * 2 + 1; if(childIndex + 1 &lt; end &amp;&amp; nums[childIndex] &lt; nums[childIndex + 1]){ childIndex += 1; } if(nums[childIndex] &gt; nums[i]){ swap(nums, i, childIndex); }else{ break; } } } public void swap(int[] nums, int left, int right){ int temp = nums[left]; nums[left] = nums[right]; nums[right] = temp; } } å †çš„ä¸‹æ²‰å’Œä¸Šæµ®æ–¹æ³•ï¼Œä¸Šæµ®æ–¹æ³•ç”¨äºæ’å…¥å»ºå †ï¼Œä¸‹æ²‰ç”¨äºç›´æ¥å»ºå † public void sink(int[] nums, int begin, int end){ int childIndex; for(int i = begin ; i * 2 + 1 &lt; end ; i = childIndex){ childIndex = i * 2 + 1; if(childIndex + 1 &lt; end &amp;&amp; nums[childIndex] &lt; nums[childIndex + 1]){ childIndex += 1; } if(nums[childIndex] &gt; nums[i]){ swap(nums, i, childIndex); }else{ break; } } } public void flow(int[] nums, int num, int end){ nums[end] = num; int parentIndex; for(int i = end ; (i - 1) / 2 &gt;= 0 ; i = parentIndex){ parentIndex = (i - 1) / 2; if(nums[parentIndex] &lt; nums[i]) { swap(nums, parentIndex, i); }else{ break; } } } ","link":"https://yeyuan1107.github.io/post/chang-jian-pai-xu-suan-fa-shang/"},{"title":"JMMå†…å­˜æ¨¡å‹","content":" è§£å†³æ–¹æ³• sychronized(åŒæ­¥å…³é”®å­—)è¯­æ³• synchronized( å¯¹è±¡ ) { è¦ä½œä¸ºåŸå­æ“ä½œä»£ç  } ç”¨synchronizedè§£å†³å¹¶å‘é—®é¢˜ static int i = 0; static Object obj = new Object(); public static void main(String[] args) throws InterruptedException { Thread t1 = new Thread(() -&gt; { for (int j = 0; j &lt; 5000; j++) { synchronized (obj) { i++; } } }); Thread t2 = new Thread(() -&gt; { for (int j = 0; j &lt; 5000; j++) { synchronized (obj) { i--; } } }); t1.start(); t2.start(); t1.join(); t2.join(); System.out.println(i); } å¦‚ä½•ç†è§£å‘¢:ä½ å¯ä»¥æŠŠ obj æƒ³è±¡æˆä¸€ä¸ªæˆ¿é—´ï¼Œçº¿ç¨‹ t1ï¼Œt2 æƒ³è±¡æˆä¸¤ä¸ªäººã€‚ å½“çº¿ç¨‹ t1 æ‰§è¡Œåˆ° synchronized(obj) æ—¶å°±å¥½æ¯” t1 è¿›å…¥äº†è¿™ä¸ªæˆ¿é—´ï¼Œå¹¶åæ‰‹é”ä½äº†é—¨ï¼Œåœ¨é—¨å†…æ‰§è¡Œcount++ ä»£ç ã€‚ è¿™æ—¶å€™å¦‚æœ t2 ä¹Ÿè¿è¡Œåˆ°äº† synchronized(obj) æ—¶ï¼Œå®ƒå‘ç°é—¨è¢«é”ä½äº†ï¼Œåªèƒ½åœ¨é—¨å¤–ç­‰å¾…ã€‚å½“ t1 æ‰§è¡Œå®Œ synchronized{} å—å†…çš„ä»£ç ï¼Œè¿™æ—¶å€™æ‰ä¼šè§£å¼€é—¨ä¸Šçš„é”ï¼Œä» obj æˆ¿é—´å‡ºæ¥ã€‚t2 çº¿ç¨‹è¿™æ—¶æ‰ å¯ä»¥è¿›å…¥ obj æˆ¿é—´ï¼Œåé”ä½é—¨ï¼Œæ‰§è¡Œå®ƒçš„ count-- ä»£ç ã€‚ æ³¨æ„ï¼šä¸Šä¾‹ä¸­ t1 å’Œ t2 çº¿ç¨‹å¿…é¡»ç”¨ synchronized é”ä½åŒä¸€ä¸ª obj å¯¹è±¡ï¼Œå¦‚æœ t1 é”ä½çš„æ˜¯ m1 å¯¹ è±¡ï¼Œt2 é”ä½çš„æ˜¯ m2 å¯¹è±¡ï¼Œå°±å¥½æ¯”ä¸¤ä¸ªäººåˆ†åˆ«è¿›å…¥äº†ä¸¤ä¸ªä¸åŒçš„æˆ¿é—´ï¼Œæ²¡æ³•èµ·åˆ°åŒæ­¥çš„æ•ˆæœã€‚ æ¯ä¸ªç±»å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªMonitoråŒºï¼Œåªæœ‰åœ¨ä½¿ç”¨synchronizedå…³é”®å­—æ‰ç”Ÿæ•ˆ Ownerè¡¨ç¤ºMonitorçš„æ‰€æœ‰è€…ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æˆä¸ºOwner å½“ä¸€ä¸ªçº¿ç¨‹t1åˆ°è¾¾ï¼Œå‘ç°Ownerä¸ºç©ºçš„ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹å°±ä¼šæˆä¸ºOwnerï¼Œå¹¶ä¸”æ‰§è¡Œmonitorenterä¼šå¯¹Monitorè¿›è¡Œé”å®š å½“ä¸€ä¸ªçº¿ç¨‹t2åˆ°è¾¾ï¼Œå‘ç°Ownerä¸ä¸ºç©ºï¼Œä¸”é”å®šäº†Monitorï¼Œè¿›å…¥EntryListè¿›è¡Œç­‰å¾…(é˜»å¡) å½“t1æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œmonitorexitï¼Œé€šçŸ¥EntryListä¸­æ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹ï¼Œå¯ä»¥æ¥äº‰æŠ¢æˆä¸ºæ–°çš„Owner EntryList WaitSet å¯è§æ€§ é€€ä¸å‡ºçš„å¾ªç¯ å…ˆæ¥çœ‹ä¸€ä¸ªç°è±¡ï¼Œmain çº¿ç¨‹å¯¹ run å˜é‡çš„ä¿®æ”¹å¯¹äº t çº¿ç¨‹ä¸å¯è§ï¼Œå¯¼è‡´äº† t çº¿ç¨‹æ— æ³•åœæ­¢: static boolean run = true; public static void main(String[] args) throws InterruptedException { Thread t = new Thread(()-&gt;{ while(run){ // .... } }); t.start(); Thread.sleep(1000); run = false; // çº¿ç¨‹tä¸ä¼šå¦‚é¢„æƒ³çš„åœä¸‹æ¥ } ä¸ºä»€ä¹ˆå‘¢ï¼Œåˆ†æä¸€ä¸‹å¯çŸ¥ åˆå§‹çŠ¶æ€ï¼Œtçº¿ç¨‹åˆšå¼€å§‹ä»ä¸»å†…å­˜è¯»å–äº†runçš„å€¼åˆ°å·¥ä½œå†…å­˜ï¼Œæ¯æ¬¡å¾ªç¯éƒ½éœ€è¦ä»ä¸»å†…å­˜ä¸­è¯»ä¸€æ¬¡runçš„å€¼ å› ä¸º t çº¿ç¨‹è¦é¢‘ç¹ä»ä¸»å†…å­˜ä¸­è¯»å– run çš„å€¼ï¼ŒJIT ç¼–è¯‘å™¨ä¼šå°† run çš„å€¼ç¼“å­˜è‡³è‡ªå·±å·¥ä½œå†…å­˜ä¸­çš„é«˜é€Ÿç¼“å­˜ä¸­ï¼Œå‡å°‘å¯¹ä¸»å­˜ä¸­ run çš„è®¿é—®ï¼Œæé«˜æ•ˆç‡ 1 ç§’ä¹‹åï¼Œmain çº¿ç¨‹ä¿®æ”¹äº† run çš„å€¼ï¼Œå¹¶åŒæ­¥è‡³ä¸»å­˜ï¼Œè€Œ t æ˜¯ä»è‡ªå·±å·¥ä½œå†…å­˜ä¸­çš„é«˜é€Ÿç¼“å­˜ä¸­è¯»å–è¿™ä¸ªå˜é‡çš„å€¼ï¼Œç»“æœæ°¸è¿œæ˜¯æ—§å€¼ è§£å†³æ–¹æ³• volatile (æ˜“å˜å…³é”®å­—)å®ƒå¯ä»¥ç”¨æ¥ä¿®é¥°æˆå‘˜å˜é‡å’Œé™æ€æˆå‘˜å˜é‡ï¼Œä»–å¯ä»¥é¿å…çº¿ç¨‹ä»è‡ªå·±çš„å·¥ä½œç¼“å­˜ä¸­æŸ¥æ‰¾å˜é‡çš„å€¼ï¼Œå¿…é¡»åˆ° ä¸»å­˜ä¸­è·å–å®ƒçš„å€¼ï¼Œçº¿ç¨‹æ“ä½œ volatile å˜é‡éƒ½æ˜¯ç›´æ¥æ“ä½œä¸»å­˜ å¯è§æ€§ å‰é¢ä¾‹å­ä½“ç°çš„å®é™…å°±æ˜¯å¯è§æ€§ï¼Œå®ƒä¿è¯çš„æ˜¯åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´ï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹ volatile å˜é‡çš„ä¿®æ”¹å¯¹å¦ä¸€ ä¸ªçº¿ç¨‹å¯è§ï¼Œ ä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œä»…ç”¨åœ¨ä¸€ä¸ªå†™çº¿ç¨‹ï¼Œå¤šä¸ªè¯»çº¿ç¨‹çš„æƒ…å†µ: ä¸Šä¾‹ä»å­—èŠ‚ç ç†è§£æ˜¯è¿™æ ·çš„: getstatic run //çº¿ç¨‹tè·å–runtrue getstatic run //çº¿ç¨‹tè·å–runtrue getstatic run //çº¿ç¨‹tè·å–runtrue getstatic run //çº¿ç¨‹tè·å–runtrue putstatic run // çº¿ç¨‹ main ä¿®æ”¹ run ä¸º falseï¼Œ ä»…æ­¤ä¸€æ¬¡ getstatic run // çº¿ç¨‹ t è·å– run false æ¯”è¾ƒä¸€ä¸‹ä¹‹å‰æˆ‘ä»¬å°†çº¿ç¨‹å®‰å…¨æ—¶ä¸¾çš„ä¾‹å­:ä¸¤ä¸ªçº¿ç¨‹ä¸€ä¸ª i++ ä¸€ä¸ª i-- ï¼Œåªèƒ½ä¿è¯çœ‹åˆ°æœ€æ–°å€¼ï¼Œä¸èƒ½è§£å†³æŒ‡ä»¤äº¤é”™ // å‡è®¾içš„åˆå§‹å€¼ä¸º0 getstatic i // çº¿ç¨‹1-è·å–é™æ€å˜é‡içš„å€¼ çº¿ç¨‹å†…i=0 getstatic i // çº¿ç¨‹2-è·å–é™æ€å˜é‡içš„å€¼ çº¿ç¨‹å†…i=0 iconst_1 // çº¿ç¨‹1-å‡†å¤‡å¸¸é‡1 iadd // çº¿ç¨‹1-è‡ªå¢ çº¿ç¨‹å†…i=1 putstatic i // çº¿ç¨‹1-å°†ä¿®æ”¹åçš„å€¼å­˜å…¥é™æ€å˜é‡i é™æ€å˜é‡i=1 iconst_1 // çº¿ç¨‹2-å‡†å¤‡å¸¸é‡1 isub // çº¿ç¨‹2-è‡ªå‡ çº¿ç¨‹å†…i=-1 putstatic i // çº¿ç¨‹2-å°†ä¿®æ”¹åçš„å€¼å­˜å…¥é™æ€å˜é‡i é™æ€å˜é‡i=-1 æ³¨æ„ synchronized è¯­å¥å—æ—¢å¯ä»¥ä¿è¯ä»£ç å—çš„åŸå­æ€§ï¼Œä¹ŸåŒæ—¶ä¿è¯ä»£ç å—å†…å˜é‡çš„å¯è§æ€§ã€‚ä½†ç¼ºç‚¹æ˜¯ synchronizedæ˜¯å±äºé‡é‡çº§æ“ä½œï¼Œæ€§èƒ½ç›¸å¯¹æ›´ä½ å¦‚æœåœ¨å‰é¢ç¤ºä¾‹çš„æ­»å¾ªç¯ä¸­åŠ å…¥ System.out.println() ä¼šå‘ç°å³ä½¿ä¸åŠ  volatile ä¿®é¥°ç¬¦ï¼Œçº¿ç¨‹ t ä¹Ÿèƒ½æ­£ç¡®çœ‹åˆ°å¯¹ run å˜é‡çš„ä¿®æ”¹äº† printlnä¸­æœ‰synchronizedå…³é”®å­—ï¼Œå¼ºåˆ¶å½“å‰çº¿ç¨‹ä»ä¸»å­˜ä¸­è¯»å–å€¼è€Œä¸æ˜¯ä»å‘Šè¯‰ç¼“å­˜ä¸­ æœ‰åºæ€§ è¯¡å¼‚çš„ç»“æœ int num = 0; boolean ready = false; // çº¿ç¨‹1 æ‰§è¡Œæ­¤æ–¹æ³• public void actor1(I_Result r) { if(ready) { //r1ç”¨æ¥ä¿å­˜ç»“æœ r.r1 = num + num; } else { r.r1 = 1; } } // çº¿ç¨‹2 æ‰§è¡Œæ­¤æ–¹æ³• public void actor2(I_Result r) { num = 2; ready = true; } I_Result æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰ä¸€ä¸ªå±æ€§ r1 ç”¨æ¥ä¿å­˜ç»“æœï¼Œé—®ï¼Œå¯èƒ½çš„ç»“æœæœ‰å‡ ç§?æœ‰åŒå­¦è¿™ä¹ˆåˆ†ææƒ…å†µ1:çº¿ç¨‹1 å…ˆæ‰§è¡Œï¼Œè¿™æ—¶ ready = falseï¼Œæ‰€ä»¥è¿›å…¥ else åˆ†æ”¯ç»“æœä¸º 1æƒ…å†µ2:çº¿ç¨‹2 å…ˆæ‰§è¡Œ num = 2ï¼Œä½†æ²¡æ¥å¾—åŠæ‰§è¡Œ ready = trueï¼Œçº¿ç¨‹1æ‰§è¡Œï¼Œè¿˜æ˜¯è¿›å…¥ else åˆ†æ”¯ï¼Œç»“æœä¸º1æƒ…å†µ3:çº¿ç¨‹2 æ‰§è¡Œåˆ° ready = trueï¼Œçº¿ç¨‹1 æ‰§è¡Œï¼Œè¿™å›è¿›å…¥ if åˆ†æ”¯ï¼Œç»“æœä¸º 4(å› ä¸º num å·²ç»æ‰§è¡Œè¿‡äº†)ä½†æˆ‘å‘Šè¯‰ä½ ï¼Œç»“æœè¿˜æœ‰å¯èƒ½æ˜¯ 0 ğŸ˜ğŸ˜ğŸ˜ï¼Œä¿¡ä¸ä¿¡å§!è¿™ç§æƒ…å†µä¸‹æ˜¯:çº¿ç¨‹2 æ‰§è¡Œ ready = trueï¼Œåˆ‡æ¢åˆ°çº¿ç¨‹1ï¼Œè¿›å…¥ifåˆ†æ”¯ï¼Œç›¸åŠ ä¸º0ï¼Œå†åˆ‡å›çº¿ç¨‹2æ‰§è¡Œnum = 2ç›¸ä¿¡å¾ˆå¤šäººå·²ç»æ™•äº† ğŸ˜µğŸ˜µğŸ˜µ è¿™ç§ç°è±¡å«åšæŒ‡ä»¤é‡æ’ï¼Œæ˜¯ JIT ç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶çš„ä¸€äº›ä¼˜åŒ–ï¼Œè¿™ä¸ªç°è±¡éœ€è¦é€šè¿‡å¤§é‡æµ‹è¯•æ‰èƒ½å¤ç°:å€ŸåŠ© java å¹¶å‘å‹æµ‹å·¥å…· jcstress https://wiki.openjdk.java.net/display/CodeTools/jcstress mvn archetype:generate -DinteractiveMode=false - DarchetypeGroupId=org.openjdk.jcstress -DarchetypeArtifactId=jcstress-java-test- archetype -DgroupId=org.sample -DartifactId=test -Dversion=1.0 åˆ›å»ºmavené¡¹ç›®ï¼Œæä¾›å¦‚ä¸‹æµ‹è¯•ç±» @JCStressTest //æ£€æŸ¥æ„Ÿå…´è¶£çš„ç»“æœ @Outcome(id = {&quot;1&quot;, &quot;4&quot;}, expect = Expect.ACCEPTABLE, desc = &quot;ok&quot;) @Outcome(id = &quot;0&quot;, expect = Expect.ACCEPTABLE_INTERESTING, desc = &quot;!!!!&quot;) @State public class ConcurrencyTest { int num = 0; boolean ready = false; @Actor public void actor1(I_Result r) { if(ready) { r.r1 = num + num; } else { r.r1 = 1; } } @Actor public void actor2(I_Result r) { num = 2; ready = true; } } æ‰§è¡Œ mvn clean install java -jar target/jcstress.jar ä¼šè¾“å‡ºæˆ‘ä»¬æ„Ÿå…´è¶£çš„ç»“æœ *** INTERESTING tests Some interesting behaviors observed. This is for the plain curiosity. 2 matching test results. [OK] test.ConcurrencyTest (JVM args: [-XX:-TieredCompilation]) Observed state Occurrences Expectation Interpretation 0 1,729 ACCEPTABLE_INTERESTING !!!! 1 42,617,915 ACCEPTABLE ok 4 5,146,627 ACCEPTABLE ok [OK] test.ConcurrencyTest (JVM args: []) Observed state Occurrences Expectation Interpretation 0 1,652 ACCEPTABLE_INTERESTING !!!! 1 46,460,657 ACCEPTABLE ok 4 4,571,072 ACCEPTABLE ok å¯ä»¥çœ‹åˆ°ï¼Œå‡ºç°ç»“æœä¸º 0 çš„æƒ…å†µæœ‰ 1729 æ¬¡ï¼Œè™½ç„¶æ¬¡æ•°ç›¸å¯¹å¾ˆå°‘ï¼Œä½†æ¯•ç«Ÿæ˜¯å‡ºç°äº†ã€‚ è§£å†³ volatile ä¿®é¥°çš„å˜é‡ï¼Œå¯ä»¥ç¦ç”¨æŒ‡ä»¤é‡æ’ @JCStressTest @Outcome(id = {&quot;1&quot;, &quot;4&quot;}, expect = Expect.ACCEPTABLE, desc = &quot;ok&quot;) @Outcome(id = &quot;0&quot;, expect = Expect.ACCEPTABLE_INTERESTING, desc = &quot;!!!!&quot;) @State public class ConcurrencyTest { int num = 0; volatile boolean ready = false; @Actor public void actor1(I_Result r) { if(ready) { r.r1 = num + num; } else { r.r1 = 1; } } @Actor public void actor2(I_Result r) { num = 2; ready = true; } } ç»“æœä¸º *** INTERESTING tests Some interesting behaviors observed. This is for the plain curiosity. 0 matching test results. æœ‰åºæ€§ç†è§£ JVM ä¼šåœ¨ä¸å½±å“æ­£ç¡®æ€§çš„å‰æä¸‹ï¼Œå¯ä»¥è°ƒæ•´è¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Œæ€è€ƒä¸‹é¢ä¸€æ®µä»£ç  static int i; static int j; // åœ¨æŸä¸ªçº¿ç¨‹å†…æ‰§è¡Œå¦‚ä¸‹èµ‹å€¼æ“ä½œ i = ...; // è¾ƒä¸ºè€—æ—¶çš„æ“ä½œ j = ...; å¯ä»¥çœ‹åˆ°ï¼Œè‡³äºæ˜¯å…ˆæ‰§è¡Œ i è¿˜æ˜¯ å…ˆæ‰§è¡Œ j ï¼Œå¯¹æœ€ç»ˆçš„ç»“æœä¸ä¼šäº§ç”Ÿå½±å“ã€‚æ‰€ä»¥ï¼Œä¸Šé¢ä»£ç çœŸæ­£æ‰§è¡Œ æ—¶ï¼Œæ—¢å¯ä»¥æ˜¯ i = ...; // è¾ƒä¸ºè€—æ—¶çš„æ“ä½œ j = ...; ä¹Ÿå¯ä»¥æ˜¯ j = ...; i = ...; // è¾ƒä¸ºè€—æ—¶çš„æ“ä½œ è¿™ç§ç‰¹æ€§ç§°ä¹‹ä¸ºã€æŒ‡ä»¤é‡æ’ã€ï¼Œå¤šçº¿ç¨‹ä¸‹ã€æŒ‡ä»¤é‡æ’ã€ä¼šå½±å“æ­£ç¡®æ€§ï¼Œä¾‹å¦‚è‘—åçš„ double-checked locking æ¨¡å¼å®ç°å•ä¾‹ public final class Singleton { private Singleton() { } private static Singleton INSTANCE = null; public static Singleton getInstance() { // å®ä¾‹æ²¡åˆ›å»ºï¼Œæ‰ä¼šè¿›å…¥å†…éƒ¨çš„ synchronizedä»£ç å— if (INSTANCE == null) { synchronized (Singleton.class) { // ä¹Ÿè®¸æœ‰å…¶å®ƒçº¿ç¨‹å·²ç»åˆ›å»ºå®ä¾‹ï¼Œæ‰€ä»¥å†åˆ¤æ–­ä¸€æ¬¡ if (INSTANCE == null) { INSTANCE = new Singleton(); } } } return INSTANCE; } } ä»¥ä¸Šå®ç°çš„ç‰¹ç‚¹æ˜¯ æ‡’æƒ°å®ä¾‹åŒ– é¦–æ¬¡ä½¿ç”¨ getInstance() æ‰ä½¿ç”¨ synchronized åŠ é”ï¼Œåç»­ä½¿ç”¨æ—¶æ— éœ€åŠ é” ä½†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸Šé¢çš„ä»£ç æ˜¯æœ‰é—®é¢˜çš„ï¼Œ INSTANCE = new Singleton() å¯¹åº”çš„å­—èŠ‚ç ä¸º: 0: new #2 // class cn/itcast/jvm/t4/Singleton 3: dup 4: invokespecial #3 // Method &quot;&lt;init&gt;&quot;:()V 7: putstatic #4 // Field INSTANCE:Lcn/itcast/jvm/t4/Singleton; å…¶ä¸­4 7 ä¸¤æ­¥çš„é¡ºåºä¸æ˜¯å›ºå®šçš„ï¼Œä¹Ÿè®¸ jvm ä¼šä¼˜åŒ–ä¸º:å…ˆå°†å¼•ç”¨åœ°å€èµ‹å€¼ç»™ INSTANCE å˜é‡åï¼Œå†æ‰§è¡Œ æ„é€ æ–¹æ³•ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹ t1ï¼Œt2 æŒ‰å¦‚ä¸‹æ—¶é—´åºåˆ—æ‰§è¡Œ: æ—¶é—´1 t1 çº¿ç¨‹æ‰§è¡Œåˆ° INSTANCE = new Singleton(); æ—¶é—´2 t1 çº¿ç¨‹åˆ†é…ç©ºé—´ï¼Œä¸ºSingletonå¯¹è±¡ç”Ÿæˆäº†å¼•ç”¨åœ°å€(0 å¤„) æ—¶é—´3 t1 çº¿ç¨‹å°†å¼•ç”¨åœ°å€èµ‹å€¼ç»™ INSTANCEï¼Œè¿™æ—¶ INSTANCE != null(7 å¤„) æ—¶é—´4 t2 çº¿ç¨‹è¿›å…¥getInstance() æ–¹æ³•ï¼Œå‘ç° INSTANCE != null(synchronizedå—å¤–)ï¼Œç›´æ¥ è¿”å› INSTANCE æ—¶é—´5 t1 çº¿ç¨‹æ‰§è¡ŒSingletonçš„æ„é€ æ–¹æ³•(4 å¤„) è¿™æ—¶ t1 è¿˜æœªå®Œå…¨å°†æ„é€ æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œå¦‚æœåœ¨æ„é€ æ–¹æ³•ä¸­è¦æ‰§è¡Œå¾ˆå¤šåˆå§‹åŒ–æ“ä½œï¼Œé‚£ä¹ˆ t2 æ‹¿åˆ°çš„æ˜¯å°†æ˜¯ä¸€ä¸ªæœªåˆå§‹åŒ–å®Œæ¯•çš„å•ä¾‹å¯¹ INSTANCE ä½¿ç”¨ volatile ä¿®é¥°å³å¯ï¼Œå¯ä»¥ç¦ç”¨æŒ‡ä»¤é‡æ’ï¼Œä½†è¦æ³¨æ„åœ¨ JDK 5 ä»¥ä¸Šçš„ç‰ˆæœ¬çš„ volatile æ‰ ä¼šçœŸæ­£æœ‰æ•ˆ happens-before happens-before è§„å®šäº†å“ªäº›å†™æ“ä½œå¯¹å…¶å®ƒçº¿ç¨‹çš„è¯»æ“ä½œå¯è§ï¼Œå®ƒæ˜¯å¯è§æ€§ä¸æœ‰åºæ€§çš„ä¸€å¥—è§„åˆ™æ€»ç»“ï¼Œ æŠ›å¼€ä»¥ä¸‹ happens-before è§„åˆ™ï¼ŒJMM å¹¶ä¸èƒ½ä¿è¯ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„å†™ï¼Œå¯¹äºå…¶å®ƒçº¿ç¨‹å¯¹è¯¥å…±äº«å˜é‡çš„è¯»å¯è§ çº¿ç¨‹è§£é” m ä¹‹å‰å¯¹å˜é‡çš„å†™ï¼Œå¯¹äºæ¥ä¸‹æ¥å¯¹ m åŠ é”çš„å…¶å®ƒçº¿ç¨‹å¯¹è¯¥å˜é‡çš„è¯»å¯è§ static int x; static Object m = new Object(); new Thread(()-&gt;{ synchronized(m) { x = 10; } },&quot;t1&quot;).start(); new Thread(()-&gt;{ synchronized(m) { System.out.println(x); } },&quot;t2&quot;).start(); çº¿ç¨‹å¯¹volatileå˜é‡çš„å†™ï¼Œå¯¹æ¥ä¸‹æ¥å…¶ä»–çº¿ç¨‹å¯¹è¯¥å˜é‡çš„è¯»å¯è§ volatile static int x; new Thread(()-&gt;{ x = 10; },&quot;t1&quot;).start(); new Thread(()-&gt;{ System.out.println(x); },&quot;t2&quot;).start(); çº¿ç¨‹startå‰å¯¹å˜é‡çš„å†™ï¼Œå¯¹è¯¥çº¿ç¨‹å¼€å§‹åå¯¹è¯¥å˜é‡çš„è¯»å¯è§ static int x; x = 10; new Thread(()-&gt;{ System.out.println(x); },&quot;t2&quot;).start(); çº¿ç¨‹ç»“æŸå‰å¯¹å˜é‡çš„å†™ï¼Œå¯¹å…¶å®ƒçº¿ç¨‹å¾—çŸ¥å®ƒç»“æŸåçš„è¯»å¯è§(æ¯”å¦‚å…¶å®ƒçº¿ç¨‹è°ƒç”¨ t1.isAlive() æˆ– t1.join()ç­‰å¾…å®ƒç»“æŸ) static int x; Thread t1 = new Thread(()-&gt;{ x = 10; },&quot;t1&quot;); t1.start(); t1.join(); System.out.println(x); çº¿ç¨‹ t1 æ‰“æ–­ t2(interrupt)å‰å¯¹å˜é‡çš„å†™ï¼Œå¯¹äºå…¶ä»–çº¿ç¨‹å¾—çŸ¥ t2 è¢«æ‰“æ–­åå¯¹å˜é‡çš„è¯»å¯è§(é€š è¿‡t2.interrupted æˆ– t2.isInterrupted) static int x; public static void main(String[] args) { Thread t2 = new Thread(()-&gt;{ while(true) { if(Thread.currentThread().isInterrupted()) { System.out.println(x); break; } } },&quot;t2&quot;); t2.start(); new Thread(()-&gt;{ try { Thread.sleep(1000); } catch (InterruptedException e) { e.printStackTrace(); } x = 10; t2.interrupt(); },&quot;t1&quot;).start(); while(!t2.isInterrupted()) { Thread.yield(); } System.out.println(x); } å¯¹å˜é‡é»˜è®¤å€¼(0ï¼Œfalseï¼Œnull)çš„å†™ï¼Œå¯¹å…¶å®ƒçº¿ç¨‹å¯¹è¯¥å˜é‡çš„è¯»å¯è§ å…·æœ‰ä¼ é€’æ€§ï¼Œå¦‚æœ x hb-&gt; y å¹¶ä¸” y hb-&gt; z é‚£ä¹ˆæœ‰ x hb-&gt; z å˜é‡éƒ½æ˜¯æŒ‡æˆå‘˜å˜é‡æˆ–é™æ€æˆå‘˜å˜é‡ å‚è€ƒ: ç¬¬17é¡µ CASä¸åŸå­ç±» CAS CAS å³ Compare and Swap ï¼Œå®ƒä½“ç°çš„ä¸€ç§ä¹è§‚é”çš„æ€æƒ³ï¼Œæ¯”å¦‚å¤šä¸ªçº¿ç¨‹è¦å¯¹ä¸€ä¸ªå…±äº«çš„æ•´å‹å˜é‡æ‰§è¡Œ +1 æ“ä½œ: // éœ€è¦ä¸æ–­å°è¯• while(true) { int æ—§å€¼ = å…±äº«å˜é‡ ; // æ¯”å¦‚æ‹¿åˆ°äº†å½“å‰å€¼ 0 int ç»“æœ = æ—§å€¼ +1;// åœ¨æ—§å€¼ 0 çš„åŸºç¡€ä¸Šå¢åŠ  1 ï¼Œæ­£ç¡®ç»“æœæ˜¯ 1 /* è¿™æ—¶å€™å¦‚æœåˆ«çš„çº¿ç¨‹æŠŠå…±äº«å˜é‡æ”¹æˆäº† 5ï¼Œæœ¬çº¿ç¨‹çš„æ­£ç¡®ç»“æœ 1 å°±ä½œåºŸäº†ï¼Œè¿™æ—¶å€™ compareAndSwap è¿”å› falseï¼Œé‡æ–°å°è¯•ï¼Œç›´åˆ°: compareAndSwap è¿”å› trueï¼Œè¡¨ç¤ºæˆ‘æœ¬çº¿ç¨‹åšä¿®æ”¹çš„åŒæ—¶ï¼Œåˆ«çš„çº¿ç¨‹æ²¡æœ‰å¹²æ‰° */ if( compareAndSwap ( æ—§å€¼, ç»“æœ )) { // æˆåŠŸï¼Œé€€å‡ºå¾ªç¯ } } è·å–å…±äº«å˜é‡æ—¶ï¼Œä¸ºäº†ä¿è¯è¯¥å˜é‡çš„å¯è§æ€§ï¼Œéœ€è¦ä½¿ç”¨ volatile ä¿®é¥°ã€‚ç»“åˆ CAS å’Œ volatile å¯ä»¥å®ç°æ— é”å¹¶å‘ï¼Œé€‚ç”¨äºç«äº‰ä¸æ¿€çƒˆã€å¤šæ ¸ CPU çš„åœºæ™¯ä¸‹ã€‚ å› ä¸ºæ²¡æœ‰ä½¿ç”¨ synchronizedï¼Œæ‰€ä»¥çº¿ç¨‹ä¸ä¼šé™·å…¥é˜»å¡ï¼Œè¿™æ˜¯æ•ˆç‡æå‡çš„å› ç´ ä¹‹ä¸€ ä½†å¦‚æœç«äº‰æ¿€çƒˆï¼Œå¯ä»¥æƒ³åˆ°é‡è¯•å¿…ç„¶é¢‘ç¹å‘ç”Ÿï¼Œåè€Œæ•ˆç‡ä¼šå—å½±å“ CAS åº•å±‚ä¾èµ–äºä¸€ä¸ª Unsafe ç±»æ¥ç›´æ¥è°ƒç”¨æ“ä½œç³»ç»Ÿåº•å±‚çš„ CAS æŒ‡ä»¤ï¼Œä¸‹é¢æ˜¯ç›´æ¥ä½¿ç”¨ Unsafe å¯¹è±¡è¿› è¡Œçº¿ç¨‹å®‰å…¨ä¿æŠ¤çš„ä¸€ä¸ªä¾‹å­ import sun.misc.Unsafe; import java.lang.reflect.Field; public class TestCAS { public static void main(String[] args) throws InterruptedException { DataContainer dc = new DataContainer(); int count = 5; Thread t1 = new Thread(() -&gt; { for (int i = 0; i &lt; count; i++) { dc.increase(); } }); t1.start(); t1.join(); System.out.println(dc.getData()); } } class DataContainer { private volatile int data; static final Unsafe unsafe; static final long DATA_OFFSET; static { try { // Unsafe å¯¹è±¡ä¸èƒ½ç›´æ¥è°ƒç”¨ï¼Œåªèƒ½é€šè¿‡åå°„è·å¾— Field theUnsafe = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;); theUnsafe.setAccessible(true); unsafe = (Unsafe) theUnsafe.get(null); } catch (NoSuchFieldException | IllegalAccessException e) { throw new Error(e); } try { // data å±æ€§åœ¨ DataContainer å¯¹è±¡ä¸­çš„åç§»é‡ï¼Œç”¨äº Unsafe ç›´æ¥è®¿é—®è¯¥å±æ€§ DATA_OFFSET = unsafe.objectFieldOffset(DataContainer.class.getDeclaredField(&quot;data&quot;)); } catch (NoSuchFieldException e) { throw new Error(e); } } public void increase() { int oldValue; while(true) { // è·å–å…±äº«å˜é‡æ—§å€¼ï¼Œå¯ä»¥åœ¨è¿™ä¸€è¡ŒåŠ å…¥æ–­ç‚¹ï¼Œä¿®æ”¹ data è°ƒè¯•æ¥åŠ æ·±ç†è§£ oldValue = data; // cas å°è¯•ä¿®æ”¹ data ä¸º æ—§å€¼ + 1ï¼Œå¦‚æœæœŸé—´æ—§å€¼è¢«åˆ«çš„çº¿ç¨‹æ”¹äº†ï¼Œè¿”å› false if (unsafe.compareAndSwapInt(this, DATA_OFFSET, oldValue, oldValue + 1)){ return; } } } public void decrease() { int oldValue; while(true){ oldValue = data; if (unsafe.compareAndSwapInt(this, DATA_OFFSET, oldValue, oldValue - 1)){ return; } } } public int getData() { return data; } } ä¹è§‚é”ä¸æ‚²è§‚é” CAS æ˜¯åŸºäºä¹è§‚é”çš„æ€æƒ³:æœ€ä¹è§‚çš„ä¼°è®¡ï¼Œä¸æ€•åˆ«çš„çº¿ç¨‹æ¥ä¿®æ”¹å…±äº«å˜é‡ï¼Œå°±ç®—æ”¹äº†ä¹Ÿæ²¡å…³ç³»ï¼Œ æˆ‘åƒäºç‚¹å†é‡è¯•å‘—ã€‚ synchronized æ˜¯åŸºäºæ‚²è§‚é”çš„æ€æƒ³:æœ€æ‚²è§‚çš„ä¼°è®¡ï¼Œå¾—é˜²ç€å…¶å®ƒçº¿ç¨‹æ¥ä¿®æ”¹å…±äº«å˜é‡ï¼Œæˆ‘ä¸Šäº†é” ä½ ä»¬éƒ½åˆ«æƒ³æ”¹ï¼Œæˆ‘æ”¹å®Œäº†è§£å¼€é”ï¼Œä½ ä»¬æ‰æœ‰æœºä¼šã€‚ åŸå­æ“ä½œç±» juc(java.util.concurrent)ä¸­æä¾›äº†åŸå­æ“ä½œç±»ï¼Œå¯ä»¥æä¾›çº¿ç¨‹å®‰å…¨çš„æ“ä½œï¼Œä¾‹å¦‚:AtomicIntegerã€AtomicBooleanç­‰ï¼Œå®ƒä»¬åº•å±‚å°±æ˜¯é‡‡ç”¨ CAS æŠ€æœ¯ + volatile æ¥å®ç°çš„ã€‚ å¯ä»¥ä½¿ç”¨ AtomicInteger æ”¹å†™ä¹‹å‰çš„ä¾‹å­: // åˆ›å»ºåŸå­æ•´æ•°å¯¹è±¡ private static AtomicInteger i = new AtomicInteger(0); public static void main(String[] args) throws InterruptedException { Thread t1 = new Thread(() -&gt; { for (int j = 0; j &lt; 5000; j++) { i.getAndIncrement(); // è·å–å¹¶ä¸”è‡ªå¢ i++ //i.incrementAndGet(); // è‡ªå¢å¹¶ä¸”è·å– ++i } }); Thread t2 = new Thread(() -&gt; { for (int j = 0; j &lt; 5000; j++) { i.getAndDecrement(); // è·å–å¹¶ä¸”è‡ªå‡ i-- } }); t1.start(); t2.start(); t1.join(); t2.join(); System.out.println(i); } sychronizedä¼˜åŒ– Java HotSpotè™šæ‹Ÿæœºä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰å¯¹è±¡å¤´(åŒ…æ‹¬ class æŒ‡é’ˆå’Œ Mark Word)ã€‚Mark Word å¹³æ—¶å­˜å‚¨è¿™ä¸ªå¯¹è±¡çš„å“ˆå¸Œç ã€åˆ†ä»£å¹´é¾„(ä»å¹¸å­˜åŒºæ™‹å‡åˆ°è€å¹´ä»£ä¼šç”¨åˆ°)ï¼Œå½“åŠ é”æ—¶ï¼Œè¿™äº›ä¿¡æ¯å°±æ ¹æ®æƒ…å†µè¢«æ›¿æ¢ä¸ºæ ‡è®°ä½(é”çš„ç±»å‹)ã€çº¿ç¨‹é”è®°å½•æŒ‡é’ˆã€é‡é‡çº§é”æŒ‡é’ˆã€çº¿ç¨‹IDç­‰å†…å®¹ è½»é‡çº§é” å¦‚æœä¸€ä¸ªå¯¹è±¡è™½ç„¶æœ‰å¤šçº¿ç¨‹è®¿é—®ï¼Œä½†å¤šçº¿ç¨‹è®¿é—®çš„æ—¶é—´æ˜¯é”™å¼€çš„(ä¹Ÿå°±æ˜¯æ²¡æœ‰ç«äº‰)ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨è½»é‡çº§é”æ¥ä¼˜åŒ–ã€‚è¿™å°±å¥½æ¯”:å­¦ç”Ÿ(çº¿ç¨‹ A)ç”¨è¯¾æœ¬å åº§ï¼Œä¸Šäº†åŠèŠ‚è¯¾ï¼Œå‡ºé—¨äº†(CPUæ—¶é—´åˆ°)ï¼Œå›æ¥ä¸€çœ‹ï¼Œå‘ç°è¯¾æœ¬æ²¡å˜ï¼Œè¯´æ˜æ²¡æœ‰ç«äº‰ï¼Œç»§ç»­ä¸Šä»–çš„è¯¾ã€‚å¦‚æœè¿™æœŸé—´æœ‰å…¶å®ƒå­¦ç”Ÿ(çº¿ç¨‹ B)æ¥äº†ï¼Œä¼šå‘ŠçŸ¥(çº¿ç¨‹A)æœ‰å¹¶å‘è®¿é—®ï¼Œçº¿ç¨‹ A éšå³å‡çº§ä¸ºé‡é‡çº§é”(é”è†¨èƒ€)ï¼Œ è¿›å…¥é‡é‡çº§é”çš„æµç¨‹ã€‚è€Œé‡é‡çº§é”å°±ä¸æ˜¯é‚£ä¹ˆç”¨è¯¾æœ¬å åº§é‚£ä¹ˆç®€å•äº†ï¼Œå¯ä»¥æƒ³è±¡çº¿ç¨‹ A èµ°ä¹‹å‰ï¼ŒæŠŠåº§ä½ç”¨ä¸€ä¸ªé“æ …æ å›´èµ·æ¥ å‡è®¾æœ‰ä¸¤ä¸ªæ–¹æ³•åŒæ­¥å—ï¼Œåˆ©ç”¨åŒä¸€ä¸ªå¯¹è±¡åŠ é” static Object obj = new Object(); public static void method1() { synchronized( obj ) { // åŒæ­¥å— A method2(); } } public static void method2() { synchronized( obj ) { // åŒæ­¥å— B } } æ¯ä¸ªçº¿ç¨‹éƒ½çš„æ ˆå¸§éƒ½ä¼šåŒ…å«ä¸€ä¸ªé”è®°å½•çš„ç»“æ„ï¼Œå†…éƒ¨å¯ä»¥å­˜å‚¨é”å®šå¯¹è±¡çš„ Mark Word å¦‚æœåŠ é”MarkWordä¸­çš„å†…å®¹éœ€è¦å‘ç”Ÿæ”¹å˜ï¼Œéœ€è¦æŠŠåŸæ¥çš„å†…å®¹ä¿å­˜èµ·æ¥ åŠ é”æ—¶å°†é”è®°å½•åœ°å€ç»™MarkWord ç­‰è§£é”åï¼Œéœ€è¦æŠŠåŸæ¥çš„å†…å®¹è¿˜ç»™MarkWord é”è†¨èƒ€ å¦‚æœåœ¨å°è¯•åŠ è½»é‡çº§é”çš„è¿‡ç¨‹ä¸­ï¼ŒCAS æ“ä½œæ— æ³•æˆåŠŸï¼Œè¿™æ—¶ä¸€ç§æƒ…å†µå°±æ˜¯æœ‰å…¶å®ƒçº¿ç¨‹ä¸ºæ­¤å¯¹è±¡åŠ ä¸Šäº†è½»é‡çº§é”(æœ‰ç«äº‰)ï¼Œè¿™æ—¶éœ€è¦è¿›è¡Œé”è†¨èƒ€ï¼Œå°†è½»é‡çº§é”å˜ä¸ºé‡é‡çº§é”ã€‚çº¿ç¨‹ä¸€è§£é”å¤±è´¥ï¼Œæ˜¯ä¸ºäº†å‘Šè¯‰çº¿ç¨‹ä¸€ç°åœ¨æ˜¯ä¸€ä¸ªé‡é‡çº§é”ï¼Œéœ€è¦æŒ‰ç…§é‡é‡çº§é”çš„æ–¹å¼æ¥è§£é”MarkWordä¸­å¢åŠ é‡é‡çº§é”ï¼Œæ˜¯ä¸ºäº†å”¤é†’é˜»å¡ä¸­çš„çº¿ç¨‹ static Object obj = new Object(); public static void method1() { synchronized( obj ) { // åŒæ­¥å— } } é‡é‡é” é‡é‡çº§é”ç«äº‰çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥ä½¿ç”¨è‡ªæ—‹æ¥è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚æœå½“å‰çº¿ç¨‹è‡ªæ—‹æˆåŠŸ(å³è¿™æ—¶å€™æŒé”çº¿ç¨‹å·²ç»é€€å‡ºäº†åŒæ­¥å—ï¼Œé‡Šæ”¾äº†é”)ï¼Œè¿™æ—¶å½“å‰çº¿ç¨‹å°±å¯ä»¥é¿å…é˜»å¡ã€‚åœ¨ Java 6 ä¹‹åè‡ªæ—‹é”æ˜¯è‡ªé€‚åº”çš„ï¼Œæ¯”å¦‚å¯¹è±¡åˆšåˆšçš„ä¸€æ¬¡è‡ªæ—‹æ“ä½œæˆåŠŸè¿‡ï¼Œé‚£ä¹ˆè®¤ä¸ºè¿™æ¬¡è‡ªæ—‹æˆåŠŸçš„å¯èƒ½ æ€§ä¼šé«˜ï¼Œå°±å¤šè‡ªæ—‹å‡ æ¬¡;åä¹‹ï¼Œå°±å°‘è‡ªæ—‹ç”šè‡³ä¸è‡ªæ—‹ï¼Œæ€»ä¹‹ï¼Œæ¯”è¾ƒæ™ºèƒ½ã€‚ è‡ªæ—‹ä¼šå ç”¨ CPU æ—¶é—´ï¼Œå•æ ¸ CPU è‡ªæ—‹å°±æ˜¯æµªè´¹ï¼Œå¤šæ ¸ CPU è‡ªæ—‹æ‰èƒ½å‘æŒ¥ä¼˜åŠ¿ã€‚ å¥½æ¯”ç­‰çº¢ç¯æ—¶æ±½è½¦æ˜¯ä¸æ˜¯ç†„ç«ï¼Œä¸ç†„ç«ç›¸å½“äºè‡ªæ—‹(ç­‰å¾…æ—¶é—´çŸ­äº†åˆ’ç®—)ï¼Œç†„ç«äº†ç›¸å½“äºé˜»å¡(ç­‰å¾…æ—¶é—´é•¿äº†åˆ’ç®—) Java 7 ä¹‹åä¸èƒ½æ§åˆ¶æ˜¯å¦å¼€å¯è‡ªæ—‹åŠŸèƒ½ è‡ªæ—‹é‡è¯•æˆåŠŸçš„æƒ…å†µè‡ªæ—‹é‡è¯•å¤±è´¥çš„æƒ…å†µ åå‘é” è½»é‡çº§é”åœ¨æ²¡æœ‰ç«äº‰æ—¶(å°±è‡ªå·±è¿™ä¸ªçº¿ç¨‹)ï¼Œæ¯æ¬¡é‡å…¥ä»ç„¶éœ€è¦æ‰§è¡Œ CAS æ“ä½œã€‚Java 6 ä¸­å¼•å…¥äº†åå‘é”æ¥åšè¿›ä¸€æ­¥ä¼˜åŒ–:åªæœ‰ç¬¬ä¸€æ¬¡ä½¿ç”¨ CAS å°†çº¿ç¨‹ IDè®¾ç½®åˆ°å¯¹è±¡çš„ Mark Word å¤´ï¼Œä¹‹åå‘ç°è¿™ä¸ªçº¿ç¨‹ ID æ˜¯è‡ªå·±çš„å°±è¡¨ç¤ºæ²¡æœ‰ç«äº‰ï¼Œä¸ç”¨é‡æ–° CAS. å˜ä¸ºé‡é‡çº§é”æ—¶éœ€è¦æ’¤é”€åå‘é”ï¼Œæ’¤é”€åå‘é”éœ€è¦å°†æŒé”çº¿ç¨‹å‡çº§ä¸ºè½»é‡çº§é”ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ‰€æœ‰çº¿ç¨‹éœ€è¦æš‚åœ(STW) è®¿é—®å¯¹è±¡çš„ hashCode ä¹Ÿä¼šæ’¤é”€åå‘é” å½“ä¸€ä¸ªå¯¹è±¡å·²ç»è®¡ç®—è¿‡identity hash code(æœªè¢«è¦†å†™çš„ java.lang.Object.hashCode() æˆ–è€… java.lang.System.identityHashCode(Object) æ‰€è¿”å›çš„å€¼)ï¼Œå®ƒå°±æ— æ³•è¿›å…¥åå‘é”çŠ¶æ€ï¼› å½“ä¸€ä¸ªå¯¹è±¡å½“å‰æ­£å¤„äºåå‘é”çŠ¶æ€ï¼Œå¹¶ä¸”éœ€è¦è®¡ç®—å…¶identity hash codeçš„è¯ï¼Œåˆ™å®ƒçš„åå‘é”ä¼šè¢«æ’¤é”€ï¼Œå¹¶ä¸”é”ä¼šè†¨èƒ€ä¸ºé‡é‡é”ï¼› é‡é‡é”çš„å®ç°ä¸­ï¼ŒObjectMonitorç±»é‡Œæœ‰å­—æ®µå¯ä»¥è®°å½•éåŠ é”çŠ¶æ€ä¸‹çš„mark wordï¼Œå…¶ä¸­å¯ä»¥å­˜å‚¨identity hash codeçš„å€¼ã€‚æˆ–è€…ç®€å•è¯´å°±æ˜¯é‡é‡é”å¯ä»¥å­˜ä¸‹identity hash codeã€‚ å¦‚æœå¯¹è±¡è™½ç„¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ï¼Œä½†æ²¡æœ‰ç«äº‰ï¼Œè¿™æ—¶åå‘äº†çº¿ç¨‹ T1 çš„å¯¹è±¡ä»æœ‰æœºä¼šé‡æ–°åå‘ T2ï¼Œ é‡åå‘ä¼šé‡ç½®å¯¹è±¡çš„ Thread ID æ’¤é”€åå‘å’Œé‡åå‘éƒ½æ˜¯æ‰¹é‡è¿›è¡Œçš„ï¼Œä»¥ç±»ä¸ºå•ä½ å¦‚æœæ’¤é”€åå‘åˆ°è¾¾æŸä¸ªé˜ˆå€¼ï¼Œæ•´ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡éƒ½ä¼šå˜ä¸ºä¸å¯åå‘çš„ å¯ä»¥ä¸»åŠ¨ä½¿ç”¨ -XX:-UseBiasedLocking ç¦ç”¨åå‘é” å¯ä»¥å‚è€ƒè¿™ç¯‡è®ºæ–‡:https://www.oracle.com/technetwork/java/biasedlocking-oopsla2006-wp- 149958.pdf å‡è®¾æœ‰ä¸¤ä¸ªæ–¹æ³•åŒæ­¥å—ï¼Œåˆ©ç”¨åŒä¸€ä¸ªå¯¹è±¡åŠ é” static Object obj = new Object(); public static void method1() { synchronized( obj ) { // åŒæ­¥å— A method2(); } } public static void method2() { synchronized( obj ) { // åŒæ­¥å— B } } ![image.png](https://cdn.nlark.com/yuque/0/2022/png/26092193/1646030118607-c926f2b8-b980-4c23-a77f-eec29106c721.png#clientId=ufbb25c08-b6bc-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=249&amp;id=u81a5b064&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=498&amp;originWidth=994&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=82025&amp;status=done&amp;style=none&amp;taskId=u3c8466fd-b12d-42c7-a3c6-0f8793c0408&amp;title=&amp;width=497) å…¶ä»–ä¼˜åŒ– 1. å‡å°‘ä¸Šé”æ—¶é—´ åŒæ­¥ä»£ç å—ä¸­å°½é‡çŸ­(å‡å°‘çº¿ç¨‹äº¤é”™æ—¶é—´ï¼Œå°½é‡ä¿æŒä¸ºè½»é‡çº§é”) 2. å‡å°‘é”çš„ç²’åº¦ å°†ä¸€ä¸ªé”æ‹†åˆ†ä¸ºå¤šä¸ªé”æé«˜å¹¶å‘åº¦ï¼Œä¾‹å¦‚: ConcurrentHashMap LongAdder åˆ†ä¸º base å’Œ cells ä¸¤éƒ¨åˆ†ã€‚æ²¡æœ‰å¹¶å‘äº‰ç”¨çš„æ—¶å€™æˆ–è€…æ˜¯ cells æ•°ç»„æ­£åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨ CAS æ¥ç´¯åŠ å€¼åˆ° baseï¼Œæœ‰å¹¶å‘äº‰ç”¨ï¼Œä¼šåˆå§‹åŒ– cells æ•°ç»„ï¼Œæ•°ç»„æœ‰å¤šå°‘ä¸ª cellï¼Œå°±å…è®¸æœ‰å¤šå°‘çº¿ç¨‹å¹¶è¡Œä¿®æ”¹ï¼Œæœ€åå°†æ•°ç»„ä¸­æ¯ä¸ª cell ç´¯åŠ ï¼Œå†åŠ ä¸Š base å°±æ˜¯æœ€ç»ˆçš„å€¼ LinkedBlockingQueueå…¥é˜Ÿå’Œå‡ºé˜Ÿä½¿ç”¨ä¸åŒçš„é”ï¼Œç›¸å¯¹äºLinkedBlockingArrayåªæœ‰ä¸€ä¸ªé”æ•ˆç‡è¦é«˜ 3. é”ç²—åŒ– å¤šæ¬¡å¾ªç¯è¿›å…¥åŒæ­¥å—ä¸å¦‚åŒæ­¥å—å†…å¤šæ¬¡å¾ªç¯å¦å¤– JVM å¯èƒ½ä¼šåšå¦‚ä¸‹ä¼˜åŒ–ï¼ŒæŠŠå¤šæ¬¡ append çš„åŠ é”æ“ä½œç²—åŒ–ä¸ºä¸€æ¬¡(å› ä¸ºéƒ½æ˜¯å¯¹åŒä¸€ä¸ªå¯¹è±¡åŠ é”ï¼Œ æ²¡å¿…è¦é‡å…¥å¤šæ¬¡) new StringBuffer().append(&quot;a&quot;).append(&quot;b&quot;).append(&quot;c&quot;); 4. é”æ¶ˆé™¤ JVM ä¼šè¿›è¡Œä»£ç çš„é€ƒé€¸åˆ†æï¼Œä¾‹å¦‚æŸä¸ªåŠ é”å¯¹è±¡æ˜¯æ–¹æ³•å†…å±€éƒ¨å˜é‡ï¼Œä¸ä¼šè¢«å…¶å®ƒçº¿ç¨‹æ‰€è®¿é—®åˆ°ï¼Œè¿™æ—¶å€™å°±ä¼šè¢«å³æ—¶ç¼–è¯‘å™¨å¿½ç•¥æ‰æ‰€æœ‰åŒæ­¥æ“ä½œã€‚ 5. è¯»å†™åˆ†ç¦» CopyOnWriteArrayListCopyOnWriteSet å‚è€ƒ https://wiki.openjdk.java.net/display/HotSpot/Synchronization http://luojinping.com/2015/07/09/javaé”ä¼˜åŒ–/https://www.infoq.cn/article/java-se-16-synchronized https://www.jianshu.com/p/9932047a89be https://www.cnblogs.com/sheeva/p/6366782.html https://stackoverflow.com/questions/46312817/does-java-ever-rebias-an-individual-lock ","link":"https://yeyuan1107.github.io/post/jmm-nei-cun-mo-xing/"},{"title":"JVMç±»åŠ è½½ä¸å­—èŠ‚ç æŠ€æœ¯","content":" ç±»æ–‡ä»¶ç»“æ„ package com.yuanye.jvm public class HelloWorld{ public static void main(String[] args){ System.out.println(&quot;hello world&quot;); } } æ‰§è¡Œjavac -parameters -d . HelloWorld.java [root@localhost ~]# od -t xC HelloWorld.class 0000000 ca fe ba be 00 00 00 34 00 23 0a 00 06 00 15 09 0000020 00 16 00 17 08 00 18 0a 00 19 00 1a 07 00 1b 07 0000040 00 1c 01 00 06 3c 69 6e 69 74 3e 01 00 03 28 29 0000060 56 01 00 04 43 6f 64 65 01 00 0f 4c 69 6e 65 4e 0000100 75 6d 62 65 72 54 61 62 6c 65 01 00 12 4c 6f 63 0000120 61 6c 56 61 72 69 61 62 6c 65 54 61 62 6c 65 01 0000140 00 04 74 68 69 73 01 00 1d 4c 63 6e 2f 69 74 63 0000160 61 73 74 2f 6a 76 6d 2f 74 35 2f 48 65 6c 6c 6f 0000200 57 6f 72 6c 64 3b 01 00 04 6d 61 69 6e 01 00 16 0000220 28 5b 4c 6a 61 76 61 2f 6c 61 6e 67 2f 53 74 72 0000240 69 6e 67 3b 29 56 01 00 04 61 72 67 73 01 00 13 0000260 5b 4c 6a 61 76 61 2f 6c 61 6e 67 2f 53 74 72 69 0000300 6e 67 3b 01 00 10 4d 65 74 68 6f 64 50 61 72 61 0000320 6d 65 74 65 72 73 01 00 0a 53 6f 75 72 63 65 46 0000340 69 6c 65 01 00 0f 48 65 6c 6c 6f 57 6f 72 6c 64 0000360 2e 6a 61 76 61 0c 00 07 00 08 07 00 1d 0c 00 1e 0000400 00 1f 01 00 0b 68 65 6c 6c 6f 20 77 6f 72 6c 64 0000420 07 00 20 0c 00 21 00 22 01 00 1b 63 6e 2f 69 74 0000440 63 61 73 74 2f 6a 76 6d 2f 74 35 2f 48 65 6c 6c 0000460 6f 57 6f 72 6c 64 01 00 10 6a 61 76 61 2f 6c 61 0000500 6e 67 2f 4f 62 6a 65 63 74 01 00 10 6a 61 76 61 0000520 2f 6c 61 6e 67 2f 53 79 73 74 65 6d 01 00 03 6f 0000540 75 74 01 00 15 4c 6a 61 76 61 2f 69 6f 2f 50 72 0000560 69 6e 74 53 74 72 65 61 6d 3b 01 00 13 6a 61 76 0000600 61 2f 69 6f 2f 50 72 69 6e 74 53 74 72 65 61 6d 0000620 01 00 07 70 72 69 6e 74 6c 6e 01 00 15 28 4c 6a 0000640 61 76 61 2f 6c 61 6e 67 2f 53 74 72 69 6e 67 3b 0000660 29 56 00 21 00 05 00 06 00 00 00 00 00 02 00 01 0000700 00 07 00 08 00 01 00 09 00 00 00 2f 00 01 00 01 0000720 00 00 00 05 2a b7 00 01 b1 00 00 00 02 00 0a 00 0000740 00 00 06 00 01 00 00 00 04 00 0b 00 00 00 0c 00 0000760 01 00 00 00 05 00 0c 00 0d 00 00 00 09 00 0e 00 0001000 0f 00 02 00 09 00 00 00 37 00 02 00 01 00 00 00 0001020 09 b2 00 02 12 03 b6 00 04 b1 00 00 00 02 00 0a 0001040 00 00 00 0a 00 02 00 00 00 06 00 08 00 07 00 0b 0001060 00 00 00 0c 00 01 00 00 00 09 00 10 00 11 00 00 0001100 00 12 00 00 00 05 01 00 10 00 00 00 01 00 13 00 0001120 00 00 02 00 14 æ ¹æ®JVMè§„èŒƒï¼Œç±»æ–‡ä»¶ç»“æ„å¦‚ä¸‹å·¦ä¾§u4ã€u2ä»£è¡¨å­—èŠ‚æ•°å­—èŠ‚ç è¯¦è§£ é­”æ•°(magic) u4ï¼Œå››ä¸ªå­—èŠ‚è¡¨ç¤º0-3å­—èŠ‚ï¼Œè¡¨ç¤ºå®ƒæ˜¯å¦æ˜¯classç±»å‹çš„æ–‡ä»¶0000000 ca fe ba be 00 00 00 34 00 23 0a 00 06 00 15 09 ç‰ˆæœ¬ 4-7å­—èŠ‚ï¼Œè¡¨ç¤ºç±»çš„ç‰ˆæœ¬0000000 ca fe ba be 00 00 00 34 00 23 0a 00 06 00 15 09 å¸¸é‡æ±  8-9å­—èŠ‚ï¼Œè¡¨ç¤ºå¸¸é‡æ± é•¿åº¦ï¼Œ0023(35)è¡¨ç¤ºå¸¸é‡æ± æœ‰#1-#34é¡¹ï¼Œæ³¨æ„#0é¡¹ä¸è®¡å…¥ï¼Œä¹Ÿæ²¡æœ‰å€¼0000000 ca fe ba be 00 00 00 34 00 23 0a 00 06 00 15 09 ç¬¬#1é¡¹0a(æ ¹æ®å¸¸é‡æ± )è¡¨ç¤ºä¸€ä¸ªMethodä¿¡æ¯ï¼Œ0006å’Œ0015è¡¨ç¤ºå®ƒå¼•ç”¨äº†å¸¸é‡æ± ä¸­#6å’Œ#21é¡¹ï¼Œæ¥è·å–è¿™ä¸ªæ–¹æ³•çš„æ‰€å±ç±»å’Œæ–¹æ³•å0000000 ca fe ba be 00 00 00 34 00 23 0a 00 06 00 15 09 ç¬¬#2é¡¹09è¡¨ç¤ºä¸€ä¸ªFieldä¿¡æ¯ï¼Œ0016å’Œ0017è¡¨ç¤ºå®ƒå¼•ç”¨äº†å¸¸é‡æ± ä¸­#22å’Œ#23æ¥è·å¾—è¿™ä¸ªæˆå‘˜å˜é‡çš„æ‰€å±ç±»å’Œæˆå‘˜å˜é‡å0000000 ca fe ba be 00 00 00 34 00 23 0a 00 06 00 15 090000020 00 16 00 17 08 00 18 0a 00 19 00 1a 07 00 1b 07 ç¬¬#3é¡¹ 08 è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡åç§°ï¼Œ0018è¡¨ç¤ºå®ƒå¼•ç”¨äº†å¸¸é‡æ± ä¸­ #24 é¡¹ 0000020 00 16 00 17 08 00 18 0a 00 19 00 1a 07 00 1b 07 ç¬¬#4é¡¹ 0a è¡¨ç¤ºä¸€ä¸ª Method ä¿¡æ¯ï¼Œ0019å’Œ 001aè¡¨ç¤ºå®ƒå¼•ç”¨äº†å¸¸é‡æ± ä¸­ #25 å’Œ #26 é¡¹æ¥è·å¾—è¿™ä¸ªæ–¹æ³•çš„æ‰€å±ç±»å’Œæ–¹æ³•å0000020 00 16 00 17 08 00 18 0a 00 19 00 1a 07 00 1b 07 ç¬¬#5é¡¹ 07 è¡¨ç¤ºä¸€ä¸ª Class ä¿¡æ¯ï¼Œ00 1bè¡¨ç¤ºå®ƒå¼•ç”¨äº†å¸¸é‡æ± ä¸­ #27 é¡¹ 0000020 00 16 00 17 08 00 18 0a 00 19 00 1a 07 00 1b 07 ç¬¬#6é¡¹ 07 è¡¨ç¤ºä¸€ä¸ª Class ä¿¡æ¯ï¼Œ00 1cè¡¨ç¤ºå®ƒå¼•ç”¨äº†å¸¸é‡æ± ä¸­ #28 é¡¹0000020 00 16 00 17 08 00 18 0a 00 19 00 1a 07 00 1b 07 0000040 00 1c 01 00 06 3c 69 6e 69 74 3e 01 00 03 28 29 ç¬¬#7é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 06 è¡¨ç¤ºé•¿åº¦ï¼Œ3c 69 6e 69 74 3e æ˜¯ã€ ã€‘0000040 00 1c 01 00 06 3c 69 6e 69 74 3e 01 00 03 28 29 ç¬¬#8é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 03 è¡¨ç¤ºé•¿åº¦ï¼Œ28 29 56 æ˜¯ã€()Vã€‘å…¶å®å°±æ˜¯è¡¨ç¤ºæ— å‚ã€æ— è¿”å›å€¼ 0000040 00 1c 01 00 06 3c 69 6e 69 74 3e 01 00 03 28 29 0000060 56 01 00 04 43 6f 64 65 01 00 0f 4c 69 6e 65 4e ç¬¬#9é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 04 è¡¨ç¤ºé•¿åº¦ï¼Œ43 6f 64 65 æ˜¯ã€Codeã€‘ 0000060 56 01 00 04 43 6f 64 65 01 00 0f 4c 69 6e 65 4e ç¬¬#10é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 0f(15) è¡¨ç¤ºé•¿åº¦ï¼Œ4c 69 6e 65 4e 75 6d 62 65 72 54 61 62 6c 65 æ˜¯ã€LineNumberTableã€‘0000060 56 01 00 04 43 6f 64 65 01 00 0f 4c 69 6e 65 4e 0000100 75 6d 62 65 72 54 61 62 6c 65 01 00 12 4c 6f 63 ç¬¬#11é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 12(18) è¡¨ç¤ºé•¿åº¦ï¼Œ4c 6f 63 61 6c 56 61 72 69 61 62 6c 65 54 61 62 6c 65æ˜¯ã€LocalVariableTableã€‘0000100 75 6d 62 65 72 54 61 62 6c 65 01 00 12 4c 6f 63 0000120 61 6c 56 61 72 69 61 62 6c 65 54 61 62 6c 65 01 ç¬¬#12é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 04 è¡¨ç¤ºé•¿åº¦ï¼Œ74 68 69 73 æ˜¯ã€thisã€‘ 0000120 61 6c 56 61 72 69 61 62 6c 65 54 61 62 6c 65 01 0000140 00 04 74 68 69 73 01 00 1d 4c 63 6e 2f 69 74 63 ç¬¬#13é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 1d(29) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€Lcn/itcast/jvm/t5/HelloWorld;ã€‘ 0000140 00 04 74 68 69 73 01 00 1d 4c 63 6e 2f 69 74 63 0000160 61 73 74 2f 6a 76 6d 2f 74 35 2f 48 65 6c 6c 6f0000200 57 6f 72 6c 64 3b 01 00 04 6d 61 69 6e 01 00 16 ç¬¬#14é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 04 è¡¨ç¤ºé•¿åº¦ï¼Œ74 68 69 73 æ˜¯ã€mainã€‘0000200 57 6f 72 6c 64 3b 01 00 04 6d 61 69 6e 01 00 16 ç¬¬#15é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 16(22) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€([Ljava/lang/String;)Vã€‘å…¶å®å°±æ˜¯å‚æ•°ä¸ºå­—ç¬¦ä¸²æ•°ç»„ï¼Œæ— è¿”å›å€¼0000200 57 6f 72 6c 64 3b 01 00 04 6d 61 69 6e 01 00 16 0000220 28 5b 4c 6a 61 76 61 2f 6c 61 6e 67 2f 53 74 72 0000240 69 6e 67 3b 29 56 01 00 04 61 72 67 73 01 00 13 ç¬¬#16é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 04 è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€argsã€‘ 0000240 69 6e 67 3b 29 56 01 00 04 61 72 67 73 01 00 13 ç¬¬#17é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 13(19) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€[Ljava/lang/String;ã€‘0000240 69 6e 67 3b 29 56 01 00 04 61 72 67 73 01 00 13 0000260 5b 4c 6a 61 76 61 2f 6c 61 6e 67 2f 53 74 72 69 0000300 6e 67 3b 01 00 10 4d 65 74 68 6f 64 50 61 72 61 ç¬¬#18é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 10(16) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€MethodParametersã€‘ 0000300 6e 67 3b 01 00 10 4d 65 74 68 6f 64 50 61 72 61 0000320 6d 65 74 65 72 73 01 00 0a 53 6f 75 72 63 65 46 ç¬¬#19é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 0a(10) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€SourceFileã€‘ 0000320 6d 65 74 65 72 73 01 00 0a 53 6f 75 72 63 65 46 0000340 69 6c 65 01 00 0f 48 65 6c 6c 6f 57 6f 72 6c 64 ç¬¬#20é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 0f(15) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€HelloWorld.javaã€‘ 0000340 69 6c 65 01 00 0f 48 65 6c 6c 6f 57 6f 72 6c 640000360 2e 6a 61 76 61 0c 00 07 00 08 07 00 1d 0c 00 1e ç¬¬#21é¡¹ 0c è¡¨ç¤ºä¸€ä¸ª ã€å+ç±»å‹ã€‘ï¼Œ00 07 00 08 å¼•ç”¨äº†å¸¸é‡æ± ä¸­ #7 #8 ä¸¤é¡¹0000360 2e 6a 61 76 61 0c 00 07 00 08 07 00 1d 0c 00 1e ç¬¬#22é¡¹ 07 è¡¨ç¤ºä¸€ä¸ª Class ä¿¡æ¯ï¼Œ00 1d(29) å¼•ç”¨äº†å¸¸é‡æ± ä¸­ #29 é¡¹ 0000360 2e 6a 61 76 61 0c 00 07 00 08 07 00 1d 0c 00 1e ç¬¬#23é¡¹ 0c è¡¨ç¤ºä¸€ä¸ª ã€å+ç±»å‹ã€‘ï¼Œ00 1e(30) 00 1f (31)å¼•ç”¨äº†å¸¸é‡æ± ä¸­ #30 #31 ä¸¤é¡¹ 0000360 2e 6a 61 76 61 0c 00 07 00 08 07 00 1d 0c 00 1e 0000400 00 1f 01 00 0b 68 65 6c 6c 6f 20 77 6f 72 6c 64 ç¬¬#24é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 0f(15) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€hello worldã€‘ 0000400 00 1f 01 00 0b 68 65 6c 6c 6f 20 77 6f 72 6c 64 ç¬¬#25é¡¹ 07 è¡¨ç¤ºä¸€ä¸ª Class ä¿¡æ¯ï¼Œ00 20(32) å¼•ç”¨äº†å¸¸é‡æ± ä¸­ #32 é¡¹ 0000420 07 00 20 0c 00 21 00 22 01 00 1b 63 6e 2f 69 74 ç¬¬#26é¡¹ 0c è¡¨ç¤ºä¸€ä¸ª ã€å+ç±»å‹ã€‘ï¼Œ00 21(33) 00 22(34)å¼•ç”¨äº†å¸¸é‡æ± ä¸­ #33 #34 ä¸¤é¡¹ 0000420 07 00 20 0c 00 21 00 22 01 00 1b 63 6e 2f 69 74 ç¬¬#27é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 1b(27) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€cn/itcast/jvm/t5/HelloWorldã€‘ 0000420 07 00 20 0c 00 21 00 22 01 00 1b 63 6e 2f 69 74 0000440 63 61 73 74 2f 6a 76 6d 2f 74 35 2f 48 65 6c 6c 0000460 6f 57 6f 72 6c 64 01 00 10 6a 61 76 61 2f 6c 61 ç¬¬#28é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 10(16) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€java/lang/Objectã€‘ 0000460 6f 57 6f 72 6c 64 01 00 10 6a 61 76 61 2f 6c 61 0000500 6e 67 2f 4f 62 6a 65 63 74 01 00 10 6a 61 76 61 ç¬¬#29é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 10(16) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€java/lang/Systemã€‘ 0000500 6e 67 2f 4f 62 6a 65 63 74 01 00 10 6a 61 76 61 0000520 2f 6c 61 6e 67 2f 53 79 73 74 65 6d 01 00 03 6f ç¬¬#30é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 03 è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€outã€‘ 0000520 2f 6c 61 6e 67 2f 53 79 73 74 65 6d 01 00 03 6f 0000540 75 74 01 00 15 4c 6a 61 76 61 2f 69 6f 2f 50 72 ç¬¬#31é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 15(21) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€Ljava/io/PrintStream;ã€‘0000540 75 74 01 00 15 4c 6a 61 76 61 2f 69 6f 2f 50 72 0000560 69 6e 74 53 74 72 65 61 6d 3b 01 00 13 6a 61 76 ç¬¬#32é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 13(19) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€java/io/PrintStreamã€‘ 0000560 69 6e 74 53 74 72 65 61 6d 3b 01 00 13 6a 61 76 0000600 61 2f 69 6f 2f 50 72 69 6e 74 53 74 72 65 61 6d ç¬¬#33é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 07 è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€printlnã€‘ 0000620 01 00 07 70 72 69 6e 74 6c 6e 01 00 15 28 4c 6a ç¬¬#34é¡¹ 01 è¡¨ç¤ºä¸€ä¸ª utf8 ä¸²ï¼Œ00 15(21) è¡¨ç¤ºé•¿åº¦ï¼Œæ˜¯ã€(Ljava/lang/String;)Vã€‘ 0000620 01 00 07 70 72 69 6e 74 6c 6e 01 00 15 28 4c 6a 0000640 61 76 61 2f 6c 61 6e 67 2f 53 74 72 69 6e 67 3b 0000660 29 56 00 21 00 05 00 06 00 00 00 00 00 02 00 01 è®¿é—®æ ‡è¯†ä¸ç»§æ‰¿ä¿¡æ¯ 21 è¡¨ç¤ºè¯¥ class æ˜¯ä¸€ä¸ªç±»ï¼Œå…¬å…±çš„ 0000660 29 56 00 21 00 05 00 06 00 00 00 00 00 02 00 01 05 è¡¨ç¤ºæ ¹æ®å¸¸é‡æ± ä¸­ #5 æ‰¾åˆ°æœ¬ç±»å…¨é™å®šå 0000660 29 56 00 21 00 05 00 06 00 00 00 00 00 02 00 01 06 è¡¨ç¤ºæ ¹æ®å¸¸é‡æ± ä¸­ #6 æ‰¾åˆ°çˆ¶ç±»å…¨é™å®šå 0000660 29 56 00 21 00 05 00 06 00 00 00 00 00 02 00 01 è¡¨ç¤ºæ¥å£çš„æ•°é‡ï¼Œæœ¬ç±»ä¸º 0 0000660 29 56 00 21 00 05 00 06 00 00 00 00 00 02 00 01 FIeldä¿¡æ¯ è¡¨ç¤ºæˆå‘˜å˜é‡æ•°é‡ï¼Œæœ¬ç±»ä¸º00000660 29 56 00 21 00 05 00 06 00 00 00 00 00 02 00 01 Methodä¿¡æ¯ è¡¨ç¤ºæ–¹æ³•æ•°é‡ï¼Œæœ¬ç±»ä¸º 2 0000660 29 56 00 21 00 05 00 06 00 00 00 00 00 02 00 01 ä¸€ä¸ªæ–¹æ³•ç”± è®¿é—®ä¿®é¥°ç¬¦ï¼Œåç§°ï¼Œå‚æ•°æè¿°ï¼Œæ–¹æ³•å±æ€§(ä»£ç )æ•°é‡ï¼Œæ–¹æ³•å±æ€§ç»„æˆ çº¢è‰²ä»£è¡¨è®¿é—®ä¿®é¥°ç¬¦(æœ¬ç±»ä¸­æ˜¯ public) è“è‰²ä»£è¡¨å¼•ç”¨äº†å¸¸é‡æ±  #07 é¡¹ä½œä¸ºæ–¹æ³•åç§° ç»¿è‰²ä»£è¡¨å¼•ç”¨äº†å¸¸é‡æ±  #08 é¡¹ä½œä¸ºæ–¹æ³•å‚æ•°æè¿° é»„è‰²ä»£è¡¨æ–¹æ³•å±æ€§æ•°é‡ï¼Œæœ¬æ–¹æ³•æ˜¯ 1 çº¢è‰²ä»£è¡¨æ–¹æ³•å±æ€§ 00 09 è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ±  #09 é¡¹ï¼Œå‘ç°æ˜¯ã€Codeã€‘å±æ€§ 00 00 00 2f è¡¨ç¤ºæ­¤å±æ€§çš„é•¿åº¦æ˜¯ 47 00 01 è¡¨ç¤ºã€æ“ä½œæ•°æ ˆã€‘æœ€å¤§æ·±åº¦ 00 01 è¡¨ç¤ºã€å±€éƒ¨å˜é‡è¡¨ã€‘æœ€å¤§æ§½(slot)æ•° 00 00 00 05 è¡¨ç¤ºå­—èŠ‚ç é•¿åº¦ï¼Œæœ¬ä¾‹æ˜¯ 5 2a b7 00 01 b1 æ˜¯å­—èŠ‚ç æŒ‡ä»¤ 00 00 00 02 è¡¨ç¤ºæ–¹æ³•ç»†èŠ‚å±æ€§æ•°é‡ï¼Œæœ¬ä¾‹æ˜¯ 2 00 0a è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ±  #10 é¡¹ï¼Œå‘ç°æ˜¯ã€LineNumberTableã€‘å±æ€§ 00 00 00 06 è¡¨ç¤ºæ­¤å±æ€§çš„æ€»é•¿åº¦ï¼Œæœ¬ä¾‹æ˜¯ 6 00 01 è¡¨ç¤ºã€LineNumberTableã€‘é•¿åº¦ 00 00 è¡¨ç¤ºã€å­—èŠ‚ç ã€‘è¡Œå· 00 04 è¡¨ç¤ºã€java æºç ã€‘è¡Œå· 00 0b è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ±  #11 é¡¹ï¼Œå‘ç°æ˜¯ã€LocalVariableTableã€‘å±æ€§ 00 00 00 0c è¡¨ç¤ºæ­¤å±æ€§çš„æ€»é•¿åº¦ï¼Œæœ¬ä¾‹æ˜¯ 12 00 01 è¡¨ç¤ºã€LocalVariableTableã€‘é•¿åº¦ 00 00 è¡¨ç¤ºå±€éƒ¨å˜é‡ç”Ÿå‘½å‘¨æœŸå¼€å§‹ï¼Œç›¸å¯¹äºå­—èŠ‚ç çš„åç§»é‡ 00 05 è¡¨ç¤ºå±€éƒ¨å˜é‡è¦†ç›–çš„èŒƒå›´é•¿åº¦ 00 0c è¡¨ç¤ºå±€éƒ¨å˜é‡åç§°ï¼Œæœ¬ä¾‹å¼•ç”¨äº†å¸¸é‡æ±  #12 é¡¹ï¼Œæ˜¯ã€thisã€‘ 00 0d è¡¨ç¤ºå±€éƒ¨å˜é‡çš„ç±»å‹ï¼Œæœ¬ä¾‹å¼•ç”¨äº†å¸¸é‡æ±  #13 é¡¹ï¼Œæ˜¯ ã€Lcn/itcast/jvm/t5/HelloWorld;ã€‘ 00 00 è¡¨ç¤ºå±€éƒ¨å˜é‡å æœ‰çš„æ§½ä½(slot)ç¼–å·ï¼Œæœ¬ä¾‹æ˜¯ 0 0000660 29 56 00 21 00 05 00 06 00 00 00 00 00 02 00 01 0000700 00 07 00 08 00 01 00 09 00 00 00 2f 00 01 00 01 0000720 00 00 00 05 2a b7 00 01 b1 00 00 00 02 00 0a 00 0000740 00 00 06 00 01 00 00 00 04 00 0b 00 00 00 0c 00 0000760 01 00 00 00 05 00 0c 00 0d 00 00 00 09 00 0e 00 çº¢è‰²ä»£è¡¨è®¿é—®ä¿®é¥°ç¬¦(æœ¬ç±»ä¸­æ˜¯ public static) è“è‰²ä»£è¡¨å¼•ç”¨äº†å¸¸é‡æ±  #14 é¡¹ä½œä¸ºæ–¹æ³•åç§° ç»¿è‰²ä»£è¡¨å¼•ç”¨äº†å¸¸é‡æ±  #15 é¡¹ä½œä¸ºæ–¹æ³•å‚æ•°æè¿° é»„è‰²ä»£è¡¨æ–¹æ³•å±æ€§æ•°é‡ï¼Œæœ¬æ–¹æ³•æ˜¯ 2 çº¢è‰²ä»£è¡¨æ–¹æ³•å±æ€§(å±æ€§1) 00 09 è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ±  #09 é¡¹ï¼Œå‘ç°æ˜¯ã€Codeã€‘å±æ€§ 00 00 00 37 è¡¨ç¤ºæ­¤å±æ€§çš„é•¿åº¦æ˜¯ 55 00 02 è¡¨ç¤ºã€æ“ä½œæ•°æ ˆã€‘æœ€å¤§æ·±åº¦ 00 01 è¡¨ç¤ºã€å±€éƒ¨å˜é‡è¡¨ã€‘æœ€å¤§æ§½(slot)æ•° 00 00 00 05 è¡¨ç¤ºå­—èŠ‚ç é•¿åº¦ï¼Œæœ¬ä¾‹æ˜¯ 9 b2 00 02 12 03 b6 00 04 b1 æ˜¯å­—èŠ‚ç æŒ‡ä»¤ 00 00 00 02 è¡¨ç¤ºæ–¹æ³•ç»†èŠ‚å±æ€§æ•°é‡ï¼Œæœ¬ä¾‹æ˜¯ 2 00 0a è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ±  #10 é¡¹ï¼Œå‘ç°æ˜¯ã€LineNumberTableã€‘å±æ€§ 00 00 00 0a è¡¨ç¤ºæ­¤å±æ€§çš„æ€»é•¿åº¦ï¼Œæœ¬ä¾‹æ˜¯ 10 00 02 è¡¨ç¤ºã€LineNumberTableã€‘é•¿åº¦ 00 00 è¡¨ç¤ºã€å­—èŠ‚ç ã€‘è¡Œå· 00 06 è¡¨ç¤ºã€java æºç ã€‘è¡Œå· 00 08 è¡¨ç¤ºã€å­—èŠ‚ç ã€‘è¡Œå· 00 07 è¡¨ç¤ºã€java æºç ã€‘è¡Œå· 00 0b è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ±  #11 é¡¹ï¼Œå‘ç°æ˜¯ã€LocalVariableTableã€‘å±æ€§ 00 00 00 0c è¡¨ç¤ºæ­¤å±æ€§çš„æ€»é•¿åº¦ï¼Œæœ¬ä¾‹æ˜¯ 12 00 01 è¡¨ç¤ºã€LocalVariableTableã€‘é•¿åº¦ 00 00 è¡¨ç¤ºå±€éƒ¨å˜é‡ç”Ÿå‘½å‘¨æœŸå¼€å§‹ï¼Œç›¸å¯¹äºå­—èŠ‚ç çš„åç§»é‡ 00 09 è¡¨ç¤ºå±€éƒ¨å˜é‡è¦†ç›–çš„èŒƒå›´é•¿åº¦ 00 10 è¡¨ç¤ºå±€éƒ¨å˜é‡åç§°ï¼Œæœ¬ä¾‹å¼•ç”¨äº†å¸¸é‡æ±  #16 é¡¹ï¼Œæ˜¯ã€argsã€‘ 00 11 è¡¨ç¤ºå±€éƒ¨å˜é‡çš„ç±»å‹ï¼Œæœ¬ä¾‹å¼•ç”¨äº†å¸¸é‡æ±  #17 é¡¹ï¼Œæ˜¯ã€[Ljava/lang/String;ã€‘ 00 00 è¡¨ç¤ºå±€éƒ¨å˜é‡å æœ‰çš„æ§½ä½(slot)ç¼–å·ï¼Œæœ¬ä¾‹æ˜¯ 0 0000760 01 00 00 00 05 00 0c 00 0d 00 00 00 09 00 0e 00 0001000 0f 00 02 00 09 00 00 00 37 00 02 00 01 00 00 00 0001020 09 b2 00 02 12 03 b6 00 04 b1 00 00 00 02 00 0a 0001040 00 00 00 0a 00 02 00 00 00 06 00 08 00 07 00 0b 0001060 00 00 00 0c 00 01 00 00 00 09 00 10 00 11 00 00 çº¢è‰²ä»£è¡¨æ–¹æ³•å±æ€§(å±æ€§2) 00 12 è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ±  #18 é¡¹ï¼Œå‘ç°æ˜¯ã€MethodParametersã€‘å±æ€§ 00 00 00 05 è¡¨ç¤ºæ­¤å±æ€§çš„æ€»é•¿åº¦ï¼Œæœ¬ä¾‹æ˜¯ 5 01 å‚æ•°æ•°é‡ 00 10 è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ±  #16 é¡¹ï¼Œæ˜¯ã€argsã€‘ 00 00 è®¿é—®ä¿®é¥°ç¬¦ 0001100 00 12 00 00 00 05 01 00 10 00 00 00 01 00 13 00 0001120 00 00 02 00 14 é™„åŠ å±æ€§ 00 01 è¡¨ç¤ºé™„åŠ å±æ€§æ•°é‡ 00 13 è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ±  #19 é¡¹ï¼Œå³ã€SourceFileã€‘ 00 00 00 02 è¡¨ç¤ºæ­¤å±æ€§çš„é•¿åº¦ 00 14 è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ±  #20 é¡¹ï¼Œå³ã€HelloWorld.javaã€‘ 0001100 00 12 00 00 00 05 01 00 10 00 00 00 01 00 13 00 0001120 00 00 02 00 14 å‚è€ƒæ–‡æ¡£ https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html å­—èŠ‚ç æŒ‡ä»¤ å…¥é—¨ æ¥ç€ä¸Šä¸€èŠ‚ï¼Œç ”ç©¶ä¸€ä¸‹ä¸¤ç»„å­—èŠ‚ç æŒ‡ä»¤ï¼Œä¸€ä¸ªæ˜¯public cn.itcast.jvm.t5.HelloWorld();æ„é€ æ–¹æ³•çš„å­—èŠ‚ç æŒ‡ä»¤ 2a b7 00 01 b1 2a =&gt; aload_0 åŠ è½½ slot 0 çš„å±€éƒ¨å˜é‡ï¼Œå³ thisï¼Œåšä¸ºä¸‹é¢çš„ invokespecial æ„é€ æ–¹æ³•è°ƒç”¨çš„å‚æ•° b7 =&gt; invokespecial é¢„å¤‡è°ƒç”¨æ„é€ æ–¹æ³•ï¼Œå“ªä¸ªæ–¹æ³•å‘¢ï¼Ÿ 00 01 å¼•ç”¨å¸¸é‡æ± ä¸­ #1 é¡¹ï¼Œå³ã€ Method java/lang/Object.&quot;&quot;ğŸ˜¦)V ã€‘ b1 è¡¨ç¤ºè¿”å› å¦ä¸€ä¸ªæ˜¯public static void main(java.lang.String[]);ä¸»æ–¹æ³•çš„å­—èŠ‚ç æŒ‡ä»¤ b2 00 02 12 03 b6 00 04 b1 b2 =&gt; getstatic ç”¨æ¥åŠ è½½é™æ€å˜é‡ï¼Œå“ªä¸ªé™æ€å˜é‡å‘¢ï¼Ÿ 00 02 å¼•ç”¨å¸¸é‡æ± ä¸­ #2 é¡¹ï¼Œå³ã€Field java/lang/System.out:Ljava/io/PrintStream;ã€‘ 12 =&gt; ldc åŠ è½½å‚æ•°ï¼Œå“ªä¸ªå‚æ•°å‘¢ï¼Ÿ 03 å¼•ç”¨å¸¸é‡æ± ä¸­ #3 é¡¹ï¼Œå³ ã€String hello worldã€‘ b6 =&gt; invokevirtual é¢„å¤‡è°ƒç”¨æˆå‘˜æ–¹æ³•ï¼Œå“ªä¸ªæ–¹æ³•å‘¢ï¼Ÿ 00 04 å¼•ç”¨å¸¸é‡æ± ä¸­ #4 é¡¹ï¼Œå³ã€Method java/io/PrintStream.println:(Ljava/lang/String;)Vã€‘ b1 è¡¨ç¤ºè¿”å› å‚è€ƒ https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5 javapå·¥å…· è‡ªå·±åˆ†æç±»æ–‡ä»¶ç»“æ„å¤ªéº»çƒ¦äº†ï¼ŒOracle æä¾›äº† javap å·¥å…·æ¥åç¼–è¯‘ class æ–‡ä»¶ Classfile /Users/yy/projects/IdeaProjects/Leetcode/out/production/Leetcode/com/yuanye/jvm/HelloWorld.class Last modified 2022å¹´2æœˆ25æ—¥; size 562 bytes MD5 checksum 68406ec2a8c4f60b7d40f3d3138c8146 Compiled from &quot;HelloWorld.java&quot; public class com.yuanye.jvm.HelloWorld minor version: 0 major version: 55 flags: (0x0021) ACC_PUBLIC, ACC_SUPER this_class: #5 // com/yuanye/jvm/HelloWorld super_class: #6 // java/lang/Object interfaces: 0, fields: 0, methods: 2, attributes: 1 Constant pool: #1 = Methodref #6.#20 // java/lang/Object.&quot;&lt;init&gt;&quot;:()V #2 = Fieldref #21.#22 // java/lang/System.out:Ljava/io/PrintStream; #3 = String #23 // HelloWorld #4 = Methodref #24.#25 // java/io/PrintStream.println:(Ljava/lang/String;)V #5 = Class #26 // com/yuanye/jvm/HelloWorld #6 = Class #27 // java/lang/Object #7 = Utf8 &lt;init&gt; #8 = Utf8 ()V #9 = Utf8 Code #10 = Utf8 LineNumberTable #11 = Utf8 LocalVariableTable #12 = Utf8 this #13 = Utf8 Lcom/yuanye/jvm/HelloWorld; #14 = Utf8 main #15 = Utf8 ([Ljava/lang/String;)V #16 = Utf8 args #17 = Utf8 [Ljava/lang/String; #18 = Utf8 SourceFile #19 = Utf8 HelloWorld.java #20 = NameAndType #7:#8 // &quot;&lt;init&gt;&quot;:()V #21 = Class #28 // java/lang/System #22 = NameAndType #29:#30 // out:Ljava/io/PrintStream; #23 = Utf8 HelloWorld #24 = Class #31 // java/io/PrintStream #25 = NameAndType #32:#33 // println:(Ljava/lang/String;)V #26 = Utf8 com/yuanye/jvm/HelloWorld #27 = Utf8 java/lang/Object #28 = Utf8 java/lang/System #29 = Utf8 out #30 = Utf8 Ljava/io/PrintStream; #31 = Utf8 java/io/PrintStream #32 = Utf8 println #33 = Utf8 (Ljava/lang/String;)V { public com.yuanye.jvm.HelloWorld(); descriptor: ()V flags: (0x0001) ACC_PUBLIC Code: stack=1, locals=1, args_size=1 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return LineNumberTable: line 3: 0 LocalVariableTable: Start Length Slot Name Signature 0 5 0 this Lcom/yuanye/jvm/HelloWorld; public static void main(java.lang.String[]); descriptor: ([Ljava/lang/String;)V flags: (0x0009) ACC_PUBLIC, ACC_STATIC Code: stack=2, locals=1, args_size=1 0: getstatic #2 // Field java/lang/System.out:Ljava/io/PrintStream; 3: ldc #3 // String HelloWorld 5: invokevirtual #4 // Method java/io/PrintStream.println:(Ljava/lang/String;)V 8: return LineNumberTable: line 6: 0 line 7: 8 LocalVariableTable: Start Length Slot Name Signature 0 9 0 args [Ljava/lang/String; } å›¾è§£æ–¹æ³•æ‰§è¡Œæµç¨‹ åŸå§‹javaä»£ç  package cn.itcast.jvm.t3.bytecode; /** * æ¼”ç¤º å­—èŠ‚ç æŒ‡ä»¤ å’Œ æ“ä½œæ•°æ ˆã€å¸¸é‡æ± çš„å…³ç³» */ public class Demo3_1 { public static void main(String[] args) { int a = 10; int b = Short.MAX_VALUE + 1; int c = a + b; System.out.println(c); } } ç¼–è¯‘åçš„å­—èŠ‚ç æ–‡ä»¶ [root@localhost ~]# javap -v Demo3_1.class Classfile /root/Demo3_1.class Last modified Jul 7, 2019; size 665 bytes MD5 checksum a2c29a22421e218d4924d31e6990cfc5 Compiled from &quot;Demo3_1.java&quot; public class cn.itcast.jvm.t3.bytecode.Demo3_1 minor version: 0 major version: 52 flags: ACC_PUBLIC, ACC_SUPER Constant pool: #1 = Methodref #7.#26 // java/lang/Object.&quot;&lt;init&gt;&quot;:()V #2 = Class #27 // java/lang/Short #3 = Integer 32768 #4 = Fieldref #28.#29 // java/lang/System.out:Ljava/io/PrintStream; #5 = Methodref #30.#31 // java/io/PrintStream.println:(I)V #6 = Class #32 // cn/itcast/jvm/t3/bytecode/Demo3_1 #7 = Class #33 // java/lang/Object #8 = Utf8 &lt;init&gt; #9 = Utf8 ()V #10 = Utf8 Code #11 = Utf8 LineNumberTable #12 = Utf8 LocalVariableTable #13 = Utf8 this #14 = Utf8 Lcn/itcast/jvm/t3/bytecode/Demo3_1; #15 = Utf8 main #16 = Utf8 ([Ljava/lang/String;)V #17 = Utf8 args #18 = Utf8 [Ljava/lang/String; #19 = Utf8 a #20 = Utf8 I #21 = Utf8 b #22 = Utf8 c #23 = Utf8 MethodParameters #24 = Utf8 SourceFile #25 = Utf8 Demo3_1.java #26 = NameAndType #8:#9 // &quot;&lt;init&gt;&quot;:()V #27 = Utf8 java/lang/Short #28 = Class #34 // java/lang/System #29 = NameAndType #35:#36 // out:Ljava/io/PrintStream; #30 = Class #37 // java/io/PrintStream #31 = NameAndType #38:#39 // println:(I)V #32 = Utf8 cn/itcast/jvm/t3/bytecode/Demo3_1 #33 = Utf8 java/lang/Object #34 = Utf8 java/lang/System #35 = Utf8 out #36 = Utf8 Ljava/io/PrintStream; #37 = Utf8 java/io/PrintStream #38 = Utf8 println #39 = Utf8 (I)V { public cn.itcast.jvm.t3.bytecode.Demo3_1(); descriptor: ()V flags: ACC_PUBLIC Code: stack=1, locals=1, args_size=1 // Method java/lang/Object.&quot; 0: aload_0 1: invokespecial #1 &lt;init&gt;&quot;:()V 4: return LineNumberTable: line 6: 0 LocalVariableTable: Start Length Slot Name Signature 0 5 0 this Lcn/itcast/jvm/t3/bytecode/Demo3_1; public static void main(java.lang.String[]); descriptor: ([Ljava/lang/String;)V flags: ACC_PUBLIC, ACC_STATIC Code: stack=2, locals=4, args_size=1 0: bipush 10 2: istore_1 3: ldc #3 // int 32768 5: istore_2 6: iload_1 7: iload_2 8: iadd 9: istore_3 10: getstatic #4 // Field java/lang/System.out:Ljava/io/PrintStream; 13: iload_3 14: invokevirtual #5 // Method java/io/PrintStream.println:(I)V 17: return LineNumberTable: line 8: 0 line 9: 3 line 10: 6 line 11: 10 line 12: 17 LocalVariableTable: Start Length Slot Name Signature 0 18 0 args [Ljava/lang/String; 3 15 1 a I 6 12 2 b I 10 8 3 c I MethodParameters: Name Flags args } å¸¸é‡æ± è½½å…¥è¿è¡Œæ—¶å¸¸é‡æ±  å½“javaä»£ç è¢«æ‰§è¡Œæ—¶ï¼Œç”±jvmçš„ç±»åŠ è½½å™¨å¯¹main()æ–¹æ³•æ‰€åœ¨çš„ç±»è¿›è¡Œç±»åŠ è½½(å°†.classæ–‡ä»¶çš„å­—èŠ‚æ•°æ®è¯»å–åˆ°å†…å­˜ä¸­) å°†å¸¸é‡æ± çš„æ•°æ®ä¼šæ”¾å…¥åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± å±äºæ–¹æ³•åŒº æ¯”è¾ƒå°çš„æ•°å­—å¹¶ä¸å­˜åœ¨å¸¸é‡æ± ä¸­ï¼Œä¸æ–¹æ³•çš„å­—èŠ‚ç å­˜æ”¾åœ¨ä¸€èµ·ã€‚ä¸€æ—¦æ•°å­—è¶…è¿‡äº†shortç±»å‹çš„æœ€å¤§å€¼ï¼Œå°±å­˜æ”¾åœ¨å¸¸é‡æ± ä¸­ æ–¹æ³•å­—èŠ‚ç è½½å…¥æ–¹æ³•åŒº mainçº¿ç¨‹å¼€å§‹è¿è¡Œï¼Œåˆ†é…æ ˆå¸§å†…å­˜ ç»¿è‰²ä»£è¡¨å±€éƒ¨å˜é‡æ ‡ï¼Œè“è‰²è¡¨ç¤ºæ“ä½œæ•°æ ˆ stackè¡¨ç¤ºæ“ä½œæ•°æ ˆæ·±åº¦ï¼Œlocalsè¡¨ç¤ºå±€éƒ¨å˜é‡è¡¨é•¿åº¦ æ‰§è¡Œå¼•æ“å¼€å§‹æ‰§è¡Œå­—èŠ‚ç  bipush 10 å°†ä¸€ä¸ªbyteå‹å…¥æ“ä½œæ•°æ ˆ(å…¶é•¿åº¦ä¼šè¡¥é½4ä¸ªå­—èŠ‚)ï¼Œç±»ä¼¼çš„æŒ‡ä»¤è¿˜æœ‰ sipushå°†ä¸€ä¸ªshortå‹å…¥æ“ä½œæ•°æ ˆ(å…¶é•¿åº¦ä¼šè¡¥é½4ä¸ªå­—èŠ‚) ldcå°†ä¸€ä¸ªintå‹å…¥æ“ä½œæ•°æ ˆ ldc2_wå°†ä¸€ä¸ªlongå‹å…¥æ“ä½œæ•°æ ˆ(åˆ†ä¸¤æ¬¡å‹å…¥ï¼Œå› ä¸ºlongæ˜¯8ä¸ªå­—èŠ‚) è¿™é‡Œå°çš„æ•°å­—éƒ½æ˜¯å’Œå­—èŠ‚ç æŒ‡ä»¤å­˜åœ¨ä¸€èµ·ï¼Œè¶…è¿‡shortèŒƒå›´çš„æ•°å­—å­˜å…¥äº†å¸¸é‡æ±  istore_1 å°†æ“ä½œæ•°æ ˆé¡¶æ•°æ®å¼¹å‡ºï¼Œå­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„slot 1 å¯¹åº”javaä»£ç ä¸­a=10; ldc#3 ä»å¸¸é‡æ± åŠ è½½#3æ•°æ®åˆ°æ“ä½œæ•°æ ˆ æ³¨æ„ Short.MAX_VALUEæ˜¯32767ï¼Œæ‰€ä»¥32768=Short.MAX_VALUE+1å®é™…æ˜¯åœ¨ç¼–è¯‘æœŸé—´è®¡ç®—å¥½çš„ istore 2 iload 1 iload 2 iadd è¿ç®—éœ€è¦åœ¨æ“ä½œæ•°æ ˆä¸­è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦åŠ è½½åˆ°æ ˆä¸­ iaddå¼¹å‡ºä¸¤ä¸ªç»“æœè¿›è¡Œè¿ç®—ï¼Œå°†ç»“æœå‹å…¥åˆ°æ“ä½œæ•°æ ˆä¸­ istore 3 getstatic #41 getstaticåˆ°å¸¸é‡æ± ä¸­æ‰¾åˆ°æˆå‘˜å˜é‡çš„å¼•ç”¨ æˆå‘˜å˜é‡å­˜æ”¾åœ¨å †ä¸­ï¼Œé€šè¿‡å¸¸é‡æ± æ‰¾åˆ°å †ä¸­çš„æˆå‘˜å˜é‡ ç„¶åå°†æˆå‘˜å˜é‡çš„å¼•ç”¨æ”¾å…¥åˆ°æ“ä½œæ•°æ ˆä¸­ iload3 invokevirtual #5 æ‰¾åˆ°å¸¸é‡æ± #5é¡¹ å®šä½åˆ°æ–¹æ³•åŒºjava/io/PrintStream.println:(I)Væ–¹æ³• ç”Ÿæˆæ–°çš„æ ˆå¸§(åˆ†é…localsã€stackç­‰) ä¼ é€’å‚æ•°ï¼Œæ‰§è¡Œæ–°æ ˆå¸§ä¸­çš„å­—èŠ‚ç  æ‰§è¡Œå®Œæ¯•å¼¹å‡ºæ ˆå¸§ æ¸…é™¤mainæ“ä½œæ•°æ ˆå†…å®¹ return å®Œæˆmainæ–¹æ³•è°ƒç”¨ï¼Œå¼¹å‡ºmainæ ˆå¸§ ç¨‹åºç»“æŸ è‡ªå¢è¿ç®—å›¾è§£(a++, ++a) æ³¨æ„iincæŒ‡ä»¤æ˜¯ç›´æ¥åœ¨å±€éƒ¨å˜é‡slotä¸Šè¿›è¡Œè¿ç®— ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹å“ªä¸ªslotåšè‡ªå¢ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè‡ªå¢å¤šå°‘ a++å’Œ++açš„åŒºåˆ«æ˜¯å…ˆæ‰§è¡Œiloadè¿˜æ˜¯å…ˆæ‰§è¡Œiinc a++ ++a æ¡ä»¶åˆ¤æ–­æŒ‡ä»¤ å‡ ç‚¹è¯´æ˜ byteï¼Œshortï¼Œcharéƒ½ä¼šæŒ‰intæ¯”è¾ƒï¼Œå› ä¸ºæ“ä½œæ•°æ ˆéƒ½æ˜¯4 gotoç”¨æ¥è¿›è¡Œè·³è½¬åˆ°æŒ‡å®šè¡Œå·çš„å­—èŠ‚ç  æºç  public class Demo3_3 { public static void main(String[] args) { int a = 0; if(a == 0) { a = 10; } else { a = 20; } } } å­—èŠ‚ç  iconst_0å¾—åˆ°ä¸€ä¸ª0çš„å¸¸é‡ä»-1-5ä¹‹é—´çš„æ•°ç”¨iconst 0: iconst_0 1: istore_1 2: iload_1 3: ifne 12 6: bipush 10 8: istore_1 9: goto 15 12: bipush 20 14: istore_1 15: return æ€è€ƒ ç»†å¿ƒçš„åŒå­¦åº”å½“æ³¨æ„åˆ°ï¼Œä»¥ä¸Šæ¯”è¾ƒæŒ‡ä»¤ä¸­æ²¡æœ‰ longï¼Œfloatï¼Œdouble çš„æ¯”è¾ƒï¼Œé‚£ä¹ˆå®ƒä»¬è¦æ¯”è¾ƒæ€ ä¹ˆåŠ? å‚è€ƒ https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.lcmp å¾ªç¯æ§åˆ¶æ‰§è¡Œ å…¶å®å¾ªç¯æ§åˆ¶è¿˜æ˜¯æ¡ä»¶åˆ¤æ–­ä¸­çš„é‚£äº›æŒ‡ä»¤ Whileæºä»£ç  public class Demo3_4 { public static void main(String[] args) { int a = 0; while (a &lt; 10) { a++; } } } Whileå¯¹åº”å­—èŠ‚ç  0: iconst_0 1: istore_1 2: iload_1 3: bipush 10 5: if_icmpge 14 8: iinc 1, 1 11: goto 2 14: return Do whileæºä»£ç  public class Demo3_5 { public static void main(String[] args) { int a = 0; do { a++; } while (a &lt; 10); } } Do whileå­—èŠ‚ç  0: iconst_0 1: istore_1 2: iinc 1, 1 5: iload_1 6: bipush 10 8: if_icmplt 2 11: return Forå¾ªç¯æºä»£ç  public class Demo3_6 { public static void main(String[] args) { for (int i = 0; i &lt; 10; i++) { } } } Forå¾ªç¯å­—èŠ‚ç  0: iconst_0 1: istore_1 2: iload_1 3: bipush 10 5: if_icmpge 14 8: iinc 1, 1 11: goto 2 14: return æ³¨æ„ æ¯”è¾ƒwhileå’Œforçš„å­—èŠ‚ç ï¼Œä½ å‘ç°ä»–ä»¬æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œæ®Šé€”åŒå½’ ç»ƒä¹  public class Demo3_6_1 { public static void main(String[] args) { int i = 0; int x = 0; while (i &lt; 10) { x = x++;//iload_x --&gt; iinc 1,1 --&gt; istore_x(å­˜å›å»çš„x=0è¦†ç›–äº†è‡ªå¢åçš„x=1) i++; } System.out.println(x); // ç»“æœæ˜¯ 0 } } æ„é€ å™¨æ–¹æ³• ()V public class Demo3_8_1 { static int i = 10; static { i = 20; } static { i = 30; } } ç¼–è¯‘å™¨ä¼šæŒ‰ä»ä¸Šè‡³ä¸‹çš„é¡ºåºï¼Œæ”¶é›†æ‰€æœ‰ static é™æ€ä»£ç å—å’Œé™æ€æˆå‘˜èµ‹å€¼çš„ä»£ç ï¼Œåˆå¹¶ä¸ºä¸€ä¸ªç‰¹æ®Šçš„æ–¹ æ³• &lt;cinit&gt;()V 0: bipush 10 2: putstatic #2 //Field i:I 5: bipush 20 7: putstatic #2 //Field i:I 10: bipush 30 12: putstatic #2 //Field i:I 15: return &lt;cinit&gt;()V æ–¹æ³•ä¼šåœ¨ç±»åŠ è½½çš„åˆå§‹åŒ–é˜¶æ®µè¢«è°ƒç”¨ ç»ƒä¹  å¯ä»¥è°ƒæ•´ä¸€ä¸‹staticå˜é‡å’Œé™æ€ä»£ç å—çš„ä½ç½®ï¼Œè§‚å¯Ÿå­—èŠ‚ç çš„æ”¹åŠ¨ ()V public class Demo3_8_2 { private String a = &quot;s1&quot;; { b = 20; } private int b = 10; { a = &quot;s2&quot;; } public Demo3_8_2(String a, int b) { this.a = a; this.b = b; } public static void main(String[] args) { Demo3_8_2 d = new Demo3_8_2(&quot;s3&quot;, 30); System.out.println(d.a); System.out.println(d.b); } } ç¼–è¯‘å™¨ä¼šæŒ‰ä»ä¸Šè‡³ä¸‹çš„é¡ºåºï¼Œæ”¶é›†æ‰€æœ‰ {} ä»£ç å—å’Œæˆå‘˜å˜é‡èµ‹å€¼çš„ä»£ç ï¼Œå½¢æˆæ–°çš„æ„é€ æ–¹æ³•ï¼Œä½†åŸå§‹æ„ é€ æ–¹æ³•å†…çš„ä»£ç æ€»æ˜¯åœ¨æœ€å aload_0æŠŠthisåŠ è½½åˆ°æ ˆ æ–¹æ³•è°ƒç”¨ çœ‹ä¸€ä¸‹å‡ ç§ä¸åŒçš„æ–¹æ³•è°ƒç”¨å¯¹åº”çš„å­—èŠ‚ç æŒ‡ä»¤ public class Demo3_9 { public Demo3_9() { } private void test1() { } private final void test2() { } public void test3() { } public static void test4() { } public static void main(String[] args) { Demo3_9 d = new Demo3_9(); d.test1(); d.test2(); } } 0: new #2 //class cn/itcast/jvm/t3/bytecode/Demo3_9 3: dup 4: invokespecial #3 //Method &quot;&lt;init&gt;&quot;:()V 7: astore_1 8: aload_1 9: invokespecial #4 //Method test1:()V 12: aload_1 13: invokespecial #5 //Method test2:()V 16: aload_1 17: invokevirtual #6 //Method test3:()V 20: aload_1 21: pop 22: invokestatic #7 //Method test4:()V 25: invokestatic #7 //Method test4:()V 28: return new æ˜¯åˆ›å»ºã€å¯¹è±¡ã€‘ï¼Œç»™å¯¹è±¡åˆ†é…å †å†…å­˜ï¼Œæ‰§è¡ŒæˆåŠŸä¼šå°†ã€å¯¹è±¡å¼•ç”¨ã€‘å‹å…¥æ“ä½œæ•°æ ˆ dup æ˜¯èµ‹å€¼æ“ä½œæ•°æ ˆæ ˆé¡¶çš„å†…å®¹ï¼Œæœ¬ä¾‹å³ä¸ºã€å¯¹è±¡å¼•ç”¨ã€‘ï¼Œä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä»½å¼•ç”¨å‘¢ï¼Œä¸€ä¸ªæ˜¯è¦é…åˆ invokespecial è°ƒç”¨è¯¥å¯¹è±¡çš„æ„é€ æ–¹æ³• &quot;&quot;ğŸ˜¦)V (ä¼šæ¶ˆè€—æ‰æ ˆé¡¶ä¸€ä¸ªå¼•ç”¨)ï¼Œå¦ä¸€ä¸ªè¦é…åˆ astore_1 èµ‹å€¼ç»™å±€éƒ¨å˜é‡ æœ€ç»ˆæ–¹æ³•(final)ï¼Œç§æœ‰æ–¹æ³•(private)ï¼Œæ„é€ æ–¹æ³•éƒ½æ˜¯ç”± invokespecial æŒ‡ä»¤æ¥è°ƒç”¨ï¼Œå±äºé™æ€ç»‘å®š æ™®é€šæˆå‘˜æ–¹æ³•æ˜¯ç”± invokevirtual è°ƒç”¨ï¼Œå±äºåŠ¨æ€ç»‘å®šï¼Œå³æ”¯æŒå¤šæ€ ï¼Œå…·ä½“æ–¹æ³•éœ€è¦åœ¨è¿è¡Œæ—¶ç¡®å®š æˆå‘˜æ–¹æ³•ä¸é™æ€æ–¹æ³•è°ƒç”¨çš„å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œæ‰§è¡Œæ–¹æ³•å‰æ˜¯å¦éœ€è¦ã€å¯¹è±¡å¼•ç”¨ã€‘ æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯ d.test4(); æ˜¯é€šè¿‡ã€å¯¹è±¡å¼•ç”¨ã€‘è°ƒç”¨ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°åœ¨è°ƒç”¨ invokestatic ä¹‹å‰æ‰§è¡Œäº† pop æŒ‡ä»¤ï¼ŒæŠŠã€å¯¹è±¡å¼•ç”¨ã€‘ä»æ“ä½œæ•°æ ˆå¼¹æ‰äº†ï¼Œå› æ­¤è°ƒç”¨é™æ€æ–¹æ³•æ—¶ä¸è¦ä½¿ç”¨å¯¹è±¡è°ƒç”¨ï¼Œä¼šäº§ç”Ÿä¸¤æ¡æ— ç”¨çš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œç›´æ¥ä½¿ç”¨ç±»æ¥è°ƒç”¨å³å¯ è¿˜æœ‰ä¸€ä¸ªæ‰§è¡Œ invokespecial çš„æƒ…å†µæ˜¯é€šè¿‡ super è°ƒç”¨çˆ¶ç±»æ–¹æ³• å¤šæ€çš„åŸç† package cn.itcast.jvm.t3.bytecode; import java.io.IOException; /** * æ¼”ç¤ºå¤šæ€åŸç†ï¼Œæ³¨æ„åŠ ä¸Šä¸‹é¢çš„ JVM å‚æ•°ï¼Œç¦ç”¨æŒ‡é’ˆå‹ç¼© * -XX:-UseCompressedOops -XX:-UseCompressedClassPointers */ public class Demo3_10 { public static void test(Animal animal) { animal.eat(); System.out.println(animal.toString()); } public static void main(String[] args) throws IOException { test(new Cat()); test(new Dog()); System.in.read(); } } abstract class Animal { public abstract void eat(); @Override public String toString() { return &quot;æˆ‘æ˜¯&quot; + this.getClass().getSimpleName(); } } class Dog extends Animal { @Override public void eat() { System.out.println(&quot;å•ƒéª¨å¤´&quot;); } } class Cat extends Animal { @Override public void eat() { System.out.println(&quot;åƒé±¼&quot;); } } è¿è¡Œä»£ç  åœåœ¨ System.in.read() æ–¹æ³•ä¸Šï¼Œè¿™æ—¶è¿è¡Œ jps è·å–è¿›ç¨‹ id è¿è¡ŒHSDBå·¥å…· è¿›å…¥JDKå®‰è£…ç›®å½•ï¼Œæ‰§è¡Œjava -cp ./lib/sa-jdi.jar sun.jvm.hotspot.HSDB æŸ¥æ‰¾æŸä¸ªå¯¹è±¡ æ‰“å¼€Tools --&gt; Find Object By Queryè¾“å…¥select d from cn.itcast.jvm.t3.bytecode.Dog dç‚¹å‡»Executeæ‰§è¡Œdä¸ºæŒ‡å®šçš„ç±»å‹åˆ«å æŸ¥çœ‹å¯¹è±¡å†…å­˜ç»“æ„ ç‚¹å‡»è¶…é“¾æ¥å¯ä»¥çœ‹åˆ°å¯¹è±¡çš„å†…å­˜ç»“æ„ï¼Œæ­¤å¯¹è±¡æ²¡æœ‰ä»»ä½•å±æ€§ï¼Œå› æ­¤åªæœ‰å¯¹è±¡å¤´çš„ 16 å­—èŠ‚ï¼Œå‰ 8 å­—èŠ‚æ˜¯MarkWordï¼Œå 8 å­—èŠ‚å°±æ˜¯å¯¹è±¡çš„ Class æŒ‡é’ˆ ä½†ç›®å‰çœ‹ä¸åˆ°å®ƒçš„å®é™…åœ°å€ æŸ¥çœ‹å¯¹è±¡Classçš„å†…å­˜åœ°å€ é€šè¿‡windows --&gt; console è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œæ‰§è¡Œmem 0x00000001299b4978 2memæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå‚æ•°1æ˜¯å¯¹è±¡åœ°å€ï¼Œå‚æ•°2æ˜¯æŸ¥çœ‹2è¡Œ(å³16å­—èŠ‚)ç»“æœä¸­ç¬¬äºŒè¡Œ 0x000000001b7d4028 å³ä¸º Class çš„å†…å­˜åœ°å€ æŸ¥çœ‹ç±»çš„vtable æ–¹æ³•1:Alt+Rè¿›å…¥Inspectorå·¥å…·ï¼Œè¾“å…¥åˆšæ‰çš„Classå†…å­˜åœ°å€ï¼Œçœ‹åˆ°å¦‚ä¸‹æ´é¢ æ–¹æ³•2:æˆ–è€… Tools -&gt; Class Browser è¾“å…¥ Dog æŸ¥æ‰¾ï¼Œå¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœ æ— è®ºé€šè¿‡å“ªç§æ–¹æ³•ï¼Œéƒ½å¯ä»¥æ‰¾åˆ° Dog Class çš„ vtable é•¿åº¦ä¸º 6ï¼Œæ„æ€å°±æ˜¯ Dog ç±»æœ‰ 6 ä¸ªè™šæ–¹æ³•(å¤šæ€ç›¸å…³çš„ï¼Œfinalï¼Œstatic ä¸ä¼šåˆ—å…¥)é‚£ä¹ˆè¿™ 6 ä¸ªæ–¹æ³•éƒ½æ˜¯è°å‘¢?ä» Class çš„èµ·å§‹åœ°å€å¼€å§‹ç®—ï¼Œåç§» 0x1b8 å°±æ˜¯ vtable çš„èµ·å§‹åœ°å€ï¼Œè¿›è¡Œè®¡ç®—å¾—åˆ°: 0x000000001b7d4028 1b8 + --------------------- 0x000000001b7d41e0 é€šè¿‡windows --&gt; consoleè¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œæ‰§è¡Œ mem 0x000000001b7d41e0 6 0x000000001b7d41e0: 0x000000001b3d1b10 0x000000001b7d41e8: 0x000000001b3d15e8 0x000000001b7d41f0: 0x000000001b7d35e8 0x000000001b7d41f8: 0x000000001b3d1540 0x000000001b7d4200: 0x000000001b3d1678 0x000000001b7d4208: 0x000000001b7d3fa8 å°±å¾—åˆ°äº†6ä¸ªè™šæ–¹æ³•çš„å…¥å£ éªŒè¯æ–¹æ³•åœ°å€ é€šè¿‡ Tools -&gt; Class Browser æŸ¥çœ‹æ¯ä¸ªç±»çš„æ–¹æ³•å®šä¹‰ï¼Œæ¯”è¾ƒå¯çŸ¥ Dog - public void eat() @0x000000001b7d3fa8 Animal - public java.lang.String toString() @0x000000001b7d35e8; Object - protected void finalize() @0x000000001b3d1b10; Object - public boolean equals(java.lang.Object) @0x000000001b3d15e8; Object - public native int hashCode() @0x000000001b3d1540; Object - protected native java.lang.Object clone() @0x000000001b3d1678; å¯¹å·å…¥åº§ï¼Œå‘ç° eat() æ–¹æ³•æ˜¯ Dog ç±»è‡ªå·±çš„ toString() æ–¹æ³•æ˜¯ç»§æ‰¿ Animal ç±»çš„ finalize() ï¼Œequals()ï¼ŒhashCode()ï¼Œclone() éƒ½æ˜¯ç»§æ‰¿ Object ç±»çš„ å°ç»“ å½“æ‰§è¡Œ invokevirtual æŒ‡ä»¤æ—¶ï¼Œ å…ˆé€šè¿‡æ ˆå¸§ä¸­çš„å¯¹è±¡å¼•ç”¨æ‰¾åˆ°å¯¹è±¡ åˆ†æå¯¹è±¡å¤´ï¼Œæ‰¾åˆ°å¯¹è±¡çš„å®é™… Class Class ç»“æ„ä¸­æœ‰ vtableï¼Œå®ƒåœ¨ç±»åŠ è½½çš„é“¾æ¥é˜¶æ®µå°±å·²ç»æ ¹æ®æ–¹æ³•çš„é‡å†™è§„åˆ™ç”Ÿæˆå¥½äº† æŸ¥è¡¨å¾—åˆ°æ–¹æ³•çš„å…·ä½“åœ°å€ æ‰§è¡Œæ–¹æ³•çš„å­—èŠ‚ç  å¼‚å¸¸å¤„ç† try-catch public class Demo3_11_1 { public static void main(String[] args) { int i = 0; try { i = 10; } catch (Exception e) { i = 20; } } } æ³¨æ„ ä¸ºäº†æŠ“ä½é‡ç‚¹ï¼Œä¸‹é¢çš„å­—èŠ‚ç çœç•¥äº†ä¸é‡è¦çš„éƒ¨åˆ† public static void main(java.lang.String[]); descriptor: ([Ljava/lang/String;)V flags: ACC_PUBLIC, ACC_STATIC Code: stack=1, locals=3, args_size=1 0: iconst_0 1: istore_1 2: bipush 10 4: istore_1 5: goto 12 8: astore_2 9: bipush 20 11: istore_1 12: return Exception table: from to target type 2 5 8 Class java/lang/Exception LineNumberTable: ... LocalVariableTable: Start Length Slot Name Signature 9 3 2 e Ljava/lang/Exception; 0 13 0 args [Ljava/lang/String; 2 11 1 i I StackMapTable: ... MethodParameters: ... } å¯ä»¥çœ‹åˆ°å¤šå‡ºæ¥ä¸€ä¸ª Exception table çš„ç»“æ„ï¼Œ[from, to) æ˜¯å‰é—­åå¼€çš„æ£€æµ‹èŒƒå›´ï¼Œä¸€æ—¦è¿™ä¸ªèŒƒå›´å†…çš„å­—èŠ‚ç æ‰§è¡Œå‡ºç°å¼‚å¸¸ï¼Œåˆ™é€šè¿‡ type åŒ¹é…å¼‚å¸¸ç±»å‹ï¼Œå¦‚æœä¸€è‡´ï¼Œè¿›å…¥ target æ‰€æŒ‡ç¤ºè¡Œå· 8 è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ astore_2 æ˜¯å°†å¼‚å¸¸å¯¹è±¡å¼•ç”¨å­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot 2 ä½ç½® å¤šä¸ªsingle-catchå—çš„æƒ…å†µ public class Demo3_11_2 { public static void main(String[] args) { int i = 0; try { i = 10; } catch (ArithmeticException e) { i = 30; } catch (NullPointerException e) { i = 40; } catch (Exception e) { i = 50; } } } public static void main(java.lang.String[]); descriptor: ([Ljava/lang/String;)V flags: ACC_PUBLIC, ACC_STATIC Code: stack=1, locals=3, args_size=1 0: iconst_0 1: istore_1 2: bipush 10 4: istore_1 5: goto 26 8: astore_2 9: bipush 30 11: istore_1 12: goto 26 15: astore_2 16: bipush 40 18: istore_1 19: goto 26 22: astore_2 23: bipush 50 25: istore_1 26: return Exception table: from to target type 258 2 5 15 2 5 22 LineNumberTable: ... LocalVariableTable: Class java/lang/ArithmeticException Class java/lang/NullPointerException Class java/lang/Exception Start Length Slot Name Signature 9 3 2 e Ljava/lang/ArithmeticException; 16 3 2 e Ljava/lang/NullPointerException; 23 3 2 e Ljava/lang/Exception; 0 27 0 args [Ljava/lang/String; 2 25 1 i I StackMapTable: ... MethodParameters: ... å› ä¸ºå¼‚å¸¸å‡ºç°æ—¶ï¼Œåªèƒ½è¿›å…¥Exception tableä¸­ä¸€ä¸ªåˆ†æ”¯ï¼Œæ‰€ä»¥å±€éƒ¨å˜é‡è¡¨slot2ä½ç½®è¢«å…±ç”¨ multi-catchçš„æƒ…å†µ public class Demo3_11_3 { public static void main(String[] args) { try { Method test = Demo3_11_3.class.getMethod(&quot;test&quot;); test.invoke(null); } catch (NoSuchMethodException | IllegalAccessException | InvocationTargetException e) { e.printStackTrace(); } } public static void test() { System.out.println(&quot;ok&quot;); } } public static void main(java.lang.String[]); descriptor: ([Ljava/lang/String;)V flags: ACC_PUBLIC, ACC_STATIC Code: stack=3, locals=2, args_size=1 0: ldc #2 2: ldc #3 4: iconst_0 5: anewarray #4 8: invokevirtual #5 11: astore_1 12: aload_1 13: aconst_null 14: iconst_0 15: anewarray #6 18: invokevirtual #7 21: pop 22: goto 30 25: astore_1 26: aload_1 27: invokevirtual #11 // e.printStackTrace:()V 30: return Exception table: from to target type 0 22 25 0 22 25 0 22 25 LineNumberTable: ... LocalVariableTable: Class java/lang/NoSuchMethodException Class java/lang/IllegalAccessException Class java/lang/reflect/InvocationTargetException Start Length Slot Name Signature 12 10 1 test Ljava/lang/reflect/Method; 26 4 1 e Ljava/lang/ReflectiveOperationException; 0 31 0 args [Ljava/lang/String; StackMapTable: ... MethodParameters: ... finally public class Demo3_11_4 { public static void main(String[] args) { int i = 0; try { i = 10; } catch (Exception e) { i = 20; } finally { i = 30; } } } å¯ä»¥çœ‹åˆ° finally ä¸­çš„ä»£ç è¢«å¤åˆ¶äº† 3 ä»½ï¼Œåˆ†åˆ«æ”¾å…¥ try æµç¨‹ï¼Œcatch æµç¨‹ä»¥åŠ catch å‰©ä½™çš„å¼‚å¸¸ç±»å‹æµç¨‹ finallyé¢è¯•é¢˜ finallyå‡ºç°äº†return public class Demo3_12_2 { public static void main(String[] args) { int result = test(); System.out.println(result); } public static int test() { try { return 10; } finally { return 20; } } } public static int test(); descriptor: ()I flags: ACC_PUBLIC, ACC_STATIC Code: stack=1, locals=2, args_size=0 0: bipush 10 //&lt;--10æ”¾å…¥æ ˆé¡¶ 2: istore_0 //10--&gt;slot0(ä»æ ˆé¡¶ç§»é™¤äº†) 3: bipush 20 //&lt;--20æ”¾å…¥æ ˆé¡¶ 5: ireturn //è¿”å›æ ˆé¡¶ int(20) 6: astore_1 //catch any --&gt; slot 1 7: bipush 20 //&lt;--20æ”¾å…¥æ ˆé¡¶ 9: ireturn //è¿”å›æ ˆé¡¶ int(20) Exception table from to target type 0 3 6 any LineNumberTable: ... StackMapTable: ... ç”±äº finally ä¸­çš„ ireturn è¢«æ’å…¥äº†æ‰€æœ‰å¯èƒ½çš„æµç¨‹ï¼Œå› æ­¤è¿”å›ç»“æœè‚¯å®šä»¥ finally çš„ä¸ºå‡† è‡³äºå­—èŠ‚ç ä¸­ç¬¬ 2 è¡Œï¼Œä¼¼ä¹æ²¡å•¥ç”¨ï¼Œä¸”ç•™ä¸ªä¼ç¬”ï¼Œçœ‹ä¸‹ä¸ªä¾‹å­ è·Ÿä¸Šä¾‹ä¸­çš„ finally ç›¸æ¯”ï¼Œå‘ç°æ²¡æœ‰ athrow äº†ï¼Œè¿™å‘Šè¯‰æˆ‘ä»¬:å¦‚æœåœ¨ finally ä¸­å‡ºç°äº† returnï¼Œä¼šåæ‰å¼‚å¸¸ğŸ˜±ğŸ˜±ğŸ˜±ï¼Œå¯ä»¥è¯•ä¸€ä¸‹ä¸‹é¢çš„ä»£ç  public class Demo3_12_1 { public static void main(String[] args) { int result = test(); System.out.println(result); } public static int test() { try { int i = 1/0; return 10; } finally { return 20; } } } finallyå¯¹è¿”å›å€¼çš„å½±å“ public class Demo3_12_2 { public static void main(String[] args) { int result = test(); System.out.println(result); } public static int test() { int i = 10; try { return i; } finally { i = 20; } } } public static int test(); descriptor: ()I flags: ACC_PUBLIC, ACC_STATIC Code: stack=1, locals=3, args_size=0 0: bipush 10 // &lt;- 10 æ”¾å…¥æ ˆé¡¶ 2: istore_0 // 10-&gt;i 3: iload_0 // &lt;- i(10) 4: istore_1 // 10 -&gt; slot 1ï¼Œæš‚å­˜è‡³ slot 1ï¼Œç›®çš„æ˜¯ä¸ºäº†å›ºå®šè¿”å›å€¼ 5: bipush 20 // &lt;- 20 æ”¾å…¥æ ˆé¡¶ 7: istore_0 // 20-&gt;i 8: iload_1 // &lt;- slot 1(10) è½½å…¥ slot 1 æš‚å­˜çš„å€¼ 9: ireturn // è¿”å›æ ˆé¡¶çš„ int(10) 10: astore_2 11: bipush 20 13: istore_0 14: aload_2 15: athrow Exception table: from to target type 3 5 10 any LineNumberTable: ... LocalVariableTable: Start Length Slot Name Signature 3 13 0 i I StackMapTable: ... synchronized public class Demo3_13 { public static void main(String[] args) { Object lock = new Object(); synchronized (lock) { System.out.println(&quot;ok&quot;); } } } monitorenteråŠ é”ï¼Œmonitorexitè§£é” æ³¨æ„ æ–¹æ³•çº§åˆ«çš„synchronizedä¸ä¼šåœ¨å­—èŠ‚ç æŒ‡ä»¤ä¸­æœ‰æ‰€ä½“ç° ç¼–è¯‘æœŸå¤„ç† è¯­æ³•ç³– ï¼Œå…¶å®å°±æ˜¯æŒ‡ java ç¼–è¯‘å™¨æŠŠ *.java æºç ç¼–è¯‘ä¸º *.class å­—èŠ‚ç çš„è¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨ç”Ÿæˆ å’Œè½¬æ¢çš„ä¸€äº›ä»£ç ï¼Œä¸»è¦æ˜¯ä¸ºäº†å‡è½»ç¨‹åºå‘˜çš„è´Ÿæ‹…ï¼Œç®—æ˜¯ java ç¼–è¯‘å™¨ç»™æˆ‘ä»¬çš„ä¸€ä¸ªé¢å¤–ç¦åˆ©(ç»™ç³–åƒå˜›)æ³¨æ„ï¼Œä»¥ä¸‹ä»£ç çš„åˆ†æï¼Œå€ŸåŠ©äº† javap å·¥å…·ï¼Œidea çš„åç¼–è¯‘åŠŸèƒ½ï¼Œidea æ’ä»¶ jclasslib ç­‰å·¥å…·ã€‚å¦å¤–ï¼Œ ç¼–è¯‘å™¨è½¬æ¢çš„ç»“æœç›´æ¥å°±æ˜¯ class å­—èŠ‚ç ï¼Œåªæ˜¯ä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œç»™å‡ºäº† å‡ ä¹ç­‰ä»· çš„ java æºç æ–¹å¼ï¼Œå¹¶ ä¸æ˜¯ç¼–è¯‘å™¨è¿˜ä¼šè½¬æ¢å‡ºä¸­é—´çš„ java æºç ï¼Œåˆ‡è®°ã€‚ é»˜è®¤æ„é€ å™¨ public class Candy1 { } ç¼–è¯‘æˆclassåçš„ä»£ç  public class Candy1 { // è¿™ä¸ªæ— å‚æ„é€ æ˜¯ç¼–è¯‘å™¨å¸®åŠ©æˆ‘ä»¬åŠ ä¸Šçš„ public Candy1() { super(); // å³è°ƒç”¨çˆ¶ç±» Object çš„æ— å‚æ„é€ æ–¹æ³•ï¼Œå³è°ƒç”¨ java/lang/Object.&quot; &lt;init&gt;&quot;:()V } } è‡ªåŠ¨æ‹†è£…ç®± è¿™ä¸ªç‰¹æ€§æ˜¯JDK 5å¼€å§‹åŠ å…¥çš„ public class Candy2 { public static void main(String[] args) { Integer x = 1; int y = x; } } è¿™æ®µä»£ç åœ¨JDK 5ä¹‹å‰æ˜¯æ— æ³•ç¼–è¯‘é€šè¿‡çš„ï¼Œå¿…é¡»æ”¹å†™ä¸º: public class Candy2 { public static void main(String[] args) { Integer x = Integer.valueOf(1); int y = x.intValue(); } } æ˜¾ç„¶ä¹‹å‰ç‰ˆæœ¬çš„ä»£ç å¤ªéº»çƒ¦äº†ï¼Œéœ€è¦åœ¨åŸºæœ¬ç±»å‹å’ŒåŒ…è£…ç±»å‹ä¹‹é—´æ¥å›è½¬æ¢(å°¤å…¶æ˜¯é›†åˆç±»ä¸­æ“ä½œçš„éƒ½æ˜¯ åŒ…è£…ç±»å‹)ï¼Œå› æ­¤è¿™äº›è½¬æ¢çš„äº‹æƒ…åœ¨ JDK 5 ä»¥åéƒ½ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µå®Œæˆã€‚å³ ä»£ç ç‰‡æ®µ1 éƒ½ä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¢«è½¬æ¢ä¸º ä»£ç ç‰‡æ®µ2 æ³›å‹é›†åˆå–å€¼ æ³›å‹ä¹Ÿæ˜¯åœ¨ JDK 5 å¼€å§‹åŠ å…¥çš„ç‰¹æ€§ï¼Œä½† java åœ¨ç¼–è¯‘æ³›å‹ä»£ç åä¼šæ‰§è¡Œ æ³›å‹æ“¦é™¤ çš„åŠ¨ä½œï¼Œå³æ³›å‹ä¿¡æ¯åœ¨ç¼–è¯‘ä¸ºå­—èŠ‚ç ä¹‹åå°±ä¸¢å¤±äº†ï¼Œå®é™…çš„ç±»å‹éƒ½å½“åšäº† Object ç±»å‹æ¥å¤„ç†: public class Candy3 { public static void main(String[] args) { List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(10); // å®é™…è°ƒç”¨çš„æ˜¯ List.add(Object e) Integer x = list.get(0); // å®é™…è°ƒç”¨çš„æ˜¯ Object obj = List.get(int index); } } æ‰€ä»¥åœ¨å–å€¼æ—¶ï¼Œç¼–è¯‘å™¨çœŸæ­£ç”Ÿæˆçš„å­—èŠ‚ç ä¸­ï¼Œè¿˜è¦é¢å¤–åšä¸€ä¸ªç±»å‹è½¬æ¢çš„æ“ä½œ // éœ€è¦å°† Object è½¬ä¸º Integer Integer x = (Integer)list.get(0); å¦‚æœå‰é¢çš„xå˜é‡ç±»å‹ä¿®æ”¹ä¸ºintåŸºæœ¬ç±»å‹é‚£ä¹ˆæœ€ç»ˆç”Ÿæˆçš„å­—èŠ‚ç æ˜¯ // éœ€è¦å°† Object è½¬ä¸º Integer, å¹¶æ‰§è¡Œæ‹†ç®±æ“ä½œ int x = ((Integer)list.get(0)).intValue(); æ“¦é™¤çš„æ˜¯å­—èŠ‚ç ä¸Šçš„æ³›å‹ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ° LocalVariableTypeTable ä»ç„¶ä¿ç•™äº†æ–¹æ³•å‚æ•°æ³›å‹çš„ä¿¡æ¯ LocalVariableTable: Start Length Slot Name Signature 0 32 0 args [Ljava/lang/String; 8 24 1 list Ljava/util/List; LocalVariableTypeTable: Start Length Slot Name Signature 8 24 1 list Ljava/util/List&lt;Ljava/lang/Integer;&gt;; ä½¿ç”¨åå°„ï¼Œä»ç„¶èƒ½å¤Ÿè·å¾—è¿™äº›ä¿¡æ¯ public Set&lt;Integer&gt; test(List&lt;String&gt; list, Map&lt;Integer, Object&gt; map) { } Method test = Candy3.class.getMethod(&quot;test&quot;, List.class, Map.class); Type[] types = test.getGenericParameterTypes(); for (Type type : types) { if (type instanceof ParameterizedType) { ParameterizedType parameterizedType = (ParameterizedType) type; System.out.println(&quot;åŸå§‹ç±»å‹ - &quot; + parameterizedType.getRawType()); Type[] arguments = parameterizedType.getActualTypeArguments(); for (int i = 0; i &lt; arguments.length; i++) { System.out.printf(&quot;æ³›å‹å‚æ•°[%d] - %s\\n&quot;, i, arguments[i]); } } } //è¾“å‡ºç»“æœ åŸå§‹ç±»å‹ - interface java.util.List æ³›å‹å‚æ•°[0] - class java.lang.String åŸå§‹ç±»å‹ - interface java.util.Map æ³›å‹å‚æ•°[0] - class java.lang.Integer æ³›å‹å‚æ•°[1] - class java.lang.Object å¯å˜å‚æ•° å¯å˜å‚æ•°ä¹Ÿæ˜¯JDK 5å¼€å§‹åŠ å…¥çš„æ–°ç‰¹æ€§ public class Candy4 { public static void foo(String... args) { String[] array = args; // ç›´æ¥èµ‹å€¼ System.out.println(array); } public static void main(String[] args) { foo(&quot;hello&quot;, &quot;world&quot;); } } å¯å˜å‚æ•° String... args å…¶å®æ˜¯ä¸€ä¸ª String[] args ï¼Œä»ä»£ç ä¸­çš„èµ‹å€¼è¯­å¥ä¸­å°±å¯ä»¥çœ‹å‡ºæ¥ã€‚ åŒæ · java ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æœŸé—´å°†ä¸Šè¿°ä»£ç å˜æ¢ä¸º: public class Candy4 { public static void foo(String[] args) { String[] array = args; // ç›´æ¥èµ‹å€¼ System.out.println(array); } public static void main(String[] args) { foo(new String[]{&quot;hello&quot;, &quot;world&quot;}); } } æ³¨æ„ å¦‚æœè°ƒç”¨äº†foo()åˆ™ç­‰ä»·ä»£ç ä¸ºfoo(new String[]{})ï¼Œåˆ›å»ºäº†ä¸€ä¸ªç©ºçš„æ•°ç»„ï¼Œè€Œä¸ä¼šä¼ é€’nullè¿›å» foreachå¾ªç¯ ä»æ˜¯JDK5å¼€å§‹å¼•å…¥çš„è¯­æ³•ç³–ï¼Œ æ•°ç»„çš„å¾ªç¯ï¼š public class Candy5_1 { public static void main(String[] args) { int[] array = {1, 2, 3, 4, 5}; // æ•°ç»„èµ‹åˆå€¼çš„ç®€åŒ–å†™æ³•ä¹Ÿæ˜¯è¯­æ³•ç³–å“¦ for (int e : array) { System.out.println(e); } } } ä¼šè¢«ç¼–è¯‘å™¨è½¬æ¢ä¸º public class Candy5_1 { public Candy5_1() { } public static void main(String[] args) { int[] array = new int[]{1, 2, 3, 4, 5}; for(int i = 0; i &lt; array.length; ++i) { int e = array[i]; System.out.println(e); } } } é›†åˆçš„å¾ªç¯ public class Candy5_2 { public static void main(String[] args) { List&lt;Integer&gt; list = Arrays.asList(1,2,3,4,5); for (Integer i : list) { System.out.println(i); } } } å®é™…è¢«ç¼–è¯‘å™¨è½¬æ¢ä¸ºå¯¹è¿­ä»£å™¨çš„è°ƒç”¨ public class Candy5_2 { public Candy5_2() { } public static void main(String[] args) { List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4, 5); Iterator iter = list.iterator(); while(iter.hasNext()) { Integer e = (Integer)iter.next(); System.out.println(e); } } } æ³¨æ„ foreachå¾ªç¯å†™æ³•ï¼Œèƒ½å¤Ÿé…åˆæ•°ç»„ï¼Œä»¥åŠæ‰€æœ‰å®ç°äº†iterableæ¥å£çš„é›†åˆç±»ä¸€èµ·é£Ÿç”¨ï¼Œå…¶ä¸­Iterableç”¨æ¥è·å–é›†åˆçš„è¿­ä»£å™¨ switchå­—ç¬¦ä¸² ä» JDK 7 å¼€å§‹ï¼Œswitch å¯ä»¥ä½œç”¨äºå­—ç¬¦ä¸²å’Œæšä¸¾ç±»ï¼Œè¿™ä¸ªåŠŸèƒ½å…¶å®ä¹Ÿæ˜¯è¯­æ³•ç³– public class Candy6_1 { public static void choose(String str) { switch (str) { case &quot;hello&quot;: { System.out.println(&quot;h&quot;); break; } case &quot;world&quot;: { System.out.println(&quot;w&quot;); break; } } } } æ³¨æ„ switch é…åˆ String å’Œæšä¸¾ä½¿ç”¨æ—¶ï¼Œå˜é‡ä¸èƒ½ä¸ºnullï¼ŒåŸå› åˆ†æå®Œè¯­æ³•ç³–è½¬æ¢åçš„ä»£ç åº”å½“è‡ªç„¶æ¸…æ¥š public class Candy6_1 { public Candy6_1() { } public static void choose(String str) { byte x = -1; switch(str.hashCode()) { case 99162322: // hello çš„ hashCode if (str.equals(&quot;hello&quot;)) { x = 0; } break; case 113318802: // world çš„ hashCode if (str.equals(&quot;world&quot;)) { x = 1; } } switch(x) { case 0: System.out.println(&quot;h&quot;); break; case 1: System.out.println(&quot;w&quot;); } } } å¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œäº†ä¸¤é switchï¼Œç¬¬ä¸€éæ˜¯æ ¹æ®å­—ç¬¦ä¸²çš„ hashCode å’Œ equals å°†å­—ç¬¦ä¸²çš„è½¬æ¢ä¸ºç›¸åº” byte ç±»å‹ï¼Œç¬¬äºŒéæ‰æ˜¯åˆ©ç”¨ byte æ‰§è¡Œè¿›è¡Œæ¯”è¾ƒã€‚ä¸ºä»€ä¹ˆç¬¬ä¸€éæ—¶å¿…é¡»æ—¢æ¯”è¾ƒ hashCodeï¼Œåˆåˆ©ç”¨ equals æ¯”è¾ƒå‘¢?hashCode æ˜¯ä¸ºäº†æé«˜æ•ˆç‡ï¼Œå‡å°‘å¯ èƒ½çš„æ¯”è¾ƒ;è€Œ equals æ˜¯ä¸ºäº†é˜²æ­¢ hashCode å†²çªï¼Œä¾‹å¦‚ BM å’Œ C. è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„hashCodeå€¼éƒ½æ˜¯2123 ï¼Œå¦‚æœæœ‰å¦‚ä¸‹ä»£ç : public class Candy6_2 { public static void choose(String str) { switch (str) { case &quot;BM&quot;: { System.out.println(&quot;h&quot;); break; } case &quot;C.&quot;: { System.out.println(&quot;w&quot;); break; } } } } ä¼šè¢«ç¼–è¯‘å™¨è½¬æ¢ä¸º public class Candy6_2 { public Candy6_2() { } public static void choose(String str) { byte x = -1; switch(str.hashCode()) { case 2123: // hashCode å€¼å¯èƒ½ç›¸åŒï¼Œéœ€è¦è¿›ä¸€æ­¥ç”¨ equals æ¯”è¾ƒ if (str.equals(&quot;C.&quot;)){ x = 1; } else if (str.equals(&quot;BM&quot;)) { x = 0; } default: switch(x) { case 0: System.out.println(&quot;h&quot;); break; case 1: System.out.println(&quot;w&quot;); } } } } switchæšä¸¾ switchæšä¸¾çš„ä¾‹å­ï¼ŒåŸå§‹ä»£ç ï¼š enum Sex { MALE, FEMALE } public class Candy7 { public static void foo(Sex sex) { switch (sex) { case MALE: System.out.println(&quot;ç”·&quot;); break; case FEMALE: System.out.println(&quot;å¥³&quot;); break; } } } è½¬æ¢åä»£ç  public class Candy7 { /** * å®šä¹‰ä¸€ä¸ªåˆæˆç±»(ä»… jvm ä½¿ç”¨ï¼Œå¯¹æˆ‘ä»¬ä¸å¯è§) * ç”¨æ¥æ˜ å°„æšä¸¾çš„ ordinal ä¸æ•°ç»„å…ƒç´ çš„å…³ç³» * æšä¸¾çš„ ordinal è¡¨ç¤ºæšä¸¾å¯¹è±¡çš„åºå·ï¼Œä» 0 å¼€å§‹ * å³ MALE çš„ ordinal()=0ï¼ŒFEMALE çš„ ordinal()=1 */ static class $MAP { // æ•°ç»„å¤§å°å³ä¸ºæšä¸¾å…ƒç´ ä¸ªæ•°ï¼Œé‡Œé¢å­˜å‚¨caseç”¨æ¥å¯¹æ¯”çš„æ•°å­— static int[] map = new int[2]; static { map[Sex.MALE.ordinal()] = 1; map[Sex.FEMALE.ordinal()] = 2; } } public static void foo(Sex sex) { int x = $MAP.map[sex.ordinal()]; switch (x) { case 1: System.out.println(&quot;ç”·&quot;); break; case 2: System.out.println(&quot;å¥³&quot;); break; } } } æšä¸¾ç±» JDK 7 æ–°å¢äº†æšä¸¾ç±»ï¼Œä»¥å‰é¢çš„æ€§åˆ«æšä¸¾ä¸ºä¾‹: enum Sex { MALE, FEMALE } è½¬æ¢åä»£ç  public final class Sex extends Enum&lt;Sex&gt; { public static final Sex MALE; public static final Sex FEMALE; private static final Sex[] $VALUES; static { MALE = new Sex(&quot;MALE&quot;, 0); FEMALE = new Sex(&quot;FEMALE&quot;, 1); $VALUES = new Sex[]{MALE, FEMALE}; } /** * Sole constructor. Programmers cannot invoke this constructor. * It is for use by code emitted by the compiler in response to * enum type declarations. * * @param name - The name of this enum constant, which is the identifier * used to declare it. * @param ordinal - The ordinal of this enumeration constant (its position * in the enum declaration, where the initial constant is assigned */ private Sex(String name, int ordinal) { super(name, ordinal); } public static Sex[] values() { return $VALUES.clone(); } public static Sex valueOf(String name) { return Enum.valueOf(Sex.class, name); } } try-with-resources JDK 7å¼€å§‹æ–°å¢äº†å¯¹éœ€è¦å…³é—­çš„èµ„æºå¤„ç†çš„ç‰¹æ®Šè¯­æ³•try-with-resources: try(èµ„æºå˜é‡ = åˆ›å»ºèµ„æºå¯¹è±¡){ } catch( ) { } å…¶ä¸­èµ„æºå¯¹è±¡éœ€è¦å®ç°AutoCloseableæ¥å£ï¼Œä¾‹å¦‚InputStreamã€OutStreamã€Connectionã€Statementã€ResultSetç­‰æ¥å£éƒ½å®ç°äº†AutoCloseableä½¿ç”¨try-with-resourceså¯ä»¥ä¸ç”¨å†™finallyè¯­æ³•å—ï¼Œç¼–è¯‘å™¨ä¼šå¸®åŠ©ç”Ÿæˆå…³é—­èµ„æºä»£ç  public class Candy9 { public static void main(String[] args) { try(InputStream is = new FileInputStream(&quot;d:\\\\1.txt&quot;)) { System.out.println(is); } catch (IOException e) { e.printStackTrace(); } } } ä¼šè¢«è½¬æ¢ä¸º public class Candy9 { public Candy9() { } public static void main(String[] args) { try { InputStream is = new FileInputStream(&quot;d:\\\\1.txt&quot;); Throwable t = null; try { System.out.println(is); } catch (Throwable e1) { // t æ˜¯æˆ‘ä»¬ä»£ç å‡ºç°çš„å¼‚å¸¸ t = e1; throw e1; } finally { // åˆ¤æ–­äº†èµ„æºä¸ä¸ºç©º if (is != null) { // å¦‚æœæˆ‘ä»¬ä»£ç æœ‰å¼‚å¸¸ if (t != null) { try { is.close(); } catch (Throwable e2) { // å¦‚æœ close å‡ºç°å¼‚å¸¸ï¼Œä½œä¸ºè¢«å‹åˆ¶å¼‚å¸¸æ·»åŠ  t.addSuppressed(e2); } } else { // å¦‚æœæˆ‘ä»¬ä»£ç æ²¡æœ‰å¼‚å¸¸ï¼Œclose å‡ºç°çš„å¼‚å¸¸å°±æ˜¯æœ€å catch å—ä¸­çš„ e is.close(); } } } } catch (IOException e) { e.printStackTrace(); } } } ä¸ºä»€ä¹ˆè¦è®¾è®¡ä¸€ä¸ªaddSuppressed(Throwable e)(æ·»åŠ è¢«å‹åˆ¶å¼‚å¸¸)çš„æ–¹æ³•ï¼š æ˜¯ä¸ºäº†é˜²æ­¢å¼‚å¸¸ä¿¡æ¯çš„ä¸¢å¤±(æƒ³æƒ³ try-with-resources ç”Ÿæˆçš„ fianlly ä¸­å¦‚æœæŠ›å‡ºäº†å¼‚å¸¸) public class Test6 { public static void main(String[] args) { try (MyResource resource = new MyResource()) { int i = 1/0; } catch (Exception e) { e.printStackTrace(); } } } class MyResource implements AutoCloseable { public void close() throws Exception { throw new Exception(&quot;close å¼‚å¸¸&quot;); } } è¾“å‡ºï¼š java.lang.ArithmeticException: / by zero at test.Test6.main(Test6.java:7) Suppressed: java.lang.Exception: close å¼‚å¸¸ at test.MyResource.close(Test6.java:18) at test.Test6.main(Test6.java:6) å¦‚ä»¥ä¸Šä»£ç æ‰€ç¤ºï¼Œä¸¤ä¸ªå¼‚å¸¸ä¿¡æ¯éƒ½ä¸ä¼šä¸¢å¤± æ–¹æ³•é‡å†™æ—¶çš„æ¡¥æ¥æ–¹æ³• æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ–¹æ³•é‡å†™æ—¶å¯¹è¿”å›å€¼åˆ†ä¸¤ç§æƒ…å†µï¼š çˆ¶å­ç±»çš„è¿”å›å€¼å®Œå…¨ä¸€è‡´ å­ç±»è¿”å›å€¼å¯ä»¥æ˜¯å¤«ç±»è¿”å›å€¼çš„å­ç±» class A { public Number m() { return 1; } } class B extends A { @Override // å­ç±» m æ–¹æ³•çš„è¿”å›å€¼æ˜¯ Integer æ˜¯çˆ¶ç±» m æ–¹æ³•è¿”å›å€¼ Number çš„å­ç±» public Integer m() { return 2; } } å¯¹äºå­ç±»ï¼Œjavaç¼–è¯‘å™¨ä¼šåšå¦‚ä¸‹å¤„ç† class B extends A { public Integer m() { return 2; } // æ­¤æ–¹æ³•æ‰æ˜¯çœŸæ­£é‡å†™äº†çˆ¶ç±» public Number m() æ–¹æ³• public synthetic bridge Number m() { // è°ƒç”¨ public Integer m() return m(); } } å…¶ä¸­æ¡¥æ¥æ–¹æ³•æ¯”è¾ƒç‰¹æ®Šï¼Œä»…å¯¹ java è™šæ‹Ÿæœºå¯è§ï¼Œå¹¶ä¸”ä¸åŸæ¥çš„ public Integer m() æ²¡æœ‰å‘½åå†²çªï¼Œå¯ä»¥ç”¨ä¸‹é¢åå°„ä»£ç æ¥éªŒè¯ for (Method m : B.class.getDeclaredMethods()) { System.out.println(m); } public java.lang.Integer test.candy.B.m() public java.lang.Number test.candy.B.m() åŒ¿åå†…éƒ¨ç±» public class Candy11 { public static void main(String[] args) { Runnable runnable = new Runnable() { @Override public void run() { System.out.println(&quot;ok&quot;); } }; } } è½¬æ¢åçš„ä»£ç  // é¢å¤–ç”Ÿæˆçš„ç±» final class Candy11$1 implements Runnable { Candy11$1() { } public void run() { System.out.println(&quot;ok&quot;); } } public class Candy11 { public static void main(String[] args) { Runnable runnable = new Candy11$1(); } } å¼•ç”¨å±€éƒ¨å˜é‡çš„åŒ¿åå†…éƒ¨ç±»ï¼Œæºä»£ç ï¼š public class Candy11 { public static void test(final int x) { Runnable runnable = new Runnable() { @Override public void run() { System.out.println(&quot;ok:&quot; + x); } }; } } è½¬æ¢åçš„ä»£ç  // é¢å¤–ç”Ÿæˆçš„ç±» final class Candy11$1 implements Runnable { int val$x; Candy11$1(int x) { this.val$x = x; } public void run() { System.out.println(&quot;ok:&quot; + this.val$x); } } public class Candy11 { public static void test(final int x) { Runnable runnable = new Candy11$1(x); } } æ³¨æ„ è¿™åŒæ—¶è§£é‡Šäº†ä¸ºä»€ä¹ˆåŒ¿åå†…éƒ¨ç±»å¼•ç”¨å±€éƒ¨å˜é‡æ—¶ï¼Œå±€éƒ¨å˜é‡å¿…é¡»æ˜¯ final çš„:å› ä¸ºåœ¨åˆ›å»º Candy11$1 å¯¹è±¡æ—¶ï¼Œå°† x çš„å€¼èµ‹å€¼ç»™äº† Candy111å¯¹è±¡çš„val1 å¯¹è±¡çš„ val1å¯¹è±¡çš„valx å±æ€§ï¼Œæ‰€ä»¥ x ä¸åº”è¯¥å†å‘ç”Ÿå˜åŒ–äº†ï¼Œå¦‚æœå˜åŒ–ï¼Œé‚£ä¹ˆ val$x å±æ€§æ²¡æœ‰æœºä¼šå†è·Ÿç€ä¸€èµ·å˜åŒ– ç±»åŠ è½½é˜¶æ®µ åŠ è½½ å°†ç±»çš„å­—èŠ‚ç è½½å…¥æ–¹æ³•åŒºä¸­ï¼Œå†…éƒ¨é‡‡ç”¨ C++ çš„ instanceKlass æè¿° java ç±»ï¼Œå®ƒçš„é‡è¦ field æœ‰: _java_mirror å³ java çš„ç±»é•œåƒï¼Œä¾‹å¦‚å¯¹ String æ¥è¯´ï¼Œå°±æ˜¯ String.classï¼Œä½œç”¨æ˜¯æŠŠ klass æš´ éœ²ç»™ java ä½¿ç”¨ _super å³çˆ¶ç±» _fields å³æˆå‘˜å˜é‡ _methods å³æ–¹æ³• _constants å³å¸¸é‡æ±  _class_loader å³ç±»åŠ è½½å™¨ _vtable è™šæ–¹æ³•è¡¨ _itable æ¥å£æ–¹æ³•è¡¨ å¦‚æœè¿™ä¸ªç±»è¿˜æœ‰çˆ¶ç±»æ²¡æœ‰åŠ è½½ï¼Œå…ˆåŠ è½½çˆ¶ç±» åŠ è½½å’Œé“¾æ¥å¯èƒ½æ˜¯äº¤æ›¿è¿è¡Œçš„ æ³¨æ„ instanceKlassè¿™æ ·çš„ã€å…ƒæ•°æ®ã€‘æ˜¯å­˜å‚¨åœ¨æ–¹æ³•åŒº(1.8åçš„å…ƒç©ºé—´å†…)ï¼Œä½†_java_mirroræ˜¯å­˜å‚¨åœ¨å †ä¸­çš„ å¯ä»¥é€šè¿‡HSDBå·¥å…·æ¥æŸ¥çœ‹ Person.classæœ‰instanceKlassçš„åœ°å€ä¿¡æ¯ï¼Œ_java_mirrorä¸­æœ‰Person.classçš„åœ°å€ä¿¡æ¯ å¯¹è±¡å®ä¾‹åŒ–åï¼Œæœ‰ä¸€ä¸ªå¯¹è±¡å¤´ï¼Œå…¶ä¸­åŒ…å«äº†classåœ°å€ï¼Œå¦‚æœæƒ³è·å–classä¿¡æ¯é‚£å°±ä¼šæ ¹æ®å¯¹è±¡å¤´ä¸­çš„classåœ°å€æ¥è·å–person.classå†é—´æ¥åˆ°å…ƒç©ºé—´æ‰¾åˆ°instanceKlassï¼Œä»å…ƒç©ºé—´ä¸­æ‰¾methodç­‰ä¿¡æ¯ é“¾æ¥ éªŒè¯ éªŒè¯ç±»æ˜¯å¦ç¬¦åˆJVMè§„èŒƒï¼Œå®‰å…¨æ€§æ£€æŸ¥ç”¨ UE ç­‰æ”¯æŒäºŒè¿›åˆ¶çš„ç¼–è¾‘å™¨ä¿®æ”¹ HelloWorld.class çš„é­”æ•°ï¼Œåœ¨æ§åˆ¶å°è¿è¡Œ E:\\git\\jvm\\out\\production\\jvm&gt;java cn.itcast.jvm.t5.HelloWorld Error: A JNI error has occurred, please check your installation and try again Exception in thread &quot;main&quot; java.lang.ClassFormatError: Incompatible magic value 3405691578 in class file cn/itcast/jvm/t5/HelloWorld at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:763) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) at java.net.URLClassLoader.defineClass(URLClassLoader.java:467) at java.net.URLClassLoader.access$100(URLClassLoader.java:73) at java.net.URLClassLoader$1.run(URLClassLoader.java:368) at java.net.URLClassLoader$1.run(URLClassLoader.java:362) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:361) at java.lang.ClassLoader.loadClass(ClassLoader.java:424) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:495) å‡†å¤‡ ä¸º static å˜é‡åˆ†é…ç©ºé—´ï¼Œè®¾ç½®é»˜è®¤å€¼ static å˜é‡åœ¨ JDK 7 ä¹‹å‰å­˜å‚¨äº instanceKlass æœ«å°¾ï¼Œä» JDK 7 å¼€å§‹ï¼Œå­˜å‚¨äº _java_mirror æœ«å°¾ static å˜é‡åˆ†é…ç©ºé—´å’Œèµ‹å€¼æ˜¯ä¸¤ä¸ªæ­¥éª¤ï¼Œåˆ†é…ç©ºé—´åœ¨å‡†å¤‡é˜¶æ®µå®Œæˆï¼Œèµ‹å€¼åœ¨åˆå§‹åŒ–é˜¶æ®µå®Œæˆ å¦‚æœ static å˜é‡æ˜¯ final çš„åŸºæœ¬ç±»å‹ï¼Œä»¥åŠå­—ç¬¦ä¸²å¸¸é‡ï¼Œé‚£ä¹ˆç¼–è¯‘é˜¶æ®µå€¼å°±ç¡®å®šäº†ï¼Œèµ‹å€¼åœ¨å‡†å¤‡é˜¶æ®µå®Œæˆ å¦‚æœ static å˜é‡æ˜¯ final çš„ï¼Œä½†å±äºå¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆèµ‹å€¼ä¹Ÿä¼šåœ¨åˆå§‹åŒ–é˜¶æ®µå®Œæˆ è§£æ å°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨è§£æä¸ºç›´æ¥å¼•ç”¨(ç›´æ¥å¼•ç”¨å¯ä»¥çŸ¥é“åœ¨å†…å­˜ä¸­çš„ä½ç½®) package cn.itcast.jvm.t3.load; /** * è§£æçš„å«ä¹‰ */ public class Load2 { public static void main(String[] args) throws ClassNotFoundException, IOException { ClassLoader classloader = Load2.class.getClassLoader(); // loadClass æ–¹æ³•ä¸ä¼šå¯¼è‡´ç±»çš„è§£æå’Œåˆå§‹åŒ– Class&lt;?&gt; c = classloader.loadClass(&quot;cn.itcast.jvm.t3.load.C&quot;); //ä¼šè¿›è¡Œç±»çš„è§£æå’Œåˆå§‹åŒ– // new C(); System.in.read(); } } class C { D d = new D(); } class D { } åˆå§‹åŒ– ()Væ–¹æ³•åˆå§‹åŒ–å³è°ƒç”¨&lt;cinit&gt;()Væ–¹æ³•ï¼Œè™šæ‹Ÿæœºä¼šä¿è¯è¿™ä¸ªç±»çš„ã€æ„é€ æ–¹æ³•ã€‘çš„çº¿ç¨‹å®‰å…¨ å‘ç”Ÿçš„æ—¶æœº æ¦‚æ‹¬å¾—è¯´ï¼Œç±»åˆå§‹åŒ–æ˜¯ã€æ‡’æƒ°çš„ã€‘ main æ–¹æ³•æ‰€åœ¨çš„ç±»ï¼Œæ€»ä¼šè¢«é¦–å…ˆåˆå§‹åŒ– é¦–æ¬¡è®¿é—®è¿™ä¸ªç±»çš„é™æ€å˜é‡æˆ–é™æ€æ–¹æ³•æ—¶ï¼Œä¼šå¯¼è‡´è¿™ä¸ªç±»çš„åˆå§‹åŒ– å­ç±»åˆå§‹åŒ–ï¼Œå¦‚æœçˆ¶ç±»è¿˜æ²¡åˆå§‹åŒ–ï¼Œä¼šå¼•å‘çˆ¶ç±»çš„åˆå§‹åŒ– å­ç±»è®¿é—®çˆ¶ç±»çš„é™æ€å˜é‡ï¼Œåªä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ– Class.forName new ä¼šå¯¼è‡´åˆå§‹åŒ– ä¸ä¼šå¯¼è‡´ç±»åˆå§‹åŒ–çš„æƒ…å†µ è®¿é—®ç±»çš„ static final é™æ€å¸¸é‡(åŸºæœ¬ç±»å‹å’Œå­—ç¬¦ä¸²)ä¸ä¼šè§¦å‘åˆå§‹åŒ– ç±»å¯¹è±¡.class ä¸ä¼šè§¦å‘åˆå§‹åŒ– åˆ›å»ºè¯¥ç±»çš„æ•°ç»„ä¸ä¼šè§¦å‘åˆå§‹åŒ– ç±»åŠ è½½å™¨çš„ loadClass æ–¹æ³• Class.forName çš„å‚æ•° 2 ä¸º false æ—¶ å®éªŒ class A { static int a = 0; static { System.out.println(&quot;a init&quot;); } } class B extends A { final static double b = 5.0; static boolean c = false; static { System.out.println(&quot;b init&quot;); } } éªŒè¯(å®éªŒæ—¶è¯·å…ˆå…¨éƒ¨æ³¨é‡Šï¼Œæ¯æ¬¡åªæ‰§è¡Œå…¶ä¸­ä¸€ä¸ª) public class Load3 { static { System.out.println(&quot;main init&quot;); } public static void main(String[] args) throws ClassNotFoundException { // 1. é™æ€å¸¸é‡(åŸºæœ¬ç±»å‹å’Œå­—ç¬¦ä¸²)ä¸ä¼šè§¦å‘åˆå§‹åŒ– System.out.println(B.b); // 2. ç±»å¯¹è±¡.class ä¸ä¼šè§¦å‘åˆå§‹åŒ– System.out.println(B.class); // 3. åˆ›å»ºè¯¥ç±»çš„æ•°ç»„ä¸ä¼šè§¦å‘åˆå§‹åŒ– System.out.println(new B[0]); // 4. ä¸ä¼šåˆå§‹åŒ–ç±» Bï¼Œä½†ä¼šåŠ è½½ Bã€A ClassLoader cl = Thread.currentThread().getContextClassLoader(); cl.loadClass(&quot;cn.itcast.jvm.t3.B&quot;); // 5. ä¸ä¼šåˆå§‹åŒ–ç±» Bï¼Œä½†ä¼šåŠ è½½ Bã€A ClassLoader c2 = Thread.currentThread().getContextClassLoader(); Class.forName(&quot;cn.itcast.jvm.t3.B&quot;, false, c2); // 1. é¦–æ¬¡è®¿é—®è¿™ä¸ªç±»çš„é™æ€å˜é‡æˆ–é™æ€æ–¹æ³•æ—¶ System.out.println(A.a); // 2. å­ç±»åˆå§‹åŒ–ï¼Œå¦‚æœçˆ¶ç±»è¿˜æ²¡åˆå§‹åŒ–ï¼Œä¼šå¼•å‘ System.out.println(B.c); // 3. å­ç±»è®¿é—®çˆ¶ç±»é™æ€å˜é‡ï¼Œåªè§¦å‘çˆ¶ç±»åˆå§‹åŒ– System.out.println(B.a); // 4. ä¼šåˆå§‹åŒ–ç±» Bï¼Œå¹¶å…ˆåˆå§‹åŒ–ç±» A Class.forName(&quot;cn.itcast.jvm.t3.B&quot;); } } ç»ƒä¹  ä»å­—èŠ‚ç åˆ†æï¼Œä½¿ç”¨aï¼Œbï¼Œcè¿™ä¸‰ä¸ªå¸¸é‡æ˜¯å¦ä¼šå¯¼è‡´Eåˆå§‹åŒ– public class Load4 { public static void main(String[] args) { System.out.println(E.a); System.out.println(E.b); System.out.println(E.c); } } class E { //ä¸ä¼š public static final int a = 10; //ä¸ä¼š public static final String b = &quot;hello&quot;; //ä¼š //Integer.valueOf(20) public static final Integer c = 20; } å…¸å‹åº”ç”¨-å®Œæˆæ‡’æƒ°åˆå§‹åŒ–å•ä¾‹æ¨¡å¼ public final class Singleton { private Singleton() { } // å†…éƒ¨ç±»ä¸­ä¿å­˜å•ä¾‹ private static class LazyHolder { static final Singleton INSTANCE = new Singleton(); } //å¦‚æœåªè°ƒç”¨å¤–éƒ¨ç±»ä¸­çš„é™æ€æ–¹æ³•ï¼Œä¼šå¯¼è‡´å¤–éƒ¨ç±»çš„åˆå§‹åŒ–ï¼Œå¹¶ä¸ä¼šå¯¼è‡´å†…éƒ¨ç±»çš„åˆå§‹åŒ– // ç¬¬ä¸€æ¬¡è°ƒç”¨ getInstance æ–¹æ³•ï¼Œæ‰ä¼šå¯¼è‡´å†…éƒ¨ç±»åŠ è½½å’Œåˆå§‹åŒ–å…¶é™æ€æˆå‘˜ public static Singleton getInstance() { return LazyHolder.INSTANCE; } } ä»¥ä¸Šçš„å®ç°ç‰¹ç‚¹æ˜¯ï¼š æ‡’æƒ°å®ä¾‹åŒ– åˆå§‹åŒ–æ—¶çš„çº¿ç¨‹å®‰å…¨æ˜¯æœ‰ä¿éšœçš„ ç±»åŠ è½½å™¨ ä»¥JDK8ä¸ºä¾‹ï¼š ç±»åŠ è½½å™¨å„è‡ªåŠ è½½å¯¹åº”ä½ç½®çš„ç±» æœ‰å±‚çº§å…³ç³»ï¼Œä½çº§åŠ è½½å™¨åŠ è½½ç±»æ—¶ä¼šé—®ä¸Šçº§åŠ è½½å™¨æ˜¯å¦åŠ è½½è¿‡è¯¥ç±»(ä¾‹å¦‚ï¼ŒApplication ClassLoaderè¯¢é—®Extension ClassLoaderæ˜¯å¦åŠ è½½ï¼Œç„¶åExtension ClassLoader è¯¢é—® Bootstrap ClassLoader) å¦‚æœä¸Šçº§å‡æœªåŠ è½½ï¼Œé‚£ä¹ˆæ‰è®©ä½çº§åŠ è½½å™¨åŠ è½½è¯¥ç±» è¿™å°±æ˜¯åŒäº²å§”æ´¾æ¨¡å‹ å¯åŠ¨ç±»åŠ è½½å™¨(Bootstrap ClassLoader) ç”¨Bootstrapç±»åŠ è½½å™¨åŠ è½½ç±» package cn.itcast.jvm.t3.load; public class F { static { System.out.println(&quot;bootstrap F init&quot;); } } æ‰§è¡Œ package cn.itcast.jvm.t3.load; public class Load5_1 { public static void main(String[] args) throws ClassNotFoundException { Class&lt;?&gt; aClass = Class.forName(&quot;cn.itcast.jvm.t3.load.F&quot;); //è·å–åŠ è½½è¯¥ç±»çš„ç±»åŠ è½½å™¨ System.out.println(aClass.getClassLoader()); } } è¾“å‡º E:\\git\\jvm\\out\\production\\jvm&gt;java -Xbootclasspath/a:. cn.itcast.jvm.t3.load.Load5 bootstrap F init null -Xbootclasspathè¡¨ç¤ºè®¾ç½®bootclasspath å…¶ä¸­/a:.è¡¨ç¤ºå°†å½“å‰ç›®å½•è¿½åŠ è‡³bootclasspathä¹‹å å¯ä»¥ç”¨è¿™ä¸ªåŠæ³•æ›¿æ¢æ ¸å¿ƒç±» java -Xbootclasspath:&lt;new bootclasspath&gt; java -Xbootclasspath/a:&lt;è¿½åŠ è·¯å¾„&gt; /aä¸ºåè¿½åŠ  java -Xbootclasspath/p:&lt;è¿½åŠ è·¯å¾„&gt; /pä¸ºå‰è¿½åŠ ï¼Œå¯ä»¥ç”¨æ¥æ›¿æ¢ä¸€äº›æ ¸å¿ƒç±» æ‰©å±•ç±»åŠ è½½å™¨ package cn.itcast.jvm.t3.load; public class G { static { System.out.println(&quot;classpath G init&quot;); } } æ‰§è¡Œ public class Load5_2 { public static void main(String[] args) throws ClassNotFoundException { Class&lt;?&gt; aClass = Class.forName(&quot;cn.itcast.jvm.t3.load.G&quot;); System.out.println(aClass.getClassLoader()); } } è¾“å‡º classpath G init sun.misc.Launcher$AppClassLoader@18b4aac2 å†™ä¸€ä¸ªåŒåçš„ç±» package cn.itcast.jvm.t3.load; public class G { static { System.out.println(&quot;ext G init&quot;); } } æ‰“ä¸ªjaråŒ… E:\\git\\jvm\\out\\production\\jvm&gt;jar -cvf my.jar cn/itcast/jvm/t3/load/G.class å·²æ·»åŠ æ¸…å• æ­£åœ¨æ·»åŠ : cn/itcast/jvm/t3/load/G.class(è¾“å…¥ = 481) (è¾“å‡º = 322)(å‹ç¼©äº† 33%) å°†jaråŒ…æ‹·è´åˆ° JAVA_HOME/jre/lib/exté‡æ–°æ‰§è¡ŒLoad5_2è¾“å‡º ext G init sun.misc.Launcher$ExtClassLoader@29453f44 åŒäº²å§”æ´¾æ¨¡å‹ æ‰€è°“çš„åŒäº²å§”æ´¾ï¼Œå°±æ˜¯æŒ‡è°ƒç”¨ç±»åŠ è½½å™¨çš„ loadClass æ–¹æ³•æ—¶ï¼ŒæŸ¥æ‰¾ç±»çš„è§„åˆ™ å§”æ´¾ä¸Šçº§åšç±»çš„åŠ è½½ å¦‚æœä¸Šçº§æ²¡æœ‰ï¼Œé‚£ä¹ˆç”±æœ¬çº§çš„ç±»åŠ è½½å™¨åŠ è½½ æ³¨æ„ è¿™é‡Œçš„åŒäº²ï¼Œç¿»è¯‘ä¸ºä¸Šçº§ä¼¼ä¹æ›´ä¸ºåˆé€‚ï¼Œå› ä¸ºå®ƒä»¬å¹¶æ²¡æœ‰ç»§æ‰¿å…³ç³» protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException { synchronized (getClassLoadingLock(name)) { // 1. æ£€æŸ¥è¯¥ç±»æ˜¯å¦å·²ç»åŠ è½½ Class&lt;?&gt; c = findLoadedClass(name); if (c == null) { long t0 = System.nanoTime(); try { if (parent != null) { // 2. æœ‰ä¸Šçº§çš„è¯ï¼Œå§”æ´¾ä¸Šçº§ loadClass c = parent.loadClass(name, false); } else { // 3. å¦‚æœæ²¡æœ‰ä¸Šçº§äº†(ExtClassLoader)ï¼Œåˆ™å§”æ´¾BootstrapClassLoader c = findBootstrapClassOrNull(name); } } catch (ClassNotFoundException e) { } if (c == null) { long t1 = System.nanoTime(); // 4. æ¯ä¸€å±‚æ‰¾ä¸åˆ°ï¼Œè°ƒç”¨ findClass æ–¹æ³•(æ¯ä¸ªç±»åŠ è½½å™¨è‡ªå·±æ‰©å±•)æ¥åŠ è½½ c = findClass(name); // 5. è®°å½•è€—æ—¶ sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0); sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1); sun.misc.PerfCounter.getFindClasses().increment(); } } if (resolve) { resolveClass(c); } return c; } } ä¾‹å¦‚ public class Load5_3 { public static void main(String[] args) throws ClassNotFoundException { Class&lt;?&gt; aClass = Load5_3.class.getClassLoader() .loadClass(&quot;cn.itcast.jvm.t3.load.H&quot;); System.out.println(aClass.getClassLoader()); } } æ‰§è¡Œæµç¨‹ä¸º 1. sun.misc.Launcher$AppClassLoader //1 å¤„ï¼Œ å¼€å§‹æŸ¥çœ‹å·²åŠ è½½çš„ç±»ï¼Œç»“æœæ²¡æœ‰ 2. sun.misc.Launcher$AppClassLoader // 2 å¤„ï¼Œå§”æ´¾ä¸Šçº§ sun.misc.Launcher$ExtClassLoader.loadClass() 3. sun.misc.Launcher$ExtClassLoader // 1 å¤„ï¼ŒæŸ¥çœ‹å·²åŠ è½½çš„ç±»ï¼Œç»“æœæ²¡æœ‰ 4. sun.misc.Launcher$ExtClassLoader // 3 å¤„ï¼Œæ²¡æœ‰ä¸Šçº§äº†ï¼Œåˆ™å§”æ´¾ BootstrapClassLoaderæŸ¥æ‰¾ 5. BootstrapClassLoader æ˜¯åœ¨ JAVA_HOME/jre/lib ä¸‹æ‰¾ H è¿™ä¸ªç±»ï¼Œæ˜¾ç„¶æ²¡æœ‰ 6. sun.misc.Launcher$ExtClassLoader // 4 å¤„ï¼Œè°ƒç”¨è‡ªå·±çš„ findClass æ–¹æ³•ï¼Œæ˜¯åœ¨ JAVA_HOME/jre/lib/ext ä¸‹æ‰¾ H è¿™ä¸ªç±»ï¼Œæ˜¾ç„¶æ²¡æœ‰ï¼Œå›åˆ° sun.misc.Launcher$AppClassLoader çš„ // 2 å¤„ 7. ç»§ç»­æ‰§è¡Œåˆ° sun.misc.Launcher$AppClassLoader // 4 å¤„ï¼Œè°ƒç”¨å®ƒè‡ªå·±çš„ findClass æ–¹æ³•ï¼Œåœ¨ classpath ä¸‹æŸ¥æ‰¾ï¼Œæ‰¾åˆ°äº† çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ æˆ‘ä»¬åœ¨ä½¿ç”¨JDBCæ—¶ï¼Œéƒ½éœ€è¦åŠ è½½Driveré©±åŠ¨ï¼Œä½†æ˜¯ï¼Œä¸å†™ Class.forName(&quot;com.mysql.jdbc.Driver&quot;) ä¹Ÿæ˜¯å¯ä»¥è®©com.mysql.jdbc.Driveræ­£ç¡®åŠ è½½çš„ public class DriverManager { // æ³¨å†Œé©±åŠ¨çš„é›†åˆ private final static CopyOnWriteArrayList&lt;DriverInfo&gt; registeredDrivers = new CopyOnWriteArrayList&lt;&gt;(); // åˆå§‹åŒ–é©±åŠ¨ static { loadInitialDrivers(); println(&quot;JDBC DriverManager initialized&quot;); } å…ˆä¸çœ‹åˆ«çš„ï¼Œçœ‹çœ‹DriverManagerçš„ç±»åŠ è½½å™¨ System.out.println(DriverManager.class.getClassLoader()); æ‰“å° nullï¼Œè¡¨ç¤ºå®ƒçš„ç±»åŠ è½½å™¨æ˜¯ Bootstrap ClassLoaderï¼Œä¼šåˆ° JAVA_HOME/jre/lib ä¸‹æœç´¢ç±»ï¼Œä½† JAVA_HOME/jre/lib ä¸‹æ˜¾ç„¶æ²¡æœ‰ mysql-connector-java-5.1.47.jar åŒ…ï¼Œè¿™æ ·é—®é¢˜æ¥äº†ï¼Œåœ¨ DriverManager çš„é™æ€ä»£ç å—ä¸­ï¼Œæ€ä¹ˆèƒ½æ­£ç¡®åŠ è½½ com.mysql.jdbc.Driver å‘¢?ç»§ç»­çœ‹loadInitialDrivers()æ–¹æ³• private static void loadInitialDrivers() { String drivers; try { drivers = AccessController.doPrivileged(new PrivilegedAction&lt;String&gt;(){ public String run() { return System.getProperty(&quot;jdbc.drivers&quot;); } }); } catch (Exception ex) { drivers = null; } // 1)ä½¿ç”¨ ServiceLoader æœºåˆ¶åŠ è½½é©±åŠ¨ï¼Œå³ SPI AccessController.doPrivileged(new PrivilegedAction&lt;Void&gt;() { public Void run() { ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class); Iterator&lt;Driver&gt; driversIterator = loadedDrivers.iterator(); try{ while(driversIterator.hasNext()) { //ä¹Ÿç ´åäº†åŒäº²å§”æ´¾æ¨¡å‹ driversIterator.next(); } } catch(Throwable t) { // Do nothing } return null; } }); println(&quot;DriverManager.initialize: jdbc.drivers = &quot; + drivers); // 2)ä½¿ç”¨ jdbc.drivers å®šä¹‰çš„é©±åŠ¨ååŠ è½½é©±åŠ¨ if (drivers == null || drivers.equals(&quot;&quot;)) { return; } String[] driversList = drivers.split(&quot;:&quot;); println(&quot;number of Drivers:&quot; + driversList.length); for (String aDriver : driversList) { try { println(&quot;DriverManager.Initialize: loading &quot; + aDriver); // è¿™é‡Œçš„ ClassLoader.getSystemClassLoader() å°±æ˜¯åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ Class.forName(aDriver, true, ClassLoader.getSystemClassLoader()); } catch (Exception ex) { println(&quot;DriverManager.Initialize: load failed: &quot; + ex); } } } å…ˆçœ‹ 2)å‘ç°å®ƒæœ€åæ˜¯ä½¿ç”¨ Class.forName å®Œæˆç±»çš„åŠ è½½å’Œåˆå§‹åŒ–ï¼Œå…³è”çš„æ˜¯åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼Œå› æ­¤ å¯ä»¥é¡ºåˆ©å®Œæˆç±»åŠ è½½ï¼Œæ‰“ç ´äº†åŒäº²å§”æ´¾æ¨¡å‹ å†çœ‹ 1)å®ƒå°±æ˜¯å¤§åé¼é¼çš„ Service Provider Interface (SPI) çº¦å®šå¦‚ä¸‹ï¼Œåœ¨ jar åŒ…çš„ META-INF/services åŒ…ä¸‹ï¼Œä»¥æ¥å£å…¨é™å®šåä¸ºæ–‡ä»¶åï¼Œæ–‡ä»¶å†…å®¹æ˜¯å®ç°ç±»åç§° è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ //æ‰¾åˆ°æ¥å£çš„æ‰€æœ‰å®ç°ç±» ServiceLoader&lt;æ¥å£ç±»å‹&gt; allImpls = ServiceLoader.load(æ¥å£ç±»å‹.class); Iterator&lt;æ¥å£ç±»å‹&gt; iter = allImpls.iterator(); while(iter.hasNext()) { //æ¯æ¬¡è°ƒç”¨äº†è¿­ä»£å™¨ï¼Œå°±å¯ä»¥è¿”å›å®ç°ç±»çš„å®ä¾‹ iter.next(); } æ¥å¾—åˆ°å®ç°ç±»ï¼Œä½“ç°çš„æ˜¯ã€é¢å‘æ¥å£ç¼–ç¨‹+è§£è€¦ã€‘çš„æ€æƒ³ï¼Œåœ¨ä¸‹é¢ä¸€äº›æ¡†æ¶ä¸­éƒ½è¿ç”¨äº†æ­¤æ€æƒ³: JDBC Servlet åˆå§‹åŒ–å™¨ Spring å®¹å™¨ Dubbo(å¯¹ SPI è¿›è¡Œäº†æ‰©å±•) æ¥ç€çœ‹ ServiceLoader.load æ–¹æ³•: public static &lt;S&gt; ServiceLoader&lt;S&gt; load(Class&lt;S&gt; service) { // è·å–çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨(é»˜è®¤å°±æ˜¯åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨) // åœ¨çº¿ç¨‹å¯åŠ¨æ—¶ï¼Œjvmä¼šæŠŠåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨å¤åˆ¶ç»™å½“å‰çº¿ç¨‹ ClassLoader cl = Thread.currentThread().getContextClassLoader(); return ServiceLoader.load(service, cl); } çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨æ˜¯å½“å‰çº¿ç¨‹ä½¿ç”¨çš„ç±»åŠ è½½å™¨ï¼Œé»˜è®¤å°±æ˜¯åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼Œå®ƒå†…éƒ¨åˆæ˜¯ç”± Class.forName è°ƒç”¨äº†çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨å®Œæˆç±»åŠ è½½ï¼Œå…·ä½“ä»£ç åœ¨ ServiceLoader çš„å†…éƒ¨ç±» LazyIterator ä¸­: private S nextService() { if (!hasNextService()) throw new NoSuchElementException(); String cn = nextName; nextName = null; Class&lt;?&gt; c = null; try { c = Class.forName(cn, false, loader); } catch (ClassNotFoundException x) {&quot;Provider &quot; + cn + &quot; not found&quot;); } if (!service.isAssignableFrom(c)) { fail(service, &quot;Provider &quot; + cn + &quot; not a subtype&quot;); } try { S p = service.cast(c.newInstance()); providers.put(cn, p); return p; } catch (Throwable x) { fail(service, &quot;Provider &quot; + cn + &quot; could not be instantiated&quot;, x); } throw new Error(); // This cannot happen } è‡ªå®šä¹‰ç±»åŠ è½½å™¨ ä»€ä¹ˆæ—¶å€™éœ€è¦è‡ªå®šä¹‰ç±»åŠ è½½å™¨ æƒ³åŠ è½½éclasspathéšæ„è·¯å¾„ä¸­çš„ç±»æ–‡ä»¶ éƒ½æ˜¯é€šè¿‡æ¥å£æ¥ä½¿ç”¨å®ç°ï¼Œå¸Œæœ›è§£è€¦æ—¶ï¼Œå¸¸ç”¨åœ¨æ¡†æ¶è®¾è®¡ è¿™äº›ç±»å¸Œæœ›äºˆä»¥éš”ç¦»ï¼Œä¸åŒåº”ç”¨çš„åŒåç±»éƒ½å¯ä»¥åŠ è½½ï¼Œä¸å†²çªï¼Œå¸¸è§äºtomcatå®¹å™¨ æ­¥éª¤ï¼š ç»§æ‰¿ ClassLoader çˆ¶ç±» è¦éµä»åŒäº²å§”æ´¾æœºåˆ¶ï¼Œé‡å†™ findClass æ–¹æ³• æ³¨æ„ä¸æ˜¯é‡å†™ loadClass æ–¹æ³•ï¼Œå¦åˆ™ä¸ä¼šèµ°åŒäº²å§”æ´¾æœºåˆ¶ è¯»å–ç±»æ–‡ä»¶çš„å­—èŠ‚ç  è°ƒç”¨çˆ¶ç±»çš„ defineClass æ–¹æ³•æ¥åŠ è½½ç±» ä½¿ç”¨è€…è°ƒç”¨è¯¥ç±»åŠ è½½å™¨çš„ loadClass æ–¹æ³• ç¤ºä¾‹: å‡†å¤‡å¥½ä¸¤ä¸ªç±»æ–‡ä»¶æ”¾å…¥ E:\\myclasspathï¼Œå®ƒå®ç°äº† java.util.Map æ¥å£ï¼Œå¯ä»¥å…ˆåç¼–è¯‘çœ‹ä¸€ä¸‹: package cn.itcast.jvm.t3.load; import java.io.ByteArrayOutputStream; import java.io.IOException; import java.nio.file.Files; import java.nio.file.Paths; public class Load7 { public static void main(String[] args) throws Exception { MyClassLoader classLoader = new MyClassLoader(); Class&lt;?&gt; c1 = classLoader.loadClass(&quot;MapImpl1&quot;); Class&lt;?&gt; c2 = classLoader.loadClass(&quot;MapImpl1&quot;); //true System.out.println(c1 == c2); MyClassLoader classLoader2 = new MyClassLoader(); Class&lt;?&gt; c3 = classLoader2.loadClass(&quot;MapImpl1&quot;); //falseï¼ŒåŒ…åç±»åç›¸åŒï¼Œä¸”ç±»åŠ è½½å™¨å¯¹è±¡ç›¸åŒï¼Œæ‰è®¤ä¸ºè¿™æ˜¯åŒä¸€ä¸ªç±»ï¼Œä¸ç„¶è®¤ä¸ºæ˜¯ç›¸äº’éš”ç¦»çš„ System.out.println(c1 == c3); c1.newInstance(); } } //ç»§æ‰¿ClassLoaderå¹¶é‡å†™findClassæ–¹æ³• class MyClassLoader extends ClassLoader { @Override // name å°±æ˜¯ç±»åç§° protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException { String path = &quot;e:\\\\myclasspath\\\\&quot; + name + &quot;.class&quot;; try { ByteArrayOutputStream os = new ByteArrayOutputStream(); Files.copy(Paths.get(path), os); // å¾—åˆ°å­—èŠ‚æ•°ç»„ byte[] bytes = os.toByteArray(); // byte[] -&gt; *.class return defineClass(name, bytes, 0, bytes.length); } catch (IOException e) { e.printStackTrace(); throw new ClassNotFoundException(&quot;ç±»æ–‡ä»¶æœªæ‰¾åˆ°&quot;, e); } } } è¿è¡ŒæœŸä¼˜åŒ– å³æ—¶ç¼–è¯‘ åˆ†å±‚ç¼–è¯‘(TieredCompilation) public class JIT1 { public static void main(String[] args) { for (int i = 0; i &lt; 200; i++) { long start = System.nanoTime(); for (int j = 0; j &lt; 1000; j++) { new Object(); } long end = System.nanoTime(); System.out.printf(&quot;%d\\t%d\\n&quot;,i,(end - start)); } } } 0 96426 1 52907 2 44800 3 119040 4 65280 5 47360 6 45226 7 47786 8 48640 9 60586 10 42667 11 48640 12 70400 13 49920 14 49493 15 45227 16 45653 17 60160 18 58880 19 46080 20 47787 21 49920 22 54187 23 57173 24 50346 25 52906 26 50346 27 47786 28 49920 29 64000 30 49067 31 63574 32 63147 33 56746 34 49494 35 64853 36 107520 37 46933 38 51627 39 45653 40 103680 41 51626 42 60160 43 49067 44 45653 45 49493 46 51626 47 49066 48 47360 49 50774 50 70827 51 64000 52 72107 53 49066 54 46080 55 44800 56 46507 57 73813 58 61013 59 57600 60 83200 61 7024204 62 49493 63 20907 64 20907 65 20053 66 20906 67 20907 68 21333 69 22187 70 20480 71 21760 72 19200 73 15360 74 18347 75 19627 76 17067 77 34134 78 19200 79 18347 80 17493 81 15360 82 18774 83 17067 84 21760 85 23467 86 17920 87 17920 88 18774 89 18773 90 19200 91 20053 92 18347 93 22187 94 17920 95 18774 96 19626 97 33280 98 20480 99 20480 100 18773 101 47786 102 17493 103 22614 104 64427 105 18347 106 19200 107 26027 108 21333 109 20480 110 24747 111 32426 112 21333 113 17920 114 17920 115 19200 116 18346 117 15360 118 24320 119 19200 120 20053 121 17920 122 18773 123 20053 124 18347 125 18347 126 22613 127 18773 128 19627 129 20053 130 20480 131 19627 132 20053 133 15360 134 136533 135 43093 136 853 137 853 138 853 139 853 140 854 141 853 142 853 143 853 144 853 145 853 146 853 147 854 148 853 149 853 150 854 151 853 152 853 153 853 154 1280 155 853 156 853 157 854 158 853 159 853 160 854 161 854 162 853 163 854 164 854 165 854 166 854 167 853 168 853 169 854 170 853 171 853 172 853 173 1280 174 853 175 1280 176 853 177 854 178 854 179 427 180 853 181 854 182 854 183 854 184 853 185 853 186 854 187 853 188 853 189 854 190 1280 191 853 192 853 193 853 194 853 195 854 196 853 197 853 198 853 199 854 åŸå› æ˜¯ä»€ä¹ˆå‘¢?JVM å°†æ‰§è¡ŒçŠ¶æ€åˆ†æˆäº† 5 ä¸ªå±‚æ¬¡: 0 å±‚ï¼Œè§£é‡Šæ‰§è¡Œ(Interpreter) å­—èŠ‚ç åŠ è½½åˆ°è™šæ‹Ÿæœºï¼Œè§£é‡Šå™¨å°†å­—èŠ‚ç è§£é‡Šä¸ºæœºå™¨ç  å­—èŠ‚ç è¢«åå¤è°ƒç”¨ï¼Œåˆ°è¾¾ä¸€å®šé˜ˆå€¼ï¼Œå°±ä¼šå¯ç”¨ç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘æ‰§è¡Œ 1 å±‚ï¼Œä½¿ç”¨ C1 å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘æ‰§è¡Œ(ä¸å¸¦ profiling) 2 å±‚ï¼Œä½¿ç”¨ C1 å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘æ‰§è¡Œ(å¸¦åŸºæœ¬çš„ profiling) 3 å±‚ï¼Œä½¿ç”¨ C1 å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘æ‰§è¡Œ(å¸¦å®Œå…¨çš„ profiling) 4 å±‚ï¼Œä½¿ç”¨ C2 å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘æ‰§è¡Œ æ¯”C1ä¼˜åŒ–ç¨‹åº¦æ›´é«˜ profiling æ˜¯æŒ‡åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ”¶é›†ä¸€äº›ç¨‹åºæ‰§è¡ŒçŠ¶æ€çš„æ•°æ®ï¼Œä¾‹å¦‚ã€æ–¹æ³•çš„è°ƒç”¨æ¬¡æ•°ã€‘ï¼Œã€å¾ªç¯çš„ å›è¾¹æ¬¡æ•°ã€‘ç­‰ å³æ—¶ç¼–è¯‘å™¨(JIT)ä¸è§£é‡Šå™¨çš„åŒºåˆ« è§£é‡Šå™¨æ˜¯å°†å­—èŠ‚ç è§£é‡Šä¸ºæœºå™¨ç ï¼Œä¸‹æ¬¡å³ä½¿é‡åˆ°ç›¸åŒçš„å­—èŠ‚ç ï¼Œä»ä¼šæ‰§è¡Œé‡å¤çš„è§£é‡Š JIT æ˜¯å°†ä¸€äº›å­—èŠ‚ç ç¼–è¯‘ä¸ºæœºå™¨ç ï¼Œå¹¶å­˜å…¥ Code Cacheï¼Œä¸‹æ¬¡é‡åˆ°ç›¸åŒçš„ä»£ç ï¼Œç›´æ¥æ‰§è¡Œï¼Œæ— éœ€å†ç¼–è¯‘ è§£é‡Šå™¨æ˜¯å°†å­—èŠ‚ç è§£é‡Šä¸ºé’ˆå¯¹æ‰€æœ‰å¹³å°éƒ½é€šç”¨çš„æœºå™¨ç  JIT ä¼šæ ¹æ®å¹³å°ç±»å‹ï¼Œç”Ÿæˆå¹³å°ç‰¹å®šçš„æœºå™¨ç  å¯¹äºå æ®å¤§éƒ¨åˆ†çš„ä¸å¸¸ç”¨çš„ä»£ç ï¼Œæˆ‘ä»¬æ— éœ€è€—è´¹æ—¶é—´å°†å…¶ç¼–è¯‘æˆæœºå™¨ç ï¼Œè€Œæ˜¯é‡‡å–è§£é‡Šæ‰§è¡Œçš„æ–¹å¼è¿ è¡Œ;å¦ä¸€æ–¹é¢ï¼Œå¯¹äºä»…å æ®å°éƒ¨åˆ†çš„çƒ­ç‚¹ä»£ç ï¼Œæˆ‘ä»¬åˆ™å¯ä»¥å°†å…¶ç¼–è¯‘æˆæœºå™¨ç ï¼Œä»¥è¾¾åˆ°ç†æƒ³çš„è¿è¡Œé€Ÿåº¦ã€‚ æ‰§è¡Œæ•ˆç‡ä¸Šç®€å•æ¯”è¾ƒä¸€ä¸‹ Interpreter &lt; C1(æå‡5å€å·¦å³é«˜) &lt; C2(æå‡10-100å€)ï¼Œæ€»çš„ç›®æ ‡æ˜¯å‘ç°çƒ­ç‚¹ä»£ç (hotspotåç§°çš„ç”±æ¥)ï¼Œå¹¶ä¼˜åŒ–ä¹‹ åˆšæ‰çš„ä¸€ç§ä¼˜åŒ–æ‰‹æ®µç§°ä¹‹ä¸ºã€é€ƒé€¸åˆ†æã€‘ï¼Œå‘ç°æ–°å»ºçš„å¯¹è±¡æ˜¯å¦é€ƒé€¸(å¤–å±‚æ˜¯å¦ä¼šç”¨åˆ°è¯¥å¯¹è±¡)ã€‚å¯ä»¥ä½¿ç”¨ -XX:- DoEscapeAnalysis å…³é—­é€ƒé€¸åˆ†æï¼Œå†è¿è¡Œåˆšæ‰çš„ç¤ºä¾‹è§‚å¯Ÿç»“æœ å‚è€ƒèµ„æ–™ï¼šhttps://docs.oracle.com/en/java/javase/12/vm/java-hotspot-virtual-machine-performance-enhancements.html#GUID-D2E3DC58-D18B-4A6C-8167-4A1DFB4888E4 æ–¹æ³•å†…è”(Inlining) private static int square(final int i) { return i * i; } System.out.println(square(9)); å¦‚æœå‘ç° square æ˜¯çƒ­ç‚¹æ–¹æ³•ï¼Œå¹¶ä¸”é•¿åº¦ä¸å¤ªé•¿æ—¶ï¼Œä¼šè¿›è¡Œå†…è”ï¼Œæ‰€è°“çš„å†…è”å°±æ˜¯æŠŠæ–¹æ³•å†…ä»£ç æ‹·è´ã€ ç²˜è´´åˆ°è°ƒç”¨è€…çš„ä½ç½®: //System.out.println(square(9))è¿›è¡Œæ–¹æ³•å†…è”å //å˜ä¸º System.out.println(9 * 9); è¿˜èƒ½å¤Ÿè¿›è¡Œå¸¸é‡æŠ˜å (constant folding)çš„ä¼˜åŒ– //9å›ºå®šä¸å˜ï¼Œå¯ä»¥è¿›è¡Œå¸¸é‡æŠ˜å çš„ä¼˜åŒ– System.out.println(81); å®éªŒï¼š public class JIT2 { // -XX:+UnlockDiagnosticVMOptions -XX:+PrintInlining (è§£é”éšè—å‚æ•°)æ‰“å°inlining ä¿¡æ¯ // -XX:CompileCommand=dontinline,*JIT2.square ç¦æ­¢æŸä¸ªæ–¹æ³• inlining *è¡¨ç¤ºæŠ¥åï¼ŒJIT2ä¸ºç±»åç„¶åä¸ºæ–¹æ³•å // -XX:+PrintCompilation æ‰“å°ç¼–è¯‘ä¿¡æ¯ public static void main(String[] args) { int x = 0; for (int i = 0; i &lt; 500; i++) { long start = System.nanoTime(); for (int j = 0; j &lt; 1000; j++) { x = square(9); } long end = System.nanoTime(); System.out.printf(&quot;%d\\t%d\\t%d\\n&quot;,i,x,(end - start)); } } private static int square(final int i) { return i * i; } } å­—æ®µä¼˜åŒ– å­—æ®µä¼˜åŒ–ä¸ºå¯¹æˆå‘˜å˜é‡å’Œé™æ€æˆå‘˜å˜é‡è¿›è¡Œä¼˜åŒ–JMHåŸºå‡†æµ‹è¯•è¯·å‚è€ƒhttp://openjdk.java.net/projects/code-tools/jmh/åˆ›å»ºmavenå·¥ç¨‹ï¼Œæ·»åŠ ä¾èµ–å¦‚ä¸‹ &lt;dependency&gt; &lt;groupId&gt;org.openjdk.jmh&lt;/groupId&gt; &lt;artifactId&gt;jmh-core&lt;/artifactId&gt; &lt;version&gt;${jmh.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.openjdk.jmh&lt;/groupId&gt; &lt;artifactId&gt;jmh-generator-annprocess&lt;/artifactId&gt; &lt;version&gt;${jmh.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; ç¼–å†™åŸºå‡†æµ‹è¯•ä»£ç  package test; import org.openjdk.jmh.annotations.*; import org.openjdk.jmh.runner.Runner; import org.openjdk.jmh.runner.RunnerException; import org.openjdk.jmh.runner.options.Options; import org.openjdk.jmh.runner.options.OptionsBuilder; import java.util.Random; import java.util.concurrent.ThreadLocalRandom; // çƒ­èº«ï¼Œè®©ç¨‹åºé¢„çƒ­ä¸€æ®µæ—¶é—´ï¼Œè®©JITå¯¹å…¶è¿›è¡Œå……åˆ†çš„ä¼˜åŒ– @Warmup(iterations = 2, time = 1) // è¿›è¡Œå‡ è½®æµ‹è¯• @Measurement(iterations = 5, time = 1) @State(Scope.Benchmark) public class Benchmark1 { int[] elements = randomInts(1_000); private static int[] randomInts(int size) { Random random = ThreadLocalRandom.current(); int[] values = new int[size]; for (int i = 0; i &lt; size; i++) { values[i] = random.nextInt(); } return values; } @Benchmark public void test1() { for (int i = 0; i &lt; elements.length; i++) { doSum(elements[i]); } } @Benchmark public void test2() { int[] local = this.elements; for (int i = 0; i &lt; local.length; i++) { doSum(local[i]); } } @Benchmark public void test3() { for (int element : elements) { doSum(element); } } static int sum = 0; // æ§åˆ¶æ˜¯å¦è¿›è¡Œå†…è” @CompilerControl(CompilerControl.Mode.INLINE) static void doSum(int x) { sum += x; } public static void main(String[] args) throws RunnerException { Options opt = new OptionsBuilder() .include(Benchmark1.class.getSimpleName()) .forks(1) .build(); new Runner(opt).run(); } } é¦–å…ˆå¯ç”¨doSumçš„æ–¹æ³•å†…è”ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹(æ¯ç§’ååé‡ï¼Œåˆ†æ•°è¶Šé«˜è¶Šå¥½) Benchmark Mode Samples Score Score error Units t.Benchmark1.test1 thrpt 5 2420286.539 390747.467 ops/s t.Benchmark1.test2 thrpt 5 2544313.594 91304.136 ops/s t.Benchmark1.test3 thrpt 5 2469176.697 450570.647 ops/s æ¥ä¸‹æ¥ç¦ç”¨doSumæ–¹æ³•å†…è” //ç¦ç”¨å†…è” @CompilerControl(CompilerControl.Mode.DONT_INLINE) static void doSum(int x) { sum += x; } æµ‹è¯•ç»“æœå¦‚ä¸‹ Benchmark Mode Samples Score Score error Units t.Benchmark1.test1 thrpt 5 296141.478 63649.220 ops/s t.Benchmark1.test2 thrpt 5 371262.351 83890.984 ops/s t.Benchmark1.test3 thrpt 5 368960.847 60163.391 ops/s åˆ†æï¼šåœ¨åˆšæ‰çš„ç¤ºä¾‹ä¸­ï¼ŒdoSum æ–¹æ³•æ˜¯å¦å†…è”ä¼šå½±å“ elements æˆå‘˜å˜é‡è¯»å–çš„ä¼˜åŒ–: å¦‚æœ doSum æ–¹æ³•å†…è”äº†ï¼Œåˆšæ‰çš„ test1 æ–¹æ³•ä¼šè¢«ä¼˜åŒ–æˆä¸‹é¢çš„æ ·å­(ä¼ªä»£ç ): @Benchmark public void test1() { // elements.length é¦–æ¬¡è¯»å–ä¼šç¼“å­˜èµ·æ¥ -&gt; int[] local for (int i = 0; i &lt; elements.length; i++) { // åç»­ 999 æ¬¡ æ±‚é•¿åº¦ &lt;- local sum += elements[i]; // 1000 æ¬¡å–ä¸‹æ ‡ i çš„å…ƒç´  &lt;- local } } å¯ä»¥èŠ‚çœ1999æ¬¡Fieldè¯»å–æ“ä½œä½†å¦‚æœdoSumæ–¹æ³•æ²¡æœ‰å†…è”ï¼Œåˆ™ä¸ä¼šè¿›è¡Œä¸Šé¢çš„ä¼˜åŒ– ç»ƒä¹ :åœ¨å†…è”æƒ…å†µä¸‹å°† elements æ·»åŠ  volatile ä¿®é¥°ç¬¦ï¼Œè§‚å¯Ÿæµ‹è¯•ç»“æœ åå°„ä¼˜åŒ– package cn.itcast.jvm.t3.reflect; import java.io.IOException; import java.lang.reflect.InvocationTargetException; import java.lang.reflect.Method; public class Reflect1 { public static void foo() { System.out.println(&quot;foo...&quot;); } public static void main(String[] args) throws Exception { Method foo = Reflect1.class.getMethod(&quot;foo&quot;); for (int i = 0; i &lt;= 16; i++) { System.out.printf(&quot;%d\\t&quot;, i); foo.invoke(null); } System.in.read(); } } foo.invokeå‰é¢ 0 ~ 15 æ¬¡è°ƒç”¨ä½¿ç”¨çš„æ˜¯ MethodAccessor çš„ NativeMethodAccessorImpl å®ç° package sun.reflect; import java.lang.reflect.InvocationTargetException; import java.lang.reflect.Method; import sun.reflect.misc.ReflectUtil; class NativeMethodAccessorImpl extends MethodAccessorImpl { private final Method method; private DelegatingMethodAccessorImpl parent; private int numInvocations; NativeMethodAccessorImpl(Method method) { this.method = method; } public Object invoke(Object target, Object[] args) throws IllegalArgumentException, InvocationTargetException { // inflationThreshold è†¨èƒ€é˜ˆå€¼ï¼Œé»˜è®¤ 15 if (++this.numInvocations &gt; ReflectionFactory.inflationThreshold() &amp;&amp; !ReflectUtil.isVMAnonymousClass(this.method.getDeclaringClass())){ // ä½¿ç”¨ ASM åŠ¨æ€ç”Ÿæˆçš„æ–°å®ç°ä»£æ›¿æœ¬åœ°å®ç°ï¼Œé€Ÿåº¦è¾ƒæœ¬åœ°å®ç°å¿« 20 å€å·¦å³ MethodAccessorImpl generatedMethodAccessor = (MethodAccessorImpl) (new MethodAccessorGenerator()) .generateMethod( this.method.getDeclaringClass(), this.method.getName(), this.method.getParameterTypes(), this.method.getReturnType(), this.method.getExceptionTypes(), this.method.getModifiers() ); this.parent.setDelegate(generatedMethodAccessor); } // è°ƒç”¨æœ¬åœ°å®ç° return invoke0(this.method, target, args); } void setParent(DelegatingMethodAccessorImpl parent) { this.parent = parent; } private static nat ive Object invoke0(Method method, Object target, Object[] args); } å½“è°ƒç”¨åˆ°ç¬¬ 16 æ¬¡(ä»0å¼€å§‹ç®—)æ—¶ï¼Œä¼šé‡‡ç”¨è¿è¡Œæ—¶ç”Ÿæˆçš„ç±»ä»£æ›¿æ‰æœ€åˆçš„å®ç°ï¼Œå¯ä»¥é€šè¿‡ debug å¾—åˆ° ç±»åä¸º sun.reflect.GeneratedMethodAccessor1å¯ä»¥ä½¿ç”¨é˜¿é‡Œçš„ arthas å·¥å…·: java -jar arthas-boot.jar [INFO] arthas-boot version: 3.1.1 [INFO] Found existing java process, please choose one and hit RETURN. * [1]: 13065 cn.itcast.jvm.t3.reflect.Reflect1 é€‰æ‹©1å›è½¦è¡¨ç¤ºåˆ†æè¯¥è¿›ç¨‹ 1 [INFO] arthas home: /root/.arthas/lib/3.1.1/arthas [INFO] Try to attach process 13065 [INFO] Attach process 13065 success. [INFO] arthas-client connect 127.0.0.1 3658 wiki https://alibaba.github.io/arthas tutorials https://alibaba.github.io/arthas/arthas-tutorials version 3.1.1 pid 13065 time 2019-06-10 12:23:54 åœ¨è¾“å…¥ã€jad+ç±»åã€‘æ¥è¿›è¡Œåç¼–è¯‘ $ jad sun.reflect.GeneratedMethodAccessor1 ClassLoader: +-sun.reflect.DelegatingClassLoader@15db9742 +-sun.misc.Launcher$AppClassLoader@4e0e2f2a +-sun.misc.Launcher$ExtClassLoader@2fdb006e Location: /* * Decompiled with CFR 0_132. * * Could not load the following classes: * cn.itcast.jvm.t3.reflect.Reflect1 */ package sun.reflect; import cn.itcast.jvm.t3.reflect.Reflect1; import java.lang.reflect.InvocationTargetException; import sun.reflect.MethodAccessorImpl; public class GeneratedMethodAccessor1 extends MethodAccessorImpl { /* * Loose catch block * Enabled aggressive block sorting * Enabled unnecessary exception pruning * Enabled aggressive exception aggregation * Lifted jumps to return sites */ public Object invoke(Object object, Object[] arrobject) throws InvocationTargetException { // æ¯”è¾ƒå¥‡è‘©çš„åšæ³•ï¼Œå¦‚æœæœ‰å‚æ•°ï¼Œé‚£ä¹ˆæŠ›éæ³•å‚æ•°å¼‚å¸¸ block4 : { if (arrobject == null || arrobject.length == 0) break block4; throw new IllegalArgumentException(); } try { // å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»æ˜¯ç›´æ¥è°ƒç”¨äº†ğŸ˜±ğŸ˜±ğŸ˜± Reflect1.foo(); // å› ä¸ºæ²¡æœ‰è¿”å›å€¼ return null; } catch (Throwable throwable) { throw new InvocationTargetException(throwable); } catch (ClassCastException | NullPointerException runtimeException) { throw new IllegalArgumentException(Object.super.toString()); } } } Affect(row-cnt:1) cost in 1540 ms. æ³¨æ„ é€šè¿‡æŸ¥çœ‹ ReflectionFactory æºç å¯çŸ¥ sun.reflect.noInflation å¯ä»¥ç”¨æ¥ç¦ç”¨è†¨èƒ€(ç›´æ¥ç”Ÿæˆ GeneratedMethodAccessor1ï¼Œä½†é¦–æ¬¡ç”Ÿæˆæ¯”è¾ƒè€—æ—¶ï¼Œå¦‚æœä»…åå°„è°ƒç”¨ä¸€æ¬¡ï¼Œä¸åˆ’ç®—) sun.reflect.inflationThreshold å¯ä»¥ä¿®æ”¹è†¨èƒ€é˜ˆå€¼ ","link":"https://yeyuan1107.github.io/post/jvm-lei-jia-zai-yu-zi-jie-ma-ji-zhu/"},{"title":"JVMåƒåœ¾å›æ”¶","content":" å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥å›æ”¶ å¼•ç”¨è®¡æ•°æ³• åªè¦ä¸€ä¸ªå¯¹è±¡è¢«å…¶ä»–å˜é‡æ‰€å¼•ç”¨ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„è®¡æ•°åŠ ä¸€ï¼Œå¦åˆ™å‡ä¸€ã€‚å½“è¯¥å¯¹è±¡å¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œé‚£ä¹ˆå°±è¯´æ˜æ²¡æœ‰å˜é‡å¼•ç”¨ï¼Œå¯ä»¥å½“ä½œåƒåœ¾å›æ”¶ å­˜åœ¨é—®é¢˜ å¾ªç¯å¼•ç”¨é€ æˆå†…å­˜æ³„æ¼ å½“æ²¡æœ‰å˜é‡å¼•ç”¨Aå¯¹è±¡ï¼Œä¹Ÿæ²¡æœ‰å˜é‡å¼•ç”¨Bå¯¹è±¡ï¼Œä½†æ˜¯Aå’ŒBç›¸äº’å¼•ç”¨ï¼Œå¼•ç”¨è®¡æ•°å™¨ä¸º1ï¼Œæ— æ³•å¯¹å…¶è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ å¯è¾¾æ€§åˆ†æç®—æ³• Javaæ‰€ä½¿ç”¨çš„æ–¹æ³• ç¡®å®šä¸€ç³»åˆ—æ ¹å¯¹è±¡(è‚¯å®šä¸èƒ½å½“ä½œåƒåœ¾å›æ”¶çš„å¯¹è±¡)ï¼Œåƒåœ¾å›æ”¶å‰é¦–å…ˆå¯¹å †ä¸­æ‰€æœ‰å¯¹è±¡è¿›è¡Œæ‰«æï¼Œçœ‹çœ‹æ¯ä¸€ä¸ªå¯¹è±¡æ˜¯å¦è¢«æ ¹å¯¹è±¡ç›´æ¥æˆ–è€…é—´æ¥çš„å¼•ç”¨ã€‚å¦‚æœæ²¡æœ‰è¢«æ ¹å¯¹è±¡ç›´æ¥æˆ–é—´æ¥çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå°±å¯ä»¥å½“ä½œåƒåœ¾å›æ”¶ æ‰«æå †ä¸­çš„å¯¹è±¡ï¼Œçœ‹æ˜¯å¦èƒ½å¤Ÿæ²¿ç€GC Rootå¯¹è±¡ä¸ºèµ·ç‚¹çš„å¼•ç”¨é“¾æ‰¾åˆ°è¯¥å¯¹è±¡ï¼Œæ‰¾ä¸åˆ°ï¼Œè¡¨ç¤ºå¯ä»¥å›æ”¶ å¯ä»¥è¢«ä½œä¸ºGC Rootçš„å¯¹è±¡(å·¥å…·Memory Analyzer å¯è§†åŒ–Javaå †åˆ†æå·¥å…·) System Classï¼šç³»ç»Ÿç±»ã€æ ¸å¿ƒç±» Native Stackï¼šæœ¬åœ°æ–¹æ³•å¼•ç”¨çš„ä¸€äº›å¯¹è±¡ Busy Monitorï¼šåŠ é”çš„å¯¹è±¡ Threadï¼šæ´»åŠ¨çº¿ç¨‹ä¸­çš„å¯¹è±¡ å››ç§å¼•ç”¨ å¼ºå¼•ç”¨ åªæœ‰æ‰€æœ‰GC Roots å¯¹è±¡éƒ½ä¸é€šè¿‡ã€å¼ºå·1ç”¨1å¼•1ç”¨è¯¥å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰èƒ½è¢«åƒåœ¾å›æ”¶ è½¯å¼•ç”¨ (SoftReference) ä»…æœ‰è½¯å¼•ç”¨å¼•ç”¨è¯¥å¯¹è±¡æ—¶ï¼Œåœ¨åƒåœ¾å›æ”¶åï¼Œå†…å­˜ä»ä¸è¶³æ—¶ä¼šå†æ¬¡å‡ºå‘åƒåœ¾å›æ”¶ï¼Œå›æ”¶è½¯å¼•ç”¨å¯¹è±¡ å¯ä»¥é…åˆå¼•ç”¨é˜Ÿåˆ—æ¥é‡Šæ”¾è½¯å¼•ç”¨è‡ªèº« å¼±å¼•ç”¨ (WeakReference) ä»…æœ‰å¼±å¼•ç”¨å¼•ç”¨è¯¥å¯¹è±¡æ—¶ï¼Œåœ¨åƒåœ¾å›æ”¶æ—¶ï¼Œæ— è®ºå†…å­˜æ˜¯å¦å……è¶³ï¼Œéƒ½ä¼šå›æ”¶å¼±å¼•ç”¨å¯¹è±¡ å¯ä»¥é…åˆå¼•ç”¨é˜Ÿåˆ—æ¥é‡Šæ”¾å¼±å¼•1ç”¨è‡ªèº« è™›å¼•ç”¨ (PhantomReference) å¿…é¡»é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨ï¼Œä¸»è¦é…åˆ ByteBuffer ä½¿ç”¨ï¼Œè¢«å¼•ç”¨å¯¹è±¡å›æ”¶æ—¶ï¼Œä¼šå°†è™šå¼•ç”¨å…¥é˜Ÿï¼Œç”±Reference Handler çº¿ç¨‹è°ƒç”¨è™šå¼•ç”¨ç›¸å…³æ–¹æ³•é‡Šæ”¾ç›´æ¥å†…å­˜ ç»ˆç»“å™¨å¼•ç”¨ (FinalReference) æ— éœ€æ‰‹åŠ¨ç¼–ç ï¼Œä½†å…¶å†…éƒ¨é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨ï¼Œåœ¨åƒåœ¾å›æ”¶æ—¶ï¼Œç»ˆç»“å™¨å¼•1ç”¨å…¥é˜Ÿï¼ˆè¢«å¼•1ç”¨å¯¹è±¡æš‚æ—¶æ²¡æœ‰è¢«å›æ”¶ï¼‰ï¼Œå†ç”± Finalizer çº¿ç¨‹é€šè¿‡ç»ˆç»“å™¨å¼•1ç”¨æ‰¾åˆ°è¢«å¼•1ç”¨å¯¹è±¡å¹¶è°ƒç”¨å®ƒçš„finalize æ–¹æ³•ï¼Œç¬¬äºŒæ¬¡GC æ—¶æ‰èƒ½å›æ”¶è¢«å¼•ç”¨å¯¹è±¡ å®çº¿è¡¨ç¤ºå¼ºå¼•ç”¨ å¼ºå¼•ç”¨ æ—¥å¸¸å¼•ç”¨åŸºæœ¬éƒ½ä¸ºå¼ºå¼•ç”¨ï¼Œæ¯”å¦‚ï¼šnewä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é€šè¿‡èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆè¯¥å˜é‡å¼ºå¼•ç”¨è¿™ä¸ªå¯¹è±¡ åªè¦æ²¿ç€GC Rootçš„å¼•ç”¨é“¾å¯ä»¥æ‰¾åˆ°è¯¥å¯¹è±¡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±ä¸ä¼šè¢«å›æ”¶ GC Rootå¯¹ä»–çš„å¼•ç”¨éƒ½æ–­å¼€æ—¶ï¼Œå½“åƒåœ¾å›æ”¶å‘ç”Ÿæ—¶ï¼Œè¯¥å¯¹è±¡è¢«å›æ”¶ è½¯ã€å¼±å¼•ç”¨ åªè¦å¯¹è±¡æ²¡æœ‰æ²¡æœ‰è¢«ç›´æ¥çš„å¼ºå¼•ç”¨æ‰€å¼•ç”¨ï¼Œå½“åƒåœ¾å›æ”¶å‘ç”Ÿæ—¶ï¼Œéƒ½æœ‰å¯èƒ½è¢«å›æ”¶ è½¯å¼•ç”¨ï¼šæ²¡æœ‰å¼ºå¼•ç”¨å¼•ç”¨ä»–ï¼Œå‘ç”Ÿåƒåœ¾å›æ”¶ä¸”åƒåœ¾å›æ”¶åå†…å­˜ä¸è¶³ï¼Œå°±ä¼šå›æ”¶è½¯å¼•ç”¨å¼•ç”¨çš„å¯¹è±¡ å¼±å¼•ç”¨ï¼šæ²¡æœ‰å¼ºå¼•ç”¨å¼•ç”¨ä»–ï¼Œå‘ç”Ÿåƒåœ¾å›æ”¶ï¼Œä¸ç®¡å†…å­˜æ˜¯å¦å……è¶³ï¼Œéƒ½ä¼šå›æ”¶å¼±å¼•ç”¨å¼•ç”¨çš„å¯¹è±¡ è½¯ã€å¼±å¼•ç”¨çš„å¯¹è±¡è¢«å›æ”¶åï¼Œè½¯ã€å¼±å¼•ç”¨å°±ä¼šè¢«æ”¾å…¥å¼•ç”¨é˜Ÿåˆ—ï¼Œå¦‚æœæƒ³è¦é‡Šæ”¾è½¯ã€å¼±å¼•ç”¨ï¼Œéœ€è¦ä½¿ç”¨å¼•ç”¨é˜Ÿåˆ—è¿›è¡Œé‡Šæ”¾ å¯ä»¥é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨ è½¯å¼•ç”¨çš„åº”ç”¨ //byte[]ä½¿ç”¨å¼ºå¼•ç”¨ï¼Œå¯èƒ½é€ æˆOutOfMemoryError //list å¼ºå¼•ç”¨--&gt; byte[] List&lt;byte[]&gt; list; //list å¼ºå¼•ç”¨--&gt; SoftReference è½¯å¼•ç”¨--&gt; byte[] //ä¸ä¼šé€ æˆOutOfMemoryErrorï¼Œå½“å†…å­˜ä¸è¶³æ—¶byte[]ä¼šè¢«åƒåœ¾å›æ”¶ List&lt;SoftReference&lt;byte[]&gt;&gt; list è½¯å¼•ç”¨å¼•ç”¨é˜Ÿåˆ— ReferenceQueue&lt;byte[]&gt; queue //å¸Œæœ›åœ¨byte[]è¢«æ¸…ç†æ—¶ï¼Œå¯¹åº”çš„SoftReference&lt;byte[]&gt;ä¹Ÿè¢«æ¸…ç† List&lt;SoftReference&lt;byte[]&gt;&gt; list //è½¯å¼•ç”¨å¯¹è±¡å…³è”äº†è½¯å¼•ç”¨é˜Ÿåˆ—ï¼Œå½“è½¯å¼•ç”¨æ‰€å…³è”çš„byte[]è¢«å›æ”¶æ—¶ï¼Œè½¯å¼•ç”¨ä¼šåŠ å…¥åˆ°queueä¸­å» SoftReference&lt;byte[]&gt; ref = new SoftReference&lt;&gt;(new byte[], queue); //ä»é˜Ÿåˆ—ä¸­è·å–æ— ç”¨çš„è½¯å¼•ç”¨å¯¹è±¡ï¼Œå¹¶ç§»é™¤ Referecne&lt;? extends byte[]&gt; poll = queue.poll(); while(poll != null){ //ç§»é™¤åˆ—è¡¨ä¸­çš„è½¯å¼•ç”¨å¯¹è±¡ list.remove(poll); poll = queue.poll(); } å¼±å¼•ç”¨çš„åº”ç”¨ //byte[]ä½¿ç”¨å¼ºå¼•ç”¨ï¼Œå¯èƒ½é€ æˆOutOfMemoryError //list å¼ºå¼•ç”¨--&gt; byte[] List&lt;byte[]&gt; list; //list å¼ºå¼•ç”¨--&gt; WeakReference å¼±å¼•ç”¨--&gt; byte[] //ä¸ä¼šé€ æˆOutOfMemoryErrorï¼Œbyte[]æ²¡æœ‰è¢«å¼ºå¼•ç”¨æ—¶ï¼Œä¼šè¢«åƒåœ¾å›æ”¶ //åœ¨åƒåœ¾å›æ”¶æ—¶ä¼šè¿›è¡Œåƒåœ¾å›æ”¶ //å¼±å¼•ç”¨çš„å¼•ç”¨é˜Ÿåˆ—ä¸è½¯å¼•ç”¨ç±»ä¼¼ List&lt;WeakReference&lt;byte[]&gt;&gt; list è™šå¼•ç”¨ å½“ByteBufferå¯¹è±¡åˆ›å»ºï¼Œä¼šäº§ç”Ÿä¸€ä¸ªCleanerçš„è™šå¼•ç”¨å¯¹è±¡ï¼ŒByteBufferä¼šäº§ç”Ÿä¸€å—ç›´æ¥å†…å­˜ï¼Œå¹¶æŠŠç›´æ¥å†…å­˜åœ°å€ä¼ é€’ç»™è™šå¼•ç”¨å¯¹è±¡ å½“ByteBufferæ²¡æœ‰è¢«å¼ºå¼•ç”¨ï¼ŒByteBufferå¯ä»¥è¢«åƒåœ¾å›æ”¶æ‰ ByteBufferè¢«åƒåœ¾å›æ”¶åï¼Œè™šå¼•ç”¨å¯¹è±¡Cleanerè¿›å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—ã€‚ ReferenceHandlerä¼šå®šæ—¶æŸ¥çœ‹å¼•ç”¨é˜Ÿåˆ—æ˜¯å¦æœ‰è™šå¼•ç”¨å¯¹è±¡Cleanerï¼Œå¦‚æœæœ‰å°±è°ƒç”¨å…¶ä¸­çš„cleanæ–¹æ³•ï¼Œä»è€Œé‡Šæ”¾ç›´æ¥å†…å­˜ ä¸è½¯ã€å¼±å¼•ç”¨ä¸åŒï¼Œè™šå¼•ç”¨å¿…é¡»é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨ ç»ˆç»“å™¨å¼•ç”¨ å½“ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰è¢«å¼ºå¼•ç”¨ï¼Œä¸”é‡å†™äº†finalize()æ–¹æ³•ï¼ŒJVMä¼šåˆ›å»ºç»ˆç»“å™¨å¼•ç”¨ å½“è¢«åƒåœ¾å›æ”¶æ—¶ï¼Œå°†ç»ˆç»“å™¨å¼•ç”¨æ”¾å…¥é˜Ÿåˆ— å†ç”±ä¸€ä¸ªä¼˜å…ˆçº§å¾ˆä½çš„çº¿ç¨‹FinalizeHandlerçš„çº¿ç¨‹æŸ¥çœ‹å¼•ç”¨é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ç»ˆç»“å™¨å¼•ç”¨ï¼Œå¦‚æœæœ‰å°±æ‰¾åˆ°å¯¹è±¡è°ƒç”¨å¯¹è±¡çš„finalize()æ–¹æ³•ï¼Œåœ¨ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶æ—¶ï¼Œå°±æŠŠè¯¥å¯¹è±¡å ç”¨çš„å†…å­˜çœŸæ­£å›æ”¶æ‰äº† åƒåœ¾å›æ”¶ç®—æ³• JVMä¼šæ ¹æ®å…·ä½“æƒ…å†µåœ¨ä¸‹é¢ä¸‰ç§æ–¹æ³•ä¸­é€‰æ‹©é€‚å½“çš„åƒåœ¾å›æ”¶ç®—æ³•æ¥è¿›è¡Œåƒåœ¾å›æ”¶ æ ‡è®°æ¸…é™¤ç®—æ³•(Mark Sweep) æ ‡è®°ï¼Œå°†æ²¡æœ‰è¢«GC Rootå¼•ç”¨çš„å¯¹è±¡æ ‡è®°å‡ºæ¥ æ¸…é™¤ï¼Œå°†æ ‡è®°çš„å¯¹è±¡è¿›è¡Œæ¸…é™¤ï¼Œå°†å¯¹åº”å†…å­˜çš„å¼€å§‹å’Œç»“æŸåœ°å€æ”¾å…¥ç©ºé—²åœ°å€åˆ—è¡¨å³å¯ ä¼˜ç‚¹ é€Ÿåº¦å¿« ç¼ºç‚¹ ä¼šé€ æˆå†…å­˜ç¢ç‰‡ æ ‡è®°æ•´ç†ç®—æ³•(Mark Compact) æ ‡è®°ï¼Œå°†æ²¡æœ‰è¢«GC Rootå¼•ç”¨çš„å¯¹è±¡æ ‡è®°å‡ºæ¥ æ•´ç†ï¼Œå°†æ ‡è®°çš„å¯¹è±¡è¿›è¡Œæ¸…é™¤ï¼ŒåŒæ—¶è¿›è¡Œæ•´ç† ä¼˜ç‚¹ è§£å†³å†…å­˜ç¢ç‰‡çš„é—®é¢˜ ç¼ºç‚¹ ç”±äºæ•´ç†æ¶‰åŠåˆ°å¯¹è±¡çš„ç§»åŠ¨ï¼Œå¯¼è‡´æ•ˆç‡è¾ƒä½ å¤åˆ¶ç®—æ³•(Copy) å°†å†…å­˜åŒºåŸŸåˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—åŒºåŸŸï¼Œä¸€å—ä¸ºFROMå¦ä¸€å—ä¸ºTO æ ‡è®°ï¼Œå°†æ²¡æœ‰è¢«GC Rootå¼•ç”¨çš„å¯¹è±¡æ ‡è®°å‡ºæ¥ æŠŠFROMä¸­å­˜æ´»çš„å¯¹è±¡å¤åˆ¶(å¤åˆ¶è¿‡ç¨‹ä¸­ä¹Ÿä¼šè¿›è¡Œæ•´ç†)åˆ°TOä¸­ï¼Œç„¶åæ¸…é™¤FROMä¸­çš„å¯¹è±¡ TOå˜ä¸ºFROMï¼ŒFROMå˜TO ä¼˜ç‚¹ ä¸ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ ç¼ºç‚¹ å ç”¨åŒå€çš„å†…å­˜ç©ºé—´ åˆ†ä»£å›æ”¶ æ–°ç”Ÿä»£åƒåœ¾å›æ”¶æ›´ä¸ºé¢‘ç¹ï¼Œå›æ”¶ä¸€æ¬¡è€—æ—¶è¾ƒå°‘ è€å¹´ä»£åƒåœ¾å›æ”¶é¢‘ç‡è¾ƒä½ï¼Œå›æ”¶ä¸€æ¬¡è€—æ—¶è¾ƒå¤š æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œå­˜æ”¾åœ¨ä¼Šç”¸å›­å½“ä¸­ å½“ç»§ç»­åˆ›å»ºå¯¹è±¡æ—¶å‘ç°ä¼Šç”¸å›­å†…çš„å†…å­˜ç©ºé—´ä¸è¶³ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡åƒåœ¾å›æ”¶(Minor GC) Minor GCæ ¹æ®å¯è¾¾æ€§åˆ†æç®—æ³•ï¼Œå¯¹å¯¹è±¡è¿›è¡Œæ ‡è®° ä½¿ç”¨å¤åˆ¶ç®—æ³•æŠŠå­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¹¸å­˜åŒºTOä¸­ï¼ŒåŒæ—¶å°†è¿™äº›å¯¹è±¡çš„å¯¿å‘½+1 å¹¸å­˜åŒºFROMå˜ä¸ºTOï¼ŒTOå˜æˆFROM ç»§ç»­å‘ä¼Šç”¸å›­å­˜æ”¾å¯¹è±¡ï¼Œå½“ä¼Šç”¸å›­å†æ¬¡å†…å­˜ç©ºé—´ä¸è¶³æ—¶ï¼Œå†æ¬¡è§¦å‘ç¬¬äºŒæ¬¡åƒåœ¾å›æ”¶(Minor GC) Minor GCæ ¹æ®å¯è¾¾æ€§åˆ†æç®—æ³•ï¼Œå¯¹ä¼Šç”¸å›­ä¸­å’Œå¹¸å­˜åŒºä¸­å¯¹è±¡è¿›è¡Œæ ‡è®° ä½¿ç”¨å¤åˆ¶ç®—æ³•æŠŠå­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¹¸å­˜åŒºTOä¸­ï¼ŒåŒæ—¶å°†è¿™äº›å¯¹è±¡çš„å¯¿å‘½+1 å½“å¹¸å­˜åŒºå¯¹è±¡ä¸­çš„å¯¿å‘½è¾¾åˆ°äº†é˜ˆå€¼(æœ€å¤§å¯¿å‘½ä¸º15)ï¼Œå°†å…¶æ™‹å‡åˆ°è€å¹´ä»£ä¸­ å¹¸å­˜åŒºFROMå˜ä¸ºTOï¼ŒTOå˜æˆFROM Minor GCä¼šå¼•å‘stop the world(åœ¨åƒåœ¾å›æ”¶æ—¶ï¼Œæš‚åœå…¶ä»–çš„ç”¨æˆ·çº¿ç¨‹ï¼Œç­‰åƒåœ¾å›æ”¶åŠ¨ä½œç»“æŸï¼Œå…¶ä»–çš„ç”¨æˆ·çº¿ç¨‹æ‰å¯ä»¥ç»§ç»­è¿›è¡Œ) å½“è€å¹´ä»£ç©ºé—´ä¸è¶³ï¼Œå…ˆå°è¯•è§¦å‘Minor GCï¼Œå¦‚æœä¹‹åç©ºé—´ä»ä¸è¶³ï¼Œè§¦å‘ä¸€æ¬¡Full GC(Full GCåŒæ ·ä¼šè§¦å‘stop the worldï¼Œä¸”æ—¶é—´æ›´é•¿ï¼Œé‡‡ç”¨çš„æ˜¯æ ‡è®°æ•´ç†æˆ–æ ‡è®°æ¸…é™¤ç®—æ³•) å½“è€å¹´ä»£ç©ºé—´è¶³å¤Ÿï¼Œæ–°ç”Ÿä»£ç©ºé—´ä¸€å®šä¸è¶³çš„æƒ…å†µä¸‹ï¼Œå¤§å¯¹è±¡ç›´æ¥æ™‹å‡åˆ°è€å¹´ä»£ å¦‚æœä»æ—§åˆ†é…å¤±è´¥ï¼Œè§¦å‘OutOfMemoryError ä¸€ä¸ªçº¿ç¨‹çš„OutOfMemoryErrorä¸ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹ç»“æŸ ç›¸å…³VMå‚æ•° å«ä¹‰ å‚æ•° å †åˆå§‹å¤§å° -Xms å †æœ€å¤§å¤§å° -Xmxæˆ–-XX:MaxHeapSize=size æ–°ç”Ÿä»£å¤§å° -Xmnæˆ–(-XX:NewSize=size+ -XX:MaxNewSize=size) å¹¸å­˜åŒºæ¯”ä¾‹(åŠ¨æ€) -XX:InitialSurvivorRatio=ratioå’Œ-XX:+UseAdaptiveSizePolicy å¹¸å­˜åŒºæ¯”ä¾‹ -XX:SurvivorRatio=ratio æ™‹å‡é˜ˆå€¼ -XX:MaxTenuringThreshold=threshold æ™‹å‡è¯¦æƒ… -XX:+PrintTenuringDistribution GCè¯¦æƒ… -XX:+PrintGCDetails -verbose:gc FullGCå‰MinorGC -XX:+ScavengeBeforeFullGC åˆ†ä»£åƒåœ¾å›æ”¶è¯¦æƒ… åˆå§‹æƒ…å†µ æ‰§è¡Œåæƒ…å†µ è§¦å‘ç¬¬äºŒæ¬¡GC åƒåœ¾å›æ”¶å™¨ ä¸²è¡Œçš„åƒåœ¾å›æ”¶å™¨ å•çº¿ç¨‹(å…¶ä»–çº¿ç¨‹éƒ½æš‚åœ) å †å†…å­˜è¾ƒå°æ—¶ï¼Œé€‚åˆä¸ªäººç”µè„‘ Serialï¼šå·¥ä½œåœ¨æ–°ç”Ÿä»£ï¼Œé‡‡ç”¨çš„æ˜¯å¤åˆ¶ç®—æ³•SerialOldï¼šå·¥ä½œåœ¨è€å¹´ä»£ï¼Œé‡‡ç”¨çš„æ˜¯æ ‡è®°æ•´ç†ç®—æ³• ååé‡ä¼˜å…ˆçš„åƒåœ¾å›æ”¶å™¨ å¤šçº¿ç¨‹ å †å†…å­˜è¾ƒå¤§çš„åœºæ™¯ï¼Œéœ€è¦å¤šæ ¸cpuæ¥æ”¯æŒ è®©å•ä½æ—¶é—´å†…ï¼Œstop the worldçš„æ—¶é—´æœ€çŸ­ï¼Œé™ä½åƒåœ¾å›æ”¶æ—¶é—´åœ¨å·¥ä½œæ—¶é—´çš„å æ¯” å¹¶è¡Œçš„ï¼Œå¤šä¸ªåƒåœ¾å›æ”¶å™¨å¹¶è¡Œè¿è¡Œï¼Œä½†æ˜¯åƒåœ¾å›æ”¶æœŸé—´ä¸å…è®¸ç”¨æˆ·çº¿ç¨‹ç»§ç»­è¿è¡ŒUseParallelGCï¼šä½œç”¨åœ¨æ–°ç”Ÿä»£ï¼Œä½¿ç”¨å¤åˆ¶ç®—æ³•UseParallelOldGCï¼šä½œç”¨åœ¨è€å¹´ä»£ï¼Œä½¿ç”¨æ ‡è®°æ•´ç†ç®—æ³•ParallelGCThreadsï¼šæ§åˆ¶ParallelGCçº¿ç¨‹æ•°UseAdaptiveSizePolicyï¼šé‡‡ç”¨è‡ªé€‚åº”çš„å¤§å°è°ƒæ•´ç­–ç•¥ï¼Œè°ƒæ•´æ–°ç”Ÿä»£å¤§å°(åŠ¨æ€è°ƒæ•´ä¼Šç”¸å›­å’Œå¹¸å­˜åŒºæ¯”ä¾‹ï¼Œä»¥åŠæ™‹å‡é˜ˆå€¼)GCTimeRatio ï¼šè°ƒæ•´åƒåœ¾å›æ”¶ä¸æ€»æ—¶é—´çš„å æ¯”(1/(1+ratio))(ratioé»˜è®¤ä¸º99)åƒåœ¾å›æ”¶æ—¶é—´å æ€»æ—¶é—´çš„æœ€å¤§æ¯”ä¾‹ï¼Œä¸€èˆ¬ä¿®æ”¹ä¸º19MaxGCPauseMillisï¼šé»˜è®¤å€¼ä¸º200msï¼Œå•æ¬¡åƒåœ¾å›æ”¶æš‚åœæœ€å¤§æ—¶é—´ï¼Œä¸GCTimeRatioæˆåæ¯”éœ€è¦æŠ˜ä¸­(å½“å †å˜å¤§ï¼Œå•è¯å›æ”¶æ—¶é—´å˜é•¿ï¼Œå½“å †å˜å°ï¼Œåƒåœ¾å›æ”¶å æ¯”å¢åŠ ï¼Œå‡å°‘ååé‡) å“åº”æ—¶é—´ä¼˜å…ˆçš„åƒåœ¾å›æ”¶å™¨ å¤šçº¿ç¨‹ å †å†…å­˜è¾ƒå¤§çš„åœºæ™¯ï¼Œéœ€è¦å¤šæ ¸cpuæ¥æ”¯æŒ è®©å•æ¬¡çš„stop the worldçš„æ—¶é—´å°½å¯èƒ½çš„çŸ­ï¼Œé™ä½æ¯æ¬¡åƒåœ¾å›æ”¶æ‰€éœ€è¦çš„æ—¶é—´ ä½¿ç”¨æ ‡è®°æ¸…é™¤ç®—æ³•çš„åƒåœ¾å›æ”¶å™¨ï¼Œä¸”ä¸ºå¹¶å‘çš„ï¼Œç”¨æˆ·çº¿ç¨‹ä¸åƒåœ¾å›æ”¶çº¿ç¨‹å¹¶å‘è¿›è¡ŒUseConMarkSweepGCï¼šå·¥ä½œåœ¨è€å¹´ä»£ï¼Œä½¿ç”¨æ ‡è®°æ¸…é™¤ç®—æ³•ï¼Œå¦‚æœå‡ºç°å¹¶å‘å¤±è´¥çš„é—®é¢˜ä½¿ç”¨SerialOldæ¥è¿›è¡Œè¡¥æ•‘ï¼Œä½¿ç”¨æ ‡è®°æ•´ç†çš„æ–¹æ³•UseParNewGCï¼šå·¥ä½œåœ¨æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶å™¨ï¼šå¤åˆ¶ç®—æ³•ParallelGCThreadsï¼šå¹¶è¡Œçš„åƒåœ¾å›æ”¶çº¿ç¨‹æ•°ConGCThreadsï¼šå¹¶å‘çš„åƒåœ¾å›æ”¶çº¿ç¨‹æ•°ï¼Œä¸€èˆ¬ä¸ºParallelGCThreadsçš„å››åˆ†ä¹‹ä¸€CMSInitiatingOccupancyFractionï¼šå†…å­˜å æ¯”åˆ°å¤šå°‘ç™¾åˆ†æ¯”æ—¶æ¥è¿›è¡Œåƒåœ¾å›æ”¶CMSScavengeBeforeRemarkï¼šåœ¨é‡æ–°æ ‡è®°å‰å¯¹æ–°ç”Ÿä»£è¿›è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ï¼Œå‡å°‘é‡æ–°æ ‡è®°æ—¶åƒåœ¾å›æ”¶å™¨æ‰«æçš„æ•°é‡ï¼Œå‡å°‘æ—¶é—´ è€å¹´ä»£å‘ç”Ÿäº†å†…å­˜ä¸è¶³ï¼Œçº¿ç¨‹åˆ°è¾¾å®‰å…¨ç‚¹æš‚åœ CMS(ConcMarkSweepGC)è¿›è¡Œåˆå§‹æ ‡è®°ï¼Œä¾ç„¶éœ€è¦stop the world ç”¨æˆ·çº¿ç¨‹å¯ä»¥å›å¤è¿è¡Œï¼Œåƒåœ¾å›æ”¶çº¿ç¨‹å¹¶å‘æ ‡è®° å¹¶å‘æ ‡è®°åï¼Œstop the world é‡æ–°æ ‡è®°(çº¿ç¨‹ä¸­çš„èµ„æºå¯èƒ½å‘ç”Ÿæ”¹å˜) ç”¨æˆ·çº¿ç¨‹æ¢å¤è¿è¡Œï¼Œåƒåœ¾å›æ”¶å™¨è¿›è¡Œå¹¶å‘çš„æ¸…ç† è¿è¡Œè¿‡ç¨‹ä¸­å¯èƒ½äº§ç”Ÿæ–°çš„åƒåœ¾ï¼Œæˆä¸ºæµ®åŠ¨åƒåœ¾ï¼Œéœ€è¦åœ¨ä¸‹æ¬¡åƒåœ¾å›æ”¶æ—¶è¿›è¡Œå›æ”¶ éœ€è¦é¢„ç•™ç©ºé—´ä¿ç•™æµ®åŠ¨åƒåœ¾æ¥ä¿è¯ç”¨æˆ·çº¿ç¨‹çš„è¿è¡Œ ç¢ç‰‡å¤ªå¤šæ—¶ï¼Œæ— æ³•ç»§ç»­å­˜æ”¾å¯¹è±¡ï¼Œè¿›è¡Œä¸€æ¬¡SerialGC G1(garbage one) å®šä¹‰ Garbage FirstJDK9é»˜è®¤ï¼ŒåºŸå¼ƒäº†CMSåƒåœ¾å›æ”¶å™¨ é€‚ç”¨åœºæ™¯ åŒæ—¶æ³¨é‡ååé‡å’Œä½å»¶è¿Ÿï¼Œé»˜è®¤çš„æš‚åœç›®æ ‡ä¸º200ms è¶…å¤§å †å†…å­˜ï¼Œä¼šå°†å †åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„Region æ•´ä½“ä¸Šæ˜¯æ ‡è®°+æ•´ç†ç®—æ³•ï¼Œä¸¤ä¸ªåŒºåŸŸä¹‹é—´æ˜¯å¤åˆ¶ç®—æ³• ç›¸å…³JVMå‚æ•° -XXï¼š+UseG1GCï¼šJDK9ä»¥åé»˜è®¤å¼€å¯ï¼Œæ— éœ€æ˜¾å¼å¯ç”¨-XXï¼šG1HeapRegionSize=sizeï¼šè®¾å®šRegionå¤§å°-XXï¼šMaxGCPauseMillis=timeï¼šè®¾å®šæš‚åœç›®æ ‡ G1åƒåœ¾å›æ”¶é˜¶æ®µ æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›† è€å¹´ä»£å†…å­˜è¶…è¿‡é˜ˆå€¼ï¼Œåœ¨æ–°ç”Ÿä»£åƒåœ¾å›æ”¶çš„åŒæ—¶è¿›è¡Œå¹¶å‘çš„æ ‡è®° æ··åˆæ”¶é›†ï¼šå¯¹æ–°ç”Ÿä»£å’Œè€å¹´ä»£éƒ½è¿›è¡Œåƒåœ¾æ”¶é›† YoungCollection ä¼šSTW æ¯ä¸ªæ–¹æ ¼ä»£è¡¨ä¸€ä¸ªRegion(è¯¥Regionå¯ä»¥ä¸ºä¼Šç”¸å›­æˆ–å¹¸å­˜åŒºæˆ–è€å¹´ä»£)ï¼Œç©ºç™½è¡¨ç¤ºä¸ºç©ºé—²åŒºåŸŸï¼ŒEä»£è¡¨ä¼Šç”¸å›­åŒºåŸŸï¼ŒSä»£è¡¨å¹¸å­˜åŒºï¼ŒOä»£è¡¨è€å¹´ä»£å½“ä¼Šç”¸å›­å°†è¦è¢«å æ»¡è§¦å‘æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶(YoungCollectionä¹Ÿä¼šSTW)ï¼Œé€šè¿‡å¤åˆ¶ç®—æ³•æ”¾å…¥å¹¸å­˜åŒºå¹¸å­˜åŒºçš„å¯¹è±¡è¾ƒå¤šï¼Œæˆ–å¹´é¾„è¶…è¿‡é˜ˆå€¼ï¼Œå†æ¬¡è§¦å‘æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ï¼Œä¸€éƒ¨åˆ†å¯¹è±¡è¿›å…¥åˆ°è€å¹´ä»£ï¼Œå¦ä¸€éƒ¨åˆ†è¢«åƒåœ¾å›æ”¶æˆ–è€…æ‹·è´åˆ°å¦ä¸€ä¸ªå¹¸å­˜åŒº YoungCollection + ConcurrentMark åœ¨YoungGCæ—¶ä¼šè¿›è¡ŒGCRootçš„åˆå§‹æ ‡è®° è€å¹´ä»£å ç”¨å †ç©ºé—´æ¯”ä¾‹è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œè¿›è¡Œå¹¶å‘æ ‡è®°(ä¸ä¼šSTW)ï¼Œæ¯”ä¾‹ç”±-XX:InitiatingHeapOccupancyPersent=percentç¡®å®šé»˜è®¤ä¸º45% Mixed Collection ä¼šå¯¹Eã€Sã€Oè¿›è¡Œå…¨é¢çš„åƒåœ¾å›æ”¶ æœ€ç»ˆæ ‡è®°(Remark)ä¼šSTWï¼Œå¹¶å‘æ ‡è®°ä¸­å¯èƒ½æ¼æ‰çš„å¯¹è±¡ï¼Œæµ®åŠ¨åƒåœ¾ æ‹·è´å­˜æ´»(Evacuation)ä¼šSTW æ–°ç”Ÿä»£ï¼šå¤åˆ¶ç®—æ³•(é»‘è‰²ç®­å¤´) è€å¹´ä»£ï¼šå¤åˆ¶ç®—æ³•(çº¢è‰²ç®­å¤´ï¼ŒG1æ ¹æ®æœ€å¤§æš‚åœæ—¶é—´é€‰æ‹©æ€§åœ°è¿›è¡Œä¸€ä¸ªåƒåœ¾å›æ”¶ï¼Œæ‰€ä»¥ä¸æ˜¯æ‰€æœ‰è€å¹´ä»£éƒ½è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œé€‰æ‹©åƒåœ¾æœ€å¤šçš„è€å¹´ä»£åŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶) -XX:MaxGCPauseMillis=ms FullGC SerialGC æ–°ç”Ÿä»£å†…å­˜ä¸è¶³å‘ç”Ÿçš„åƒåœ¾æ”¶é›† -Minor GC è€å¹´ä»£å†…å­˜ä¸è¶³å‘ç”Ÿçš„åƒåœ¾æ”¶é›† -FullGC ParallelGC æ–°ç”Ÿä»£å†…å­˜ä¸è¶³å‘ç”Ÿçš„åƒåœ¾æ”¶é›† -Minor GC è€å¹´ä»£å†…å­˜ä¸è¶³å‘ç”Ÿçš„åƒåœ¾æ”¶é›† -FullGC CMS æ–°ç”Ÿä»£å†…å­˜ä¸è¶³å‘ç”Ÿçš„åƒåœ¾æ”¶é›† -Minor GC è€å¹´ä»£å†…å­˜ä¸è¶³ å¹¶å‘æ”¶é›†é˜¶æ®µï¼Œä¸ä¸ºFullGC å¹¶å‘å¤±è´¥ï¼Œé€€åŒ–ä¸ºä¸²è¡Œåƒåœ¾æ”¶é›†ï¼ŒFullGC G1 æ–°ç”Ÿä»£å†…å­˜ä¸è¶³å‘ç”Ÿçš„åƒåœ¾æ”¶é›† -Minor GC è€å¹´ä»£å†…å­˜ä¸è¶³ å½“è€å¹´ä»£å†…å­˜å æ¯”è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œè§¦å‘å¹¶å‘æ ‡è®°é˜¶æ®µåŠæ··åˆæ”¶é›†çš„é˜¶æ®µ å¦‚æœå›æ”¶é€Ÿåº¦é«˜äºçº¿ç¨‹åƒåœ¾äº§ç”Ÿé€Ÿåº¦æ—¶ï¼Œä¸ºå¹¶å‘åƒåœ¾æ”¶é›† å¦‚æœåƒåœ¾å›æ”¶é€Ÿåº¦ä½äºçº¿ç¨‹åƒåœ¾äº§ç”Ÿé€Ÿåº¦ï¼Œå¹¶å‘æ”¶é›†å¤±è´¥ï¼Œé€€åŒ–ä¸ºå¤šçº¿ç¨‹çš„åƒåœ¾æ”¶é›†-FullGC Young Collectionè·¨ä»£å¼•ç”¨ æ–°ç”Ÿä»£å›æ”¶çš„è·¨ä»£å¼•ç”¨(è€å¹´ä»£å¼•ç”¨æ–°ç”Ÿä»£)é—®é¢˜ æŠŠè€å¹´ä»£åˆ†ä¸ºå†æ¬¡æˆåˆ†ä¸ºcardï¼Œå¦‚æœcardä¸­çš„å¯¹è±¡å¼•ç”¨äº†æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ï¼Œé‚£ä¹ˆè¯¥cardè¢«æ ‡è®°ä¸ºè„card æ–°ç”Ÿä»£ä¸­ç”±Remembered Setè®°å½•Incoming Reference(è®°å½•å¤–éƒ¨å¯¹ä»–çš„å¼•ç”¨)ï¼Œè®°å½•éƒ½æœ‰å“ªäº›è„card åœ¨å¯¹æ–°ç”Ÿä»£æ ‡è®°æ—¶ï¼Œå…ˆæ ¹æ®Remembered Setæ‰¾åˆ°å¯¹åº”è„cardï¼Œå†ä»è„cardè¿›è¡ŒGCRoot åœ¨å¼•ç”¨å˜æ›´æ—¶é€šè¿‡post-write barrier + dirty card queueï¼Œæ¥æ ‡è®°è„card(å¼‚æ­¥æ“ä½œï¼Œå…ˆå°†æŒ‡ä»¤æ”¾åœ¨é˜Ÿåˆ—ä¸­ï¼Œä¹‹åç”±ä¸€ä¸ªçº¿ç¨‹å®Œæˆè„å¡çš„æ›´æ–°æ“ä½œ) concurrent refinement threadsæ›´æ–°Remembered Set Remark(é‡æ–°æ ‡è®°é˜¶æ®µ)(éœ€è¦å¯¹ç€ä¹¦é‡æ–°æ•´ç†) pre-write barrier + satb_mark_queue ä¸Šå›¾è¡¨ç¤ºå¹¶å‘æ ‡è®°é˜¶æ®µæ—¶çš„å¯¹è±¡å¤„ç†çŠ¶æ€ï¼Œ é»‘è‰²çš„æŒ‡æ ‡è®°å®Œæˆï¼Œä¸”æœ‰å¯¹è±¡å¼•ç”¨çš„ã€‚ ç°è‰²è¡¨ç¤ºæ­£åœ¨æ ‡è®°å¤„ç†çš„ ç™½è‰²è¡¨ç¤ºè¿˜æ²¡æœ‰è¿›è¡Œæ ‡è®°å¤„ç†çš„ Bæ­£åœ¨å¤„ç†ä¸­ï¼Œåœ¨å¤„ç†åå˜ä¸ºé»‘è‰² å¦‚æœAå¼•ç”¨äº†Cï¼Œä½†æ˜¯Aå·²ç»å®Œæˆæ ‡è®°ï¼Œä¸ä¼šå†å¯¹Aè¿›è¡Œæ ‡è®°ï¼Œæ‰€ä»¥æ— æ³•å¯¹Cè¿›è¡Œæ ‡è®° ä½†æ˜¯Cä¾ç„¶æ˜¯è¢«å¼•ç”¨çš„ï¼Œæ‰€ä»¥ä¸èƒ½è¢«åƒåœ¾å›æ”¶æ‰ å½“å¯¹è±¡çš„å¼•ç”¨å‘ç”Ÿæ”¹å˜ï¼Œè§¦å‘å†™å±éšœä»£ç ï¼Œå°†è¯¥å¯¹è±¡æ”¾å…¥åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå¹¶ç½®ä¸ºç°è‰²ã€‚åœ¨è¿›å…¥åˆ°é‡æ–°æ ‡è®°é˜¶æ®µæ—¶ï¼Œå¯¹è¯¥é˜Ÿåˆ—ä¸­çš„å¯¹è±¡é‡æ–°è¿›è¡Œä¸€ä¸ªæ£€æŸ¥ JDK8u20å­—ç¬¦ä¸²å»é‡ ä¼˜ç‚¹ï¼šèŠ‚çœå¤§é‡å†…å­˜ ç¼ºç‚¹ï¼šç•¥å¾®å¤šå ç”¨äº†CPUæ—¶é—´ï¼Œæ–°ç”Ÿä»£å›æ”¶æ—¶é—´ç•¥å¾®å¢åŠ  -XX:+UseStringDeduplication String s1 = new String(&quot;hello&quot;);//char[]{'h','e','l','l','o'} String s2 = new String(&quot;hello&quot;);//char[]{'h','e','l','l','o'} å°†æ‰€æœ‰æ–°åˆ†é…çš„å­—ç¬¦ä¸²æ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ— å½“æ–°ç”Ÿä»£å›æ”¶æ—¶ï¼ŒG1å¹¶å‘æ£€æŸ¥æ˜¯å¦æœ‰å­—ç¬¦ä¸²é‡å¤ å¦‚æœå®ƒä»¬å€¼ä¸€æ ·ï¼Œè®©å®ƒä»¬å¼•ç”¨åŒä¸€ä¸ªchar[] æ³¨æ„ï¼Œä¸String.intern()ä¸ä¸€æ · String.intern()å…³æ³¨çš„æ˜¯å­—ç¬¦ä¸²å¯¹è±¡ è€Œå­—ç¬¦ä¸²å»é‡å…³æ³¨çš„æ˜¯char åœ¨JVMå†…éƒ¨ï¼Œä½¿ç”¨äº†ä¸åŒçš„å­—ç¬¦ä¸²è¡¨ JDK8u40å¹¶å‘æ ‡è®°ç±»å¸è½½ æ‰€æœ‰å¯¹è±¡éƒ½ç»è¿‡å¹¶å‘æ ‡è®°åï¼Œå°±èƒ½çŸ¥é“å“ªäº›ç±»ä¸å†è¢«ä½¿ç”¨ï¼Œå½“ä¸€ä¸ªç±»åŠ è½½å™¨çš„æ‰€æœ‰ç±»éƒ½ä¸å†ä½¿ç”¨ï¼Œåˆ™å¸è½½å®ƒæ‰€åŠ è½½çš„æ‰€æœ‰ç±»-XX:+ClassUnloadingWithConcurrentMarké»˜è®¤å¯ç”¨ JDK8u60å›æ”¶å·¨å‹å¯¹è±¡ ä¸€ä¸ªå¯¹è±¡å¤§äºRegionçš„ä¸€åŠæ—¶ï¼Œç§°ä¹‹ä¸ºå·¨å‹å¯¹è±¡ G1ä¸ä¼šå¯¹å·¨å‹å¯¹è±¡è¿›è¡Œæ‹·è´ å›æ”¶æ—¶è¢«ä¼˜å…ˆè€ƒè™‘ G1ä¼šè·Ÿè¸ªè€å¹´ä»£æ‰€æœ‰incomingå¼•ç”¨ï¼Œå½“å·¨å‹å¯¹è±¡çš„incomingä¸º0æ—¶ï¼Œå·¨å‹å¯¹è±¡å¯ä»¥åœ¨æ–°ç”Ÿä»£åƒåœ¾å›æ”¶æ—¶å¤„ç†æ‰ JDK9å¹¶å‘æ ‡è®°èµ·å§‹æ—¶é—´çš„è°ƒæ•´ å¹¶å‘æ ‡è®°å¿…é¡»åœ¨å †ç©ºé—´å æ»¡å‰å®Œæˆï¼Œå¦åˆ™é€€åŒ–ä¸ºFullGC JDK9ä¹‹å‰éœ€è¦ä½¿ç”¨-XX:InitiatingHeapOccupancyPercent JDK9å¯ä»¥åŠ¨æ€è°ƒæ•´ -XX:InitiatingHeapOccupancyPercentç”¨æ¥è®¾ç½®åˆå§‹å€¼ è¿›è¡Œæ•°æ®é‡‡æ ·å¹¶åŠ¨æ€è°ƒæ•´ æ€»ä¼šæ·»åŠ ä¸€ä¸ªå®‰å…¨çš„å­˜æ¡£ç©ºé—´ åƒåœ¾å›æ”¶è°ƒä¼˜ è°ƒä¼˜çš„é¢†åŸŸ å†…å­˜ é”ç«äº‰ cpuå ç”¨ io ç¡®å®šè°ƒä¼˜ç›®æ ‡ ä½å»¶è¿Ÿè¿˜æ˜¯é«˜ååé‡ï¼Œé€‰æ‹©åˆé€‚çš„å›æ”¶ç«™ ç§‘å­¦è®¡ç®—é€‚åˆé«˜ååé‡ webé¡¹ç›®é€‚åˆä½å»¶è¿Ÿ é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨ ä½å»¶è¿Ÿï¼šCMSã€G1ã€ZGC é«˜ååé‡ï¼šParallelGC å¯ä»¥é€šè¿‡æ›´æ¢è™šæ‹Ÿæœºæ¥è¿›è¡Œè°ƒä¼˜ï¼šä¾‹å¦‚ï¼ŒZingè™šæ‹Ÿæœº æœ€å¿«çš„GCæ˜¯ä¸å‘ç”ŸGC æŸ¥çœ‹FullGCå‰åçš„å†…å­˜å ç”¨ï¼Œè€ƒè™‘å¦‚ä¸‹çš„é—®é¢˜ æ•°æ®æ˜¯ä¸æ˜¯å¤ªå¤š resultSet = statement.executeQuery(&quot;select * from è¡¨&quot;) æ•°æ®è¡¨ç¤ºæ˜¯å¦å¤ªè‡ƒè‚¿ å¯¹è±¡å›¾ å¯¹è±¡å¤§å° æ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼ static Map map ä¸€ç›´å‘é™æ€mapä¸­å­˜æ”¾å¯¹è±¡ ç†Ÿç»ƒä½¿ç”¨è½¯å¼±å¼•ç”¨ï¼Œä½¿ç”¨ç¼“å­˜æ—¶ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹çš„ç¼“å­˜å®ç° æ–°ç”Ÿä»£è°ƒä¼˜ æ–°ç”Ÿä»£ç‰¹ç‚¹ æ‰€æœ‰çš„newæ“ä½œçš„å†…å­˜åˆ†é…éå¸¸å»‰ä»· TLAB thread-local allocation buffer æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šåœ¨ä¼Šç”¸å›­ä¸­è¢«åˆ†é…ä¸€å—ç§æœ‰çš„åŒºåŸŸ å½“çº¿ç¨‹newä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœTLABæœ‰ç©ºé—´ï¼Œé‚£ä¹ˆä¼˜å…ˆåœ¨TLABåˆ†é…å†…å­˜ å‡å°‘äº†çº¿ç¨‹åˆ†é…å†…å­˜æ—¶çš„å†²çª æ­»äº¡å¯¹è±¡çš„å›æ”¶ä»£ä»·æ˜¯é›¶ å¤§éƒ¨åˆ†å¯¹è±¡ç”¨è¿‡å³æ­» MinorGCçš„æ—¶é—´è¿œè¿œä½äºFullGC è°ƒä¼˜ -Xmn(è®¾ç½®æ–°ç”Ÿä»£çš„åˆå§‹å¤§å°å’Œæœ€å¤§å¤§å°)ï¼šOracleå»ºè®®æ–°ç”Ÿä»£å¤§å°ä¸ºæ•´ä¸ªå †å¤§å°çš„25%-50%ï¼Œåˆšå¼€å§‹æ—¶éšç€æ–°ç”Ÿä»£çš„å®¹é‡å¢å¤§ï¼Œååé‡é€æ¸å‡é«˜ï¼Œä½†æ˜¯åˆ°è¾¾ä¸€å®šå¤§å°åï¼Œååé‡éšç€æ–°ç”Ÿä»£å®¹é‡å¢å¤§ä¼šå‡å°‘(ä½†æ˜¯å‡å°‘çš„ç¨‹åº¦è¾ƒå°)(æ–°ç”Ÿä»£å®¹é‡å¤ªå¤§ä¼šå¯¼è‡´è€å¹´ä»£å®¹é‡å˜å°‘ï¼Œå®¹æ˜“è§¦å‘FullGCï¼Œå¯¼è‡´åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´å˜é•¿)ã€‚å»ºè®®è®¾ç½®ä¸ºå¹¶å‘é‡*(è¯·æ±‚å“åº”è¿‡ç¨‹ä¸­äº§ç”Ÿå¯¹è±¡)å¹¸å­˜åŒºï¼šå¤§å°èƒ½ä¿ç•™å½“å‰æ´»è·ƒå¯¹è±¡+éœ€è¦æ™‹å‡å¯¹è±¡ å¹¸å­˜åŒºæ™‹å‡é˜ˆå€¼ï¼šæ™‹å‡é˜ˆå€¼é…ç½®å¾—å½“ï¼Œè®©é•¿æ—¶é—´å­˜æ´»å¯¹è±¡å°½å¿«æ™‹å‡-XX:MaxTenuringThreshold=thresholdï¼šè°ƒæ•´æœ€å¤§æ™‹å‡é˜ˆå€¼-XX:+PrintTenuringDistributionï¼šæ˜¾ç¤ºæ™‹å‡è¯¦ç»†ä¿¡æ¯ è€å¹´ä»£è°ƒä¼˜ ä»¥CMSä¸ºä¾‹ CMSçš„è€å¹´ä»£å†…å­˜è¶Šå¤§è¶Šå¥½ å…ˆå°è¯•ä¸åšè°ƒä¼˜ï¼Œå¦‚æœæ²¡æœ‰FullGCé‚£ä¹ˆå·²ç»å¾ˆå¥½äº†ï¼Œå¦åˆ™å…ˆå°è¯•è°ƒä¼˜æ–°ç”Ÿä»£ è§‚å¯Ÿå‘ç”ŸFullGCæ—¶è€å¹´ä»£å†…å­˜å ç”¨ï¼Œå°†è€å¹´ä»£å†…å­˜é¢„è®¾è°ƒå¤§1/4-1/3 -XX:CMSInitiatingOccupancyFraction=percentè¶…è¿‡ç™¾åˆ†æ¯”è¿›è¡ŒCMSåƒåœ¾å›æ”¶ è°ƒä¼˜æ¡ˆä¾‹ 1. FullGCå’ŒMinorGCé¢‘ç¹ï¼Œä¸”MinorGCæ›´é¢‘ç¹ æ–°ç”Ÿä»£ç©ºé—´å°ï¼Œä¸”ä¼šé€ æˆç”Ÿå‘½å‘¨æœŸçŸ­çš„å¯¹è±¡è¿›å…¥åˆ°è€å¹´ä»£ä»è€Œå¼•å‘FullGCé€šè¿‡å¢å¤§æ–°ç”Ÿä»£ç©ºé—´ï¼ŒåŒæ—¶æé«˜å¹¸å­˜åŒºæ™‹å‡é˜ˆå€¼ï¼Œè®©ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­çš„å¯¹è±¡ç•™åœ¨æ–°ç”Ÿä»£ä¸­ 2.è¯·æ±‚é«˜å³°æœŸå‘ç”ŸFullGCï¼Œå•è¯æš‚åœæ—¶é—´ç‰¹åˆ«é•¿(CMS) æŸ¥çœ‹GCè¯¦æƒ…ï¼Œå‘ç°é‡æ–°æ ‡è®°è€—æ—¶è¾ƒå¤šåœ¨é‡æ–°æ ‡è®°å‰è¿›è¡Œä¸€æ¬¡æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶-XX:CMSScavengeBeforeRemark 3.è€å¹´ä»£å……è£•æƒ…å†µä¸‹ï¼Œå‘ç”ŸFullGC(JDK1.7 CMS) æ°¸ä¹…å¸¦ç©ºé—´ä¸è¶³ ","link":"https://yeyuan1107.github.io/post/jvm-la-ji-hui-shou/"},{"title":"JVMå†…å­˜ç»“æ„","content":"ç¨‹åºè®¡æ•°å™¨ ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆéƒ½æ˜¯çº¿ç¨‹ç§æœ‰çš„å †ã€æ–¹æ³•åŒºéƒ½æ˜¯çº¿ç¨‹å…±äº«çš„ å®šä¹‰ Program Counter Register(ç¨‹åºè®¡æ•°å™¨)(å¯„å­˜å™¨) ä½œç”¨ å³ä¾§ä¸ºJavaæºä»£ç  å·¦ä¾§ä¸ºäºŒè¿›åˆ¶å­—èŠ‚ç ï¼Œå¯¹åº”æ¯ä¸€æ¡jvmæŒ‡ä»¤ï¼ŒjvmæŒ‡ä»¤éœ€è¦é€šè¿‡è§£é‡Šå™¨ç”Ÿæˆæœºå™¨ç ï¼Œå†å°†æœºå™¨ç äº¤ç»™CPUæ¥æ‰§è¡Œ ç¨‹åºè®¡æ•°å™¨ï¼šè®°ä½ä¸‹ä¸€æ¡jvmæŒ‡ä»¤çš„æ‰§è¡Œåœ°å€ï¼Œå½“å‰æŒ‡ä»¤æ‰§è¡Œç»“æŸåï¼Œè§£é‡Šå™¨åˆ°ç¨‹åºè®¡æ•°å™¨è¯»å–ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œæ¥ç€è¿›è¡Œæ‰§è¡Œ ç¨‹åºè®¡æ•°å™¨ï¼šç‰©ç†(ç¡¬ä»¶)ä¸Šæ˜¯é€šè¿‡å¯„å­˜å™¨æ¥å®ç°çš„ ç‰¹ç‚¹ çº¿ç¨‹ç§æœ‰çš„ï¼Œå±äºå½“å‰çº¿ç¨‹ã€‚å¦‚æœå½“å‰çº¿ç¨‹æ—¶é—´ç‰‡è€—å°½ï¼Œç¨‹åºè®¡æ•°å™¨è®°å½•å½“å‰çº¿ç¨‹çš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ï¼Œç­‰åˆ°å½“å‰çº¿ç¨‹è·å¾—CPUæ—¶ç»§ç»­è¿›è¡Œæ‰§è¡Œ å”¯ä¸€ä¸€ä¸ªä¸ä¼šå­˜åœ¨å†…å­˜æº¢å‡ºçš„åŒº è™šæ‹Ÿæœºæ ˆ -XssæŒ‡å®šè™šæ‹Ÿæœºæ ˆå¤§å° è™šæ‹Ÿæœºæ ˆæŒ‡çš„æ˜¯çº¿ç¨‹è¿è¡Œéœ€è¦çš„å†…å­˜ç©ºé—´ï¼Œå¤šä¸ªçº¿ç¨‹å°±æœ‰å¤šä¸ªè™šæ‹Ÿæœºæ ˆæ ˆå†…çš„å…ƒç´ ç§°ä¹‹ä¸ºæ ˆå¸§ã€‚ æ ˆå¸§æŒ‡çš„æ˜¯æ¯ä¸ªæ–¹æ³•è¿è¡Œæ—¶éœ€è¦çš„å†…å­˜(æ–¹æ³•å‚æ•°ï¼Œå±€éƒ¨å˜é‡ï¼Œè¿”å›åœ°å€ç­‰)å½“çº¿ç¨‹è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè™šæ‹Ÿæœºæ ˆä¸ºè¯¥æ–¹æ³•åˆ†é…æ ˆå¸§ç©ºé—´ï¼Œå¹¶å°†æ ˆå¸§å‹å…¥è™šæ‹Ÿæœºæ ˆä¸­ï¼Œç­‰æ–¹æ³•ç»“æŸæ—¶å°†è¯¥æ–¹æ³•å¯¹åº”çš„æ ˆå¸§å¼¹å‡ºæ ˆ å®šä¹‰ æ¯ä¸ªçº¿ç¨‹è¿è¡Œæ—¶æ‰€éœ€è¦çš„å†…å­˜ï¼Œç§°ä¸ºè™šæ‹Ÿæœºæ ˆ æ¯ä¸ªæ ˆç”±å¤šä¸ªæ ˆå¸§(Frame)ç»„æˆï¼Œå¯¹åº”ç€æ¯æ¬¡æ–¹æ³•è°ƒç”¨æ—¶æ‰€å ç”¨çš„å†…å­˜ æ¯ä¸ªçº¿ç¨‹åªèƒ½æœ‰ä¸€ä¸ªæ´»åŠ¨æ ˆå¸§ï¼Œå¯¹åº”ç€å½“å‰æ­£åœ¨æ‰§è¡Œçš„é‚£ä¸ªæ–¹æ³• åƒåœ¾å›æ”¶ä¸æ¶‰åŠæ ˆå†…å­˜ï¼Œåƒåœ¾å›æ”¶åªæ¶‰åŠå †å†…å­˜æ ˆå†…å­˜è¶Šå¤§çº¿ç¨‹æ•°è¶Šå°‘ï¼Œå¹¶ä¸æ˜¯è¶Šå¤§è¶Šå¥½æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡(ä¸é€ƒç¦»æ–¹æ³•çš„ä½œç”¨èŒƒå›´ï¼Œé€ƒç¦»ä½œç”¨èŒƒå›´çš„è¡Œä¸ºæ¯”å¦‚ä½œä¸ºå‚æ•°ä¼ å…¥æˆ–è€…ä½œä¸ºè¿”å›å€¼ä¼ å‡º)æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå°±æ— é¡»è€ƒè™‘çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œä»–æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚åä¹‹ï¼Œå¦‚æœä¸ºçº¿ç¨‹å…±äº«çš„ï¼Œå°±éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜å¦‚æœå±€éƒ¨å˜é‡å¼•ç”¨äº†å¯¹è±¡ï¼Œå¹¶é€ƒç¦»äº†æ–¹æ³•ä½œç”¨èŒƒå›´ï¼Œéœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚å¦‚æœä¸ºåŸºæœ¬æ•°æ®ç±»å‹å˜é‡ï¼Œåˆ™ä¸éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜ æ ˆå†…å­˜æº¢å‡º(StackOverflowError) æ ˆå¸§è¿‡å¤šå¯¼è‡´æ ˆå†…å­˜æº¢å‡º æ ˆå¸§è¿‡å¤§å¯¼è‡´æ ˆå†…å­˜æº¢å‡º çº¿ç¨‹è¿è¡Œè¯Šæ–­ æ¡ˆä¾‹ä¸€ï¼šCPUå ç”¨è¿‡å¤š ç”¨topå‘½ä»¤å®šä½å“ªä¸ªè¿›ç¨‹å¯¹cpuçš„å ç”¨è¿‡é«˜ ps H -eo pidmtid,%cpu | grep è¿›ç¨‹id() ç”¨pså‘½ä»¤è¿›ä¸€æ­¥å®šä½æ˜¯å“ªä¸ªçº¿ç¨‹å¼•èµ·çš„cpuå ç”¨è¿‡é«˜ jstack è¿›ç¨‹id å¯ä»¥æ ¹æ®çº¿ç¨‹idæ‰¾åˆ°æœ‰é—®é¢˜çš„çº¿ç¨‹ï¼Œè¿›ä¸€æ­¥å®šä½åˆ°é—®é¢˜ä»£ç çš„æºç è¡Œæ•° æ¡ˆä¾‹äºŒï¼šç¨‹åºè¿è¡Œå¾ˆé•¿æ—¶é—´æ²¡æœ‰ç»“æœ jstackæŸ¥çœ‹æ˜¯å¦å­˜åœ¨æ­»é” æœ¬åœ°æ–¹æ³•æ ˆ ç»™æœ¬åœ°æ–¹æ³•çš„è¿è¡Œ(æœ‰ä¸€äº›æ–¹æ³•æ— æ³•ä½¿ç”¨Javaå®ç°ï¼Œä½¿ç”¨æœ¬åœ°C++ä»£ç å®ç°)ï¼Œæä¾›å†…å­˜ç©ºé—´ å †(Heap) -XmxæŒ‡å®šå †ç©ºé—´å¤§å° å®šä¹‰ é€šè¿‡newå…³é”®å­—åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šä½¿ç”¨å † ç‰¹ç‚¹ä»–æ˜¯çº¿ç¨‹å…±äº«çš„ï¼Œå †ä¸­å¯¹è±¡éƒ½éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨çš„é—®é¢˜æœ‰åƒåœ¾å›æ”¶æœºåˆ¶ å †å†…å­˜æº¢å‡º(OutOfMemoryError OOM) å †å†…å­˜è¯Šæ–­ jpså·¥å…· æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æœ‰å“ªäº›javaè¿›ç¨‹ jmapå·¥å…· æŸ¥çœ‹å †å†…å­˜å ç”¨æƒ…å†µ jmap -heap è¿›ç¨‹id Eden Space(æ–°ç”Ÿä»£)ï¼šæ–°åˆ›å»ºçš„å¯¹è±¡ä½¿ç”¨çš„åŒºåŸŸ jconsoleå·¥å…· å›¾å½¢ç•Œé¢çš„ï¼Œå¤šåŠŸèƒ½çš„æ£€æµ‹å·¥å…·ï¼Œå¯ä»¥è¿ç»­ç›‘æµ‹ æ¡ˆä¾‹ åƒåœ¾å›æ”¶åï¼Œå†…å­˜å ç”¨ä»ç„¶å¾ˆé«˜ jvisualvm -&gt; å †dump -&gt; æœ€å¤§çš„å¯¹è±¡ æ–¹æ³•åŒº -XX:MaxMetaspaceSize=8m//æŒ‡å®šå…ƒç©ºé—´å¤§å° å®šä¹‰ æ‰€æœ‰çº¿ç¨‹å…±äº«çš„åŒºåŸŸï¼Œåœ¨æ–¹æ³•åŒºä¸­å­˜å‚¨äº†ç±»çš„ç»“æ„çš„æœ‰å…³ä¿¡æ¯(Fieldã€æ–¹æ³•æ•°æ®ã€æ–¹æ³•åŠæ„é€ å™¨æ–¹æ³•çš„ä»£ç ã€è¿è¡Œæ—¶å¸¸äº®æ± ) æ–¹æ³•åŒºåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶è¢«åˆ›å»ºï¼Œé€»è¾‘ä¸Šæ˜¯å †çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†(ä¸åŒå‚å®¶å®ç°ä¸åŒ) æ–¹æ³•åŒºä¹Ÿä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºé”™è¯¯ ç»„æˆ å¸¸é‡æ± (è¿è¡Œæ—¶å¸¸é‡æ± )ï¼š ä¸€ä¸ªç±»è¦è¿è¡Œéœ€è¦å…ˆç¼–è¯‘æˆäºŒè¿›åˆ¶å­—èŠ‚ç (äºŒè¿›åˆ¶å­—èŠ‚ç ä¸­åŒ…å«ï¼šç±»çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¸¸é‡æ± ï¼Œç±»çš„æ–¹æ³•å®šä¹‰ï¼ŒåŒ…å«äº†è™šæ‹ŸæœºæŒ‡ä»¤) javap -v xxx.class æ˜¾ç¤ºåç¼–è¯‘åçš„è¯¦ç»†ä¿¡æ¯ #xxä»£è¡¨ä»å¸¸é‡æ± ä¸­å¯»æ‰¾ç¼–å·ä¸ºxxçš„å†…å®¹ å¸¸é‡æ± ï¼Œå°±æ˜¯ä¸€å¼ è¡¨ï¼Œè™šæ‹ŸæœºæŒ‡ä»¤æ ¹æ®è¿™å¼ å¸¸é‡è¡¨æ‰¾åˆ°è¦æ‰§è¡Œçš„ç±»åã€æ–¹æ³•åã€å‚æ•°ç±»å‹ã€å­—é¢é‡ç­‰ä¿¡æ¯ è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œå¸¸é‡æ± æ˜¯*.classæ–‡ä»¶ä¸­çš„ï¼Œå½“è¯¥ç±»è¢«åŠ è½½ï¼Œä»–çš„å¸¸é‡æ± ä¿¡æ¯å°±ä¼šæ”¾å…¥è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œå¹¶æŠŠé‡Œé¢çš„ç¬¦å·#xxåœ°å€å˜ä¸ºçœŸå®åœ°å€ æ–¹æ³•åŒºå†…å­˜æº¢å‡º(OutOfMemoryError OOM) 1.8ä»¥å‰ä¼šå¯¼è‡´æ°¸ä¹…ä»£å†…å­˜æº¢å‡º OutOfMemoryError:PermGen space -XX:MaxPermSize=8m 1.8ä¹‹åä¼šå¯¼è‡´å…ƒç©ºé—´å†…å­˜æº¢å‡º OutOfMemoryError:Metaspace -XX:MaxMetaspaceSize=8m å¸¸è§åœºæ™¯ï¼š Springï¼šcglibåŠ¨æ€ç”Ÿæˆå­—èŠ‚ç  MyBatisï¼šcglibåŠ¨æ€ç”Ÿæˆå­—èŠ‚ç  ä¸Šè¿°ä¸¤ç§æƒ…å†µå¯¼è‡´æ–¹æ³•åŒºç±»ä¸åœåŠ è½½ï¼Œä»è€Œå¯¼è‡´OOM è¿è¡Œæ—¶å¸¸é‡æ±  å¸¸é‡æ± ï¼Œå°±æ˜¯ä¸€å¼ è¡¨ï¼Œè™šæ‹ŸæœºæŒ‡ä»¤æ ¹æ®è¿™å¼ å¸¸é‡è¡¨æ‰¾åˆ°è¦æ‰§è¡Œçš„ç±»åã€æ–¹æ³•åã€å‚æ•°ç±»å‹ã€å­—é¢é‡ç­‰ä¿¡æ¯ è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œå¸¸é‡æ± æ˜¯*.classæ–‡ä»¶ä¸­çš„ï¼Œå½“è¯¥ç±»è¢«åŠ è½½ï¼Œä»–çš„å¸¸é‡æ± ä¿¡æ¯å°±ä¼šæ”¾å…¥è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œå¹¶æŠŠé‡Œé¢çš„ç¬¦å·#xxåœ°å€å˜ä¸ºçœŸå®åœ°å€ StringTable å¸¸é‡æ± ä¸­çš„å­—ç¬¦ä¸²ä»…æ˜¯ç¬¦å·ï¼Œç¬¬ä¸€æ¬¡ç”¨åˆ°æ—¶æ‰å˜ä¸ºå¯¹è±¡ åˆ©ç”¨ä¸²æ± çš„æœºåˆ¶ï¼Œæ¥é¿å…é‡å¤åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ å­—ç¬¦ä¸²å˜é‡æ‹¼æ¥çš„åŸç†æ˜¯StringBuilder(1.8) å­—ç¬¦ä¸²å¸¸é‡å‡­å€Ÿçš„åŸç†æ˜¯ç¼–è¯‘æœŸä¼˜åŒ– å¯ä»¥ä½¿ç”¨internæ–¹æ³•ï¼Œä¸»åŠ¨å°† ä¸²æ± ä¸­è¿˜æ²¡æœ‰çš„å­—ç¬¦ä¸²å¯¹è±¡æ”¾å…¥ä¸²æ±  1.8intern()å°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ï¼Œå¦‚æœæœ‰åˆ™ä¸ä¼šæ”¾å…¥ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ”¾å…¥ä¸²æ± ï¼Œä¸ç®¡æœ‰æ²¡æœ‰ï¼Œæœ€ç»ˆéƒ½è¿”å›ä¸²æ± ä¸­çš„å¯¹è±¡ã€‚å¦‚æœæˆåŠŸæ”¾å…¥é‚£ä¹ˆå½“å‰å¯¹è±¡çš„åœ°å€ä¸å¸¸é‡æ± ä¸­çš„åœ°å€å˜ä¸ºç›¸åŒï¼Œå¦åˆ™ä¸ä¼šå‘ç”Ÿå˜åŒ– 1.6intern()å°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ï¼Œå¦‚æœæœ‰åˆ™ä¸ä¼šæ”¾å…¥ï¼Œå¦‚æœæ²¡æœ‰ä¼šæŠŠæ­¤å¯¹è±¡å¤åˆ¶ä¸€ä»½ï¼Œç„¶åæ”¾å…¥ä¸²æ± ï¼Œä¸ç®¡æœ‰æ²¡æœ‰ï¼Œæœ€ç»ˆéƒ½è¿”å›ä¸²æ± ä¸­çš„å¯¹è±¡ã€‚ä¸ç®¡æˆåŠŸæ”¾å…¥ä¸å¦é‚£ä¹ˆå½“å‰å¯¹è±¡çš„åœ°å€ä¸å¸¸é‡æ± ä¸­çš„åœ°å€å‡ä¸ç›¸åŒ // 1. å¸¸é‡æ± ä¸­çš„ä¿¡æ¯ï¼Œéƒ½ä¼šè¢«åŠ è½½åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ï¼Œè¿™æ—¶&quot;a&quot;ã€&quot;b&quot;ã€&quot;ab&quot;éƒ½æ˜¯å¸¸é‡æ± ä¸­çš„ç¬¦å·ï¼Œè¿˜æ²¡æœ‰å˜ä¸ºJavaå­—ç¬¦ä¸²å¯¹è±¡ // 2. ldc #2 ä¼šæŠŠ a ç¬¦å·å˜ä¸º&quot;a&quot;å­—ç¬¦ä¸²å¯¹è±¡ï¼ŒåŒæ—¶å‡†å¤‡å¥½ä¸€å¤„ç©ºé—´ï¼Œç§°ä¸ºStringTable[ ]\\(HashTableç»“æ„æ— æ³•æ‰©å®¹) // 3. ä»StringTable[ ]ä¸­å¯»æ‰¾ a å¯¹è±¡ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ”¾å…¥åˆ°StringTableä¸­(ç”¨åˆ°æ‰ä¼šåˆ›å»ºå¹¶æ”¾åˆ°StringTableä¸­ï¼Œç”¨ä¸åˆ°å°±ä¸ä¼šåˆ›å»º) // 4. ldc #3 ä¼šæŠŠ b ç¬¦å·å˜ä¸º&quot;b&quot;å­—ç¬¦ä¸²å¯¹è±¡ // 5. ä»StringTable[ ]ä¸­å¯»æ‰¾ b å¯¹è±¡ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ”¾å…¥åˆ°StringTableä¸­ // 6. ldc #4 ä¼šæŠŠ ab ç¬¦å·å˜ä¸º&quot;ab&quot;å­—ç¬¦ä¸²å¯¹è±¡ // 7. ä»StringTable[ ]ä¸­å¯»æ‰¾ ab å¯¹è±¡ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ”¾å…¥åˆ°StringTableä¸­ String s1 = &quot;a&quot;; String s2 = &quot;b&quot;; String s3 = &quot;ab&quot;; // new StringBuilder().append(s1).append(s2).toString() // toString()ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Stringå˜é‡ new String(&quot;ab&quot;) å¹¶å­˜å…¥åˆ°s4ä¸­ // s3æ˜¯StringTableä¸­çš„ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œs4æ˜¯ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡å­˜æ”¾åœ¨å †ä¸­ String s4 = s1 + s2; // javacåœ¨ç¼–è¯‘æœŸé—´çš„ä¼˜åŒ–ï¼Œç»“æœå·²ç»åœ¨ç¼–è¯‘æœŸé—´ç¡®å®šä¸º&quot;ab&quot;ä¸å¯èƒ½å†å˜åŒ– String s5 = &quot;a&quot; + &quot;b&quot;; String s6 = s4.intern(); System.out.println(s3 == s4); //false System.out.println(s3 == s5); //true System.out.println(s3 == s6); //true // æ‰§è¡Œå®Œè¯¥è¡Œä»£ç åStringTableä¸­æœ‰&quot;c&quot;å’Œ&quot;d&quot; // new String(&quot;c&quot;) æ˜¯newäº†ä¸€ä¸ªStringå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å­˜æ”¾åœ¨å †ä¸­ // new String(&quot;d&quot;) æ˜¯newäº†ä¸€ä¸ªStringå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å­˜æ”¾åœ¨å †ä¸­ // x2 = new String(&quot;cd&quot;) æ”¾åœ¨å †ä¸­ï¼Œå¹¶ä¸æ”¾åœ¨ä¸²æ± ä¸­ String x2 = new String(&quot;c&quot;) + new String(&quot;d&quot;); String x1 = &quot;cd&quot;; // intern()å°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ï¼Œå¦‚æœæœ‰åˆ™ä¸ä¼šæ”¾å…¥ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ”¾å…¥ä¸²æ± ï¼Œä¸ç®¡æœ‰æ²¡æœ‰ï¼Œæœ€ç»ˆéƒ½è¿”å›ä¸²æ± ä¸­çš„å¯¹è±¡ // å¦‚æœæˆåŠŸæ”¾å…¥é‚£ä¹ˆx2çš„åœ°å€æ”¹ä¸ºå¸¸é‡æ± ä¸­çš„åœ°å€ï¼Œå¦åˆ™ä¸ä¼šå‘ç”Ÿå˜åŒ– x2.intern(); System.out.println(x1 == x2); //false // å¦‚æœå€’æ•°ä¸¤è¡Œä»£ç äº’æ¢ä½ç½® é‚£ä¹ˆä¸ºtrue ã€‚ä½†æ˜¯å¦‚æœæ˜¯Java6åŠä¹‹å‰ä¾ç„¶ä¸ºfalse StringTableä½ç½® 1.6åŠä¹‹å‰StringTableåœ¨å¸¸é‡æ± ä¸­ æ°¸ä¹…ä»£åƒåœ¾å›æ”¶æ•ˆç‡è¾ƒä½ éœ€è¦ä½¿ç”¨Full GCæ‰è¿›è¡Œæ°¸ä¹…ä»£çš„åƒåœ¾å›æ”¶ Full GCåªæœ‰åœ¨è€å¹´ä»£ç©ºé—´ä¸è¶³æ—¶æ‰ä¼šè§¦å‘ 1.7åŠä¹‹åStringTableåœ¨å †ä¸­ å †ä¸­åƒåœ¾å›æ”¶æ•ˆç‡é«˜ Minor GCè¿›è¡Œå †ä¸­çš„åƒåœ¾å›æ”¶ å‡è½»äº†å­—ç¬¦ä¸²å¯¹æ–¹æ³•åŒºçš„å†…å­˜å ç”¨ StringTableåƒåœ¾å›æ”¶ -Xmx1m -XX:+PringStringTableStatisticså¼€å¯StringTableç»Ÿè®¡åŠŸèƒ½ -Xx:+PrintGCDetails -verbose:gcæ‰“å°åƒåœ¾å›æ”¶çš„è¯¦ç»†ä¿¡æ¯ StringTableä¸­ä¹Ÿå­˜åœ¨åƒåœ¾å›æ”¶ï¼Œå¹¶ä¸ä¼šä¸€ç›´ä¿å­˜ StringTableæ€§èƒ½è°ƒä¼˜ -Xx:StringTableSize=200000 //åº•å±‚ä¸ºHashTableä¸ºæ•°ç»„å’Œé“¾è¡¨ç›¸ç»“åˆï¼Œè°ƒæ•´æ•°ç»„(æ¡¶)å¤§å° è°ƒæ•´-Xx:StringTableSize=æ¡¶ä¸ªæ•° è€ƒè™‘å°†å­—ç¬¦ä¸²å¯¹è±¡æ˜¯å¦å…¥æ± ï¼Œå¦‚æœæœ‰å¤§é‡å­—ç¬¦ä¸²é‡å¤ï¼Œå¯ä»¥å°†é‡å¤çš„å­—ç¬¦ä¸²å…¥æ± ï¼ŒèŠ‚çœå†…å­˜ç©ºé—´ ç›´æ¥å†…å­˜(Direct Memory) å®šä¹‰ å¸¸è§äºNIOæ“ä½œæ—¶ï¼Œç”¨äºæ•°æ®ç¼“å†²åŒº(ByteBuffer) åˆ†é…å›æ”¶æˆæœ¬è¾ƒé«˜ï¼Œä½†æ˜¯ã€è¯»å†™æ€§èƒ½é«˜ ä¸å—JVMå†…å­˜å›æ”¶ç®¡ç† ä¸ä½¿ç”¨ç›´æ¥å†…å­˜ï¼šjavaæ— æ³•ç›´æ¥è®¿é—®ç³»ç»Ÿç¼“å­˜åŒºï¼Œéœ€è¦å…ˆä»ç³»ç»Ÿç¼“å­˜åŒºè¯»å…¥åˆ°javaç¼“å­˜åŒºä¸­ï¼Œå†è¯»å…¥åˆ°ç¨‹åºä¸­è¿›è¡Œä½¿ç”¨ ä½¿ç”¨ç›´æ¥å†…å­˜ï¼šç›´æ¥åˆ’åˆ†ä¸€å—ç›´æ¥å†…å­˜ï¼Œè¯¥å†…å­˜æ—¢å¯ä»¥æ“ä½œç³»ç»Ÿè®¿é—®ï¼Œåˆå¯ä»¥javaç¨‹åºè®¿é—®ï¼Œæé«˜æ–‡ä»¶çš„è¯»å–é€Ÿåº¦ ç›´æ¥å†…å­˜çš„é‡Šæ”¾ Cleanerä¸­çš„thisæŒ‡ByteBufferå¯¹è±¡ï¼Œå½“ByteBufferå¯¹è±¡è¢«åƒåœ¾å›æ”¶æ‰æ—¶ï¼Œå°±ä¼šè§¦å‘å…¶ä¸­çš„clean()æ–¹æ³•ã€‚åœ¨ReferenceHandlerçº¿ç¨‹ä¸­ç›‘æµ‹è™šå¼•ç”¨å¯¹è±¡ï¼Œä¸€æ—¦è™šå¼•ç”¨å¯¹è±¡å…³è”çš„å®é™…å¯¹è±¡(ByteBuffer)è¢«å›æ”¶ï¼Œå°±ä¼šæ‰§è¡Œclean()æ–¹æ³•ï¼Œæ‰§è¡Œä»»åŠ¡å¯¹è±¡(Deallocator) åˆ†é…å’Œå›æ”¶ ä½¿ç”¨äº†Unsafeå¯¹è±¡å®Œæˆç›´æ¥å†…å­˜çš„åˆ†é…å’Œå›æ”¶ï¼Œå¹¶ä¸”å›æ”¶éœ€è¦ä¸»åŠ¨è°ƒç”¨freeMemoryæ–¹æ³• ByteBufferçš„å®ç°ç±»å†…éƒ¨ï¼Œä½¿ç”¨äº†Cleaner(è™šå¼•ç”¨)æ¥ç›‘æµ‹ByteBufferå¯¹è±¡ï¼Œä¸€æ—¦ByteBufferå¯¹è±¡è¢«åƒåœ¾å›æ”¶ï¼Œé‚£ä¹ˆå°±ä¼šç”±ReferenceHandlerçº¿ç¨‹é€šè¿‡Cleanerçš„cleanæ–¹æ³•è°ƒç”¨freeMemoryæ–¹æ³•æ¥é‡Šæ”¾å†…å­˜ -Xx:+DisableExplicitGCç¦ç”¨ä»£ç ä¸­æ˜¾å¼çš„åƒåœ¾å›æ”¶ System.gc()æ˜¾å¼çš„åƒåœ¾å›æ”¶ï¼Œè§¦å‘FullGCï¼ŒåŒæ—¶æ¸…ç†æ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œè€—è´¹æ—¶é—´è¾ƒé•¿ å¯èƒ½å¯¹ByteBufferæœ‰å½±å“ï¼Œå¯¼è‡´ç›´æ¥å†…å­˜å ç”¨è¾ƒå¤§ å¦‚éœ€ä½¿ç”¨-Xx:+DisableExplicitGCï¼Œç›´æ¥å†…å­˜ä½¿ç”¨unsafe.freeMemory()ç®¡ç†ç›´æ¥å†…å­˜ ","link":"https://yeyuan1107.github.io/post/jvm-nei-cun-jie-gou/"},{"title":"JVMå¼•è¨€","content":"ä»€ä¹ˆæ˜¯JVM Java Virtual Machine - Javaç¨‹åºçš„è¿è¡Œç¯å¢ƒ(JavaäºŒè¿›åˆ¶å­—èŠ‚ç çš„è¿è¡Œç¯å¢ƒ) JVMçš„å¥½å¤„ Javaç¨‹åºä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œçš„åŸºçŸ³ è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œæä¾›äº†åƒåœ¾å›æ”¶çš„åŠŸèƒ½ æ•°ç»„ä¸‹æ ‡è¶Šç•Œæ£€æŸ¥ å¤šæ€ æ¯”è¾ƒ å¸¸è§JVM æœ¬ç¬”è®°åŸºäºHotSpot å­¦ä¹ è·¯çº¿ ","link":"https://yeyuan1107.github.io/post/jvm-yin-yan/"},{"title":"Java11æ–°ç‰¹æ€§","content":" Stringæ–°å¢æ–¹æ³• isBlank()ï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºç™½ strip()ï¼šå»é™¤é¦–å°¾ç©ºç™½ stripTrailing()ï¼šå»é™¤å°¾éƒ¨ç©ºæ ¼ stripLoading()ï¼šå»é™¤é¦–éƒ¨ç©ºæ ¼ repeat(int count)ï¼šå¤åˆ¶å­—ç¬¦ä¸² lines().count()ï¼šè¡Œæ•°ç»Ÿè®¡ OptionalåŠ å¼º å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­çš„å‡çº§ åœ¨varä¸Šæ·»åŠ æ³¨è§£çš„è¯­æ³•æ ¼å¼ï¼Œåœ¨jdk10ä¸­æ˜¯ä¸èƒ½å®ç°çš„ã€‚åœ¨JDK11ä¸­åŠ å…¥äº†è¿™æ ·çš„è¯­æ³• //é”™è¯¯çš„å½¢å¼ : å¿…é¡»è¦æœ‰ç±»å‹ , å¯ä»¥åŠ ä¸Š var //Consumer&lt;String&gt; con1 = (@Deprecated t) --&gt;System.out.println(t.toUpperCase()); //æ­£ç¡®çš„å½¢å¼ //ä½¿ç”¨ var çš„å¥½å¤„æ˜¯åœ¨ä½¿ç”¨ lambda è¡¨è¾¾å¼æ—¶ç»™å‚æ•°åŠ ä¸Šæ³¨è§£ã€‚ Consumer&lt;String&gt; con2 = ( (@Deprecated var t) --&gt;System. out .println(t.UpperCase()); å…¨æ–°çš„HTTPå®¢æˆ·ç«¯API æ›´ç®€åŒ–çš„ç¼–è¯‘è¿è¡Œç¨‹åº JDK11ä¹‹å‰javac xxx.javajava xxxJDK11åŠä¹‹åjava xxx.java æ³¨æ„ï¼š æ‰§è¡Œæºæ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªç±»ï¼Œç¬¬ä¸€ä¸ªç±»å¿…é¡»åŒ…å«ä¸»æ–¹æ³•å¹¶ä¸”ä¸å¯ä»¥ä½¿ç”¨å…¶ä»–æºæ–‡ä»¶ä¸­çš„è‡ªå®šä¹‰ç±»ï¼Œæœ¬æ–‡ä»¶ä¸­çš„è‡ªå®šä¹‰ç±»æ˜¯å¯ä»¥ä½¿ç”¨çš„ åºŸå¼ƒNashornå¼•æ“ åºŸé™¤Nashorn javascript å¼•æ“ åœ¨åç»­ç‰ˆæœ¬å‡†å¤‡ç§»é™¤æ‰ï¼Œæœ‰éœ€è¦çš„å¯ä»¥è€ƒè™‘ä½¿ç”¨ GraalVMã€‚ ZGC GC æ˜¯ java ä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€ ã€‚ ç„¶è€Œå½“ GC åœé¡¿å¤ªé•¿ å°±ä¼šå¼€å§‹å½±å“åº”ç”¨çš„å“åº”æ—¶é—´ ã€‚ æ¶ˆé™¤æˆ–è€…å‡å°‘ GC åœé¡¿æ—¶é•¿ java å°†å¯¹æ›´å¹¿æ³›çš„åº”ç”¨åœºæ™¯æ˜¯ä¸€ä¸ªæ›´æœ‰å¸å¼•åŠ›çš„å¹³å° ã€‚ æ­¤å¤– ç°ä»£ç³»ç»Ÿä¸­å¯ç”¨å†…å­˜ä¸æ–­å¢é•¿ç”¨æˆ·å’Œç¨‹åºå‘˜å¸Œæœ› JVM èƒ½å¤Ÿä»¥é«˜æ•ˆçš„æ–¹å¼å……åˆ†åˆ©ç”¨è¿™äº›å†…å­˜ å¹¶ä¸”æ— éœ€é•¿æ—¶é—´çš„ GC æš‚åœæ—¶é—´ ã€‚ ZGC A Scalable Low Latency Garbage Collector(Experimental)ï¼Œè¿™åº”è¯¥æ˜¯ JDK 11 æœ€ä¸ºç©ç›®çš„ç‰¹æ€§æ²¡æœ‰ä¹‹ä¸€ã€‚ ä½†æ˜¯åé¢å¸¦äº† Experimentalï¼Œè¯´æ˜è¿™è¿˜ä¸å»ºè®®ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒã€‚ZGC æ˜¯ä¸€ä¸ªå¹¶å‘ï¼ŒåŸºäº regionï¼Œå‹ç¼©å‹çš„åƒåœ¾æ”¶é›†å™¨åªæœ‰ root æ‰«æé˜¶æ®µä¼šSTW( stop the world )å› æ­¤ GC åœé¡¿æ—¶é—´ä¸ä¼šéšç€å †çš„å¢é•¿å’Œå­˜æ´»å¯¹è±¡çš„å¢é•¿è€Œå˜é•¿ ä¼˜åŠ¿ï¼š GC æš‚åœæ—¶é—´ä¸ä¼šè¶…è¿‡ 10 ms æ—¢èƒ½å¤„ç†å‡ ç™¾å…†çš„å°å †ä¹Ÿèƒ½å¤„ç†å‡ ä¸ªTçš„å¤§å † å’ŒG1ç›¸æ¯”åº”ç”¨ååèƒ½åŠ›ä¸ä¼šä¸‹é™è¶…è¿‡15% ä¸ºæœªæ¥çš„GCåŠŸèƒ½å’Œåˆ©ç”¨ colord æŒ‡é’ˆä»¥åŠ Load barriers ä¼˜åŒ–å¥ å®šåŸºç¡€ åˆå§‹åªæ”¯æŒ 64 ä½ç³»ç»Ÿ ZGC çš„è®¾è®¡ç›®æ ‡æ˜¯ï¼šæ”¯æŒ TB çº§å†…å­˜å®¹é‡æš‚åœæ—¶é—´ä½ 10 ms å¯¹æ•´ä¸ªç¨‹åºååé‡çš„å½±å“å°äº15%ã€‚ å°†æ¥è¿˜å¯ä»¥æ‰©å±•å®ç°æœºåˆ¶ï¼Œä»¥æ”¯æŒä¸å°‘ä»¤äººå…´å¥‹çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å¤šå±‚å †(å³çƒ­å¯¹è±¡ç½®äº DRAM å’Œå†·å¯¹è±¡ç½®äº NVMe é—ªå­˜æˆ–å‹ç¼©å †) å…¶ä»–æ–°ç‰¹æ€§ Unicode 10 Deprecate the Pack200 Tools and API æ–°çš„ Epsilon åƒåœ¾æ”¶é›†å™¨ å®Œå…¨æ”¯æŒ Linux å®¹å™¨(åŒ…æ‹¬ Docker) æ”¯æŒ G1 ä¸Šçš„å¹¶è¡Œå®Œå…¨åƒåœ¾æ”¶é›† æœ€æ–°çš„ HTTPS å®‰å…¨åè®® TLS 1.3 Java Flight Recorder ","link":"https://yeyuan1107.github.io/post/java11-xin-te-xing/"},{"title":"Java10æ–°ç‰¹æ€§","content":" å±€éƒ¨å˜é‡çš„ç±»å‹æ¨æ–­ //å¼•ç”¨å‹å˜é‡ä¹Ÿå¯ä»¥ //åœ¨å¤„ç†varæ—¶ï¼Œç¼–è¯‘å™¨å…ˆæ˜¯æŸ¥çœ‹è¡¨è¾¾å¼å³è¾¹éƒ¨åˆ†ï¼Œå¹¶æ ¹æ®å³è¾¹å˜é‡å€¼çš„ç±»å‹è¿›è¡Œæ¨æ–­ï¼Œä½œä¸ºå·¦è¾¹å˜é‡çš„ç±»å‹ï¼Œç„¶åå°†è¯¥ç±»å‹å†™å…¥å­—èŠ‚ç å½“ä¸­ var å˜é‡å = xxx; ä¸èƒ½ç”¨çš„æƒ…å†µ å±€éƒ¨å˜é‡ä¸èµ‹å€¼ Lambdaè¡¨è¾¾å¼ä¸­å·¦è¾¹çš„å‡½æ•°å¼æ¥å£ä¸èƒ½å£°æ˜ä¸ºvar æ–¹æ³•å¼•ç”¨ æ•°ç»„çš„é™æ€åˆå§‹åŒ–int[] arr = {1, 2, 3, 4, 5} æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ æ–¹æ³•ä¸­çš„å‚æ•°ç±»å‹ã€æ„é€ å™¨å‚æ•°ç±»å‹ å±æ€§ catchå— æ³¨æ„ varä¸æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œé™¤äº†ä¸èƒ½ç”¨å®ƒä½œä¸ºç±»åï¼Œå…¶ä»–çš„éƒ½å¯ä»¥ varå¹¶ä¸ä¼šæ”¹å˜Javaæ—¶ä¸€é—¨é™æ€ç±»å‹è¯­è¨€çš„äº‹å® é›†åˆæ–°å¢åˆ›å»ºä¸å¯å˜é›†åˆçš„æ–¹æ³• //ç¤ºä¾‹ 1 var list1 = List.of(&quot; Java&quot;, &quot; Python&quot;, &quot;C&quot;); var copy1 = List.copyOf(list1); System.out.println(list1 == copy1); // true //ç¤ºä¾‹ 2 var list2 = new ArrayList&lt;String&gt;(); var copy2 = List.copyOf(list2); System.out.println(list2 == copy2); // false //ç¤ºä¾‹ 1 å’Œ 2 ä»£ç åŸºæœ¬ä¸€è‡´ï¼Œ ä¸ºä»€ä¹ˆä¸€ä¸ªä¸º true, ä¸€ä¸ªä¸º false? //å¦‚æœå½“å‰é›†åˆå·²ç»æ˜¯åªè¯»é›†åˆï¼Œé‚£ä¹ˆcopyOf()è¿”å›å€¼ä¸ºå½“å‰é›†åˆ //å¦‚æœä¸æ˜¯åªè¯»é›†åˆcopyOf()è¿”å›ä¸€ä¸ªæ–°çš„é›†åˆï¼Œè¯¥é›†åˆæ˜¯åªè¯»çš„ ","link":"https://yeyuan1107.github.io/post/java10-xin-te-xing/"},{"title":"Java9æ–°ç‰¹æ€§","content":" JDKå’ŒJREç»“æ„çš„æ”¹å˜ æ¨¡å—åŒ–ç³»ç»Ÿ Jigsaw -&gt; Modularity éšç€Javaçš„å‘å±•ï¼ŒJavaè¿è¡Œç¯å¢ƒè†¨èƒ€å’Œè‡ƒè‚¿ï¼Œæ¯æ¬¡JVMå¯åŠ¨çš„æ—¶å€™ï¼Œè‡³å°‘ä¼šæœ‰30-60MBçš„å†…å­˜åŠ è½½ï¼Œä¸»è¦åŸå› æ˜¯JVMéœ€è¦åŠ è½½rt.jar æœ¬è´¨ä¸Šè®²ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æ¨¡å—æ¥ç®¡ç†å„ä¸ªpackageï¼Œé€šè¿‡å£°æ˜æŸä¸ªpackageæš´éœ²ï¼Œæ¨¡å—(module)çš„æ¦‚å¿µï¼Œå…¶å®å°±æ˜¯packageå¤–å†è£¹ä¸€å±‚ï¼Œä¸å£°æ˜é»˜è®¤å°±æ˜¯éšè—ã€‚å› æ­¤ï¼Œæ¨¡å—åŒ–ä½¿å¾—ä»£ç ç»„ç»‡ä¸Šæ›´å®‰å…¨ï¼Œå› ä¸ºå®ƒå¯ä»¥æŒ‡å®šå“ªäº›éƒ¨åˆ†å¯ä»¥æš´éœ²ï¼Œå“ªäº›éƒ¨åˆ†éšè— æ¨¡å—ç”»çš„ä¸»è¦ç›®çš„åœ¨äºå‡å°‘å†…å­˜çš„å¼€é”€ åªé¡»å¿…è¦æ¨¡å—ï¼Œè€Œéå…¨éƒ¨jdkæ¨¡å—ï¼Œå¯è§è¯å„ç§ç±»åº“å’Œå¤§å‹åº”ç”¨çš„å¼€å‘å’Œç»´æŠ¤ æ”¹è¿›JavaSEå¹³å°ï¼Œä½¿å…¶å¯ä»¥é€‚åº”ä¸åŒå¤§å°çš„è®¡ç®—è®¾å¤‡ æ”¹è¿›å…¶å®‰å…¨æ€§ï¼Œå¯ç»´æŠ¤æ€§ï¼Œæé«˜æ€§èƒ½ Javaçš„REPLå·¥å…·ï¼šjShell å‘½ä»¤ REPL(read-evaluate-print-loop)ï¼Œä»¥äº¤äº’å¼çš„æ–¹å¼å¯¹è¯­å¥å’Œè¡¨è¾¾å¼è¿›è¡Œæ±‚èŒã€‚å¼€å‘è€…åªéœ€è¦è¾“å…¥ä¸€äº›ä»£ç ï¼Œå°±å¯ä»¥åœ¨ç¼–è¯‘å‰è·å¾—å¯¹ç¨‹åºçš„åé¦ˆ å¤šç‰ˆæœ¬å…¼å®¹ jar åŒ… æ¥å£çš„ç§æœ‰æ–¹æ³• JDK8ä¸­å¢åŠ äº†staticæ–¹æ³•å’Œé»˜è®¤æ–¹æ³• JDK9æ¥å£ä¸­çš„æ–¹æ³•å¯ä»¥æ˜¯privateçš„ é’»çŸ³æ“ä½œç¬¦çš„ä½¿ç”¨å‡çº§ JDK9ä¸­åŒ¿åå®ç°ç±»é’»çŸ³æ“ä½œç¬¦ä¸­çš„ç±»å‹å¯ä»¥çœç•¥Comparator\\&lt;Object&gt; com = new Comparator\\&lt;&gt;() ï¼ŒJDK8ä¸­ä¼šæŠ¥é”™ è¯­æ³•æ”¹è¿›ï¼š try è¯­å¥ JDK8ä¹‹å‰ï¼Œèµ„æºçš„å…³é—­æ”¾åœ¨finallyä¸­ã€‚JDK8ä¸­ï¼Œå¯ä»¥å®ç°èµ„æºçš„è‡ªåŠ¨å…³é—­ï¼Œä½†æ˜¯è¦æ±‚æ‰§è¡Œåå¿…é¡»å…³é—­çš„æ‰€æœ‰èµ„æºå¿…é¡»åœ¨tryå­å¥ä¸­åˆå§‹åŒ–(catchåè‡ªåŠ¨å…³é—­æ‹¬å·ä¸­åˆ›å»ºçš„èµ„æº)ï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡ã€‚JDK9ä¸­ï¼Œç”¨èµ„æºè¯­å¥ç¼–å†™tryå°†æ›´å®¹æ˜“ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨tryå­—å¥ä¸­ä½¿ç”¨å·²ç»åˆå§‹åŒ–è¿‡çš„èµ„æºï¼Œæ­¤æ—¶çš„èµ„æºæ˜¯finalçš„ String å­˜å‚¨ç»“æ„å˜æ›´ Stringä»char[] -&gt; byte[]åŒæ—¶åŠ ä¸Šç¼–ç æ ‡è®°ï¼ŒèŠ‚çº¦äº†ç©ºé—´ã€‚ StringBufferå’ŒStringBuilderåŒæ ·æ›´æ”¹ å¿«é€Ÿåˆ›å»ºåªè¯»é›†åˆï¼š of() Java8ä¸­ï¼šCollections.unmodifiableList(é›†åˆå)ï¼ŒArrays.asList(Object[] objs) Java9ä¸­ï¼š static List LIst.of(E e1, E e2, ... , E en) Set.of() Map.of() Map.ofEntries() å¢å¼ºçš„ Stream API åœ¨ Java 9 ä¸­ï¼Œ Stream API å˜å¾—æ›´å¥½ï¼Œ Stream æ¥å£ä¸­æ·»åŠ äº† 4 ä¸ªæ–°çš„æ–¹æ³•takeWhile , dropWhile, ofNullable ï¼Œè¿˜æœ‰ä¸ª iterate æ–¹æ³•çš„æ–°é‡è½½æ–¹æ³• ï¼Œå¯ä»¥è®©ä½ æä¾›ä¸€ä¸ª Predicate ( åˆ¤æ–­æ¡ä»¶ æ¥æŒ‡å®šä»€ä¹ˆæ—¶å€™ç»“æŸè¿­ä»£ ã€‚ takeWhile(predicate)è¿”å›ä»å¼€å¤´å¼€å§‹çš„å°½é‡å¤šçš„å…ƒç´ ï¼Œä»å¼€å¤´åˆ°ç¬¬ä¸€ä¸ªä¸æ»¡è¶³æ¡ä»¶çš„ï¼ŒPredicateä¸ºå‡½æ•°å¼æ¥å£ dropWhile(predicate)ä¸takeWhile()ç›¸åï¼Œè¿”å›ç¬¬ä¸€ä¸ªä¸æ»¡è¶³æ¡ä»¶çš„å…ƒç´ åŠå…¶ä¹‹åçš„å…ƒç´  ofNullable()å½¢å‚å˜é‡æ˜¯å¯ä»¥ä¸ºnullå€¼çš„å•ä¸ªå…ƒç´  iterate(seed, predicate, UnaryOperator)é‡è½½æ–¹æ³•ï¼ŒæŒ‡å®šä»€ä¹ˆæ—¶å€™ç»“æŸè¿­ä»£ é™¤äº†å¯¹ Stream æœ¬èº«çš„æ‰©å±•ï¼Œ Optional å’Œ Stream ä¹‹é—´çš„ç»“åˆä¹Ÿå¾—åˆ°äº†æ”¹è¿›ã€‚ç°åœ¨å¯ä»¥é€šè¿‡ Optional çš„æ–°æ–¹æ³• stream() å°†ä¸€ä¸ª Optional å¯¹è±¡è½¬æ¢ä¸ºä¸€ä¸ª(å¯èƒ½æ˜¯ç©ºçš„) Stream å¯¹è±¡ã€‚ InputStreamåŠ å¼º InputStreamå¢åŠ æ–¹æ³•transferTo(OutputStream)ï¼Œç›´æ¥å°†è¾“å…¥æµçš„æ‰€æœ‰æ•°æ®è‡ªåŠ¨åœ°å¤åˆ¶åˆ°è¾“å‡ºæµä¸­ å…¨æ–° çš„ HTTP å®¢æˆ·ç«¯ API Deprecated çš„ç›¸å…³ API javadoc çš„ HTML 5 æ”¯æŒ Javascript å¼•æ“å‡çº§ï¼š Nashorn java çš„åŠ¨æ€ ç¼–è¯‘å™¨ ","link":"https://yeyuan1107.github.io/post/java9-xin-te-xing/"},{"title":"Java8æ–°ç‰¹æ€§","content":" Lambdaè¡¨è¾¾å¼ Lambdaæ˜¯ä¸€ç§åŒ¿åå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å§Lambdaè¡¨è¾¾å¼ç†è§£ä¸ºæ˜¯ä¸€æ®µå¯ä»¥ä¼ é€’çš„ä»£ç (å°†ä»£ç åƒæ•°æ®ä¸€æ ·è¿›è¡Œä¼ é€’)ã€‚ä½¿ç”¨å®ƒå¯ä»¥å†™å‡ºæ›´ç®€ä»‹ã€æ›´çµæ´»çš„ä»£ç ã€‚ä½œä¸ºä¸€ç§æ›´ç´§å‡‘çš„ä»£ç é£æ ¼ï¼Œä½¿Javaçš„è¯­è¨€è¡¨è¾¾èƒ½åŠ›å¾—åˆ°äº†æå‡ã€‚æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ¥å£çš„å®ä¾‹ï¼Œä¸”è¯¥æ¥å£åº”ä¸ºå‡½æ•°å¼æ¥å£ è¯­æ³•æ ¼å¼ -&gt;ï¼šlambdaæ“ä½œç¬¦æˆ–ç®­å¤´æ“ä½œç¬¦-&gt;å·¦è¾¹ï¼šlambdaçš„å½¢å‚åˆ—è¡¨ï¼Œå…¶å®å°±æ˜¯æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨ï¼Œç±»å‹å¯ä»¥çœç•¥-&gt;å³è¾¹ï¼šlambdaä½“ï¼Œå…¶å®å°±æ˜¯é‡å†™çš„æŠ½è±¡æ–¹æ³•çš„æ–¹æ³•ä½“ä¸Šè¿°Lambdaè¡¨è¾¾å¼ä¸­çš„å‚æ•°ç±»å‹éƒ½æ˜¯ç”±ç¼–è¯‘å™¨æ¨æ–­å¾—å‡ºçš„ã€‚Lambdaè¡¨è¾¾å¼ä¸­æ— éœ€æŒ‡å®šç±»å‹ï¼Œç¨‹åºä¾ç„¶å¯ä»¥ç¼–è¯‘ï¼Œè¿™æ˜¯å› ä¸ºjavacæ ¹æ®ç¨‹åºçš„ä¸Šä¸‹æ–‡ï¼Œåœ¨åå°æ¨æ–­å‡ºäº†å‚æ•°çš„ç±»å‹ã€‚Lambdaè¡¨è¾¾å¼çš„ç±»å‹ä¾èµ–äºä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œæ˜¯ç”±ç¼–è¯‘å™¨æ¨æ–­å‡ºæ¥çš„ã€‚è¿™å°±æ˜¯æ‰€è°“çš„&quot;ç±»å‹æ¨æ–­&quot; å‡½æ•°å¼æ¥å£ åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œç§°ä¸ºå‡½æ•°å¼æ¥å£ å¯ä»¥åœ¨ä¸€ä¸ªæ¥å£ä¸Šä½¿ç”¨@FunctionalInterfaceæ³¨è§£ï¼Œè¿™æ ·åšå¯ä»¥æ£€æŸ¥å®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚åŒæ—¶javadocä¹Ÿä¼šåŒ…å«ä¸€æ¡ç”Ÿå‘½ï¼Œè¯´æ˜è¿™ä¸ªæ¥å£æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ ä½ å¯ä»¥é€šè¿‡Lambdaè¡¨è¾¾å¼æ¥åˆ›å»ºè¯¥æ¥å£çš„å¯¹è±¡(è‹¥Lambdaè¡¨è¾¾å¼æŠ›å‡ºä¸€ä¸ªå—æ£€å¼‚å¸¸ï¼Œé‚£ä¹ˆè¯¥å¼‚å¸¸éœ€è¦åœ¨ç›®æ ‡æ¥å£çš„æŠ½è±¡æ–¹æ³•ä¸Šè¿›è¡Œå£°æ˜) java.util.functionåŒ…ä¸‹å®šä¹‰äº†Java8çš„ä¸°å¯Œçš„å‡½æ•°å¼æ¥å£ Javaå†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£ å‡½æ•°å¼æ¥å£ å‚æ•°ç±»å‹ è¿”å›ç±»å‹ ç”¨é€” Consumeræ¶ˆè´¹å‹æ¥å£ T void å¯¹ç±»å‹ä¸ºT çš„å¯¹è±¡åº”ç”¨æ“ä½œï¼ŒåŒ…å«æ–¹æ³•: void accept(T t) Supplierä¾›ç»™å‹æ¥å£ æ—  T è¿”å›ç±»å‹ä¸ºT çš„å¯¹è±¡ï¼ŒåŒ…å«æ–¹æ³•: T get() Function&lt;T, R&gt;å‡½æ•°å‹æ¥å£ T R å¯¹ç±»å‹ä¸ºTçš„å¯¹è±¡åº”ç”¨æ“ä½œï¼Œå¹¶è¿”å›ç»“æœã€‚ç»“æœæ˜¯Rç±»å‹çš„å¯¹è±¡ã€‚åŒ…å«æ–¹æ³•: R apply(T t) Predicateæ–­å®šå‹æ¥å£ T boolean ç¡®å®šç±»å‹ä¸ºTçš„å¯¹è±¡æ˜¯å¦æ»¡è¶³æŸçº¦æŸï¼Œå¹¶è¿”å›boolean å€¼ã€‚åŒ…å«æ–¹æ³•: boolean test(T t) å…¶ä»–æ¥å£ æ–¹æ³•å¼•ç”¨ å½“è¦ä¼ é€’ç»™Lambdaä½“çš„æ“ä½œï¼Œå·²ç»æœ‰å®ç°çš„æ–¹æ³•äº†ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ æ–¹æ³•å¼•ç”¨å¯ä»¥çœ‹ä½œæ˜¯Lambdaè¡¨è¾¾å¼æ·±å±‚æ¬¡çš„è¡¨è¾¾ã€‚æ¢å¥è¯è¯´ï¼Œæ–¹æ³•å¼•ç”¨å°±æ˜¯Lambdaè¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å¼æ¥å£çš„ä¸€ä¸ªå®ä¾‹ï¼Œé€šè¿‡æ–¹æ³•çš„åå­—æ¥æŒ‡å‘ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯Lambdaè¡¨è¾¾å¼çš„è¯­æ³•ç³– å®ç°æ¥å£çš„æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å–è¿”å›å€¼ç±»å‹ï¼Œå¿…é¡»ä¸æ–¹æ³•å¼•ç”¨çš„æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å–è¿”å›å€¼ç±»å‹ä¿æŒä¸€è‡´ æ ¼å¼ï¼šç±»å(æˆ–å¯¹è±¡å)::æ–¹æ³•å å¯¹è±¡::éé™æ€æ–¹æ³•å ç±»::é™æ€æ–¹æ³•å ä¸Šè¿°ä¸¤ç§è¦æ±‚å®ç°æ¥å£çš„æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ï¼Œå¿…é¡»ä¸æ–¹æ³•å¼•ç”¨çš„æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å–è¿”å›å€¼ç±»å‹ä¿æŒä¸€è‡´ ç±»::éé™æ€æ–¹æ³•å å½“å‡½æ•°å¼æ¥å£æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦å¼•ç”¨æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªå‚æ•°æ˜¯éœ€è¦å¼•ç”¨æ–¹æ³•çš„å‚æ•°(æˆ–æ— å‚æ•°æ—¶)ï¼šä½¿ç”¨è¯¥æ ¼å¼ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ‰€å±ç±»::æ–¹æ³•åã€‚æ¯”å¦‚BiPredicate&lt;String, String&gt; bp = (x,y) -&gt; x.equals(y)ä½¿ç”¨BiPredicate&lt;String, String&gt; bp = String::equals æ„é€ å™¨å¼•ç”¨ æ ¼å¼ï¼šClassName::new ä¸å‡½æ•°å¼æ¥å£ç›¸ç»“åˆï¼Œè‡ªåŠ¨ä¸å‡½æ•°å¼æ¥å£ä¸­æ–¹æ³•å…¼å®¹ã€‚ å¯ä»¥æŠŠæ„é€ å™¨å¼•ç”¨èµ‹å€¼ç»™å®šä¹‰çš„æ–¹æ³•ï¼Œè¦æ±‚æ„é€ å™¨å‚æ•°åˆ—è¡¨è¦ä¸æ¥å£ä¸­æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸€è‡´ï¼ä¸”æ–¹æ³•çš„è¿”å›å€¼å³ä¸ºæ„é€ å™¨å¯¹åº”ç±»çš„å¯¹è±¡ã€‚ æ•°ç»„å¼•ç”¨ æ ¼å¼ï¼štype[]::new Stream API Stream API ( java.util.stream) æŠŠçœŸæ­£çš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼å¼•å…¥åˆ° Java ä¸­ã€‚è¿™æ˜¯ç›®å‰ä¸ºæ­¢å¯¹ Java ç±»åº“æœ€å¥½çš„è¡¥å……ï¼Œå› ä¸º Stream API å¯ä»¥æå¤§æä¾› Java ç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›ï¼Œè®©ç¨‹åºå‘˜å†™å‡ºé«˜æ•ˆç‡ã€å¹²å‡€ã€ç®€æ´çš„ä»£ç ã€‚ Stream æ˜¯ Java8 ä¸­å¤„ç†é›†åˆçš„å…³é”®æŠ½è±¡æ¦‚å¿µï¼Œå®ƒå¯ä»¥æŒ‡å®šä½ å¸Œæœ›å¯¹é›†åˆè¿›è¡Œçš„æ“ä½œï¼Œå¯ä»¥æ‰§è¡Œéå¸¸å¤æ‚çš„æŸ¥æ‰¾ã€è¿‡æ»¤å’Œæ˜ å°„æ•°æ®ç­‰æ“ä½œã€‚ ä½¿ç”¨Stream API å¯¹é›†åˆæ•°æ®è¿›è¡Œæ“ä½œï¼Œå°±ç±»ä¼¼äºä½¿ç”¨ SQL æ‰§è¡Œçš„æ•°æ®åº“æŸ¥è¯¢ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Stream API æ¥å¹¶è¡Œæ‰§è¡Œæ“ä½œã€‚ç®€è¨€ä¹‹ï¼Œ Stream API æä¾›äº†ä¸€ç§é«˜æ•ˆä¸”æ˜“äºä½¿ç”¨çš„å¤„ç†æ•°æ®çš„æ–¹å¼ã€‚ Stream å’Œ Collection é›†åˆçš„åŒºåˆ«ï¼š Collection æ˜¯ä¸€ç§é™æ€çš„å†…å­˜æ•°æ®ç»“æ„ï¼Œè€Œ Stream æ˜¯æœ‰å…³è®¡ç®—çš„ã€‚ å‰è€…æ˜¯ä¸»è¦é¢å‘å†…å­˜ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œåè€…ä¸»è¦æ˜¯é¢å‘ CPU ï¼Œé€šè¿‡ CPU å®ç°è®¡ç®—ã€‚ Streamæ˜¯æ•°æ®æ¸ é“ï¼Œç”¨äºæ“ä½œæ•°æ®æº(é›†åˆã€æ•°ç»„ç­‰)æ‰€ç”Ÿæˆçš„å…ƒç´ åºåˆ— Streamè‡ªå·±ä¸ä¼šå­˜å‚¨å…ƒç´  Streamä¸ä¼šæ”¹å˜æºå¯¹è±¡ã€‚ç›¸åï¼Œä»–ä»¬ä¼šè¿”å›ä¸€ä¸ªæŒæœ‰ç»“æœçš„æ–°Stream Streamæ“ä½œæ˜¯å»¶è¿Ÿæ‰§è¡Œçš„ã€‚è¿™æ„å‘³ç€ä»–ä»¬ä¼šç­‰åˆ°éœ€è¦ç»“æœçš„æ—¶å€™æ‰æ‰§è¡Œ Streamæ“ä½œçš„ä¸‰ä¸ªæ­¥éª¤ åˆ›å»ºStreamï¼šä¸€ä¸ªæ•°æ®æºï¼Œè·å–ä¸€ä¸ªæµ ä¸­é—´æ“ä½œï¼šä¸€ä¸ªä¸­é—´æ“ä½œé“¾ï¼Œå¯¹æ•°æ®æºçš„æ•°æ®è¿›è¡Œå¤„ç† ç»ˆæ­¢æ“ä½œ(ç»ˆç«¯æ“ä½œ)ï¼šä¸€æ—¦æ‰§è¡Œç»ˆæ­¢æ“ä½œï¼Œå°±æ‰§è¡Œä¸­é—´æ“ä½œè„¸ï¼Œå¹¶äº§ç”Ÿç»“æœã€‚ä¹‹åä¸ä¼šå†è¢«ä½¿ç”¨ åˆ›å»º æ–¹å¼ä¸€ï¼šé€šè¿‡é›†åˆJava8ä¸­çš„Collectionæ¥å£è¢«æ‰©å±•ï¼Œæä¾›äº†ä¸¤ä¸ªè·å–æµçš„æ–¹æ³• default Stream stream()ï¼šè¿”å›ä¸€ä¸ªé¡ºåºæµ default Stream parallelStream()ï¼šè¿”å›ä¸€ä¸ªå¹¶è¡Œæµ é›†åˆå.stream()æˆ–é›†åˆå.parallelStream() æ–¹å¼äºŒï¼šé€šè¿‡æ•°ç»„Java8ä¸­çš„Arraysçš„é™æ€æ–¹æ³•stream()å¯ä»¥è·å–æ•°æ®æµ static Stream stream(T[] array)ï¼šè¿”å›ä¸€ä¸ªæµ public static IntStream stream(int[] array) public static LongStream stream(long[] array) public static DoubleStream stream(double[] array) Arrays.stream(æ•°ç»„å) æ–¹å¼ä¸‰ï¼šé€šè¿‡Streamçš„of()å¯ä»¥è°ƒç”¨Streamç±»é™æ€æ–¹æ³•of()ï¼Œé€šè¿‡æ˜¾ç¤ºå€¼åˆ›å»ºä¸€ä¸ªæµã€‚ä»–å¯ä»¥æ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•° public static Stream of(T...values)ï¼šè¿”å›ä¸€ä¸ªæµ Stream.of(æ•°å€¼ä¸€, æ•°å€¼äºŒ, ..., æ•°å€¼n) æ–¹å¼å››ï¼šåˆ›å»ºæ— é™æµå¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³•iterate()å’Œgenerate()åˆ›å»ºæ— é™æµ è¿­ä»£ï¼špublic static Stream iterate(final T seed, final UnaryOperator f) ç”Ÿæˆï¼špublic static Stream generate(Supplier s) public void test4() { //è¿­ä»£ //public static&lt;T&gt; Stream&lt;T&gt; iterate(final T seed, final UnaryOperator&lt;T&gt; f) Stream&lt;Integer&gt; stream = Stream.iterate(0, x-&gt; x +2); stream.limit(10).forEach(System.out::println); //ç”Ÿæˆ //public static&lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s) Stream&lt;Double&gt; stream1 = Stream.generate(Math::random); stream1.limit(10).forEach(System.out::println); } ä¸­é—´æ“ä½œ å¤šä¸ªä¸­é—´æ“ä½œå¯ä»¥è¿æ¥èµ·æ¥å½¢æˆä¸€ä¸ªæµæ°´çº¿ï¼Œé™¤éæµæ°´çº¿ä¸Šè§¦å‘ç»ˆæ­¢æ“ä½œï¼Œå¦åˆ™ä¸­é—´æ“ä½œä¸ä¼šæ‰§è¡Œä»»ä½•çš„å¤„ç†ï¼Œè€Œåœ¨ç»ˆæ­¢æ“ä½œæ—¶ä¸€æ¬¡æ€§å…¨éƒ¨å¤„ç†ï¼Œç§°ä¸º&quot;æƒ°æ€§æ±‚å€¼&quot; æ–¹æ³• æè¿° ç­›é€‰ä¸åˆ‡ç‰‡ filter(Predicate p) æ¥æ”¶Lambda ä»æµä¸­æ’é™¤æŸäº›å…ƒç´  distinct() ç­›é€‰ï¼Œé€šè¿‡æµæ‰€ç”Ÿæˆå…ƒç´ çš„hashCode() å’Œ equals() å»é™¤é‡å¤å…ƒç´  limit(long maxSize) æˆªæ–­æµï¼Œä½¿å…¶å…ƒç´ ä¸è¶…è¿‡ç»™å®šæ•°é‡ skip(long n) è·³è¿‡å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæ‰”æ‰äº†å‰nä¸ªå…ƒç´ çš„æµã€‚è‹¥æµä¸­å…ƒç´ ä¸è¶³nä¸ªï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæµã€‚ä¸ limit(n) äº’è¡¥ æ˜ å°„ map(Function f) æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶å°†å…¶æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚ mapToDouble(ToDoubleFunction f) æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„ DoubleStreamã€‚ mapToInt(ToIntFunction f) æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„ IntStreamã€‚ mapToLong(ToLongFunction f) æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„ LongStreamã€‚ flatMap(Function f) æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå°†æµä¸­çš„æ¯ä¸ªå€¼éƒ½æ¢æˆå¦ä¸€ä¸ªæµï¼Œç„¶åæŠŠæ‰€æœ‰æµè¿æ¥æˆä¸€ä¸ªæµ æ’åº sorted() äº§ç”Ÿä¸€ä¸ªæ–°æµï¼Œå…¶ä¸­æŒ‰è‡ªç„¶é¡ºåºæ’åº sorted(Comparator com) äº§ç”Ÿä¸€ä¸ªæ–°æµï¼Œå…¶ä¸­æŒ‰æ¯”è¾ƒå™¨é¡ºåºæ’åº ç»ˆæ­¢æ“ä½œ ç»ˆç«¯æ“ä½œä¼šä»æµçš„æµæ°´çº¿ç”Ÿæˆç»“æœã€‚å…¶ç»“æœå¯ä»¥æ˜¯ä»»ä½•ä¸æ˜¯æµçš„å€¼ï¼Œä¾‹å¦‚ï¼š List ã€ Integer ï¼Œç”šè‡³æ˜¯ void ã€‚ æµè¿›è¡Œäº†ç»ˆæ­¢æ“ä½œåï¼Œä¸èƒ½å†æ¬¡ä½¿ç”¨ã€‚ æ–¹æ³• æè¿° åŒ¹é…ä¸æŸ¥æ‰¾ allMatch(Predicate p) æ£€æŸ¥æ˜¯å¦åŒ¹é…æ‰€æœ‰å…ƒç´  anyMatch (Predicate p) æ£€æŸ¥æ˜¯å¦è‡³å°‘åŒ¹é…ä¸€ä¸ªå…ƒç´  noneMatch(Predicate p) æ£€æŸ¥æ˜¯å¦æ²¡æœ‰åŒ¹é…æ‰€æœ‰å…ƒç´  findFirst() è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´  findAny() è¿”å›å½“å‰æµä¸­çš„ä»»æ„å…ƒç´  count() è¿”å›æµä¸­å…ƒç´ æ€»æ•° max(Comparator c) è¿”å›æµä¸­æœ€å¤§å€¼ min(Comparator c) è¿”å›æµä¸­æœ€å°å€¼ forEach(Consumer c) å†…éƒ¨è¿­ä»£(ä½¿ç”¨ Collection æ¥å£éœ€è¦ç”¨æˆ·å»åšè¿­ä»£ï¼Œç§°ä¸ºå¤–éƒ¨è¿­ä»£ã€‚ç›¸åï¼ŒStream API ä½¿ç”¨å†…éƒ¨è¿­ä»£â€”â€”å®ƒå¸®ä½ æŠŠè¿­ä»£åšäº†) å½’çº¦ reduce(T iden, BinaryOperator b) å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚è¿”å› Tï¼Œidenä¸ºåˆå§‹å€¼ reduce(BinaryOperator b) å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚è¿”å› Optional æ”¶é›† collect(Collector c) å°†æµè½¬æ¢ä¸ºå…¶ä»–å½¢å¼ã€‚æ¥æ”¶ä¸€ä¸ªCollectoræ¥å£çš„å®ç°ï¼Œç”¨äºç»™ Stream ä¸­å…ƒç´ åšæ±‡æ€»çš„æ–¹æ³•ã€‚Collectoræ¥å£ä¸­æ–¹æ³•çš„å®ç°å†³å®šäº†å¦‚ä½•å¯¹æµæ‰§è¡Œæ”¶é›†çš„æ“ä½œ(å¦‚æ”¶é›†åˆ°Listã€Setã€Map)ã€‚å¦å¤–ï¼ŒCollectorså®ç”¨ç±»æä¾›äº†å¾ˆå¤šé™æ€æ–¹æ³•ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åˆ›å»ºå¸¸è§çš„æ”¶é›†å™¨ç±»å‹ Collectors Optionalç±» ä¸ºäº†è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸è€Œå¼•å…¥çš„ä¸€ä¸ªå®¹å™¨ Optional ç±» (java.util.Optional) æ˜¯ä¸€ä¸ªå®¹å™¨ç±» å®ƒå¯ä»¥ä¿å­˜ç±»å‹ T çš„å€¼ï¼Œ ä»£è¡¨è¿™ä¸ªå€¼å­˜åœ¨ ã€‚æˆ–è€…ä»…ä»…ä¿å­˜ null ï¼Œè¡¨ç¤ºè¿™ä¸ªå€¼ä¸å­˜åœ¨ ã€‚åŸæ¥ç”¨ null è¡¨ç¤ºä¸€ä¸ªå€¼ä¸å­˜åœ¨ï¼Œç°åœ¨ Optional å¯ä»¥æ›´å¥½çš„è¡¨è¾¾è¿™ä¸ªæ¦‚å¿µã€‚å¹¶ä¸” å¯ä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ ã€‚ Optional ç±»çš„ Javadoc æè¿°å¦‚ä¸‹ï¼šè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ä¸º null çš„å®¹å™¨å¯¹è±¡ã€‚å¦‚æœå€¼å­˜åœ¨åˆ™ isPresent() æ–¹æ³•ä¼šè¿”å› true ï¼Œè°ƒç”¨ get() æ–¹æ³•ä¼šè¿”å›è¯¥å¯¹è±¡ã€‚ Optionalç±»æ–¹æ³• Optional æä¾›å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ˜¾å¼è¿›è¡Œç©ºå€¼æ£€æµ‹ ã€‚ æ–¹æ³• æè¿° åˆ›å»º Optional ç±»å¯¹è±¡çš„æ–¹æ³• Optional.of(T t) åˆ›å»ºä¸€ä¸ª Optional å®ä¾‹ï¼Œ t å¿…é¡»éç©º Optional.empty() åˆ›å»ºä¸€ä¸ªç©ºçš„ Optional å®ä¾‹ Optional.ofNullable(T t) t å¯ä»¥ä¸º null åˆ¤æ–­ Optional å®¹å™¨ä¸­æ˜¯å¦åŒ…å«å¯¹è±¡ boolean isPresent() åˆ¤æ–­æ˜¯å¦åŒ…å«å¯¹è±¡ void ifPresent(Consumer&lt;? super T&gt; consumer) å¦‚æœæœ‰å€¼ï¼Œå°±æ‰§è¡Œ Consumeræ¥å£çš„å®ç°ä»£ç ï¼Œå¹¶ä¸”è¯¥å€¼ä¼šä½œä¸ºå‚æ•°ä¼ ç»™å®ƒã€‚ è·å– Optional å®¹å™¨çš„å¯¹è±¡ T get() å¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™æŠ›å¼‚å¸¸ T orElse(T other) å¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™è¿”å›æŒ‡å®šçš„ other å¯¹è±¡ã€‚ T orElseGet(Supplier&lt;? extends T&gt; other) å¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™è¿”å›ç”±Supplier æ¥å£å®ç°æä¾›çš„å¯¹è±¡ã€‚ T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier) å¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™æŠ›å‡ºç”± Supplier æ¥å£å®ç°æä¾›çš„å¼‚å¸¸ã€‚ @Test public void test1() { Boy b = new Boy(&quot;å¼ ä¸‰&quot;); Optional&lt;Girl&gt; opt = Optional.ofNullable(b.getGirlFriend()); //å¦‚æœå¥³æœ‹å‹å­˜åœ¨å°±æ‰“å°å¥³æœ‹å‹çš„ä¿¡æ¯ opt.ifPresent(System.out::println); } @Test public void test2() { Boy b = new Boy(&quot;å¼ ä¸‰&quot;); Optional&lt;Girl&gt; opt = Optional.ofNullable(b.getGirlFriend()); //å¦‚æœæœ‰å¥³æœ‹å‹å°±è¿”å›ä»–çš„å¥³æœ‹å‹ï¼Œå¦åˆ™åªèƒ½æ¬£èµâ€œå«¦å¨¥â€äº† Girl girl = opt.orElse(new Girl(&quot;å«¦å¨¥&quot;)); System.out.println(&quot;ä»–çš„å¥³æœ‹å‹æ˜¯:&quot;+ girl.getName()); } @Test public void test3(){ Optional&lt;Employee&gt; opt = Optional.of(new Employee(&quot;å¼ ä¸‰&quot;,8888)); //åˆ¤æ–­ opt ä¸­å‘˜å·¥å¯¹è±¡æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³å°±ä¿ç•™ï¼Œå¦åˆ™è¿”å›ç©º Optional&lt;Employee&gt; emp = opt.filter(e -&gt; e.getSalary()&gt;10000); System.out.println(emp); } @Test public void test4(){ Optional&lt;Employee&gt; opt = Optional.of(new Employee(&quot;å¼ ä¸‰&quot;, 8888)); //å¦‚æœ opt ä¸­å‘˜å·¥å¯¹è±¡ä¸ä¸ºç©ºï¼Œå°±æ¶¨è–ª 10% Optional&lt;Employee&gt; emp = opt.map(e -&gt;e.setSalary(e.getSalary()%1.1); return e;}); System.out.println(emp); } ","link":"https://yeyuan1107.github.io/post/java8-xin-te-xing/"},{"title":"Javaåå°„","content":" ç®€ä»‹ åå°„æ˜¯è¢«è§†ä¸ºåŠ¨æ€è¯­è¨€çš„å…³é”®ï¼Œåå°„æœºåˆ¶å…è®¸ç¨‹åºåœ¨æ‰§è¡ŒæœŸå€ŸåŠ©äºReflection APIå–å¾—ä»»ä½•ç±»çš„å†…éƒ¨æ¶ˆæ¯ï¼Œå¹¶èƒ½ç›´æ¥æ“ä½œä»»ä½•å¯¹è±¡çš„å†…éƒ¨å±æ€§åŠæ–¹æ³•ã€‚ åŠ è½½å®Œç±»ä¹‹åï¼Œåœ¨å¯¹å†…å­˜çš„æ–¹æ³•åŒºä¸­å°±äº§ç”Ÿäº†ä¸€ä¸ªClassç±»å‹çš„å¯¹è±¡ï¼ˆä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªClasså¯¹è±¡ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡å°±åŒ…å«äº†å®Œæ•´çš„ç±»çš„ç»“æ„ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡çœ‹åˆ°ç±»çš„ç»“æ„ã€‚è¿™ä¸ªå¯¹è±¡å°±åƒä¸€é¢é•œå­ï¼Œé€è¿‡è¿™ä¸ªé•œå­çœ‹åˆ°ç±»çš„ç»“æ„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç§°ä¹‹ä¸ºåå°„ åŠ¨æ€è¯­è¨€ï¼šåœ¨è¿è¡Œæ—¶å¯ä»¥æ”¹å˜å…¶ç»“æ„çš„è¯­è¨€ï¼Œä¾‹å¦‚æ–°çš„å‡½æ•°ã€å¯¹è±¡ã€ç”šè‡³ä»£ç å¯ä»¥è¢«å¼•è¿›ï¼Œå·²æœ‰çš„å‡½æ•°å¯ä»¥è¢«åˆ é™¤æˆ–æ˜¯å…¶ä»–ç»“æ„ä¸Šçš„å˜åŒ–ã€‚ä¸»è¦åŠ¨æ€è¯­è¨€ï¼šC#ã€JavaScriptã€Pythonç­‰ Javaé™æ€ + åå°„ -&gt; å‡†åŠ¨æ€è¯­è¨€ åå°„çš„ä½œç”¨ åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±» åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡ åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³• åœ¨è¿è¡Œæ—¶è·å–æ³›å‹ä¿¡æ¯ åœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæ–¹æ³• åœ¨è¿è¡Œæ—¶å¤„ç†æ³¨è§£ ç”ŸæˆåŠ¨æ€ä»£ç† åå°„ç›¸å…³çš„ä¸»è¦API java.lang.Classï¼šä»£è¡¨ä¸€ä¸ªç±» java.lang.reflect.Methodï¼šä»£è¡¨ç±»çš„æ–¹æ³• java.lang.reflect.Fieldï¼šä»£è¡¨ç±»çš„æˆå‘˜å˜é‡ java.lang.reflect.Constructorï¼šä»£è¡¨ç±»çš„æ„é€ å™¨ ... Class åœ¨Objectç±»ä¸­å®šä¹‰äº†public final Class getClass()ä»¥ä¸Šçš„æ–¹æ³•è¿”å›å€¼çš„ç±»å‹æ˜¯ä¸€ä¸ªClassç±»ï¼Œæ­¤ç±»æ˜¯Javaåå°„çš„æºå¤´ï¼Œå®é™…ä¸Šæ‰€è°“åå°„ä»ç¨‹åºçš„è¿è¡Œç»“æœä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå³å¯ä»¥é€šè¿‡å¯¹è±¡åå°„æ±‚å‡ºç±»çš„åç§°ã€‚ å¯¹è±¡ç…§é•œå­åå¯ä»¥å¾—åˆ°çš„ä¿¡æ¯ï¼šæŸä¸ªç±»çš„å±æ€§ã€æ–¹æ³•å’Œæ„é€ å™¨ã€æŸä¸ªç±»åˆ°åº•å®ç°äº†å“ªäº›æ¥å£ã€‚å¯¹äºæ¯ä¸ªç±»è€Œè¨€ï¼ŒJREéƒ½ä¸ºå…¶ä¿ç•™ä¸€ä¸ªä¸å˜çš„Classç±»å‹çš„å¯¹è±¡ã€‚ä¸€ä¸ªClasså¯¹è±¡åŒ…å«äº†ç‰¹å®šæŸä¸ªç»“æ„(class/interface/enum/annotation/primitive type/void/[])çš„æœ‰å…³ä¿¡æ¯ Classæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªç±» Classå¯¹è±¡åªèƒ½ç”±ç³»ç»Ÿå»ºç«‹å¯¹è±¡ ä¸€ä¸ªåŠ è½½çš„ç±»åœ¨JVMä¸­åªä¼šæœ‰ä¸€ä¸ªClassç¤ºä¾‹ ä¸€ä¸ªClasså¯¹è±¡å¯¹åº”çš„æ˜¯ä¸€ä¸ªåŠ è½½åˆ°JVMä¸­çš„ä¸€ä¸ª.classæ–‡ä»¶ æ¯ä¸ªç±»çš„å®ä¾‹éƒ½ä¼šè®°å¾—è‡ªå·±æ˜¯ç”±å“ªä¸ªClasså®ä¾‹æ‰€ç”Ÿæˆ é€šè¿‡Classå¯ä»¥å®Œæ•´åœ°å¾—åˆ°ä¸€ä¸ªç±»ä¸­çš„æ‰€æœ‰è¢«åŠ è½½çš„ç»“æ„ Classç±»æ˜¯Reflectionçš„æ ¹æºï¼Œé’ˆå¯¹ä»»ä½•ä½ æƒ³åŠ¨æ€åŠ è½½ã€è¿è¡Œçš„ç±»ï¼Œå”¯æœ‰å…ˆè·å¾—ç›¸åº”çš„Classå¯¹è±¡ Classç±»çš„å¸¸ç”¨æ–¹æ³• æ–¹æ³• æè¿° static Class forName (String name) è¿”å›æŒ‡å®šç±»åname çš„ Class å¯¹è±¡ Object newInstance() è°ƒç”¨ç¼ºçœæ„é€ å‡½æ•°ï¼Œè¿”å›è¯¥Class å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ getName() è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„å®ä½“ï¼ˆç±»ã€æ¥å£ã€æ•°ç»„ç±»ã€åŸºæœ¬ç±»å‹æˆ– void ï¼‰åç§° Class getSuperClass() è¿”å›å½“å‰Class å¯¹è±¡çš„çˆ¶ç±»çš„ Class å¯¹è±¡ Class [] getInterfaces () è·å–å½“å‰Classå¯¹è±¡çš„æ¥å£ ClassLoader getClassLoader() è¿”å›è¯¥ç±»çš„ç±»åŠ è½½å™¨ Constructor[] getConstructors è¿”å›ä¸€ä¸ªåŒ…å«æŸäº›Constructorå¯¹è±¡çš„æ•°ç»„ Field[] getDeclaredFields è¿”å›Field å¯¹è±¡çš„ä¸€ä¸ªæ•°ç»„ Method getMethod (String name, Class â€¦ paramTypes) è¿”å›ä¸€ä¸ªMethod å¯¹è±¡ï¼Œæ­¤å¯¹è±¡çš„å½¢å‚ç±»å‹ä¸ºparamType String str = &quot;test4.Person&quot;; Class clazz = Class.forName(str); Object obj = clazz.newInstance(); Field field = clazz.getField(&quot;name&quot;); field.set(obj,&quot;Peter&quot;); Object name = field.get(obj); System.out.println(name); è·å–Classç±»çš„å®ä¾‹ //1. è‹¥å·²çŸ¥å…·ä½“çš„ç±»ï¼Œé€šè¿‡ç±»çš„classå±æ€§è·å–ï¼Œè¯¥æ–¹æ³•æœ€ä¸ºå®‰å…¨å¯é ï¼Œç¨‹åºæ€§èƒ½æœ€é«˜ Class&lt;T&gt; clazz = T.class; //2. å·²çŸ¥æŸä¸ªç±»çš„å®ä¾‹ï¼Œè°ƒç”¨è¯¥å®ä¾‹çš„getClass()æ–¹æ³•è·å–Classå¯¹è±¡ Class clazz = &quot;str&quot;.getClass(); //3. å·²çŸ¥ä¸€ä¸ªç±»çš„å…¨ç±»åï¼Œä¸”è¯¥ç±»åœ¨ç±»è·¯å¾„ä¸‹ï¼Œå¯é€šè¿‡Classç±»çš„é™æ€æ–¹æ³•forName()è·å–ï¼Œå¯èƒ½æŠ›å‡ºClassNotFoundException Class clazz = Class.forName(&quot;java.lang.String&quot;); //4. ä½¿ç”¨ç±»çš„åŠ è½½å™¨ï¼ŒloadClassä¼ å…¥å‚æ•°ä¸ºç±»çš„å…¨ç±»å ClassLoader cl = this.getClass().getClassLoader(); Class clazz = cl.loadClass(&quot;java.lang.String&quot;) å“ªäº›ç±»å‹å¯ä»¥æœ‰Classå¯¹è±¡ classï¼šå¤–éƒ¨ç±»ï¼Œæˆå‘˜(æˆå‘˜å†…éƒ¨ç±»ï¼Œé™æ€å†…éƒ¨ç±»)ï¼Œå±€éƒ¨å†…éƒ¨ç±»ï¼ŒåŒ¿åå†…éƒ¨ç±» interfaceï¼šæ¥å£ []ï¼šæ•°ç»„ enumï¼šæšä¸¾ annotationï¼šæ³¨è§£@interface primitive typeï¼šåŸºæœ¬æ•°æ®ç±»å‹ void ç±»çš„åŠ è½½ä¸ClassLoaderçš„ç†è§£ ç±»åœ¨ç»è¿‡javacå‘½ä»¤åç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ª.classå­—èŠ‚ç æ–‡ä»¶ï¼Œæ¥ç€æˆ‘ä»¬ä½¿ç”¨java.exeå‘½ä»¤å¯¹æŸä¸ªå­—èŠ‚ç æ–‡ä»¶è¿›è¡Œè§£é‡Šè¿è¡Œç›¸å½“äºå°†æŸä¸ªå­—èŠ‚ç æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œæ­¤è¿‡ç¨‹ç§°ä¹‹ä¸ºç±»çš„åŠ è½½ï¼ŒåŠ è½½åˆ°å†…å­˜ä¸­çš„ç±»ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè¿è¡Œæ—¶ç±»ï¼Œæ­¤è¿è¡Œæ—¶ç±»ï¼Œå°±ä½œä¸ºClassçš„ä¸€ä¸ªå®ä¾‹ã€‚æ¢å¥è¯è¯´ï¼ŒClassçš„å®ä¾‹å°±å¯¹åº”ä¸€ä¸ªè¿è¡Œæ—¶ç±» åŠ è½½ï¼šå°† class æ–‡ä»¶å­—èŠ‚ç å†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¿™äº›é™æ€æ•°æ®è½¬æ¢æˆæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„ java.lang.Class å¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºä¸­ç±»æ•°æ®çš„è®¿é—®å…¥å£ï¼ˆå³å¼•ç”¨åœ°å€ï¼‰ã€‚æ‰€æœ‰éœ€è¦è®¿é—®å’Œä½¿ç”¨ç±»æ•°æ®åªèƒ½é€šè¿‡è¿™ä¸ª Class å¯¹è±¡ã€‚è¿™ä¸ªåŠ è½½çš„è¿‡ç¨‹éœ€è¦ç±»åŠ è½½å™¨å‚ä¸ ã€‚ é“¾æ¥ï¼šå°† Java ç±»çš„äºŒè¿›åˆ¶ä»£ç åˆå¹¶åˆ° JVM çš„è¿è¡ŒçŠ¶æ€ä¹‹ä¸­çš„è¿‡ç¨‹ã€‚ éªŒè¯ï¼šç¡®ä¿åŠ è½½çš„ç±»ä¿¡æ¯ç¬¦åˆ JVM è§„èŒƒï¼Œä¾‹å¦‚ï¼šä»¥ cafe babeå¼€å¤´ï¼Œæ²¡æœ‰å®‰å…¨æ–¹é¢çš„é—®é¢˜ å‡†å¤‡ï¼šæ­£å¼ä¸ºç±»å˜é‡ï¼ˆ static ï¼‰åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡é»˜è®¤åˆå§‹å€¼çš„é˜¶æ®µï¼Œè¿™äº›å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é… ã€‚ è§£æï¼šè™šæ‹Ÿæœºå¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨ï¼ˆå¸¸é‡åï¼‰æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆåœ°å€ï¼‰çš„è¿‡ç¨‹ ã€‚ åˆå§‹åŒ–ï¼š æ‰§è¡Œ**ç±»æ„é€ å™¨() **æ–¹æ³•çš„è¿‡ç¨‹ã€‚ ç±»æ„é€ å™¨()æ–¹æ³•æ˜¯ç”±ç¼–è¯‘æœŸè‡ªåŠ¨æ”¶é›†ç±»ä¸­æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥åˆå¹¶äº§ç”Ÿçš„ã€‚ï¼ˆç±»æ„é€ å™¨æ˜¯æ„é€ ç±»ä¿¡æ¯çš„ï¼Œä¸æ˜¯æ„é€ è¯¥ç±»å¯¹è±¡çš„æ„é€ å™¨ï¼‰ã€‚ å½“åˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°å…¶çˆ¶ç±»è¿˜æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ– ã€‚ è™šæ‹Ÿæœºä¼šä¿è¯ä¸€ä¸ªç±»çš„ () æ–¹æ³•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«æ­£ç¡®åŠ é”å’ŒåŒæ­¥ ã€‚ public class ClassLoadingTest { public static void main(String[] args){ System.out.println(A.m); } } class A { static { m = 300; } static int m = 100; } //ç¬¬äºŒæ­¥ï¼šé“¾æ¥ç»“æŸå m=0 //ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–åï¼Œmçš„å€¼ç”±&lt;clinit&gt;æ–¹æ³•æ‰§è¡Œå†³å®š //è¿™ä¸ª A çš„ç±»æ„é€ å™¨&lt;clinit&gt;æ–¹æ³•ç”±ç±»å˜é‡çš„èµ‹å€¼å’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥æŒ‰ç…§é¡ºåºåˆå¹¶äº§ç”Ÿï¼Œç±»ä¼¼äº // &lt;clinit&gt;(){ // m = 300; // m = 100; // } ä»€ä¹ˆæ—¶å€™å‘ç”Ÿç±»åˆå§‹åŒ– ç±»çš„ä¸»åŠ¨å¼•ç”¨ ä¸€å®šä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ– å½“è™šæ‹Ÿæœºå¯åŠ¨å…ˆåˆå§‹åŒ– main æ–¹æ³•æ‰€åœ¨çš„ ç±» new ä¸€ä¸ªç±»çš„å¯¹è±¡ è°ƒç”¨ç±»çš„é™æ€æˆå‘˜é™¤äº† final å¸¸é‡å’Œé™æ€æ–¹æ³• ä½¿ç”¨ java lang reflect åŒ…çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨ å½“åˆå§‹åŒ–ä¸€ä¸ªç±»å¦‚æœå…¶çˆ¶ç±»æ²¡æœ‰è¢«åˆå§‹åŒ–åˆ™å…ˆä¼šåˆå§‹åŒ–å®ƒçš„çˆ¶ç±» ç±»çš„è¢«åŠ¨å¼•ç”¨ä¸ä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ– å½“è®¿é—®ä¸€ä¸ªé™æ€åŸŸæ—¶åªæœ‰çœŸæ­£å£°æ˜è¿™ä¸ªåŸŸçš„ç±»æ‰ä¼šè¢«åˆå§‹åŒ– å½“é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å˜é‡ ä¸ä¼šå¯¼è‡´å­ç±»åˆå§‹åŒ– é€šè¿‡æ•°ç»„å®šä¹‰ç±»å¼•ç”¨ï¼Œä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ– å¼•ç”¨å¸¸é‡ä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ–(å¸¸é‡åœ¨é“¾æ¥é˜¶æ®µå°±å­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­äº†) public class ClassLoadingTest { public static void main(String[] args ){ //ä¸»åŠ¨å¼•ç”¨ï¼šä¸€å®šä¼šå¯¼è‡´ A å’Œ Father çš„åˆå§‹åŒ– //A a = new A(); //System.out.println(A.m); //Class.forName(&quot;com.atguigu.java2.A&quot;); //è¢«åŠ¨å¼•ç”¨ A[] array = new A[5]; //ä¸ä¼šå¯¼è‡´ A å’Œ Father çš„åˆå§‹åŒ– //System.out.println(A.b);// åªä¼šåˆå§‹åŒ–Father //System.out.println(A.M);// ä¸ä¼šå¯¼è‡´ A å’ŒFather çš„åˆå§‹åŒ– } static{ System.out .println (&quot;main æ‰€åœ¨çš„ç±»); } } class Father { static int b = 2; static{ System.out.println(&quot;çˆ¶ç±»è¢«åŠ è½½&quot;); } } class A extends Father { static{ System.out.println(&quot;å­ç±»è¢«åŠ è½½&quot;); m=300; } static int m = 100; static final int M = 1; } ClassLoader ClassLoaderå¸¸ç”¨æ–¹æ³• // è·å–ä¸€ä¸ªç³»ç»Ÿç±»åŠ è½½å™¨ ClassLoader classloader = ClassLoader.getSystemClassLoader(); System.out.println(classloader); // è·å–ç³»ç»Ÿç±»åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨ï¼Œå³æ‰©å±•ç±»åŠ è½½å™¨ classloader = classloader.getParent(); System.out.println(classloader); // è·å–æ‰©å±•ç±»åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨ï¼Œå³å¼•å¯¼ç±»åŠ è½½å™¨ classloader = classloader.getParent(); System.out.println(classloader); // æµ‹è¯•å½“å‰ç±»ç”±å“ªä¸ªç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½ classloader = Class.forName (&quot;exer2.getClassLoader&quot;).getClassLoader(); System.out.println(classloader); // æµ‹è¯• JDK æä¾›çš„ Object ç±»ç”±å“ªä¸ªç±»åŠ è½½å™¨åŠ è½½ classloader = Class.forName(&quot;java.lang.Object&quot;).getClassLoader(); System.out.println(classloader); //* å…³äºç±»åŠ è½½å™¨çš„ä¸€ä¸ªä¸»è¦æ–¹æ³•ï¼šgetResourceAsStream(String str)è·å–ç±»è·¯å¾„ä¸‹çš„æŒ‡å®šæ–‡ä»¶çš„è¾“å…¥æµ InputStream in = null; in = this.getClass().getClassLoader().getResourceAsStream (&quot;exer2\\\\test.properties&quot;); System.out.println(in); é€šè¿‡ç±»åŠ è½½å™¨è¯»å–é…ç½®æ–‡ä»¶ Properties pros = new Properties(); //æ–¹å¼ä¸€ï¼š FileInputStream fis = new FileInputStream(&quot;text.properties&quot;); pros.load(fis); String name = pros.getProperty(&quot;user&quot;); String pwd = pros.getProperty(&quot;password&quot;); //æ–¹å¼äºŒï¼š ClassLoader classLoader = xx.class.getClassLoader(); InputStream is = classLoader.getResourceAsStream(&quot;text.properties&quot;); pros.load(is); String name = pros.getProperty(&quot;user&quot;); String pwd = pros.getProperty(&quot;password&quot;); åˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡ åˆ›å»ºç±»çš„å¯¹è±¡ï¼šè°ƒç”¨Classå¯¹è±¡çš„newInstance()æ–¹æ³• newInstance()æ–¹æ³•çš„è¦æ±‚ï¼š ç±»å¿…é¡»æœ‰ä¸€ä¸ªæ— å‚æ•°çš„æ„é€ å™¨ ç±»çš„æ„é€ å™¨çš„è®¿é—®æƒé™éœ€è¦è¶³å¤Ÿ JavaBeanä¸­è¦æ±‚æä¾›ä¸€ä¸ªpublicçš„ç©ºå‚æ„é€ å™¨ ä¾¿äºé€šè¿‡åå°„ï¼Œåˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡ ä¾¿äºå­ç±»ç»§æ‰¿æ­¤è¿è¡Œæ—¶ç±»çš„å¯¹è±¡æ—¶é»˜è®¤è°ƒç”¨super()ï¼Œä¿è¯çˆ¶ç±»æœ‰æ­¤æ„é€ å™¨ å¦‚æœè¯¥ç±»æ²¡æœ‰æ— å‚çš„æ„é€ å™¨ï¼š é€šè¿‡Classç±»çš„getDeclaredConstructor(Class...parameterTypes)å–å¾—è¢«ç±»çš„æŒ‡å®šå½¢å‚ç±»å‹çš„æ„é€ å™¨ å‘æ„é€ å™¨çš„å½¢å‚ä¸­ä¼ é€’ä¸€ä¸ªå¯¹è±¡æ•°ç»„è¿›å»ï¼Œé‡Œè¾¹åŒ…å«äº†æ„é€ å™¨æ‰€éœ€çš„å„ä¸ªå‚æ•° é€šè¿‡Constructorå®ä¾‹åŒ–å¯¹è±¡ //æ–¹å¼ä¸€ //1. æ— æ³›å‹ Class clazz = Person.class; Object obj = clazz.newInstance(); //2. æœ‰æ³›å‹ Class&lt;T&gt; clazz = Person.class; Person person = clazz.newInstance(); //æ–¹å¼äºŒï¼š //1.æ ¹æ®å…¨ç±»åè·å–å¯¹åº”çš„ Class å¯¹è±¡ String name = &quot;atguigu.java.Person&quot;; Class clazz = null; clazz = Class.forName(name); //2.è°ƒç”¨æŒ‡å®šå‚æ•°ç»“æ„çš„æ„é€ å™¨ï¼Œç”Ÿæˆ Constructor çš„å®ä¾‹ Constructor con = clazz.getConstructor(String.class,Integer.class); //3.é€šè¿‡ Constructor çš„å®ä¾‹åˆ›å»ºå¯¹åº”ç±»çš„å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–ç±»å±æ€§ Person p2 = (Person) con.newInstance (&quot;Peter&quot;,20); System.out.println(p2); è·å–è¿è¡Œæ—¶ç±»çš„å®Œæ•´ç»“æ„ é€šè¿‡åå°„è·å¾— Fieldã€ Method ã€ Constructor ã€ Superclass ã€ Interface ã€ Annotation public Field[] getFields()è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„publicçš„Filed public FIeld[] getDeclaredFields()è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„å…¨éƒ¨Field Fieldç±»æ–¹æ³•ï¼š public int getModifiers()ä»¥æ•´æ•°å½¢å¼è¿”å›æ­¤Fieldçš„æƒé™ä¿®é¥°ç¬¦ public Class&lt;?&gt; getType()å¾—åˆ°Fieldçš„å±æ€§åç§° public String getName()è¿”å›FIeldçš„åç§° Method public Method[] getMethods()è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„publicçš„æ–¹æ³• public Method[] getDeclaredMethods()è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„å…¨éƒ¨æ–¹æ³• Methodç±»æ–¹æ³• public Class&lt;?&gt; getReturnType()å–å¾—å…¨éƒ¨çš„è¿”å›å€¼ public Class&lt;?&gt;[] getParameterTypes()å–å¾—å…¨éƒ¨çš„å‚æ•° public int getModifiers()å–å¾—æƒé™ä¿®é¥°ç¬¦ public Class&lt;?&gt;[] getExceptionTypes()å–å¾—å¼‚å¸¸ä¿¡æ¯ Annotation getAnnotation(Class annotationClass) public Annotation[] getAnnotations()è·å–æ³¨è§£ getDeclaredAnnotations() å®ç°çš„å…¨éƒ¨æ¥å£ public Class&lt;?&gt;[] getInterfaces()å–å¾—æ­¤å¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£å®ç°çš„æ¥å£ æ‰€ç»§æ‰¿çš„çˆ¶ç±» public Class&lt;? super T&gt; getSuperclass()è¿”å›è¡¨ç¤ºæ­¤Classæ‰€è¡¨ç¤ºçš„å®ä½“(ç±»ã€æ¥å£ã€åŸºæœ¬ç±»å‹)çš„çˆ¶ç±»çš„Class å…¨éƒ¨çš„æ„é€ å™¨ public Constructor[] getConstructors()è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»çš„æ‰€æœ‰publicæ„é€ å™¨ public Constructor[] getDeclaredConstructors()è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»å£°æ˜çš„æ‰€æœ‰æ„é€ å™¨ Constructorç±»æ–¹æ³• public int getModifiers()å–å¾—æƒé™ä¿®é¥°ç¬¦ public String getName()å–å¾—æ–¹æ³•åç§° public Class&lt;?&gt;[] getParameterTypes()å–å¾—å‚æ•°çš„ç±»å‹ æ³›å‹ç›¸å…³ Type getGenericSuperclass()è·å–çˆ¶ç±»æ³›å‹ç±»å‹ ParameterizedTypeæ³›å‹ç±»å‹ public Type[] getActualTypeArguments()è·å–å®é™…çš„æ³›å‹ç±»å‹å‚æ•°æ•°ç»„ï¼Œé€šè¿‡ParameterizedTypeç±»å‹çš„å¯¹è±¡è°ƒç”¨ï¼Œè¿”å›Type[] ç±»æ‰€åœ¨çš„åŒ… Package getPackage()è·å–æ‰€åœ¨çš„åŒ… è°ƒç”¨è¿è¡Œæ—¶ç±»çš„æŒ‡å®šç»“æ„ è°ƒç”¨æŒ‡å®šæ–¹æ³• //æ¨èç›´æ¥ä½¿ç”¨getDeclaredMethod()æ–¹æ³• //é€šè¿‡Classç±»çš„getMethod(String name, Class...parameterTypes)æ–¹æ³•å–å¾—ä¸€ä¸ªMethodå¯¹è±¡ï¼Œå¹¶è®¾ç½®æ­¤æ–¹æ³•æ“ä½œæ—¶éœ€è¦çš„å‚æ•°ç±»å‹ Method method = clazz.getMethod(String name, Class...parameterTypes); //ä¹‹åä½¿ç”¨Object invoke(Object obj, Object[] args)è¿›è¡Œè°ƒç”¨ï¼Œå¹¶å‘æ–¹æ³•ä¸­ä¼ é€’è¦è®¾ç½®çš„objå¯¹è±¡çš„å‚æ•°ä¿¡æ¯ //Objectå¯¹åº”å…ƒæ–¹æ³•çš„è¿”å›å€¼ï¼Œå¦‚æœåŸæ–¹æ³•æ— è¿”å›å€¼ï¼Œæ­¤æ—¶è¿”å›null //è‹¥åŸæ–¹æ³•å½¢å‚åˆ—è¡¨ä¸ºç©ºï¼Œåˆ™Object[] argsä¸ºnull //è‹¥åŸæ–¹æ³•ä¸ºé™æ€æ–¹æ³•ï¼Œåˆ™è¡Œå‚Object objå¯ä¸ºnull //è‹¥åŸæ–¹æ³•å£°æ˜ä¸ºprivateï¼Œåˆ™ä½¿ç”¨getDeclaredMethod()æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨invoke()å‰ï¼Œæ˜¾ç¤ºè°ƒç”¨æ–¹æ³•å¯¹è±¡çš„setAccessible(true)æ–¹æ³•ï¼Œå°†å¯è®¿é—®privateçš„æ–¹æ³• Objcet returnValue = method.invoke(Object obj, Object[] args); è°ƒç”¨æŒ‡å®šå±æ€§ //è·å–Field Field name1 = clazz.getField(String name); Field name2 = clazz.getDeclaredField(String name); //public Object get(Object obj)å–å¾—æŒ‡å®šå¯¹è±¡objä¸Šæ­¤Fieldçš„å±æ€§å†…å®¹ //public void set(Object obj, Object value)è®¾ç½®æŒ‡å®šå¯¹è±¡objä¸Šæ­¤Fieldçš„å±æ€§ name1.set(Object obj, Object value); name1.get(Object obj); //getDeclaredField()æ–¹æ³•è·å–çš„Fieldåœ¨ä½¿ç”¨å‰å»ºè®®è°ƒç”¨setAccessible(true)çš„æ–¹æ³• //setAccesssibleå¯åŠ¨å’Œç¦ç”¨è®¿é—®å®‰å…¨æ£€æŸ¥çš„å¼€å…³ //å‚æ•°å€¼ä¸ºtrueåˆ™åªæ˜¯åå°„çš„å¯¹è±¡åœ¨ä½¿ç”¨æ—¶åº”è¯¥å–æ¶ˆJavaè¯­è¨€è®¿é—®æ£€æŸ¥ // æé«˜åå°„çš„æ•ˆç‡ï¼Œå¦‚æœä»£ç ä¸­å¿…é¡»ç”¨åå°„ï¼Œè€Œè¯¥å¥ä»£ç éœ€è¦é¢‘ç¹çš„è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆè¯·è®¾ç½®ä¸ºtrue // ä½¿å¾—åŸæœ¬æ— æ³•è®¿é—®çš„ç§æœ‰æˆå‘˜ä¹Ÿå¯ä»¥è®¿é—® //å‚æ•°å€¼ä¸ºfalseåˆ™åªæ˜¯åå°„çš„å¯¹è±¡åº”è¯¥å®æ–½Javaè¯­è¨€è®¿é—®æ£€æŸ¥ name2.setAccessible(true); name2.set(Object obj, Object value); name2.get(Object obj); è°ƒç”¨æ„é€ å™¨ //è·å–æŒ‡å®šå½¢å‚ç±»å‹çš„æ„é€ å™¨ Constructor con = clazz.getDeclaredConstructor(Class...parameterType); con.setAccessible(true); //ä¼ å…¥å®å‚ï¼Œåˆ›å»ºå¯¹è±¡ ç±» ç±»å = (ç±»)con.newInstance(Object[] args) åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç† é™æ€ä»£ç†ï¼šä»£ç†ç±»ä¸è¢«ä»£ç†ç±»åœ¨ç¼–è¯‘æœŸé—´å°±ç¡®å®šäº† åŠ¨æ€ä»£ç†ä¸AOPä»£ç ç¤ºä¾‹ public interface Dog{ void info(); void run(); } public class HuntingDog implements Dog{ public void info(){ System.out.println(&quot;æˆ‘æ˜¯ä¸€åªçŒç‹—&quot;); } public void run(){ System.out.println(&quot;æˆ‘å¥”è·‘è¿…é€Ÿ&quot;); } } public class DogUtil{ public void method1(){ System.out.println(&quot;=====æ¨¡æ‹Ÿé€šç”¨æ–¹æ³•ä¸€=====&quot;);&quot; } public void method2(){ System.out.println(&quot;=====æ¨¡æ‹Ÿé€šç”¨æ–¹æ³•äºŒ=====&quot;); } } public class MyInvocationHandler implements InvocationHandler{ //éœ€è¦è¢«ä»£ç†çš„å¯¹è±¡ private Object target; public void setTarget(Object target){ this.target = target; } //æ‰§è¡ŒåŠ¨æ€ä»£ç†å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•æ—¶ï¼Œéƒ½ä¼šè¢«æ›¿æ¢æˆæ‰§è¡Œå¦‚ä¸‹çš„ invoke æ–¹æ³• public Object invoke(Object proxy, Method method , Object[] args)throws Exception{ DogUtil du = new DogUtil(); //æ‰§è¡Œ DogUtil å¯¹è±¡ä¸­çš„ method1 ã€‚ du.method1(); //ä»¥ target ä½œä¸ºä¸»è°ƒæ¥æ‰§è¡Œ method æ–¹æ³• Object result = method.invoke (target , args); //æ‰§è¡Œ DogUtil å¯¹è±¡ä¸­çš„ method2 ã€‚ du.method2(); return result; } } public class MyProxyFactory{ //ä¸ºæŒ‡å®š target ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡ public static Object getProxy (Object target) throws Exception{ //åˆ›å»ºä¸€ä¸ª MyInvokationHandler å¯¹è±¡ MyInvokationHandler handler = new MyInvokationHandler(); //ä¸º MyInvokationHandler è®¾ç½® target å¯¹è±¡ handler.setTarget(target); //åˆ›å»ºã€å¹¶è¿”å›ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡ return Proxy.newProxyInstance(target.getClass().getClassLoader(), target.getClass().getInterfaces(), handler); } } public class Test{ public static void main(String[] args)throws Exception{ //åˆ›å»ºä¸€ä¸ªåŸå§‹çš„ HuntingDog å¯¹è±¡ï¼Œä½œä¸º target Dog target = new HuntingDog(); //ä»¥æŒ‡å®šçš„ target æ¥åˆ›å»ºåŠ¨æ€ä»£ç† Dog dog = (Dog) MyProxyFactory.getProxy(traget); dog.info(); dog.run(); } } åå°„ä¸å°è£…æ€§æ˜¯å¦å†²çª ä¸å†²çª å°è£…æ€§ï¼šè§£å†³å»ºè®®è°ƒç”¨ä»€ä¹ˆå±æ€§åŠæ–¹æ³•çš„é—®é¢˜ åå°„ï¼šè§£å†³èƒ½ä¸èƒ½è°ƒç”¨çš„é—®é¢˜ åå°„ä¸ç›´æ¥newå¯¹è±¡æ˜¯å¦å†²çª ä¸å†²çªä¼˜å…ˆä½¿ç”¨newå¯¹è±¡çš„æ–¹å¼ï¼Œåªæœ‰åœ¨ç¼–å†™æ—¶ä¸çŸ¥é“åˆ›å»ºå“ªä¸ªå¯¹è±¡æ—¶æ‰ä½¿ç”¨åå°„çš„æ–¹æ³• ","link":"https://yeyuan1107.github.io/post/java-fan-she/"},{"title":"Javaç½‘ç»œç¼–ç¨‹","content":" Javaæ˜¯Internetä¸Šçš„è¯­è¨€ï¼Œå®ƒä»è¯­è¨€çº§ä¸Šæä¾›äº†å¯¹ç½‘ç»œåº”ç”¨ç¨‹åºçš„æ”¯æŒï¼Œç¨‹åºå‘˜èƒ½å¤Ÿå¾ˆå®¹æ˜“å¼€å‘å¸¸è§çš„ç½‘ç»œåº”ç”¨ç¨‹åº Javaæä¾›çš„ç½‘ç»œç±»åº“ï¼Œå¯ä»¥å®ç°æ— ç—›çš„ç½‘ç»œè¿æ¥ï¼Œè”ç½‘çš„åº•å±‚ç»†èŠ‚è¢«éšè—åœ¨Javaçš„æœ¬æœºå®‰è£…ç³»ç»Ÿé‡Œï¼Œç”±JVMè¿›è¡Œæ§åˆ¶ã€‚å¹¶ä¸”Javaå®ç°äº†ä¸€ä¸ªè·¨å¹³å°çš„ç½‘ç»œåº“ï¼Œç¨‹åºå‘˜é¢å¯¹çš„æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„ç½‘ç»œç¼–ç¨‹ç¯å¢ƒ ç½‘ç»œç¼–ç¨‹çš„ç›®çš„ï¼šç›´æ¥æˆ–é—´æ¥åœ°é€šè¿‡ç½‘ç»œåè®®ä¸å…¶ä»–è®¡ç®—æœºå®ç°æ•°æ®äº¤æ¢ï¼Œè¿›è¡Œé€šè®¯ã€‚ç½‘ç»œç¼–ç¨‹çš„ä¸»è¦é—®é¢˜ï¼šå¦‚ä½•å‡†ç¡®å®šä½ç½‘ç»œä¸Šä¸€å°æˆ–å¤šå°ä¸»æœºï¼›å®šä½ä¸»æœºä¸Šçš„ç‰¹å®šçš„åº”ç”¨ï¼Ÿæ‰¾åˆ°ä¸»æœºåå¦‚ä½•å¯é é«˜æ•ˆåœ°è¿›è¡Œæ•°æ®ä¼ è¾“ ç½‘ç»œç¼–ç¨‹è¦ç´  é€šä¿¡åŒæ–¹åœ°å€ IP å”¯ä¸€çš„æ ‡è¯†Internetä¸Šçš„è®¡ç®—æœº(é€šä¿¡å®ä½“) æœ¬åœ°å›ç¯åœ°å€(hostAddress)ï¼š127.0.0.1 ä¸»æœºå(hostName)ï¼šlocalhost IPåœ°å€åˆ†ç±»ä¸€ï¼šIPV4ã€IPV6 IPåœ°å€åˆ†ç±»äºŒï¼šå…¬ç½‘åœ°å€å’Œç§æœ‰åœ°å€ï¼Œ192.168.0.0 - 192.168.255.255ä¸“é—¨ä¸ºç»„ç»‡æœºæ„å†…éƒ¨ä½¿ç”¨ ç«¯å£å· è¡¨ç¤ºæ­£åœ¨è®¡ç®—æœºä¸Šè¿è¡Œçš„è¿›ç¨‹ ä¸åŒè¿›ç¨‹æœ‰ä¸åŒçš„ç«¯å£å· ç«¯å£å·ä¸ºä¸€ä¸ª16ä½çš„æ•´æ•°0-65535 ç«¯å£åˆ†ç±»ï¼š å…¬è®¤ç«¯å£(0-1023)ï¼Œè¢«é¢„å…ˆå®šä¹‰çš„æœåŠ¡é€šä¿¡å ç”¨(å¦‚HTTPå ç”¨80ï¼ŒFTPå ç”¨21ï¼ŒTelnetå ç”¨23) æ³¨å†Œç«¯å£(1024-49151)ï¼Œåˆ†é…ç»™ç”¨æˆ·è¿›ç¨‹æˆ–åº”ç”¨ç¨‹åº(å¦‚Tomcatå ç”¨8080ï¼ŒMySQLå ç”¨3306ï¼ŒOracleå ç”¨1521) åŠ¨æ€/ç§æœ‰ç«¯å£(49152-65535) ç«¯å£å·ä¸IPåœ°å€çš„ç»„åˆå¾—å‡ºä¸€ä¸ªç½‘ç»œå¥—æ¥å­—ï¼šSocket ä¸€å®šçš„è§„åˆ™(å³ï¼šç½‘ç»œé€šä¿¡åè®®) OSIå‚è€ƒæ¨¡å‹ï¼šæ¨¡å‹è¿‡äºç†æƒ³åŒ–ï¼Œæœªèƒ½åœ¨å› ç‰¹ç½‘ä¸Šè¿›è¡Œå¹¿æ³›æ¨å®˜ TCP/IPå‚è€ƒæ¨¡å‹(æˆ–TCP/IPåè®®)ï¼šå®é™…ä¸Šçš„å›½é™…æ ‡å‡† InetAddressç±» Internetä¸Šçš„ä¸»æœºæœ‰ä¸¤ç§æ–¹å¼è¡¨ç¤ºåœ°å€ï¼š åŸŸåï¼šwww.yblog.com IPåœ°å€ï¼š202.108.35.210 InetAddressç±»ä¸»è¦è¡¨ç¤ºIPåœ°å€ï¼Œå­˜åœ¨ä¸¤ä¸ªå­ç±»ï¼šInet4Addressã€Inet6Address InetAddressç±»å¯¹è±¡å«æœ‰ä¸€ä¸ªInternetä¸»æœºåœ°å€çš„åŸŸåå’ŒIPåœ°å€ åŸŸåå®¹æ˜“è®°å¿†ï¼Œå½“åœ¨è¿æ¥ç½‘ç»œæ—¶è¾“å…¥ä¸€ä¸ªä¸»æœºçš„åŸŸååï¼ŒåŸŸåæœåŠ¡å™¨(DNS)è´Ÿè´£å°†åŸŸåè½¬åŒ–ä¸ºIPåœ°å€ï¼Œè¿™æ ·æ‰èƒ½å’Œä¸»æœºå»ºç«‹è¿æ¥ InetAddressç±»æ²¡æœ‰æä¾›å…¬å…±çš„æ„é€ å™¨ï¼Œè€Œæ˜¯æä¾›äº†å¦‚ä¸‹å‡ ä¸ªé™æ€æ–¹æ³•æ¥è·å–InetAddresså®ä¾‹ public static InetAddress getLocalHost() public static InetAddress getByName(String host) hostå¯ä»¥ä¸ºipåœ°å€ä¹Ÿå¯ä»¥ä¸ºåŸŸå InetAddresså¸¸ç”¨æ–¹æ³• public String getHostAddress()ï¼šè¿”å›IPåœ°å€å­—ç¬¦ä¸² public String getHostName()ï¼šè·å–æ­¤IPåœ°å€çš„ä¸»æœºå public boolean isReachable(int timeout)ï¼šæµ‹è¯•æ˜¯å¦å¯ä»¥åˆ°è¾¾è¯¥åœ°å€ TCP ä½¿ç”¨ TCP åè®®å‰ï¼Œé¡»å…ˆå»ºç«‹ TCP è¿æ¥ï¼Œå½¢æˆä¼ è¾“æ•°æ®é€šé“ ä¼ è¾“å‰ï¼Œé‡‡ç”¨â€œ ä¸‰æ¬¡æ¡æ‰‹ æ–¹å¼ ï¼Œç‚¹å¯¹ç‚¹é€šä¿¡ æ˜¯ å¯é çš„ TCP åè®®è¿›è¡Œé€šä¿¡çš„ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹ï¼šå®¢æˆ·ç«¯ã€ æœåŠ¡ç«¯ã€‚ åœ¨è¿æ¥ä¸­å¯è¿›è¡Œå¤§æ•°æ®é‡çš„ä¼ è¾“ ä¼ è¾“å®Œæ¯•ï¼Œéœ€é‡Šæ”¾å·²å»ºç«‹çš„è¿æ¥ï¼Œæ•ˆç‡ä½ UDP å°†æ•°æ®ã€æºã€ç›®çš„å°è£…æˆæ•°æ®åŒ…ï¼Œä¸éœ€è¦å»ºç«‹è¿æ¥ æ¯ä¸ªæ•°æ®æŠ¥çš„å¤§å°é™åˆ¶åœ¨ 64K å†… å‘é€ä¸ç®¡å¯¹æ–¹æ˜¯å¦å‡†å¤‡å¥½ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°ä¹Ÿä¸ç¡®è®¤ï¼Œ æ•…æ˜¯ä¸å¯é çš„ å¯ä»¥å¹¿æ’­å‘é€ å‘é€æ•°æ®ç»“æŸæ—¶æ— éœ€é‡Šæ”¾èµ„æº ï¼Œå¼€é”€å°ï¼Œé€Ÿåº¦å¿« Socketç±» åˆ©ç”¨å¥—æ¥å­—(Socket) å¼€å‘ç½‘ç»œåº”ç”¨ç¨‹åºæ—©å·²è¢«å¹¿æ³›çš„é‡‡ç”¨ï¼Œä»¥è‡³äºæˆä¸ºäº‹å®ä¸Šçš„æ ‡å‡† ã€‚ ç½‘ç»œä¸Šå…·æœ‰å”¯ä¸€æ ‡è¯†çš„ IP åœ°å€å’Œç«¯å£å·ç»„åˆåœ¨ä¸€èµ·æ‰èƒ½æ„æˆå”¯ä¸€èƒ½è¯†åˆ«çš„æ ‡è¯†ç¬¦å¥—æ¥å­— ã€‚ é€šä¿¡çš„ä¸¤ç«¯éƒ½è¦æœ‰Socket ï¼Œæ˜¯ä¸¤å°æœºå™¨é—´é€šä¿¡çš„ç«¯ç‚¹ ã€‚ ç½‘ç»œé€šä¿¡å…¶å®å°±æ˜¯ Socket é—´çš„é€šä¿¡ã€‚ Socket å…è®¸ç¨‹åºæŠŠç½‘ç»œè¿æ¥å½“æˆä¸€ä¸ªæµï¼Œ æ•°æ®åœ¨ä¸¤ä¸ª Socket é—´é€šè¿‡ IO ä¼ è¾“ã€‚ ä¸€èˆ¬ä¸»åŠ¨å‘èµ·é€šä¿¡çš„åº”ç”¨ç¨‹åºå±å®¢æˆ·ç«¯ ï¼Œç­‰å¾…é€šä¿¡è¯·æ±‚çš„ä¸ºæœåŠ¡ç«¯ã€‚ Socket åˆ†ç±»ï¼š æµå¥—æ¥å­—ï¼ˆ stream socket ï¼‰ï¼šä½¿ç”¨ TCP æä¾›å¯ä¾èµ–çš„å­—èŠ‚æµæœåŠ¡ æ•°æ®æŠ¥å¥—æ¥å­—ï¼ˆ datagram socket ï¼‰ï¼šä½¿ç”¨ UDP æä¾›â€œå°½åŠ›è€Œä¸ºâ€çš„æ•°æ®æŠ¥æœåŠ¡ æ–¹æ³• æè¿° Socket ç±»çš„å¸¸ç”¨æ„é€ å™¨ public Socket(InetAddress address,int port) åˆ›å»ºä¸€ä¸ªæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®š IP åœ°å€çš„æŒ‡å®šç«¯å£å·ã€‚ public Socket(String host,int port) åˆ›å»ºä¸€ä¸ªæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å·ã€‚ Socket ç±»çš„å¸¸ç”¨æ–¹æ³•ï¼š public InputStream getInputStream() è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å…¥æµã€‚ å¯ä»¥ç”¨äºæ¥æ”¶ç½‘ç»œæ¶ˆæ¯ public OutputStream getOutputStream() è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµ ã€‚ å¯ä»¥ç”¨äºå‘é€ç½‘ç»œæ¶ˆæ¯ public InetAddress getInetAddress() æ­¤å¥—æ¥å­—è¿æ¥åˆ°çš„è¿œç¨‹ IP åœ°å€ï¼›å¦‚æœå¥—æ¥å­—æ˜¯æœªè¿æ¥çš„ åˆ™è¿”å› nullã€‚ public InetAddress getLocalAddress() è·å–å¥—æ¥å­—ç»‘å®šçš„æœ¬åœ°åœ°å€ ã€‚ å³æœ¬ç«¯çš„ IP åœ°å€ public int getPort() æ­¤å¥—æ¥å­—è¿æ¥åˆ°çš„è¿œç¨‹ç«¯å£å·ï¼›å¦‚æœå°šæœªè¿æ¥å¥—æ¥å­— åˆ™è¿”å› 0ã€‚ public int getLocalPort() è¿”å›æ­¤å¥—æ¥å­—ç»‘å®šåˆ°çš„æœ¬åœ°ç«¯å£ ã€‚ å¦‚æœå°šæœªç»‘å®šå¥—æ¥å­—åˆ™è¿”å› 1ã€‚ å³æœ¬ç«¯çš„ç«¯å£å·ã€‚ public void close() å…³é—­æ­¤å¥—æ¥å­—ã€‚ å¥—æ¥å­—è¢«å…³é—­åä¾¿ä¸å¯åœ¨ä»¥åçš„ç½‘ç»œè¿æ¥ä¸­ä½¿ç”¨å³æ— æ³•é‡æ–°è¿æ¥æˆ–é‡æ–°ç»‘å®šã€‚ éœ€è¦åˆ›å»ºæ–°çš„å¥—æ¥å­—å¯¹è±¡ã€‚ å…³é—­æ­¤å¥—æ¥å­—ä¹Ÿå°†ä¼šå…³é—­è¯¥å¥—æ¥å­—çš„ InputStream å’Œ OutputStreamã€‚ public void shutdownInput() å¦‚æœåœ¨å¥—æ¥å­—ä¸Šè°ƒç”¨ shutdownInput() åä»å¥—æ¥å­—è¾“å…¥æµè¯»å–å†…å®¹åˆ™æµå°†è¿”å› EOF æ–‡ä»¶ç»“æŸç¬¦ã€‚ å³ä¸èƒ½åœ¨ä»æ­¤å¥—æ¥å­—çš„è¾“å…¥æµä¸­æ¥æ”¶ä»»ä½•æ•°æ®ã€‚ public void shutdownOutput() ç¦ç”¨æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµ ã€‚ å¯¹äº TCP å¥—æ¥å­— ä»»ä½•ä»¥å‰å†™å…¥çš„æ•°æ®éƒ½å°†è¢«å‘é€å¹¶ä¸”åè·Ÿ TCP çš„æ­£å¸¸è¿æ¥ç»ˆæ­¢åºåˆ—ã€‚ å¦‚æœåœ¨å¥—æ¥å­—ä¸Šè°ƒç”¨ shutdownOutput() åå†™å…¥å¥—æ¥å­—è¾“å‡ºæµåˆ™è¯¥æµå°†æŠ›å‡º IOExceptionã€‚ å³ä¸èƒ½é€šè¿‡æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµå‘é€ä»»ä½•æ•°æ®ã€‚ TCPç½‘ç»œç¼–ç¨‹ å®¢æˆ·ç«¯ åˆ›å»º Socket æ ¹æ®æŒ‡å®šæœåŠ¡ç«¯çš„ IP åœ°å€æˆ–ç«¯å£å·æ„é€  Socket ç±»å¯¹è±¡ã€‚è‹¥æœåŠ¡å™¨ç«¯å“åº”ï¼Œåˆ™å»ºç«‹å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„é€šä¿¡çº¿è·¯ã€‚è‹¥è¿æ¥å¤±è´¥ï¼Œä¼šå‡ºç°å¼‚å¸¸ã€‚ å®¢æˆ·ç«¯ç¨‹åºå¯ä»¥ä½¿ç”¨ Socket ç±»åˆ›å»ºå¯¹è±¡åˆ›å»ºçš„åŒæ—¶ä¼šè‡ªåŠ¨å‘æœåŠ¡å™¨æ–¹å‘èµ·è¿æ¥ ã€‚ Socketçš„æ„é€ å™¨æ˜¯ Socket(String host,int port)throws UnknownHostException,IOException ï¼šå‘æœåŠ¡å™¨(åŸŸåæ˜¯hostã€‚ç«¯å£å·ä¸º port) å‘èµ· TCP è¿æ¥ï¼Œè‹¥æˆåŠŸï¼Œåˆ™åˆ›å»º Socket å¯¹è±¡ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ Socket(InetAddress address,int port)throws IOException æ ¹æ® InetAddress å¯¹è±¡æ‰€è¡¨ç¤ºçš„IP åœ°å€ä»¥åŠç«¯å£å· port å‘èµ·è¿æ¥ã€‚ å®¢æˆ·ç«¯å»ºç«‹ socketAtClient å¯¹è±¡çš„è¿‡ç¨‹å°±æ˜¯å‘æœåŠ¡å™¨å‘å‡ºå¥—æ¥å­—è¿æ¥è¯·æ±‚ æ‰“å¼€è¿æ¥åˆ° Socket çš„è¾“å…¥å‡ºæµï¼š ä½¿ç”¨ getInputStreamæ–¹æ³•è·å¾—è¾“å…¥æµï¼Œä½¿ç”¨getOutputStream æ–¹æ³•è·å¾—è¾“å‡ºæµï¼Œè¿›è¡Œæ•°æ®ä¼ è¾“ æŒ‰ç…§ä¸€å®šçš„åè®®å¯¹ Socket è¿›è¡Œè¯» å†™æ“ä½œï¼š é€šè¿‡è¾“å…¥æµè¯»å–æœåŠ¡å™¨æ”¾å…¥çº¿è·¯çš„ä¿¡æ¯ï¼ˆä½†ä¸èƒ½è¯»å–è‡ªå·±æ”¾å…¥çº¿è·¯çš„ä¿¡æ¯ï¼‰ï¼Œé€šè¿‡è¾“å‡ºæµå°†ä¿¡æ¯å†™å…¥çº¿ç¨‹ã€‚ å…³é—­ Socket æ–­å¼€å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„è¿æ¥ï¼Œé‡Šæ”¾çº¿è·¯ Socket s = new Socket( &quot;192.168.40.165&quot;, 9999); OutputStream out = s.getOutputStream(); out.write(&quot;hello&quot;.getBytes()); s.close(); æœåŠ¡å™¨ç«¯ è°ƒç”¨ ServerSocket(int port) åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ç«¯å¥—æ¥å­—ï¼Œå¹¶ç»‘å®šåˆ°æŒ‡å®šç«¯å£ä¸Š ã€‚ç”¨äºç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚ ServerSocket å¯¹è±¡è´Ÿè´£ç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹å¥—æ¥å­—è¿æ¥ï¼Œç±»ä¼¼é‚®å±€æŸä¸ªçª—å£ä¸­çš„ä¸šåŠ¡å‘˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ æœåŠ¡å™¨å¿…é¡»äº‹å…ˆå»ºç«‹ä¸€ä¸ªç­‰å¾…å®¢æˆ·è¯·æ±‚å»ºç«‹å¥—æ¥å­—è¿æ¥çš„ ServerSocket å¯¹è±¡ã€‚ æ‰€è°“â€œæ¥æ”¶â€å®¢æˆ·çš„å¥—æ¥å­—è¯·æ±‚ï¼Œå°±æ˜¯ accept() æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª Socket å¯¹è±¡ è°ƒç”¨ accept() ç›‘å¬è¿æ¥è¯·æ±‚ï¼Œå¦‚æœå®¢æˆ·ç«¯è¯·æ±‚è¿æ¥ï¼Œåˆ™æ¥å—è¿æ¥ï¼Œè¿”å›é€šä¿¡å¥—æ¥å­—å¯¹è±¡ ã€‚ è°ƒç”¨ è¯¥ Socket ç±»å¯¹è±¡çš„ getOutputStream () å’Œ getInputStream è·å–è¾“å‡ºæµå’Œè¾“å…¥æµï¼Œå¼€å§‹ç½‘ç»œæ•°æ®çš„å‘é€å’Œæ¥æ”¶ã€‚ å…³é—­ ServerSocket å’Œ Socket å¯¹è±¡ï¼š å®¢æˆ·ç«¯è®¿é—®ç»“æŸï¼Œå…³é—­é€šä¿¡å¥—æ¥å­— ã€‚ ServerSocket ss = new ServerSocket(9999); Socket s = ss.accept(); InputStream in = s.getInputStream(); byte[] buf = new byte[1024]; int num = in.read(buf); String str = new String(buf,0,num); System.out.println(s.getInetAddress().toString()+&quot;:&quot;+str); s.close(); ss.close(); UDPç½‘ç»œç¼–ç¨‹ ç±» DatagramSocket å’Œ DatagramPacket å®ç°äº†åŸºäº UDP åè®®ç½‘ç»œç¨‹åºã€‚ UDP æ•°æ®æŠ¥é€šè¿‡æ•°æ®æŠ¥å¥—æ¥å­— DatagramSocket å‘é€å’Œæ¥æ”¶ï¼Œ ç³»ç»Ÿä¸ä¿è¯UDP æ•°æ®æŠ¥ä¸€å®šèƒ½å¤Ÿå®‰å…¨é€åˆ°ç›®çš„åœ°ï¼Œä¹Ÿä¸èƒ½ç¡®å®šä»€ä¹ˆæ—¶å€™å¯ä»¥æŠµè¾¾ã€‚ DatagramPacket å¯¹è±¡å°è£…äº† UDP æ•°æ®æŠ¥ï¼Œåœ¨æ•°æ®æŠ¥ä¸­åŒ…å«äº†å‘é€ç«¯çš„ IPåœ°å€å’Œç«¯å£å·ä»¥åŠæ¥æ”¶ç«¯çš„ IP åœ°å€å’Œç«¯å£å·ã€‚ UDP åè®®ä¸­æ¯ä¸ªæ•°æ®æŠ¥éƒ½ç»™å‡ºäº†å®Œæ•´çš„åœ°å€ä¿¡æ¯ï¼Œå› æ­¤æ— é¡»å»ºç«‹å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„è¿æ¥ã€‚ å¦‚åŒå‘å¿«é€’åŒ…è£¹ä¸€æ ·ã€‚ DatagramSocketå¸¸ç”¨æ–¹æ³• æ–¹æ³• æè¿° public DatagramSocket(int port) åˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬åœ°ä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£ã€‚ å¥—æ¥å­—å°†è¢«ç»‘å®šåˆ°é€šé…ç¬¦åœ°å€ IP åœ°å€ç”±å†…æ ¸æ¥é€‰æ‹©ã€‚ public DatagramSocket(int port,InetAddress laddr) åˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—å°†å…¶ç»‘å®šåˆ°æŒ‡å®šçš„æœ¬åœ°åœ°å€ã€‚æœ¬åœ°ç«¯å£å¿…é¡»åœ¨ 0 åˆ° 65535 ä¹‹é—´(åŒ…æ‹¬ä¸¤è€…)ã€‚ å¦‚æœ IP åœ°å€ä¸º 0.0.0.0 å¥—æ¥å­—å°†è¢«ç»‘å®šåˆ°é€šé…ç¬¦åœ°å€ IP åœ°å€ç”±å†…æ ¸é€‰æ‹©ã€‚ public void close() å…³é—­æ­¤æ•°æ®æŠ¥å¥—æ¥å­—ã€‚ public void send(DatagramPacket p) ä»æ­¤å¥—æ¥å­—å‘é€æ•°æ®æŠ¥åŒ… ã€‚ DatagramPacket åŒ…å«çš„ä¿¡æ¯æŒ‡ç¤ºï¼šå°†è¦å‘é€çš„æ•°æ® ã€ å…¶é•¿åº¦ ã€ è¿œç¨‹ä¸»æœºçš„ IP åœ°å€å’Œè¿œç¨‹ä¸»æœºçš„ç«¯å£å·ã€‚ public void receive(DatagramPacket p) ä»æ­¤å¥—æ¥å­—æ¥æ”¶æ•°æ®æŠ¥åŒ…ã€‚å½“æ­¤æ–¹æ³•è¿”å›æ—¶, DatagramPacketçš„ç¼“å†²åŒºå¡«å……äº†æ¥æ”¶çš„æ•°æ®ã€‚ æ•°æ®æŠ¥åŒ…ä¹ŸåŒ…å«å‘é€æ–¹çš„ IP åœ°å€å’Œå‘é€æ–¹æœºå™¨ä¸Šçš„ç«¯å£å· ã€‚ æ­¤æ–¹æ³•åœ¨æ¥æ”¶åˆ°æ•°æ®æŠ¥å‰ä¸€ç›´é˜»å¡ã€‚ æ•°æ®æŠ¥åŒ…å¯¹è±¡çš„ length å­—æ®µåŒ…å«æ‰€æ¥æ”¶ä¿¡æ¯çš„é•¿åº¦ ã€‚ å¦‚æœä¿¡æ¯æ¯”åŒ…çš„é•¿åº¦é•¿è¯¥ä¿¡æ¯å°†è¢«æˆªçŸ­ã€‚ public InetAddress getLocalAddress() è·å–å¥—æ¥å­—ç»‘å®šçš„æœ¬åœ°åœ°å€ã€‚ public int getLocalPort() è¿”å›æ­¤å¥—æ¥å­—ç»‘å®šçš„æœ¬åœ°ä¸»æœºä¸Šçš„ç«¯å£å·ã€‚ public InetAddress getInetAddress() è¿”å›æ­¤å¥—æ¥å­—è¿æ¥çš„åœ°å€ã€‚ å¦‚æœå¥—æ¥å­—æœªè¿æ¥ åˆ™è¿”å› nullã€‚ public int getPort() è¿”å›æ­¤å¥—æ¥å­—çš„ç«¯å£ ã€‚ å¦‚æœå¥—æ¥å­—æœªè¿æ¥ åˆ™è¿”å› -1 DatagramPacketå¸¸ç”¨æ–¹æ³• æ–¹æ³• æè¿° public DatagramPacket(byte[] buf,int length) æ„é€  DatagramPacket ç”¨æ¥æ¥æ”¶é•¿åº¦ä¸º length çš„æ•°æ®åŒ…ã€‚ lengthå‚æ•°å¿…é¡»å°äºç­‰äº buf.lengthã€‚ public DatagramPacket(byte[] buf,int offset,int length,InetAddress address,int port) æ„é€ æ•°æ®æŠ¥åŒ…ï¼Œç”¨æ¥å°†é•¿åº¦ä¸º length çš„åŒ…å‘é€åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å·ã€‚ lengthå‚æ•°å¿…é¡»å°äºç­‰äº buf.lengthã€‚ public InetAddress getAddress() è¿”å›æŸå°æœºå™¨çš„ IP åœ°å€æ­¤æ•°æ®æŠ¥å°†è¦å‘å¾€è¯¥æœºå™¨æˆ–è€…æ˜¯ä»è¯¥æœºå™¨æ¥æ”¶åˆ°çš„ã€‚ public int getPort() è¿”å›æŸå°è¿œç¨‹ä¸»æœºçš„ç«¯å£å·æ­¤æ•°æ®æŠ¥å°†è¦å‘å¾€è¯¥ä¸»æœºæˆ–è€…æ˜¯ä»è¯¥ä¸»æœºæ¥æ”¶åˆ°çš„ã€‚ public byte[] getData() è¿”å›æ•°æ®ç¼“å†²åŒºã€‚æ¥æ”¶åˆ°çš„æˆ–å°†è¦å‘é€çš„æ•°æ®ä»ç¼“å†²åŒºä¸­çš„åç§»é‡ offset å¤„å¼€å§‹ æŒç»­ length é•¿åº¦ã€‚ public int getLength() è¿”å›å°†è¦å‘é€æˆ–æ¥æ”¶åˆ°çš„æ•°æ®çš„é•¿åº¦ã€‚ UDPç½‘ç»œé€šä¿¡æµç¨‹ DatagramSocket ä¸ DatagramPacket å»ºç«‹å‘é€ç«¯ï¼Œæ¥æ”¶ç«¯(å‘é€ç«¯ä¸æ¥å—ç«¯æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„è¿è¡Œç¨‹åº) å»ºç«‹æ•°æ®åŒ… è°ƒç”¨ Socket çš„å‘é€ ã€ æ¥æ”¶æ–¹æ³• å…³é—­ Socket å‘é€ç«¯ DatagramSocket ds = null; try{ ds = new DatagramSocket(); byte[] by = &quot;hello,atguigu.com&quot;.getBytes(); DatagramPacket dp = new DatagramPacket( by, 0, by.length, InetAddress.getByName (&quot;127.0.0.1&quot;), 10000); ds.send(dp); }catch (Exception e ){ e.printStackTrace(); }finally{ if(ds != null){ ds.close(); } } æ¥æ”¶ç«¯ DatagramSocket ds = null try{ ds = new DatagramSocket(10000); byte[] by = new byte[1024]; DatagramPacket dp = new DatagramPacket(by , by.length); ds.receive(dp); String str = new String(dp.getData(), 0, dp.getLength()); System.out.println(str + &quot;----&quot; + dp.getAddress()); }catch (Exception e ){ e.printStackTrace(); }finally{ if(ds != null){ ds.close(); } } URLç¼–ç¨‹ URL(Uniform Resource Locator)ï¼šç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œå®ƒè¡¨ç¤ºInternetä¸ŠæŸä¸€èµ„æºçš„åœ°å€ å®ƒæ˜¯ä¸€ç§å…·ä½“çš„URIï¼Œå³URLå¯ä»¥ç”¨æ¥æ ‡è¯†ä¸€ä¸ªèµ„æºï¼Œè€Œä¸”è¿˜æŒ‡æ˜äº†å¦‚ä½•locateè¿™ä¸ªèµ„æº é€šè¿‡URLæˆ‘ä»¬å¯ä»¥è®¿é—®Internetä¸Šçš„å„ç§ç½‘ç»œèµ„æºï¼Œæ¯”å¦‚æœ€å¸¸è§çš„wwwï¼Œftpç«™ç‚¹ã€‚æµè§ˆå™¨é€šè¿‡è§£æç»™å®šçš„URLå¯ä»¥åœ¨ç½‘ç»œä¸ŠæŸ¥æ‰¾ç›¸åº”çš„æ–‡ä»¶æˆ–å…¶ä»–èµ„æºã€‚ URLç»„æˆ &lt;ä¼ è¾“åè®®&gt;://&lt;ä¸»æœºå&gt;:&lt;ç«¯å£å·&gt;/&lt;æ–‡ä»¶å&gt;#&lt;ç‰‡æ®µå&gt;?&lt;å‚æ•°åˆ—è¡¨&gt; ç‰‡æ®µåï¼šå³é”šç‚¹ï¼Œä¾‹å¦‚çœ‹å°è¯´ï¼Œç›´æ¥å®šä½åˆ°ç« èŠ‚ å‚æ•°åˆ—è¡¨æ ¼å¼ï¼šå‚æ•°å=å‚æ•°å€¼&amp;å‚æ•°å=å‚æ•°å€¼... ä¸ºäº†è¡¨ç¤º URLï¼Œ java.net ä¸­å®ç°äº†ç±» URL ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ„é€ å™¨æ¥åˆå§‹åŒ–ä¸€ä¸ª URL å¯¹è±¡ï¼š public URL (String spec )ï¼šé€šè¿‡ ä¸€ä¸ªè¡¨ç¤º URL åœ°å€çš„å­—ç¬¦ä¸²å¯ä»¥æ„é€ ä¸€ä¸ª URL å¯¹è±¡ã€‚ä¾‹å¦‚ URL url = new URL(&quot; http://www.atguigu.com/&quot;); public URL(URL context, String spec )ï¼šé€šè¿‡åŸº URL å’Œç›¸å¯¹ URL æ„é€  ä¸€ ä¸ª URL å¯¹è±¡ã€‚ä¾‹å¦‚ URL downloadUrl = new URL(url , &quot;download.html&quot;) public URL(String protocol, String host, String file); ä¾‹å¦‚new URL(&quot;http&quot;, &quot;www.atguigu.com &quot;, â€œdownload. html&quot;) public URL(String protocol, String host, int port, String file); ä¾‹å¦‚ : URL gamelan = new URL (&quot;http&quot;, www.atguigu.com &quot;, 80, &quot;download.html&quot;); URL ç±»çš„æ„é€ å™¨éƒ½å£°æ˜æŠ›å‡ºéè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¿…é¡»è¦å¯¹è¿™ä¸€å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œé€šå¸¸æ˜¯ç”¨ try-catch è¯­å¥è¿›è¡Œæ•è·ã€‚ å¸¸ç”¨æ–¹æ³• ä¸€ ä¸ª URL å¯¹è±¡ç”Ÿæˆåï¼Œå…¶å±æ€§æ˜¯ä¸èƒ½è¢«æ”¹å˜çš„ï¼Œä½†å¯ä»¥é€šè¿‡å®ƒç»™å®šçš„æ–¹æ³•æ¥è·å–è¿™äº›å±æ€§ï¼š æ–¹æ³• æè¿° public String getProtocol ( ) è·å–è¯¥URLçš„åè®®å public String getHost ( ) è·å–è¯¥URLçš„ä¸»æœºå public String getPort ( ) è·å–è¯¥URLçš„ç«¯å£å· public String getPath ( ) è·å–è¯¥URLçš„æ–‡ä»¶è·¯å¾„ public String getFile ( ) è·å–è¯¥URLçš„æ–‡ä»¶å public String getQuery ( ) è·å–è¯¥URLçš„æŸ¥è¯¢å é’ˆå¯¹HTTPåè®®çš„URL Connectionç±» URLçš„æ–¹æ³•openStream()ï¼šèƒ½ä»ç½‘ç»œä¸Šè¯»å–æ•°æ® è‹¥å¸Œæœ›è¾“å‡ºæ•°æ®ï¼Œä¾‹å¦‚å‘æœåŠ¡å™¨ç«¯çš„CGIï¼ˆå…¬å…±ç½‘å…³æ¥å£ Common GatewayInterface çš„ç®€ç§°ï¼Œæ˜¯ç”¨æˆ·æµè§ˆå™¨å’ŒæœåŠ¡å™¨ç«¯çš„åº”ç”¨ç¨‹åºè¿›è¡Œè¿æ¥çš„æ¥å£ï¼‰ç¨‹åºå‘é€ä¸€äº›æ•°æ®ï¼Œåˆ™å¿…é¡»å…ˆä¸ URL å»ºç«‹è¿æ¥ï¼Œç„¶åæ‰èƒ½å¯¹å…¶è¿›è¡Œè¯»å†™ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨URLConnection ã€‚ URLConnectionï¼šè¡¨ç¤ºåˆ° URL æ‰€å¼•ç”¨çš„è¿œç¨‹å¯¹è±¡çš„è¿æ¥ã€‚å½“ä¸ä¸€ä¸ª URL å»ºç«‹è¿æ¥æ—¶ï¼Œé¦–å…ˆè¦åœ¨ä¸€ä¸ª URL å¯¹è±¡ä¸Šé€šè¿‡æ–¹æ³• openConnection () ç”Ÿæˆå¯¹åº”çš„ URLConnectionå¯¹è±¡ã€‚å¦‚æœè¿æ¥è¿‡ç¨‹å¤±è´¥ï¼Œå°†äº§ç”Ÿ IOException . URL netchinaren = new URL (&quot;http://www.atguigu.com/index.shtml&quot;); URLConnectonn u = netchinaren.openConnection ( ); é€šè¿‡ URLConnection å¯¹è±¡è·å–çš„è¾“å…¥æµå’Œè¾“å‡ºæµï¼Œå³å¯ä»¥ä¸ç°æœ‰çš„ CGIç¨‹åºè¿›è¡Œäº¤äº’ã€‚ public Object getContent() throws IOException public int getContentLength() public String getContentType () public long getDate () public long getLastModified () public InputStream getInputStream ( )throws IOException public OutputSteram getOutputStream ( )throws IOException ç±» URL å’Œ URLConnection æä¾›äº†æœ€é«˜çº§ç½‘ç»œåº”ç”¨ã€‚ URL çš„ç½‘ç»œèµ„æºçš„ä½ç½®æ¥åŒä¸€è¡¨ç¤ºInternet ä¸Šå„ç§ç½‘ç»œèµ„æºã€‚é€šè¿‡ URL å¯¹è±¡å¯ä»¥åˆ›å»ºå½“å‰åº”ç”¨ç¨‹åºå’Œ URL è¡¨ç¤ºçš„ç½‘ç»œèµ„æºä¹‹é—´çš„è¿æ¥ï¼Œè¿™æ ·å½“å‰ç¨‹åºå°±å¯ä»¥è¯»å–ç½‘ç»œèµ„æºæ•°æ®ï¼Œæˆ–è€…æŠŠè‡ªå·±çš„æ•°æ®ä¼ é€åˆ°ç½‘ç»œä¸Šå»ã€‚ URIã€URLã€URNåŒºåˆ« URIï¼Œæ˜¯ uniform resource identifierï¼Œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ç”¨æ¥å”¯ä¸€çš„æ ‡è¯†ä¸€ä¸ªèµ„æºã€‚è€Œ URL æ˜¯ uniform resource locator ï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ ï¼Œå®ƒæ˜¯ä¸€ç§å…·ä½“çš„URI ï¼Œå³ URL å¯ä»¥ç”¨æ¥æ ‡è¯†ä¸€ä¸ªèµ„æºï¼Œè€Œä¸”è¿˜æŒ‡æ˜äº†å¦‚ä½• locate è¿™ä¸ªèµ„æºã€‚è€Œ URN uniform resource nameï¼Œç»Ÿä¸€èµ„æºå‘½åï¼Œæ˜¯é€šè¿‡åå­—æ¥æ ‡è¯†èµ„æºæ¯”å¦‚ mailto:java-net@java.sun.comã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ URI æ˜¯ä»¥ä¸€ç§æŠ½è±¡çš„ï¼Œé«˜å±‚æ¬¡æ¦‚å¿µå®šä¹‰ç»Ÿä¸€èµ„æºæ ‡è¯†ï¼Œè€Œ URL å’Œ URN åˆ™æ˜¯å…·ä½“çš„èµ„æºæ ‡è¯†çš„æ–¹å¼ã€‚ URLå’Œ URN éƒ½æ˜¯ä¸€ç§ URI ã€‚åœ¨Java çš„ URI ä¸­ï¼Œä¸€ä¸ª URI å®ä¾‹å¯ä»¥ä»£è¡¨ç»å¯¹çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹çš„ï¼Œåªè¦å®ƒç¬¦åˆ URI çš„è¯­æ³•è§„åˆ™ã€‚è€Œ URL ç±»åˆ™ä¸ä»…ç¬¦åˆè¯­ä¹‰ï¼Œè¿˜åŒ…å«äº†å®šä½è¯¥èµ„æºçš„ä¿¡æ¯ï¼Œå› æ­¤å®ƒä¸èƒ½æ˜¯ç›¸å¯¹çš„ã€‚ ","link":"https://yeyuan1107.github.io/post/java-wang-luo-bian-cheng/"},{"title":"JavaIOæµ","content":" Fileç±»çš„ä½¿ç”¨ java.io.Fileç±»ï¼šæ–‡ä»¶å’Œæ–‡ä»¶ç›®å½•è·¯å¾„çš„æŠ½è±¡è¡¨ç¤ºå½¢å¼ï¼Œä¸å¹³å°æ— å…³ã€‚Fileç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä»£è¡¨ä¸€ä¸ªæ–‡ä»¶æˆ–ä¸€ä¸ªæ–‡ä»¶ç›®å½•(æ–‡ä»¶å¤¹)ï¼Œè¯¥ç±»å¯ä»¥æ–°å»ºã€åˆ é™¤ã€é‡å‘½åæ–‡ä»¶å’Œç›®å½•ï¼Œä½†ä¸èƒ½è®¿é—®æ–‡ä»¶å†…å®¹æœ¬èº«ã€‚å¦‚æœéœ€è¦è®¿é—®æ–‡ä»¶å†…å®¹æœ¬èº«ï¼Œåˆ™éœ€è¦ä½¿ç”¨è¾“å…¥/è¾“å‡ºæµæƒ³è¦åœ¨Javaç¨‹åºä¸­è¡¨ç¤ºä¸€ä¸ªçœŸå®å­˜åœ¨çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œé‚£ä¹ˆå¿…é¡»æœ‰ä¸€ä¸ªFileå¯¹è±¡ï¼Œä½†æ˜¯Javaç¨‹åºä¸­çš„ä¸€ä¸ªFileå¯¹è±¡ï¼Œå¯èƒ½æ²¡æœ‰ä¸€ä¸ªçœŸå®å­˜åœ¨çš„æ–‡ä»¶æˆ–ç›®å½•Fileå¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™æµçš„æ„é€ å™¨ //åˆ›å»ºä¸€ä¸ªFileå¯¹è±¡æ—¶ï¼Œå¦‚æœç¡¬ç›˜ä¸­æœ‰ä¸€ä¸ªçœŸå®çš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨æ—¶ï¼Œåˆ›å»ºFileå¯¹è±¡æ—¶ï¼Œå„ä¸ªå±æ€§ä¼šæ˜¾ç¤ºèµ‹å€¼ã€‚å¦åˆ™ï¼Œå‡ºäº†æŒ‡å®šçš„ç›®å½•å’Œè·¯å¾„ä¹‹å¤–ï¼Œå…¶ä»–çš„å±æ€§éƒ½æ˜¯å–æˆå‘˜å˜é‡çš„é»˜è®¤å€¼ //ä»¥pathnameä¸ºè·¯å¾„åˆ›å»ºåˆ›å»ºFileå¯¹è±¡ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„ï¼Œå¦‚æœä¸ºç›¸å¯¹è·¯å¾„åˆ™é»˜è®¤çš„å½“å‰è·¯å¾„åœ¨ç³»ç»Ÿå±æ€§user.dirä¸­å­˜å‚¨ //ç»å¯¹è·¯å¾„ï¼šæ˜¯ä¸€ä¸ªå›ºå®šçš„è·¯å¾„ï¼Œä»ç›˜ç¬¦å¼€å§‹ //ç›¸å¯¹è·¯å¾„ï¼šæ˜¯ç›¸å¯¹äºæŸä¸ªä½ç½®å¼€å§‹ï¼ŒIDEAä¸­å¦‚æœä¸ºå•å…ƒæµ‹è¯•ï¼Œç›¸å¯¹è·¯å¾„ä¸ºå½“å‰moduleä¸‹ï¼Œå¦åˆ™ä¸ºprojectä¸‹ //åˆ†éš”ç¬¦ï¼šWindoxå’ŒDosç”¨&quot;\\&quot;,UNIXå’ŒURLç”¨&quot;/&quot;,è·¨å¹³å°ä½¿ç”¨File.separatorä½œä¸ºåˆ†éš”ç¬¦ public File(String pathname) //windowså’ŒDos File file1 = new File(&quot;d:\\\\atguigu\\\\info.txt&quot;); //é€šç”¨ File file2 = new File(&quot;d:&quot;+ File.separator + &quot;atguigu&quot;+ File.separator + &quot;info.txt&quot;); //UNIXå’ŒURL File file3 = new File(&quot;d:/atguigu/info.txt&quot;); //ä»¥parentä¸ºçˆ¶è·¯å¾„ï¼Œchildä¸ºå­è·¯å¾„åˆ›å»ºFIleå¯¹è±¡ public File(String parent, String child) //æ ¹æ®ä¸€ä¸ªçˆ¶Fileå¯¹è±¡å’Œå­æ–‡ä»¶è·¯å¾„åˆ›å»ºFileå¯¹è±¡ public File(File parentï¼Œ String child) å¸¸ç”¨æ–¹æ³• æ–¹æ³• æè¿° File ç±»çš„è·å–åŠŸèƒ½ public String getAbsolutePath() è·å–ç»å¯¹è·¯å¾„ public String getPath() è·å–è·¯å¾„ public String getName() è·å–åç§° public String getParent() è·å–ä¸Šå±‚æ–‡ä»¶ç›®å½•è·¯å¾„ã€‚ è‹¥æ— è¿”å› null public long length() è·å–æ–‡ä»¶é•¿åº¦å³ï¼šå­—èŠ‚æ•°ã€‚ä¸èƒ½è·å–ç›®å½•çš„é•¿åº¦ã€‚ public long lastModified() è·å–æœ€åä¸€æ¬¡çš„ä¿®æ”¹æ—¶é—´æ¯«ç§’å€¼ public String[] list è·å–æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æˆ–è€…æ–‡ä»¶ç›®å½•çš„åç§°æ•°ç»„ public File[] listFiles è·å–æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æˆ–è€…æ–‡ä»¶ç›®å½•çš„Fileæ•°ç»„ File ç±»çš„é‡å‘½ååŠŸèƒ½ public boolean renameTo(File dest) æŠŠæ–‡ä»¶é‡å‘½åä¸ºæŒ‡å®šçš„æ–‡ä»¶è·¯å¾„ File ç±»çš„åˆ¤æ–­åŠŸèƒ½ public boolean isDirectory() åˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶ç›®å½• public boolean isFile() åˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶ public boolean exists() åˆ¤æ–­æ˜¯å¦å­˜åœ¨ public boolean canRead() åˆ¤æ–­æ˜¯å¦å¯è¯» public boolean canWrite() åˆ¤æ–­æ˜¯å¦å¯å†™ public boolean isHidden() åˆ¤æ–­æ˜¯å¦éšè— File ç±»çš„åˆ›å»ºåŠŸèƒ½ public boolean createNewFile() åˆ›å»ºæ–‡ä»¶ã€‚ è‹¥æ–‡ä»¶å­˜åœ¨åˆ™ä¸åˆ›å»ºè¿”å›false public boolean mkdir() åˆ›å»ºæ–‡ä»¶ç›®å½•ã€‚ å¦‚æœæ­¤æ–‡ä»¶ç›®å½•å­˜åœ¨å°±ä¸åˆ›å»ºäº†ã€‚å¦‚æœæ­¤æ–‡ä»¶ç›®å½•çš„ä¸Šå±‚ç›®å½•ä¸å­˜åœ¨ä¹Ÿä¸åˆ›å»ºã€‚ public boolean mkdirs() åˆ›å»ºæ–‡ä»¶ç›®å½•ã€‚å¦‚æœä¸Šå±‚æ–‡ä»¶ç›®å½•ä¸å­˜åœ¨ä¸€å¹¶åˆ›å»º æ³¨æ„äº‹é¡¹ï¼šå¦‚æœä½ åˆ›å»ºæ–‡ä»¶æˆ–è€…æ–‡ä»¶ç›®å½•æ²¡æœ‰å†™ç›˜ç¬¦è·¯å¾„é‚£ä¹ˆé»˜è®¤åœ¨é¡¹ç›®è·¯å¾„ä¸‹ã€‚ File ç±»çš„åˆ é™¤åŠŸèƒ½ public boolean delete() åˆ é™¤æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ åˆ é™¤æ³¨æ„äº‹é¡¹ï¼šJavaä¸­çš„åˆ é™¤ä¸èµ°å›æ”¶ç«™ ã€‚è¦åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ç›®å½•è¯·æ³¨æ„è¯¥æ–‡ä»¶ç›®å½•å†…ä¸èƒ½åŒ…å«æ–‡ä»¶æˆ–è€…æ–‡ä»¶ç›®å½• IOæµåŸç†åŠæµçš„åˆ†ç±» I/O æ˜¯ Input/Output çš„ç¼©å†™ï¼Œ I/O æŠ€æœ¯æ˜¯éå¸¸å®ç”¨çš„æŠ€æœ¯ï¼Œ ç”¨äºå¤„ç†è®¾å¤‡ä¹‹é—´çš„æ•°æ®ä¼ è¾“ ã€‚ å¦‚è¯»/å†™æ–‡ä»¶ï¼Œç½‘ç»œé€šè®¯ç­‰ã€‚ Java ç¨‹åºä¸­ï¼Œå¯¹äºæ•°æ®çš„è¾“å…¥ è¾“å‡ºæ“ä½œ ä»¥ â€œæµ(stream)â€œ çš„æ–¹å¼è¿›è¡Œã€‚ java.io åŒ…ä¸‹æä¾›äº†å„ç§â€œæµâ€ç±»å’Œæ¥å£ï¼Œç”¨ä»¥è·å–ä¸åŒç§ç±»çš„æ•°æ®ï¼Œå¹¶é€šè¿‡æ ‡å‡†çš„æ–¹æ³•è¾“å…¥æˆ–è¾“å‡ºæ•°æ®ã€‚ è¾“å…¥ï¼šè¯»å–å¤–éƒ¨æ•°æ®(ç£ç›˜ã€å…‰ç›˜ç­‰å­˜å‚¨è®¾å¤‡çš„æ•°æ®)åˆ°ç¨‹åº(å†…å­˜)ä¸­ è¾“å‡ºï¼šå°†ç¨‹åº(å†…å­˜)æ•°æ®è¾“å‡ºåˆ°å¤–éƒ¨è®¾å¤‡ä¸­(ç£ç›˜ã€å…‰ç›˜ç­‰å­˜å‚¨è®¾å¤‡ä¸­) æµçš„åˆ†ç±» æŒ‰ç…§æ“ä½œæ•°æ®å•ä½ä¸åŒæ°›å›´ï¼šå­—èŠ‚æµ(8bit)ï¼Œå­—ç¬¦æµ(16bit) æŒ‰æ•°æ®æµçš„æµå‘ä¸åŒæ°›å›´ï¼šè¾“å…¥æµï¼Œè¾“å‡ºæµ æŒ‰æµçš„è§’è‰²ä¸åŒåˆ†ä¸ºï¼šèŠ‚ç‚¹æµ(ä½œç”¨åœ¨æ–‡ä»¶ä¸Š(æ–‡ä»¶æµFileInputStreamç­‰))ï¼Œå¤„ç†æµ(ä½œç”¨åœ¨å·²æœ‰æµçš„åŸºç¡€ä¹‹ä¸Š(ç¼“å†²æµï¼Œè½¬æ¢æµ)) Javaçš„IOæµå…±è®¾è®¡40å¤šä¸ªç±»ï¼Œå®é™…ä¸Šéå¸¸è§„åˆ™ï¼Œéƒ½æ˜¯ä»å¦‚ä¸‹4ä¸ªæŠ½è±¡åŸºç±»æ´¾ç”Ÿçš„ç”±è¿™å››ä¸ªç±»æ´¾ç”Ÿå‡ºæ¥çš„å­ç±»åç§°éƒ½æ˜¯ä»¥å…¶çˆ¶ç±»åä½œä¸ºå­ç±»ååç¼€ æŠ½è±¡åŸºç±» å­—èŠ‚æµ å­—ç¬¦æµ è¾“å…¥æµ InputStream Reader è¾“å‡ºæµ OutputStream Writer å­—ç¬¦æµ ä¸èƒ½ä½¿ç”¨å­—ç¬¦æµæ¥å¤„ç†(å›¾ç‰‡ï¼Œè§†é¢‘)æ•°æ® Reader æ–¹æ³• æè¿° int read() è¯»å–å•ä¸ªå­—ç¬¦ã€‚ä½œä¸ºæ•´æ•°è¯»å–çš„å­—ç¬¦èŒƒå›´åœ¨0åˆ°65535ä¹‹é—´(0x0000 - 0xffff)2ä¸ªå­—èŠ‚çš„ Unicodeç å¦‚æœå·²åˆ°è¾¾æµçš„æœ«å°¾åˆ™è¿”å›-1 int read(char[] cbuf) å°†å­—ç¬¦è¯»å…¥æ•°ç»„ã€‚å¦‚æœå·²åˆ°è¾¾æµçš„æœ«å°¾åˆ™è¿”å›-1ã€‚å¦åˆ™è¿”å›æœ¬æ¬¡è¯»å–çš„å­—ç¬¦æ•°ã€‚ int read(char[] cbuf,int off,int len) å°†å­—ç¬¦è¯»å…¥æ•°ç»„çš„æŸä¸€éƒ¨åˆ†ã€‚ å­˜åˆ°æ•°ç»„cbufä¸­ä»offå¤„å¼€å§‹å­˜å‚¨æœ€å¤šè¯»lenä¸ªå­—ç¬¦ã€‚å¦‚æœå·²åˆ°è¾¾æµçš„æœ«å°¾åˆ™è¿”å›-1ã€‚ å¦åˆ™è¿”å›æœ¬æ¬¡è¯»å–çš„å­—ç¬¦æ•°ã€‚ public void close() throws IOException å…³é—­æ­¤è¾“å…¥æµå¹¶é‡Šæ”¾ä¸è¯¥æµå…³è”çš„æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚ //1. Fileçš„å®ä¾‹åŒ–ï¼Œè¯»å…¥æ–‡ä»¶ä¸€å®šè¦å­˜åœ¨ï¼Œå¦åˆ™æŠ¥å¼‚å¸¸ File file = new File(String pathname); //2. FileReaderçš„å®ä¾‹åŒ– FileReader fileReader = new FileReader(File file); //3. è¯»å…¥çš„æ“ä½œ fileReader.read(); //4. èµ„æºçš„å…³é—­ï¼Œåº”å½“æ”¾åˆ°finallyä¸­ fileReader.close() Writer æ–¹æ³• æè¿° void write(int c) å†™å…¥å•ä¸ªå­—ç¬¦ã€‚è¦å†™å…¥çš„å­—ç¬¦åŒ…å«åœ¨ç»™å®šæ•´æ•°å€¼çš„16ä¸ªä½ä½ä¸­ï¼Œ16é«˜ä½è¢«å¿½ç•¥ã€‚å³å†™å…¥0åˆ°65535ä¹‹é—´çš„Unicodeç ã€‚ void write(char[] cbuf) å†™å…¥å­—ç¬¦æ•°ç»„ã€‚ void write(char[] cbuf,int off,int len) å†™å…¥å­—ç¬¦æ•°ç»„çš„æŸä¸€éƒ¨åˆ†ã€‚ä» off å¼€å§‹å†™å…¥lenä¸ªå­—ç¬¦ void write(String str) å†™å…¥å­—ç¬¦ä¸²ã€‚ void write(String str,int off,int len) å†™å…¥å­—ç¬¦ä¸²çš„æŸä¸€éƒ¨åˆ†ã€‚ void flush() åˆ·æ–°è¯¥æµçš„ç¼“å†²åˆ™ç«‹å³å°†å®ƒä»¬å†™å…¥é¢„æœŸç›®æ ‡ã€‚ public void close() throws IOException å…³é—­æ­¤è¾“å‡ºæµå¹¶é‡Šæ”¾ä¸è¯¥æµå…³è”çš„æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚ //1. Fileçš„å®ä¾‹åŒ–ï¼Œè¾“å‡ºæ“ä½œï¼Œæ–‡ä»¶ä¸ä¸€å®šè¦å­˜åœ¨ //æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåœ¨è¾“å‡ºè¿‡ç¨‹ä¸­è‡ªåŠ¨åˆ›å»ºæ­¤æ–‡ä»¶ //æ–‡ä»¶å­˜åœ¨æ ¹æ®FileWriteræ„é€ å™¨çš„å‚æ•°ï¼š //falseï¼šè¦†ç›–åŸæ–‡ä»¶ //trueï¼šä¸ä¼šå¯¹åŸæ–‡ä»¶è¦†ç›–ï¼Œè€Œæ˜¯åœ¨åŸæ–‡ä»¶è¿½åŠ å†…å®¹ File file = new File(String pathname); //2. FileReaderçš„å®ä¾‹åŒ– FileWriter fileWriter = new FileWriter(File file); //3. è¯»å…¥çš„æ“ä½œ fileWriter.write(); //4. èµ„æºçš„å…³é—­ï¼Œåº”å½“æ”¾åˆ°finallyä¸­ fileWriter.close() å­—èŠ‚æµ æ–‡æœ¬æ–‡ä»¶(.txt, .java, .c, .cpp)ç”¨å­—ç¬¦æµ éæ–‡æœ¬æ–‡ä»¶(.jpg, .mp3, .mp4, .avi, .doc, .ppt)ç”¨å­—èŠ‚æµ InputStream æ–¹æ³• æè¿° int read() ä»è¾“å…¥æµä¸­è¯»å–æ•°æ®çš„ä¸‹ä¸€ä¸ªå­—èŠ‚ã€‚è¿”å›0åˆ°255èŒƒå›´å†…çš„intå­—èŠ‚å€¼ã€‚å¦‚æœå› ä¸ºå·²ç»åˆ°è¾¾æµæœ«å°¾è€Œæ²¡æœ‰å¯ç”¨çš„å­—èŠ‚åˆ™è¿”å›å€¼-1ã€‚ int read(byte[] b) ä»æ­¤è¾“å…¥æµä¸­å°†æœ€å¤šb.lengthä¸ªå­—èŠ‚çš„æ•°æ®è¯»å…¥ä¸€ä¸ª byte æ•°ç»„ä¸­ã€‚ å¦‚æœå› ä¸ºå·²ç»åˆ°è¾¾æµæœ«å°¾è€Œæ²¡æœ‰å¯ç”¨çš„å­—èŠ‚ åˆ™è¿”å›å€¼-1 ã€‚ å¦åˆ™ä»¥æ•´æ•°å½¢å¼è¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°ã€‚ int read(byte[] b, int off,int len) å°†è¾“å…¥æµä¸­æœ€å¤šlenä¸ªæ•°æ®å­—èŠ‚è¯»å…¥byteæ•°ç»„ã€‚å°è¯•è¯»å–lenä¸ªå­—èŠ‚ä½†è¯»å–çš„å­—èŠ‚ä¹Ÿå¯èƒ½å°äºè¯¥å€¼ã€‚ä»¥æ•´æ•°å½¢å¼è¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°ã€‚å¦‚æœå› ä¸ºæµä½äºæ–‡ä»¶æœ«å°¾è€Œæ²¡æœ‰å¯ç”¨çš„å­—èŠ‚åˆ™è¿”å›å€¼-1ã€‚ public void close() throws IOException å…³é—­æ­¤è¾“å…¥æµå¹¶é‡Šæ”¾ä¸è¯¥æµå…³è”çš„æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚ //1. Fileçš„å®ä¾‹åŒ–ï¼Œè¯»å…¥æ–‡ä»¶ä¸€å®šè¦å­˜åœ¨ï¼Œå¦åˆ™æŠ¥å¼‚å¸¸ File file = new File(String pathname); //2. FileInputStreamçš„å®ä¾‹åŒ– FileInputStream fileInputStream = new FileInputStream(File file); //3. è¯»å…¥çš„æ“ä½œ fileInputStream.read(); //4. èµ„æºçš„å…³é—­ï¼Œåº”å½“æ”¾åˆ°finallyä¸­ fileInputStream.close() OutputStream æ–¹æ³• æè¿° void write(int b) å°†æŒ‡å®šçš„å­—èŠ‚å†™å…¥æ­¤è¾“å‡ºæµã€‚writeçš„å¸¸è§„åå®šï¼šå‘è¾“å‡ºæµå†™å…¥ä¸€ä¸ªå­—èŠ‚ ã€‚ è¦å†™å…¥çš„å­—èŠ‚æ˜¯å‚æ•° b çš„å…«ä¸ªä½ä½ã€‚ bçš„24ä¸ªé«˜ä½å°†è¢«å¿½ç•¥ã€‚ å³å†™å…¥ 0-255 èŒƒå›´çš„ã€‚ void write(byte[] b) å°†b.length ä¸ªå­—èŠ‚ä»æŒ‡å®šçš„ byte æ•°ç»„å†™å…¥æ­¤è¾“å‡ºæµã€‚ write(b) çš„å¸¸è§„åå®šæ˜¯ï¼šåº”è¯¥ä¸è°ƒç”¨ write(b, 0, b.length) çš„æ•ˆæœå®Œå…¨ç›¸åŒ void write(byte[] b,int off,int len) å°†æŒ‡å®šbyte æ•°ç»„ä¸­ä»åç§»é‡ off å¼€å§‹çš„ len ä¸ªå­—èŠ‚å†™å…¥æ­¤è¾“å‡ºæµã€‚ public void flush()throws IOException åˆ·æ–°æ­¤è¾“å‡ºæµå¹¶å¼ºåˆ¶å†™å‡ºæ‰€æœ‰ç¼“å†²çš„è¾“å‡ºå­—èŠ‚ è°ƒç”¨æ­¤æ–¹æ³•æŒ‡ç¤ºåº”å°†è¿™äº›å­—èŠ‚ç«‹å³å†™å…¥å®ƒä»¬é¢„æœŸçš„ç›®æ ‡ã€‚ public void close() throws IOException å…³é—­æ­¤è¾“å‡ºæµå¹¶é‡Šæ”¾ä¸è¯¥æµå…³è”çš„æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚ //1. Fileçš„å®ä¾‹åŒ–ï¼Œè¾“å‡ºæ“ä½œï¼Œæ–‡ä»¶ä¸ä¸€å®šè¦å­˜åœ¨ //æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåœ¨è¾“å‡ºè¿‡ç¨‹ä¸­è‡ªåŠ¨åˆ›å»ºæ­¤æ–‡ä»¶ //æ–‡ä»¶å­˜åœ¨æ ¹æ®FileWriteræ„é€ å™¨çš„å‚æ•°ï¼š //falseï¼šè¦†ç›–åŸæ–‡ä»¶ //trueï¼šä¸ä¼šå¯¹åŸæ–‡ä»¶è¦†ç›–ï¼Œè€Œæ˜¯åœ¨åŸæ–‡ä»¶è¿½åŠ å†…å®¹ File file = new File(String pathname); //2. FileReaderçš„å®ä¾‹åŒ– FileOutputStream fileOutputStream = new FileOutputStream(File file); //3. è¯»å…¥çš„æ“ä½œ fileOutputStream.write(); //4. èµ„æºçš„å…³é—­ï¼Œåº”å½“æ”¾åˆ°finallyä¸­ fileOutputStream.close() èŠ‚ç‚¹æµ(æˆ–æ–‡ä»¶æµ) è¯»å–ç¤ºä¾‹ FileReader fr = null try{ fr = new FileReader(new File(&quot;test.txt&quot;)); char[] buf = new char[1024]; int len; while((len = fr.read(buf)) != 1) { System.out.print(new String(buf, 0, len); } }catch (IOException e){ System.out.println(&quot;read Exception :&quot;+ e.getMessage()); }finally{ if(fr!= null){ try{ fr.close(); }catch (IOException e){ System.out.println(&quot;close Exception:&quot;+ e.getMessage()); } } } è¾“å‡ºç¤ºä¾‹ FileWriter fw = null; try{ fw = new FileWriter(new File(&quot;Test.txt&quot;)); fw.write(&quot;atguigu songhongkang&quot;); }catch (IOException e ) e.printStackTrace() }finally{ if(fw != null){ try{ fw.close(); }catch (IOException e){ e.printStackTrace(); } } } æ³¨æ„ å®šä¹‰æ–‡ä»¶è·¯å¾„æ—¶ï¼Œæ³¨æ„ï¼šå¯ä»¥ç”¨&quot;/&quot;æˆ–è€…&quot;&quot;ã€‚ åœ¨å†™å…¥ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¦‚æœä½¿ç”¨æ„é€ å™¨ FileOutputStream(file) ï¼Œåˆ™ç›®å½•ä¸‹æœ‰åŒåæ–‡ä»¶å°†è¢«è¦†ç›–ã€‚å¦‚æœä½¿ç”¨æ„é€ å™¨ FileOutputStream(file,true) ï¼Œåˆ™ç›®å½•ä¸‹çš„åŒåæ–‡ä»¶ä¸ä¼šè¢«è¦†ç›–åœ¨æ–‡ä»¶å†…å®¹æœ«å°¾è¿½åŠ å†…å®¹ã€‚ åœ¨è¯»å–æ–‡ä»¶æ—¶ï¼Œå¿…é¡»ä¿è¯è¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œå¦åˆ™æŠ¥å¼‚å¸¸ ã€‚ å­—èŠ‚æµæ“ä½œå­—èŠ‚ï¼Œæ¯”å¦‚ï¼š.mp3 , .avi , .rmvb, .mp4, .jpg, .doc, .ppt å­—ç¬¦æµæ“ä½œå­—ç¬¦ï¼Œåªèƒ½æ“ä½œæ™®é€šæ–‡æœ¬æ–‡ä»¶ã€‚ æœ€å¸¸è§çš„æ–‡æœ¬æ–‡ä»¶ï¼š.txt, .java, .c, .cppç­‰è¯­è¨€çš„æºä»£ç ã€‚ å°¤å…¶æ³¨æ„ .doc, .excel, .pptè¿™äº›ä¸æ˜¯æ–‡æœ¬æ–‡ä»¶ã€‚ å¤„ç†æµ ç¼“å†²æµ ä¸ºäº†æé«˜æ•°æ®è¯»å†™çš„é€Ÿåº¦ï¼ŒJavaAPIæä¾›äº†å¸¦ç¼“å†²åŠŸèƒ½çš„æµæ³ªï¼Œåœ¨ä½¿ç”¨è¿™äº›æµç±»æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå†…éƒ¨ç¼“å†²åŒºæ•°ç»„ï¼Œç¼ºçœä½¿ç”¨8192ä¸ªå­—èŠ‚(8kb)çš„ç¼“å†²åŒºã€‚ ç¼“å†²æµè¦â€œå¥—æ¥â€åœ¨ç›¸åº”çš„èŠ‚ç‚¹æµä¹‹ä¸Šï¼Œæ ¹æ®æ•°æ®æ“ä½œå•ä½å¯ä»¥åˆ†ä¸º BufferedInputStream å’Œ BufferedOutputStream BufferedReader å’Œ BufferedWriter ç¤ºä¾‹ BufferedReader br = null BufferedWriter bw = null try{ //1. é€‰æ–‡ä»¶ //2. åˆ›å»ºç¼“å†²æµå¯¹è±¡ï¼šå®ƒæ˜¯å¤„ç†æµï¼Œæ˜¯å¯¹èŠ‚ç‚¹æµçš„åŒ…è£… br = new BufferedReader( new FileReader(&quot;d:\\\\IOTest\\\\source.txt&quot;)); bw = new BufferedWriter( new FileWriter(&quot;d:\\\\IOTest\\\\dest.txt&quot;)) String str; //2. è¯»å†™æ•°æ® //readLine()ä¸€æ¬¡è¯»å–å­—ç¬¦æ–‡æœ¬æ–‡ä»¶çš„ä¸€è¡Œå­—ç¬¦,è¿”å›Stringï¼Œå¦‚æœä¸ºnullè¯´æ˜åˆ°äº†æœ«å°¾ while((str = br.readLine()) != null ){ bw.write(str); // ä¸€æ¬¡å†™å…¥ä¸€è¡Œå­—ç¬¦ä¸² bw.newLine(); // å†™å…¥è¡Œåˆ†éš”ç¬¦ } bw.flush (); // åˆ·æ–°ç¼“å†²åŒº }catch (IOException e ){ e.printStackTrace(); }finally{ //4. å…³é—­IOæµå¯¹è±¡ try{ if(bw != null){ bw.close (); //å…³é—­è¿‡æ»¤æµæ—¶ä¼šè‡ªåŠ¨å…³é—­å®ƒæ‰€åŒ…è£…çš„åº•å±‚èŠ‚ç‚¹æµ } }catch (IOException e){ e.printStackTrace(); } try{ if(br != null){ br.close(); } }catch (IOException e){ e.printStackTrace(); } } è½¬æ¢æµ(å±äºå­—ç¬¦æµ) è½¬æ¢æµæä¾›äº†å†å­—èŠ‚æµå’Œå­—ç¬¦æµä¹‹é—´çš„è½¬æ¢ JavaAPIæä¾›äº†ä¸¤ä¸ªè½¬æ¢æµï¼š InputStreamReaderï¼šå°†InputStreamè½¬æ¢ä¸ºReader OutputStreamWriterï¼šå°†Writerè½¬æ¢ä¸ºOutputStream å­—èŠ‚æµä¸­çš„æ•°æ®éƒ½æ˜¯å­—ç¬¦æ—¶ï¼Œè½¬æˆå­—ç¬¦æµæ“ä½œæ›´é«˜æ•ˆ å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä½¿ç”¨è½¬æ¢æµæ¥å¤„ç†æ–‡ä»¶ä¹±ç é—®é¢˜ã€‚å®ç°ç¼–ç å’Œè§£ç çš„åŠŸèƒ½ ç¼–ç ï¼šå­—ç¬¦ä¸² -&gt; å­—èŠ‚æ•°ç»„ è§£ç ï¼šå­—èŠ‚æ•°ç»„ -&gt; å­—ç¬¦ä¸² è½¬æ¢æµçš„ç¼–ç åº”ç”¨ å¯ä»¥è®²å­—ç¬¦æŒ‰ç…§æŒ‡å®šç¼–ç æ ¼å¼å­˜å‚¨ å¯ä»¥å¯¹æ–‡æœ¬æ•°æ®æŒ‰ç…§æŒ‡å®šç¼–ç æ ¼å¼æ¥è§£è¯» æŒ‡å®šç¼–ç è¡¨çš„åŠ¨ä½œç”±æ„é€ å™¨å®Œæˆ InputStreamReader å®ç°å°†å­—èŠ‚çš„è¾“å…¥æµæŒ‰ç…§æŒ‡å®šå­—ç¬¦é›†è½¬æ¢ä¸ºå­—ç¬¦çš„è¾“å…¥æµ éœ€è¦å’ŒInputStreamâ€œå¥—æ¥â€ æ„é€ å™¨ï¼š public InputStreamReader(InputStream in) public InputStreamReader(InputStream in, String charsetName) OutputStreamWriter å®ç°å°†å­—ç¬¦çš„è¾“å‡ºæµæŒ‰ç…§å­—ç¬¦é›†è½¬æ¢ä¸ºå­—èŠ‚çš„è¾“å‡ºæµ éœ€è¦å’ŒOutputStreamâ€œå¥—æ¥â€ æ„é€ å™¨ï¼š public OutputStreamWriter(OutputStream out) public OutputStreamWriter(OutputStream out, String charsetName) public void testMyInput() throws Exception { FileInputStream fis = new FileInputStream(&quot;dbcp.txt&quot;); FileOutputStream fos = new FileOutputStream(&quot;dbcp5.txt&quot;); InputStreamReader isr = new InputStreamReader(fis,&quot;GBK&quot;); OutputStreamWriter osw = new OutputStreamWriter(fos,&quot;GBK&quot;); BufferedReader br = new BufferedReader(isr); BufferedWriter bw = new BufferedWriter(osw); String str = null while((str = br.readLine())!= null){ bw.write(str); bw.newLine(); bw.flush() } bw.close(); br.close(); } æ ‡å‡†è¾“å…¥ã€è¾“å‡ºæµ(äº†è§£) System.in å’Œ System.out åˆ†åˆ«ä»£è¡¨äº†ç³»ç»Ÿæ ‡å‡†çš„è¾“å…¥å’Œè¾“å‡ºè®¾å¤‡ é»˜è®¤è¾“å…¥è®¾å¤‡æ˜¯ï¼šé”®ç›˜ï¼Œè¾“å‡ºè®¾å¤‡æ˜¯ï¼šæ˜¾ç¤ºå™¨ System.in çš„ç±»å‹æ˜¯ InputStream System.out çš„ç±»å‹æ˜¯ PrintStreamï¼Œå…¶æ˜¯ OutputStreamçš„å­ç±»FilterOutputStreamçš„å­ç±» é‡å®šå‘ï¼šé€šè¿‡ Systemç±»çš„ setInï¼ŒsetOut æ–¹æ³•å¯¹é»˜è®¤è®¾å¤‡è¿›è¡Œæ”¹å˜ã€‚ public static void setIn (InputStream in) public static void setOut (PrintStream out) System.out.println(&quot;è¯·è¾“å…¥ä¿¡æ¯(é€€å‡ºè¾“å…¥eæˆ– exit):&quot;) //æŠŠæ ‡å‡†è¾“å…¥æµé”®ç›˜è¾“å…¥è¿™ä¸ªå­—èŠ‚æµåŒ…è£…æˆå­—ç¬¦æµå†åŒ…è£…æˆç¼“å†²æµ BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); String s = null; try{ while((s = br .readLine()) != null ) {//è¯»å–ç”¨æˆ·è¾“å…¥çš„ä¸€è¡Œæ•°æ® --&gt; é˜»å¡ç¨‹åº if((&quot; e&quot;. s ) || &quot; exit&quot;. s )){ System.out.println(&quot;å®‰å…¨é€€å‡º&quot;); break; } //å°†è¯»å–åˆ°çš„æ•´è¡Œå­—ç¬¦ä¸²è½¬æˆå¤§å†™è¾“å‡º System.out .println (&quot;--&gt;:&quot;+ s.toUpperCase()); System.out.println(&quot;ç»§ç»­è¾“å…¥ä¿¡æ¯&quot;); } }catch (IOException e){ e.printStackTrace(); }finally{ try{ if(br != null){ br.close(); // å…³é—­è¿‡æ»¤æµæ—¶ ä¼šè‡ªåŠ¨å…³é—­å®ƒåŒ…è£…çš„åº•å±‚èŠ‚ç‚¹æµ } }catch (IOException e){ e.printStackTrace(); } } æ‰“å°æµ(äº†è§£) å®ç°å°†åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°æ®æ ¼å¼è½¬åŒ–ä¸ºå­—ç¬¦ä¸²è¾“å‡ºæ‰“å°æµï¼š PrintStream PrintWriter æä¾›äº†ä¸€ç³»åˆ—å†²åœ¨çš„print()å’Œprintln()æ–¹æ³•ï¼Œç”¨äºå¤šç§æ•°æ®ç±»å‹çš„è¾“å‡º PrintStreamå’ŒPrintWriterçš„è¾“å‡ºä¸ä¼šæŠ›å‡ºIOExceptionå¼‚å¸¸ PrintStreamå’ŒPrintWriteræœ‰è‡ªåŠ¨flushåŠŸèƒ½ PrintStreamæ‰“å°çš„æ‰€æœ‰å­—ç¬¦éƒ½é€‚ç”¨å¹³å°é»˜è®¤çš„å­—ç¬¦ç¼–ç è½¬æ¢ä¸ºå­—èŠ‚ã€‚åœ¨éœ€è¦å†™å…¥å­—ç¬¦è€Œä¸æ˜¯å†™å…¥å­—èŠ‚çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥ä½¿ç”¨PrintWriterç±» System.outè¿”å›çš„æ˜¯PrintStreamçš„å®ä¾‹ PrintStream ps = null; try{ FileOutputStream fos = new FileOutputStream(new File( &quot;d:\\\\IO\\\\text.txt&quot; )); //åˆ›å»ºæ‰“å°è¾“å‡ºæµ è®¾ç½®ä¸ºè‡ªåŠ¨åˆ·æ–°æ¨¡å¼å†™å…¥æ¢è¡Œç¬¦æˆ–å­—èŠ‚&quot;\\n&quot;æ—¶éƒ½ä¼šåˆ·æ–°è¾“å‡ºç¼“å†²åŒº ps = new PrintStream(fos,true) if(ps != null) {// æŠŠæ ‡å‡†è¾“å‡ºæµ æ§åˆ¶å°è¾“å‡º æ”¹æˆæ–‡ä»¶ System.setOut(ps); } for(int i = 0; i &lt;= 255; i ++) { // è¾“å‡º ASCII å­—ç¬¦ System.out.print((char) i); if(i % 50 == 0) { // æ¯ 50 ä¸ªæ•°æ®ä¸€è¡Œ System.out.println (); // æ¢è¡Œ } } }catch (FileNotFoundException e ){ e.printStackTrace(); }finally{ if(ps != null){ ps.close(); } } æ•°æ®æµ(äº†è§£) ä¸ºäº†æ–¹ä¾¿åœ°æ“ä½œ Java è¯­è¨€çš„ åŸºæœ¬ æ•°æ®ç±»å‹å’Œ String çš„ æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨æ•°æ®æµã€‚ æ•°æ®æµæœ‰ä¸¤ä¸ªç±»ï¼š(ç”¨äºè¯»å–å’Œå†™å‡ºåŸºæœ¬æ•°æ®ç±»å‹ã€ String ç±»çš„æ•°æ®ï¼‰ DataInputStream å’Œ DataOutputStream åˆ†åˆ«â€œå¥—æ¥â€åœ¨ InputStream å’Œ OutputStream å­ç±»çš„æµä¸Š DataInputStream ä¸­çš„æ–¹æ³• boolean readBoolean() byte readByte() char readChar() float readFloat() double readDouble() short readShort() long readLong() int readInt() String readUTF() void readFully (byte[] b); DataOutputStream ä¸­çš„æ–¹æ³• å°†ä¸Šè¿°çš„æ–¹æ³•çš„ read æ”¹ä¸ºç›¸åº”çš„ write å³å¯ã€‚ DataOutputStream dos = null try{ // åˆ›å»ºè¿æ¥åˆ°æŒ‡å®šæ–‡ä»¶çš„æ•°æ®è¾“å‡ºæµå¯¹è±¡ dos = new DataOutputStream(new FileOutputStream(&quot;destData.dat&quot;)); dos.writeUTF(&quot;æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨&quot;); // å†™ UTF å­—ç¬¦ä¸² dos.writeBoolean(false); // å†™å…¥å¸ƒå°”å€¼ dos.writeLong(1234567890L ); // å†™å…¥é•¿æ•´æ•° System.out.println(&quot;å†™æ–‡ä»¶æˆåŠŸ&quot;) }catch (IOException e ){ e.printStackTrace(); }finally { // å…³é—­æµå¯¹è±¡ try{ if(dos != null){ //å…³é—­è¿‡æ»¤æµæ—¶ ä¼šè‡ªåŠ¨å…³é—­å®ƒåŒ…è£…çš„åº•å±‚èŠ‚ç‚¹æµ dos.close() } }catch (IOException e ){ e.printStackTrace(); } } DataInputStream dis = null try{ dis = new DataInputStream( new FileInputStream(&quot;destData.dat&quot;)); String info = dis.readUTF(); boolean flag = dis.readBoolean(); long time = dis.readLong(); System.out.println(info); System.out.println(flag); System.out.println(time); }catch (Exception e ){ e.printStackTrace(); }finally{ if(dis != null){ try{ dis.close(); }catch (IOException e ){ e.printStackTrace(); } } } å¯¹è±¡æµ ObjectInputStreamå’ŒObjectOutputStream ç”¨äºå­˜å‚¨å’Œè¯»å–åŸºæœ¬æ•°æ®ç±»å‹æ•°æ®æˆ–å¯¹è±¡çš„å¤„ç†æµã€‚å®ƒçš„å¼ºå¤§ä¹‹å¤„å°±æ˜¯å¯ä»¥æŠŠJavaçš„å¯¹è±¡å†™å…¥åˆ°æ•°æ®æºä¸­ï¼Œä¹Ÿèƒ½æŠŠå¯¹è±¡ä»æ•°æ®æºä¸­è¿˜åŸå›æ¥ åºåˆ—åŒ–ï¼šç”¨ObjectOutputStreamç±»ä¿å­˜åŸºæœ¬æ•°æ®ç±»å‹æˆ–å¯¹è±¡çš„æœºåˆ¶ ååºåˆ—åŒ–ï¼šç”¨ObjectInputStreamç±»è¯»å–åŸºæœ¬ç±»å‹æ•°æ®æˆ–å¯¹è±¡çš„æœºåˆ¶ ObjectOutputStreamå’ŒObjectInputStreamä¸èƒ½åºåˆ—åŒ–staticå’Œtransientä¿®é¥°çš„æˆå‘˜å˜é‡ å¯¹è±¡çš„åºåˆ—åŒ– å¯¹è±¡åºåˆ—åŒ–æœºåˆ¶ å…è®¸æŠŠå†…å­˜ä¸­çš„ Java å¯¹è±¡è½¬æ¢æˆå¹³å°æ— å…³çš„äºŒè¿›åˆ¶æµï¼Œä»è€Œå…è®¸æŠŠè¿™ç§äºŒè¿›åˆ¶æµæŒä¹…åœ°ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œæˆ–é€šè¿‡ç½‘ç»œå°†è¿™ç§äºŒè¿›åˆ¶æµä¼ è¾“åˆ°å¦ä¸€ä¸ªç½‘ç»œèŠ‚ç‚¹ ã€‚ å½“ å…¶å®ƒç¨‹åºè·å–äº†è¿™ç§äºŒè¿›åˆ¶æµï¼Œå°±å¯ä»¥æ¢å¤æˆåŸæ¥çš„ Java å¯¹è±¡ åºåˆ—åŒ–çš„å¥½å¤„åœ¨äºå¯å°†ä»»ä½•å®ç°äº† Serializable æ¥å£çš„å¯¹è±¡è½¬åŒ–ä¸ºå­—èŠ‚æ•°æ®ä½¿å…¶åœ¨ä¿å­˜å’Œä¼ è¾“æ—¶å¯è¢«è¿˜åŸ åºåˆ—åŒ–æ˜¯ RMI (Remote Method Invoke è¿œç¨‹æ–¹æ³•è°ƒç”¨) è¿‡ç¨‹çš„å‚æ•°å’Œè¿”å›å€¼éƒ½å¿…é¡»å®ç°çš„æœºåˆ¶ï¼Œè€Œ RMI æ˜¯ JavaEE çš„åŸºç¡€ã€‚å› æ­¤åºåˆ—åŒ–æœºåˆ¶æ˜¯JavaEE å¹³å°çš„åŸºç¡€ å¦‚æœéœ€è¦è®©æŸä¸ªå¯¹è±¡æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œåˆ™å¿…é¡»è®©å¯¹è±¡æ‰€å±çš„ç±»åŠå…¶å±æ€§æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œä¸ºäº†è®©æŸä¸ªç±»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œè¯¥ç±»å¿…é¡»å®ç°å¦‚ä¸‹ä¸¤ä¸ªæ¥å£ä¹‹ä¸€ã€‚å¦åˆ™ï¼Œä¼šæŠ›å‡º NotSerializableException å¼‚å¸¸ï¼šSerializableã€Externalizable å‡¡æ˜¯å®ç° Serializable æ¥å£çš„ç±»éƒ½æœ‰ä¸€ä¸ªè¡¨ç¤ºåºåˆ—åŒ–ç‰ˆæœ¬æ ‡è¯†ç¬¦çš„é™æ€å˜é‡ï¼š private static final long serialVersionUID; serialVersionUID ç”¨æ¥è¡¨æ˜ç±»çš„ä¸åŒç‰ˆæœ¬é—´çš„å…¼å®¹æ€§ã€‚ç®€è¨€ä¹‹ï¼Œå…¶ç›®çš„æ˜¯ä»¥åºåˆ—åŒ–å¯¹è±¡è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œæœ‰å…³å„ç‰ˆæœ¬ååºåˆ—åŒ–æ—¶æ˜¯å¦å…¼å®¹ã€‚ å¦‚æœ ç±»æ²¡æœ‰æ˜¾ç¤ºå®šä¹‰è¿™ä¸ªé™æ€å¸¸é‡ ï¼Œå®ƒçš„å€¼æ˜¯ Java è¿è¡Œæ—¶ç¯å¢ƒæ ¹æ®ç±»çš„å†…éƒ¨ç»†èŠ‚è‡ªåŠ¨ç”Ÿæˆçš„ ã€‚ è‹¥ç±»çš„å®ä¾‹å˜é‡åšäº†ä¿®æ”¹ serialVersionUID å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚ æ•…å»ºè®®ï¼Œæ˜¾å¼å£°æ˜ã€‚ ç®€å•æ¥è¯´ï¼Œ Java çš„åºåˆ—åŒ–æœºåˆ¶æ˜¯é€šè¿‡åœ¨è¿è¡Œæ—¶åˆ¤æ–­ç±»çš„ serialVersionUID æ¥éªŒè¯ç‰ˆæœ¬ä¸€è‡´æ€§çš„ã€‚åœ¨è¿›è¡Œååºåˆ—åŒ–æ—¶ï¼Œ JVM ä¼šæŠŠä¼ æ¥çš„å­—èŠ‚æµä¸­çš„serialVersionUID ä¸æœ¬åœ°ç›¸åº”å®ä½“ç±»çš„ serialVersionUID è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒå°±è®¤ä¸ºæ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥è¿›è¡Œååºåˆ—åŒ–ï¼Œå¦åˆ™å°±ä¼šå‡ºç°åºåˆ—åŒ–ç‰ˆæœ¬ä¸ä¸€è‡´çš„å¼‚å¸¸ã€‚ (InvalidCastException) è‹¥æŸä¸ªç±»å®ç°äº† Serializable æ¥å£ï¼Œè¯¥ç±»çš„å¯¹è±¡å°±æ˜¯å¯åºåˆ—åŒ–çš„ï¼š åˆ›å»ºä¸€ä¸ª ObjectOutputStream è°ƒç”¨ ObjectOutputStream å¯¹è±¡çš„ writeObject( å¯¹è±¡ ) æ–¹æ³•è¾“å‡ºå¯åºåˆ—åŒ–å¯¹è±¡ æ³¨æ„å†™å‡ºä¸€æ¬¡ï¼Œæ“ä½œ flush() ä¸€æ¬¡ ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream (&quot;data.txt&quot;)); Person p = new Person( &quot;éŸ©æ¢…æ¢…&quot;, 18, &quot;ä¸­åå¤§è¡—&quot;, new Pet()); oos.writeObject(p); oos.flush(); oos.close(); ååºåˆ—åŒ– åˆ›å»ºä¸€ä¸ª ObjectInputStream è°ƒç”¨ readObject () æ–¹æ³•è¯»å–æµä¸­çš„å¯¹è±¡ å¼ºè°ƒï¼š å¦‚æœæŸä¸ª ç±» çš„ å±æ€§ ä¸æ˜¯ åŸºæœ¬æ•°æ®ç±»å‹æˆ– String ç±»å‹ï¼Œè€Œæ˜¯å¦ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼•ç”¨ç±»å‹å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œå¦åˆ™æ‹¥æœ‰è¯¥ç±»å‹çš„Fieldçš„ç±»ä¹Ÿä¸èƒ½åºåˆ—åŒ– éšæœºæ–‡ä»¶å­˜å– RandomAccessFileå£°æ˜åœ¨java.ioåŒ…ä¸‹ï¼Œä½†ç›´æ¥ç»§æ‰¿ä¸java.lang.Objectç±»ã€‚å¹¶ä¸”å®ƒå®ç°äº†DataInput ã€ DataOutputè¿™ä¸¤ä¸ªæ¥å£ï¼Œä¹Ÿå°±æ„å‘³ç€è¿™ä¸ªç±»æ—¢å¯ä»¥è¯»ä¹Ÿå¯ä»¥å†™ RandomAccessFileç±»æ”¯æŒ&quot;éšæœºè®¿é—®&quot;çš„æ–¹å¼ï¼Œç¨‹åºå¯ä»¥ç›´æ¥è·³åˆ°æ–‡ä»¶çš„ä»»æ„åœ°æ–¹æ¥è¯»ã€å†™æ–‡ä»¶ æ”¯æŒåªè®¿é—®æ–‡ä»¶çš„éƒ¨åˆ†å†…å®¹ å¯ä»¥å‘ä¸€å­˜åœ¨çš„æ–‡ä»¶åè¿½åŠ å†…å®¹ RandomAccessFileå¯¹è±¡åŒ…å«ä¸€ä¸ªè®°å½•æŒ‡é’ˆï¼Œç”¨ä»¥æ ‡è®°å½“å‰è¯»å†™å¤„çš„ä½ç½®ã€‚RandomAccessFileç±»å¯¹è±¡å¯ä»¥è‡ªç”±ç§»åŠ¨è®°å½•æŒ‡é’ˆ long getFilePointer()ï¼šè·å–æ–‡ä»¶è®°å½•æŒ‡é’ˆçš„å½“å‰ä½ç½® void seek(long pos)ï¼šå°†æ–‡ä»¶è®°å½•æŒ‡é’ˆå®šä½åˆ°posä½ç½® æ„é€ å™¨ public RandomAccessFile(File file, String mode) public RandomAccessFile(String name, String mode) åˆ›å»ºRandomAccessfileç±»å®ä¾‹éœ€è¦æŒ‡å®šä¸€ä¸ªmodeå‚æ•°ï¼Œè¯¥å‚æ•°æŒ‡å®šRandomAccessFileçš„è®¿é—®æ¨¡å¼ rï¼šä»¥åªè¯»æ–¹å¼æ‰“å¼€ rwï¼šå¯ä»¥è¯»å–ä¹Ÿå¯ä»¥å†™å…¥ rwdï¼šå¯ä»¥è¯»å–å’Œå†™å…¥ï¼ŒåŒæ­¥æ–‡ä»¶å†…å®¹çš„æ›´æ–° rwsï¼šå¯ä»¥è¯»å–å’Œå†™å…¥ï¼ŒåŒæ­¥æ–‡ä»¶å†…å®¹å’ŒåŸæ•°æ®çš„æ›´æ–° å¦‚æœæ¨¡å¼ä¸ºåªè¯»rã€‚åˆ™ä¸ä¼šåˆ›å»ºæ–‡ä»¶ï¼Œè€Œæ˜¯å›å»è¯»å–ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶ï¼Œå¦‚æœè¯»å–çš„æ–‡ä»¶ä¸å­˜åœ¨åˆ™ä¼šå‡ºç°å¼‚å¸¸ã€‚å¦‚æœæ¨¡å¼ä¸ºrwã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™ä¼šå»åˆ›å»ºæ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸ä¼šåˆ›å»ºã€‚å¦‚æœå†™å…¥æ—¶ï¼Œæ–‡ä»¶å­˜åœ¨åˆ™å°†æ–‡ä»¶å†…å®¹ä»æŒ‡é’ˆä½ç½®è¦†ç›–ï¼Œè€Œä¸æ˜¯å°†æ–‡ä»¶è¦†ç›– //è¯»å–æ–‡ä»¶å†…å®¹ RandomAccessFile raf = new RandomAccessFile(â€œtest.txtâ€, rw); raf.seek(5) byte [] b = new byte[1024]; int off = 0; int len = 5; raf.read(b, off, len) String str = new String(b, 0, len) System.out.println(str); raf.close(); //å†™å…¥æ–‡ä»¶å†…å®¹ RandomAccessFile raf = new RandomAccessFile (&quot;test.txt&quot;, rw); raf.seek(5); //å…ˆè¯»å‡ºæ¥ String temp = raf.readLine(); raf.seek(5); raf.write(&quot;xyz&quot;.getBytes()); raf.write(temp.getBytes); raf.close() RandomAccessFile raf1 = new RandomAccessFile(&quot;hello.txt&quot;, &quot;rw&quot;); raf1.seek(5); //æ–¹å¼ä¸€ï¼š //StringBuilder info = new StringBuilder((int) file.length()); //byte[] buffer = new byte[10]; //int len; //while((len = raf1.read(buffer)) != -1){ //info += new String(buffer,0,len); //info.append(new String(buffer,0,len)); //} //æ–¹å¼äºŒï¼š ByteArrayOutputStream baos = new ByteArrayOutputStream(); byte[] buffer = new byte[10]; int len; while((len = raf1.read(buffer)) != -1){ baos.write(buffer, 0, len); } raf1.seek(5); raf1.write(&quot;xyz&quot;.getBytes()); raf1.write(baos.toString().getBytes()); baos.close(); raf1.close(); æµçš„åº”ç”¨å°ç»“ æµæ˜¯ç”¨æ¥å¤„ç†æ•°æ®çš„ã€‚ å¤„ç†æ•°æ®æ—¶ï¼Œä¸€å®šè¦å…ˆæ˜ç¡®æ•°æ®æº ï¼Œä¸æ•°æ®ç›®çš„åœ° æ•°æ®æºå¯ä»¥æ˜¯æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯é”®ç›˜ã€‚ æ•°æ®ç›®çš„åœ°å¯ä»¥æ˜¯æ–‡ä»¶ã€æ˜¾ç¤ºå™¨æˆ–è€…å…¶ä»–è®¾å¤‡ã€‚ è€Œæµåªæ˜¯åœ¨å¸®åŠ©æ•°æ®è¿›è¡Œä¼ è¾“ å¹¶å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚è¿‡æ»¤å¤„ç†ã€è½¬æ¢å¤„ç†ç­‰ã€‚ NIO.2ä¸­Pathã€Pathsã€Filesç±»çš„ä½¿ç”¨ Java NIO (New IO Non Blocking IO) æ˜¯ ä» Java 1.4 ç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„ä¸€å¥—æ–°çš„IO APIï¼Œå¯ä»¥æ›¿ä»£æ ‡å‡†çš„ Java IO APIã€‚ NIO ä¸åŸæ¥çš„ IO æœ‰åŒæ ·çš„ä½œç”¨å’Œç›®çš„ï¼Œä½†æ˜¯ä½¿ç”¨çš„æ–¹å¼å®Œå…¨ä¸åŒï¼Œ NIO æ”¯æŒé¢å‘ç¼“å†²åŒºçš„ (IO æ˜¯é¢å‘æµçš„) ã€åŸºäºé€šé“çš„ IO æ“ä½œã€‚NIOå°†ä»¥æ›´åŠ é«˜æ•ˆçš„æ–¹å¼è¿›è¡Œæ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚ Java API ä¸­æä¾›äº†ä¸¤å¥— NIO ä¸€å¥—æ˜¯é’ˆå¯¹æ ‡å‡†è¾“å…¥è¾“å‡º NIO å¦ä¸€å¥—å°±æ˜¯ç½‘ç»œç¼–ç¨‹ NIO ã€‚ java.nio.channels.Channel FileChannelï¼šå¤„ç†æœ¬åœ°æ–‡ä»¶ SocketChannelï¼šTCPç½‘ç»œç¼–ç¨‹çš„å®¢æˆ·ç«¯çš„ Channel ServerSocketChannelï¼šTCP ç½‘ç»œç¼–ç¨‹çš„æœåŠ¡å™¨ç«¯çš„ Channel DatagramChannelï¼šUDP ç½‘ç»œç¼–ç¨‹ä¸­å‘é€ç«¯å’Œæ¥æ”¶ç«¯çš„ Channel NIO.2 éšç€ JDK 7 çš„å‘å¸ƒï¼Œ Java å¯¹ NIO è¿›è¡Œäº†æå¤§çš„æ‰©å±•ï¼Œå¢å¼ºäº†å¯¹æ–‡ä»¶å¤„ç†å’Œæ–‡ä»¶ç³»ç»Ÿç‰¹æ€§çš„æ”¯æŒï¼Œä»¥è‡³äºæˆ‘ä»¬ç§°ä»–ä»¬ä¸º NIO.2 ã€‚å› ä¸º NIO æä¾›çš„ä¸€äº›åŠŸèƒ½ï¼Œ NIO å·²ç»æˆä¸ºæ–‡ä»¶å¤„ç†ä¸­è¶Šæ¥è¶Šé‡è¦çš„éƒ¨åˆ†ã€‚ Pathã€Pathsã€Filesç±» æ—©æœŸ çš„ Java åªæä¾›äº†ä¸€ä¸ª File ç±»æ¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼Œä½† File ç±»çš„åŠŸèƒ½æ¯”è¾ƒæœ‰é™ï¼Œæ‰€æä¾›çš„æ–¹æ³•æ€§èƒ½ä¹Ÿä¸é«˜ã€‚è€Œä¸”ï¼Œ å¤§å¤šæ•°æ–¹æ³•åœ¨å‡ºé”™æ—¶ä»…è¿”å›å¤±è´¥ï¼Œå¹¶ä¸ä¼šæä¾›å¼‚å¸¸ä¿¡æ¯ã€‚ NIO. 2 ä¸ºäº†å¼¥è¡¥è¿™ç§ä¸è¶³ï¼Œå¼•å…¥äº† Path æ¥å£ï¼Œä»£è¡¨ä¸€ä¸ªå¹³å°æ— å…³çš„å¹³å°è·¯å¾„ï¼Œæè¿°äº†ç›®å½•ç»“æ„ä¸­æ–‡ä»¶çš„ä½ç½®ã€‚ Path å¯ä»¥çœ‹æˆæ˜¯ File ç±»çš„å‡çº§ç‰ˆæœ¬ï¼Œå®é™…å¼•ç”¨çš„èµ„æºä¹Ÿå¯ä»¥ä¸å­˜åœ¨ã€‚ åœ¨ä»¥å‰ IO æ“ä½œéƒ½æ˜¯è¿™æ ·å†™çš„ import java.io.File; File file = new File(&quot;index.html&quot;); ä½†åœ¨ Java7 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š import java.nio.file.Path; import java.nio.file.Paths; Path path = Paths.get(&quot;index.html&quot;); åŒæ—¶ï¼Œ NIO.2 åœ¨ java.nio.file åŒ…ä¸‹è¿˜ æä¾›äº† Files ã€ Paths å·¥å…·ç±»ï¼Œ Files åŒ…å«äº†å¤§é‡é™æ€çš„å·¥å…·æ–¹æ³•æ¥æ“ä½œæ–‡ä»¶ï¼› Paths åˆ™åŒ…å«äº†ä¸¤ä¸ªè¿”å› Path çš„é™æ€å·¥å‚æ–¹æ³•ã€‚ Paths ç±»æä¾›çš„é™æ€ get() æ–¹æ³•ç”¨æ¥è·å– Path å¯¹è±¡ï¼š static Path get(String first, String â€¦ more) : ç”¨äºå°†å¤šä¸ªå­—ç¬¦ä¸²ä¸²è¿æˆè·¯å¾„ static Path get(URI uri): è¿”å›æŒ‡å®š uri å¯¹åº”çš„ Path è·¯å¾„ ","link":"https://yeyuan1107.github.io/post/javaio-liu/"},{"title":"Javaæ³›å‹","content":" ç®€ä»‹ æ‰€è°“æ³›å‹ï¼Œå°±æ˜¯å…è®¸åœ¨å®šä¹‰ç±»ï¼Œæ¥å£æ—¶ï¼Œé€šè¿‡ä¸€ä¸ªæ ‡è¯†è¡¨ç¤ºç±»ä¸­æŸä¸ªå±æ€§çš„ç±»å‹æˆ–è€…æ˜¯æŸä¸ªæ–¹æ³•çš„è¿”å›å€¼åŠå‚æ•°ç±»å‹ï¼Œè¿™ä¸ªç±»å‹å°†åœ¨ä½¿ç”¨æ—¶ã€‚ä¾‹å¦‚ï¼Œç»§æ‰¿æˆ–å®ç°è¿™ä¸ªæ¥å£ï¼Œç”¨è¿™ä¸ªç±»å‹å£°æ˜å˜é‡ï¼Œåˆ›å»ºå¯¹è±¡æ—¶ç¡®å®š(å³ä¼ å…¥å®é™…çš„ç±»å‹å‚æ•°ï¼Œä¹Ÿç§°ä¸ºç±»å‹å®å‚)æ³›å‹è§£å†³çš„é—®é¢˜ ä»»ä½•ç±»å‹éƒ½å¯ä»¥æ·»åŠ åˆ°é›†åˆä¸­å¯¼è‡´ç±»å‹ä¸å®‰å…¨ è¯»å–å‡ºæ¥çš„å¯¹è±¡éœ€è¦å¼ºåˆ¶è½¬æ¢ï¼Œå¯èƒ½å¯¼è‡´ClassCastException æ³¨æ„ï¼šæ³›å‹ä¸­ç±»å‹ä¸èƒ½æ˜¯åŸºæœ¬å‚æ•°ç±»å‹ï¼Œç¼–è¯‘æ—¶å°±ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä¿è¯æ•°æ®å®‰å…¨ï¼Œä¸”é¿å…äº†å¼ºè½¬æ“ä½œ åœ¨é›†åˆä¸­ä½¿ç”¨æ³›å‹ //è¿­ä»£å™¨ä¹Ÿå¯ä»¥æœ‰æ³›å‹ï¼Œè¿”å›å€¼ç±»å‹ä¸ºæ³›å‹ç±»å‹ Iterator&lt;T&gt; iterator = xxx.iterator(); //comparableåŠcomparatorä¹Ÿæœ‰æ³›å‹ /* 1. é›†åˆæ¥å£æˆ–é›†åˆç±»åœ¨JDK5.0æ—¶éƒ½ä¿®æ”¹ä¸ºå¸¦æ³›å‹çš„ç»“æ„ 2. åœ¨å®ä¾‹åŒ–é›†åˆç±»æ—¶å¯ä»¥æŒ‡æ˜å…·ä½“çš„æ³›å‹ç±»å‹ï¼Œå†…éƒ¨ç»“æ„ä½¿ç”¨åˆ°ç±»çš„æ³›å‹çš„ä½ç½®éƒ½æŒ‡å®šä¸ºå®ä¾‹åŒ–æ—¶çš„ç±»å‹ 3. æ³›å‹çš„ç±»å¿…é¡»æ˜¯ç±»ï¼Œä¸èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ 4. å¦‚æœå®ä¾‹åŒ–æ—¶æœªæŒ‡æ˜ç±»å‹ï¼Œé»˜è®¤ä¸ºObject 5. JDK7ä¹‹åæ„é€ å™¨çš„æ³›å‹å¯ä»¥çœç•¥ */ è‡ªå®šä¹‰æ³›å‹ç»“æ„ æ³›å‹çš„å£°æ˜ å¦‚interface List&lt;T&gt;ï¼ŒTä»£è¡¨ç±»å‹ï¼Œä»»ä½•å­—æ¯éƒ½å¯ä»¥ æ³›å‹çš„å®ä¾‹åŒ– ä¸€å®šè¦åœ¨ç±»ååçœ‹æŒ‡å®šç±»å‹å‚æ•°çš„å€¼å¦‚List&lt;String&gt; listç±»å‹å‚æ•°åªèƒ½æ˜¯ç±»ï¼Œä¸èƒ½ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹å¡«å…… è‡ªå®šä¹‰æ³›å‹ç±»ã€æ³›å‹æ¥å£ æ³›å‹ç±»å¯èƒ½æœ‰å¤šä¸ªå‚æ•°ï¼Œæ­¤æ—¶åº”å°†å¤šä¸ªå‚æ•°ä¸€èµ·æ”¾åœ¨å°–æ‹¬å·å†… ã€‚æ¯”å¦‚ï¼š&lt;E1,E2,E3&gt; æ³›å‹ç±»çš„æ„é€ å™¨å¦‚ä¸‹ public GenericClass(){} ã€‚è€Œä¸‹é¢æ˜¯é”™è¯¯çš„public GenericClass(){} å®ä¾‹åŒ–åï¼Œæ“ä½œåŸæ¥æ³›å‹ä½ç½®çš„ç»“æ„å¿…é¡» ä¸æŒ‡å®šçš„æ³›å‹ç±»å‹ä¸€è‡´ ã€‚ æ³›å‹ä¸åŒçš„å¼•ç”¨ä¸èƒ½ç›¸äº’èµ‹å€¼ã€‚å°½ç®¡åœ¨ç¼–è¯‘æ—¶ ArrayList å’Œ ArrayList æ˜¯ä¸¤ç§ç±»å‹ï¼Œä½†æ˜¯ï¼Œåœ¨è¿è¡Œæ—¶åªæœ‰ä¸€ä¸ª ArrayList è¢«åŠ è½½åˆ° JVM ä¸­ ã€‚ æ³›å‹å¦‚æœä¸æŒ‡å®šï¼Œå°†è¢«æ“¦é™¤ï¼Œæ³›å‹å¯¹åº”çš„ç±»å‹å‡æŒ‰ç…§ Object å¤„ç†ï¼Œä½†ä¸ç­‰ä»·äº Object ã€‚ ç»éªŒï¼š æ³›å‹è¦ä½¿ç”¨ä¸€è·¯éƒ½ç”¨ã€‚è¦ä¸ç”¨ï¼Œä¸€è·¯éƒ½ä¸è¦ç”¨ã€‚ å¦‚æœæ³›å‹ç»“æ„æ˜¯ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ï¼Œåˆ™ä¸å¯åˆ›å»ºæ³›å‹ç±»çš„å¯¹è±¡ ã€‚ jdk1.7ï¼Œæ³›å‹çš„ç®€åŒ– æ“ä½œ ArrayList flist = new ArrayList&lt;&gt;() æ³›å‹çš„æŒ‡å®šä¸­ä¸èƒ½ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨åŒ…è£…ç±»æ›¿æ¢ã€‚ åœ¨ç±»æ¥å£ä¸Šå£°æ˜çš„æ³›å‹ï¼Œåœ¨æœ¬ç±»æˆ–æœ¬æ¥å£ä¸­å³ä»£è¡¨æŸç§ç±»å‹ï¼Œå¯ä»¥ä½œä¸ºéé™æ€å±æ€§çš„ç±»å‹ã€éé™æ€æ–¹æ³•çš„å‚æ•°ç±»å‹ã€éé™æ€æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ ã€‚ä½†åœ¨é™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨ç±»çš„æ³›å‹ã€‚ å¼‚å¸¸ç±»ä¸èƒ½æ˜¯æ³›å‹çš„ ä¸èƒ½ä½¿ç”¨ new E[] ã€‚ä½†æ˜¯å¯ä»¥E[] elements = (E[])new Object[capacity];å‚è€ƒï¼šArrayList æºç ä¸­å£°æ˜ï¼š Object[] elementData è€Œéæ³›å‹å‚æ•°ç±»å‹æ•°ç»„ã€‚ çˆ¶ç±»æœ‰æ³›å‹ï¼Œå­ç±»å¯ä»¥é€‰æ‹©ä¿ç•™æ³›å‹ä¹Ÿå¯ä»¥é€‰æ‹©æŒ‡å®šæ³›å‹ç±»å‹ï¼š å­ç±»ä¸ä¿ç•™çˆ¶ç±»çš„æ³›å‹ï¼šæŒ‰éœ€å®ç° æ²¡æœ‰ç±»å‹ æ“¦é™¤ å…·ä½“ç±»å‹ å­ç±»ä¿ç•™çˆ¶ç±»çš„æ³›å‹ï¼šæ³›å‹å­ç±» å…¨éƒ¨ä¿ç•™ éƒ¨åˆ†ä¿ç•™ ç»“è®ºï¼šå­ç±»å¿…é¡»æ˜¯â€œå¯ŒäºŒä»£â€ï¼Œå­ç±»é™¤äº†æŒ‡å®šæˆ–ä¿ç•™çˆ¶ç±»çš„æ³›å‹ï¼Œè¿˜å¯ä»¥å¢åŠ è‡ªå·±çš„æ³›å‹ class Father&lt;T1, T2&gt; { } //å­ç±»ä¸ä¿ç•™çˆ¶ç±»çš„æ³›å‹ // 1)æ²¡æœ‰ç±»å‹ æ“¦é™¤ class Son1 extends Father { // ç­‰ä»·äº class Son extends Father&lt;Object,Object&gt;{} } // 2) å…·ä½“ç±»å‹ class Son2 extends Father&lt;Integer, String&gt; { } //å­ç±»ä¿ç•™çˆ¶ç±»çš„æ³›å‹ // 1)å…¨éƒ¨ä¿ç•™ class Son3&lt;T1, T2&gt; extends Father&lt;T1, T2&gt; { } // 2)éƒ¨åˆ†ä¿ç•™ class Son4&lt;T2&gt; extends Father&lt;Integer, T2&gt; { } class Person&lt;T&gt; { // ä½¿ç”¨ T ç±»å‹å®šä¹‰å˜é‡ private T info; //ä½¿ç”¨ T ç±»å‹å®šä¹‰ä¸€èˆ¬æ–¹æ³• public T getInfo() { return info; } public void setInfo(T info ){ this.info = info } //ä½¿ç”¨ T ç±»å‹å®šä¹‰æ„é€ å™¨ public Person() { } public Person(T info){ this.info = info } // staticçš„æ–¹æ³•ä¸­ä¸èƒ½å£°æ˜æ³›å‹ //public static void show(T t) { // //} //ä¸èƒ½åœ¨ try catch ä¸­ä½¿ç”¨æ³›å‹å®šä¹‰ //public void test() { //try { // //} catch (MyException&lt;T&gt; ex) { // //} //} } è‡ªå®šä¹‰æ³›å‹æ–¹æ³• æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ³›å‹åŒ–ï¼Œåœ¨æ–¹æ³•ä¸­å‡ºç°äº†æ³›å‹çš„ç»“æ„ï¼Œæ³›å‹å‚æ•°ä¸ç±»çš„æ³›å‹å‚æ•°æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œæ³›å‹æ–¹æ³•æ‰€å±çš„ç±»æ˜¯ä¸æ˜¯æ³›å‹ç±»ä¸è¯¥æ–¹æ³•æ˜¯ä¸æ˜¯æ³›å‹æ–¹æ³•æ²¡æœ‰å…³ç³» æƒé™ä¿®é¥°ç¬¦ &lt;æ³›å‹&gt; è¿”å›ç±»å‹ æ–¹æ³•å(å½¢å‚åˆ—è¡¨) æŠ›å‡ºçš„å¼‚å¸¸{} //å¯ä»¥æ˜¯é™æ€æ–¹æ³• æƒé™ä¿®é¥°ç¬¦ static &lt;æ³›å‹&gt; è¿”å›ç±»å‹ æ–¹æ³•å(å½¢å‚åˆ—è¡¨) æŠ›å‡ºçš„å¼‚å¸¸{} ä»£ç ç¤ºä¾‹ public static &lt;T&gt; void fromArrayToCollection(T[] a , Collection&lt;T&gt; c ) for(T o : a ){ c.add(o); } } public static void main(String[] args ){ Object[] ao = new Object[100]; Collection&lt;Object&gt; co = new ArrayList&lt;Object&gt;(); fromArrayToCollection(ao , co); String[] sa = new String[20]; Collection&lt;String&gt; cs = new ArrayList&lt;&gt;(); fromArrayToCollection(sa , cs); Collection&lt;Double&gt; cd = new ArrayList&lt;&gt;(); //ä¸‹é¢ä»£ç ä¸­ T æ˜¯ Double ç±»ï¼Œä½† sa æ˜¯ String ç±»å‹ï¼Œç¼–è¯‘é”™è¯¯ã€‚ //fromArrayToCollection(sa, cd); //ä¸‹é¢ä»£ç ä¸­ T æ˜¯ Object ç±»å‹ï¼Œ sa æ˜¯ String ç±»å‹ï¼Œå¯ä»¥èµ‹å€¼æˆåŠŸã€‚ fromArrayToCollection(sa , co); } class Creature{} class Person extends Creature{} class Man extends Person{} class PersonTest { public static &lt;T extends Person&gt; void test(T t){ System.out.println(t); } public static void main(String[] args){ test(new Person()); test(new Man()); //The method test(T) in the type PersonTest is not //applicable for the arguments (Creature) test(new Creature()); } } æ³›å‹åœ¨ç»§æ‰¿ä¸Šçš„ä½“ç° å¦‚æœBæ˜¯Açš„ä¸€ä¸ªå­ç±»(æˆ–å­æ¥å£)ï¼Œè€ŒGæ˜¯å…·æœ‰æ³›å‹å£°æ˜çš„ç±»æˆ–æ¥å£ï¼Œä½†æ˜¯Gå¹¶ä¸æ˜¯Gçš„å­ç±»å‹ã€‚ä½†æ˜¯Bä¸Aæœ‰å­çˆ¶ç±»å…³ç³» é€šé…ç¬¦çš„ä½¿ç”¨ é€šé…ç¬¦ï¼š&quot;?&quot;ç±»Aä¸ç±»Bä¸ºå­çˆ¶ç±»å…³ç³»ï¼ŒGä¸Gæ²¡æœ‰å­çˆ¶ç±»å…³ç³»ï¼ŒäºŒè€…çš„å…±åŒçˆ¶ç±»ä¸ºG&lt;?&gt; å¯¹äºG&lt;?&gt;ä¸èƒ½å‘å†…éƒ¨æ·»åŠ é™¤äº†nullä¹‹å¤–çš„æ•°æ®ï¼Œå› ä¸ºnullæ˜¯æ‰€æœ‰ç±»å‹çš„æˆå‘˜ã€‚æˆ‘ä»¬ä¸çŸ¥é“è¯¥å¯¹è±¡çš„å…ƒç´ ç±»å‹ï¼Œaddæ–¹æ³•ä¸­æœ‰ç±»å‹å‚æ•°Eä½œä¸ºé›†åˆçš„å…ƒç´ ç±»å‹ã€‚æˆ‘ä»¬ä¼ ç»™addçš„ç„¶å’Œå‚æ•°éƒ½å¿…é¡»æ˜¯ä¸€ä¸ªæœªçŸ¥ç±»å‹çš„å­ç±»ï¼Œå› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“é‚£æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•ä¼ é€’ä»»ä½•ä¸œè¥¿è¿›å»ã€‚ å…è®¸è¯»å–æ•°æ®ï¼Œé€šè¿‡è°ƒç”¨get()æ–¹æ³•æ¥è·å¾—è¿”å›å€¼ï¼Œè¯»å–çš„è¿”å›å€¼ç±»å‹ä¸ºObject é€šé…ç¬¦ä½¿ç”¨ç¤ºä¾‹ public static void main(String[] args ) List&lt;?&gt; list = null; list = new ArrayList&lt;String&gt;(); list = new ArrayList&lt;Double&gt;(); //list.add(3)ç¼–è¯‘ä¸é€šè¿‡ list.add(null); List&lt;String&gt; l1 = new ArrayList&lt;String&gt;(); List&lt;Integer&gt; l2 = new ArrayList&lt;Integer&gt;(); l1.add(&quot;å°šç¡…è°·&quot;); l2.add(15); read(l1); read(l2); } public static void read(List&lt;?&gt; list ) for(Object o : list){ System.out.println(o) } } //æ³¨æ„ç‚¹ 1 ï¼šç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½ç”¨åœ¨æ³›å‹æ–¹æ³•å£°æ˜ä¸Šï¼Œè¿”å›å€¼ç±»å‹å‰é¢ä¸èƒ½ä½¿ç”¨ public static &lt;?&gt; void test(ArrayList&lt;?&gt; list){ } //æ³¨æ„ç‚¹ 2 ï¼šç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½ç”¨åœ¨æ³›å‹ç±»çš„å£°æ˜ä¸Š class GenericTypeClass&lt;?&gt;{ } //æ³¨æ„ç‚¹ 3 ï¼šç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½ç”¨åœ¨åˆ›å»ºå¯¹è±¡ä¸Šï¼Œå³è¾¹å±äºåˆ›å»ºé›†åˆå¯¹è±¡ ArrayList&lt;?&gt; list2 = new ArrayList&lt;?&gt;(); æœ‰é™åˆ¶æ¡ä»¶çš„é€šé…ç¬¦ &lt; ? extends Number&gt; (æ— ç©·å°, Number]ï¼šåªå…è®¸æ³›å‹ä¸ºNumberåŠNumberå­ç±»çš„å¼•ç”¨è°ƒç”¨ &lt; ? super Number &gt;[Number, æ— ç©·å¤§)ï¼šåªå…è®¸æ³›å‹ä¸ºNumberåŠNumberçˆ¶ç±»çš„å¼•ç”¨è°ƒç”¨ å¯ä»¥å†™å…¥æ•°æ®ï¼Œå¯ä»¥å†™å…¥NumberåŠNumberçš„å­ç±» &lt; ? extends Comparable&gt;ï¼šåªå…è®¸æ³›å‹ä¸ºå®ç°Comparableæ¥å£çš„å®ç°ç±»å¼•ç”¨è°ƒç”¨ ","link":"https://yeyuan1107.github.io/post/java-fan-xing/"},{"title":"Javaé›†åˆ","content":" ç®€ä»‹ é›†åˆã€æ•°ç»„éƒ½æ˜¯å¯¹å¤šä¸ªæ•°æ®è¿›è¡Œå­˜å‚¨æ“ä½œçš„ç»“æ„ï¼Œç®€ç§°Javaå®¹å™¨ã€‚æ­¤æ—¶çš„å­˜å‚¨ï¼Œä¸»è¦æŒ‡çš„æ˜¯å†…å­˜å±‚é¢çš„å­˜å‚¨ï¼Œä¸æ¶‰åŠæŒä¹…åŒ–çš„å­˜å‚¨ æ•°ç»„çš„ç‰¹ç‚¹ æ•°ç»„åˆå§‹åŒ–ä»¥åï¼Œé•¿åº¦å°±å›ºå®šäº† æ•°ç»„å£°æ˜çš„ç±»å‹ï¼Œå°±å†³å®šäº†è¿›è¡Œå…ƒç´ åˆå§‹åŒ–æ—¶çš„ç±»å‹ æ•°ç»„å­˜åœ¨çš„å¼Šç«¯ æ•°ç»„åˆå§‹åŒ–ä»¥åï¼Œé•¿åº¦å°±ä¸å¯å˜äº†ï¼Œä¸ä¾¿äºæ‰©å±• æ•°ç»„ä¸­æä¾›çš„å±æ€§å’Œæ–¹æ³•å°‘ï¼Œä¸ä¾¿äºè¿›è¡Œæ·»åŠ ã€åˆ é™¤ã€æ’å…¥ç­‰æ“ä½œï¼Œä¸”æ•ˆç‡ä¸é«˜ã€‚æ— æ³•åŒæ—¶ç›´æ¥è·å–å­˜å‚¨å…ƒç´ çš„ä¸ªæ•° æ•°ç»„å­˜å‚¨çš„æ•°æ®æ˜¯æœ‰åºçš„ã€å¯ä»¥é‡å¤çš„ã€‚å­˜å‚¨æ•°æ®çš„ç‰¹ç‚¹å•ä¸€ï¼Œå¦‚æœè¦æ±‚å­˜å‚¨ä¸ºæ— åºçš„ä¸å¯é‡å¤çš„ï¼Œåˆ™æ— æ³•æ»¡è¶³ é›†åˆ é›†åˆå¯ä»¥å­˜å‚¨æ•°é‡ä¸ç­‰çš„å¤šä¸ªå¯¹è±¡ï¼Œè¿˜å¯ç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„å…³è”æ•°ç»„ é›†åˆæ¡†æ¶æ¦‚è¿° Javaé›†åˆå¯åˆ†ä¸ºCollectionå’ŒMapä¸¤ç§ä½“ç³» Collectionæ¥å£ï¼šå•åˆ—æ•°æ®ï¼Œå®šä¹‰äº†å­˜å–ä¸€ç»„å¯¹è±¡çš„æ–¹æ³•çš„é›†åˆ Listï¼šå…ƒç´ æœ‰åºã€å¯é‡å¤çš„é›†åˆ Setï¼šå…ƒç´ æ— åºã€ä¸å¯é‡å¤çš„é›†åˆ Mapæ¥å£ï¼šåŒåˆ—æ•°æ®ï¼Œä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»&quot;key-valueå¯¹&quot;çš„é›†åˆ Collectionæ¥å£ Collectionæ˜¯Listã€Setå’ŒQueueæ¥å£çš„çˆ¶æ¥å£ï¼Œè¯¥æ¥å£é‡Œå®šä¹‰çš„æ–¹æ³•å³å¯ç”¨äºæ“ä½œSeté›†åˆï¼Œä¹Ÿå¯ç”¨äºæ“ä½œListå’ŒQueueé›†åˆ JDKä¸æä¾›æ­¤æ¥å£çš„ä»»ä½•ç›´æ¥å®ç°ï¼Œè€Œæ˜¯æä¾›æ›´å…·ä½“çš„å­æ¥å£(å¦‚ï¼šSetå’ŒList)å®ç°ã€‚ Java5ä¹‹å‰ï¼ŒJavaé›†åˆä¼šä¸¢å¤±å®¹å™¨ä¸­æ‰€æœ‰å¯¹è±¡çš„æ•°æ®ç±»å‹ï¼ŒæŠŠæ‰€æœ‰å¯¹è±¡éƒ½å½“æˆObjectç±»å‹å¤„ç†ï¼šä»JDK5.0å¢åŠ äº†æ³›å‹ä»¥åï¼ŒJavaé›†åˆå¯ä»¥è®°ä½å®¹å™¨ä¸­å¯¹è±¡çš„æ•°æ®ç±»å‹ Collectionæ¥å£æ–¹æ³• æ–¹æ³• ç®€ä»‹ add(Object obj) å°†å…ƒç´ objæ·»åŠ åˆ°é›†åˆä¸­ addAll(Collection coll) å°†collé›†åˆä¸­å…ƒç´ æ·»åŠ åˆ°å½“å‰é›†åˆä¸­ int size() è·å–æ·»åŠ çš„å…ƒç´ ä¸ªæ•° void clear() å°†é›†åˆæ¸…ç©º boolean isEmpty() åˆ¤æ–­å½“å‰é›†åˆæ˜¯å¦ä¸ºç©º boolean contains(Object obj) åˆ¤æ–­å½“å‰é›†åˆæ˜¯å¦åŒ…å«objï¼Œæ˜¯é€šè¿‡å…ƒç´ çš„equalsæ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ boolean containsAll(Collection c) ä¹Ÿæ˜¯è°ƒç”¨å…ƒç´ çš„equalsæ–¹æ³•æ¥æ¯”è¾ƒçš„ã€‚æ‹¿ä¸¤ä¸ªé›†åˆçš„å…ƒç´ æŒ¨ä¸ªæ¯”è¾ƒã€‚åˆ¤æ–­cä¸­çš„å…ƒç´ æ˜¯å¦éƒ½å­˜åœ¨äºå½“å‰é›†åˆä¸­ boolean remove(Object obj) é€šè¿‡å…ƒç´ çš„equalsæ–¹æ³•åˆ¤æ–­æ˜¯å¦æ˜¯è¦åˆ é™¤çš„é‚£ä¸ªå…ƒç´ ã€‚åªä¼šåˆ é™¤æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´  boolean removeAll(Collection coll) å–å½“å‰é›†åˆä¸collçš„å·®é›† boolean retainAll(Collection c) æŠŠäº¤é›†çš„ç»“æœå­˜åœ¨å½“å‰é›†åˆä¸­ï¼Œä¸å½±å“c boolean equals(Object obj) åˆ¤æ–­é›†åˆæ˜¯å¦ç›¸åŒï¼Œæœ‰åºæ— åºå…·ä½“æƒ…å†µåˆ†æ Object[] toArray() è½¬æˆå¯¹è±¡æ•°ç»„ int hashCode() è·å–å½“å‰é›†åˆå“ˆå¸Œå€¼ iterator() è¿”å›Iteratorçš„å®ä¾‹(è¿­ä»£å™¨å¯¹è±¡)ï¼Œç”¨äºé›†åˆéå† //æ³¨æ„ï¼š //å°†æ•°ç»„è½¬ä¸ºé›†åˆï¼Œè¯¥æ–¹æ³•è¿”å›çš„Listé›†åˆï¼Œæ—¢ä¸æ˜¯ArrayListå®ä¾‹ï¼Œä¹Ÿä¸æ˜¯Vectorå®ä¾‹ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„Listé›†åˆã€‚ Arrays.asList(T...a); //å¦‚æœä¼ å…¥çš„å‚æ•°ä½åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„åˆ™ä¼šè®²æ•´ä¸ªæ•°ç»„è¯†åˆ«ä¸ºä¸€ä¸ªå…ƒç´  Arrays.asList(new int[]{xxx,xxx}); //åº”å½“ä¼ å…¥å¼•ç”¨æ•°æ®ç±»å‹çš„æ•°ç»„ï¼Œæ‰ä¼šå°†å…¶è¯†åˆ«ä¸ºå¤šä¸ªå…ƒç´  Arrays.asList(new Integer[]{xxx,xxx}); Arrays.asList(xxx,xxx;) Iteratorè¿­ä»£å™¨æ¥å£ Iterator å¯¹è±¡ç§°ä¸ºè¿­ä»£å™¨ï¼ˆè®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼‰ï¼Œä¸»è¦ç”¨äºéå† Collection é›†åˆä¸­çš„å…ƒç´ ã€‚ GOF ç»™è¿­ä»£å™¨æ¨¡å¼çš„å®šä¹‰ä¸ºï¼šæä¾›ä¸€ç§æ–¹æ³•è®¿é—®ä¸€ä¸ªå®¹å™¨ (container) å¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸éœ€æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚ã€‚ è¿­ä»£å™¨æ¨¡å¼ï¼Œå°±æ˜¯ä¸ºå®¹å™¨è€Œç”Ÿã€‚ ç±»ä¼¼äºâ€œå…¬äº¤è½¦ä¸Šçš„å”®ç¥¨å‘˜â€ã€â€œç«è½¦ä¸Šçš„ä¹˜åŠ¡å‘˜â€ã€‚ Collection æ¥å£ç»§æ‰¿äº† java.lang.Iterable æ¥å£ï¼Œè¯¥æ¥å£æœ‰ä¸€ä¸ª iterator() æ–¹æ³•ï¼Œé‚£ä¹ˆæ‰€æœ‰å®ç°äº† Collection æ¥å£çš„é›†åˆç±»éƒ½æœ‰ä¸€ä¸ª iterator() æ–¹æ³•ï¼Œç”¨ä»¥è¿”å›ä¸€ä¸ªå®ç°äº†Iterator æ¥å£çš„å¯¹è±¡ ã€‚ Iterator ä»…ç”¨äºéå†é›†åˆ Iterator æœ¬èº«å¹¶ä¸æä¾›æ‰¿è£…å¯¹è±¡çš„èƒ½åŠ›ã€‚å¦‚æœéœ€è¦åˆ›å»ºIteratorå¯¹è±¡ï¼Œåˆ™å¿…é¡»æœ‰ä¸€ä¸ªè¢«è¿­ä»£çš„é›†åˆã€‚ é›†åˆå¯¹è±¡æ¯æ¬¡è°ƒç”¨ iterator() æ–¹æ³•éƒ½å¾—åˆ°ä¸€ä¸ªå…¨æ–°çš„è¿­ä»£å™¨å¯¹è±¡ ï¼Œé»˜è®¤æ¸¸æ ‡éƒ½åœ¨é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰ ã€‚ //hasNext()æ˜¯å¦å­˜åœ¨ä¸‹ä¸€ä¸ªå…ƒç´  while(iterator.hasNext()){ //next()è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´  sout(iterator.next()); //remove()åˆ é™¤iteratorè¿”å›çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªnext()çŠ¯æ³•ååªèƒ½æ¥ä¸€ä¸ªremove()æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ¥IllegalStateExceptionå¼‚å¸¸ iterator.remove(); } Enumerationæ¥å£ Iteratorè¿­ä»£å™¨çš„å¤è€ç‰ˆæœ¬hasNext() -&gt; hasMoreElements()next() -&gt; nextElement() foreachå¾ªç¯éå†é›†åˆå…ƒç´  JDK5.0æä¾›äº†foreachå¾ªç¯è¿­ä»£è®¿é—®Collectionå’Œæ•°ç»„ éå†æ“ä½œä¸éœ€è¦è·å–Collectionå’Œæ•°ç»„çš„é•¿åº¦ï¼Œæ— éœ€ä½¿ç”¨ç´¢å¼•è®¿é—®å…ƒç´  éå†é›†åˆçš„åº•å±‚è°ƒç”¨Iteratorå®Œæˆæ“ä½œ foreachè¿˜å¯ä»¥ç”¨æ¥éå†æ•°ç»„ //ç›¸å½“äºæŠŠè¦éå†ç»“æ„ä¸­çš„ä¸€ä¸ªå…ƒç´ èµ‹å€¼ç»™äº†è‡ªå®šä¹‰çš„å…ƒç´ åç§°ï¼Œæ”¹å˜è‡ªå®šä¹‰å…ƒç´ åç§°çš„å†…å®¹ä¸ä¼šæ”¹å˜åŸæ¥çš„é›†åˆå†…å®¹ for(è¦éå†çš„å…ƒç´ ç±»å‹ éå†åè‡ªå®šä¹‰å…ƒç´ åç§° : è¦éå†çš„ç»“æ„åç§°){ å¯¹éå†å…ƒç´ çš„æ“ä½œ; } Listæ¥å£ ç®€ä»‹ é‰´äº Java ä¸­æ•°ç»„ç”¨æ¥å­˜å‚¨æ•°æ®çš„å±€é™æ€§ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ List æ›¿ä»£æ•°ç»„ List é›†åˆç±»ä¸­å…ƒç´ æœ‰åºã€ä¸”å¯é‡å¤ï¼Œé›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰å…¶å¯¹åº”çš„é¡ºåºç´¢å¼•ã€‚ List å®¹å™¨ä¸­çš„å…ƒç´ éƒ½å¯¹åº”ä¸€ä¸ªæ•´æ•°å‹çš„åºå·è®°è½½å…¶åœ¨å®¹å™¨ä¸­çš„ä½ç½®ï¼Œå¯ä»¥æ ¹æ®åºå·å­˜å–å®¹å™¨ä¸­çš„å…ƒç´ ã€‚ JDK API ä¸­ List æ¥å£çš„å®ç°ç±»å¸¸ç”¨çš„æœ‰ï¼š ArrayList ã€ LinkedList å’Œ Vector ã€‚ éƒ½å®ç°äº†Listæ¥å£ï¼Œå­˜å‚¨æ•°æ®ç‰¹ç‚¹ç›¸åŒï¼Œå­˜å‚¨æœ‰åºçš„å¯é‡å¤çš„æ•°æ® ArrayListä½œä¸ºListæ¥å£çš„ä¸»è¦å®ç°ç±»ï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼Œåº•å±‚ä½¿ç”¨Object[]å­˜å‚¨ Vectorä½œä¸ºListæ¥å£çš„å¤è€å®ç°ç±»ï¼Œçº¿ç¨‹å®‰å…¨çš„ï¼Œæ•ˆç‡ä½ï¼Œåº•å±‚ä½¿ç”¨Object[]å­˜å‚¨ LinkedListåº•å±‚ä½¿ç”¨åŒå‘é“¾è¡¨å­˜å‚¨å¯¹äºé¢‘ç¹æ’å…¥åˆ é™¤æ“ä½œæ•ˆç‡è¾ƒArrayListé«˜ ArrayListæºç åˆ†æ JDK7ä¸­ //åº•å±‚åˆ›å»ºé•¿åº¦ä¸º10çš„Objectæ•°ç»„elementData ArrayList list = new ArrayList(); //elementData[0] = new Integer(123) //å½“æ­¤æ¬¡æ·»åŠ å¯¼è‡´elementDataå®¹é‡ä¸å¤Ÿï¼Œåˆ™æ‰©å®¹ï¼Œæ‰©å¤§åˆ°åŸæ¥çš„1.5å€ list.add(123); //å¼€å‘ä¸­å¸¸ä½¿ç”¨new ArrayList(int capacity);åœ¨å®ä¾‹åŒ–æ—¶å…ˆå®šä¹‰å®¹é‡å¤§å° JDK8ä¸­ //åº•å±‚åˆ›å»ºé•¿åº¦ä¸º0çš„Objectæ•°ç»„elementData ArrayList list = new ArrayList(); //ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ æ—¶åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º10çš„æ•°ç»„ //åç»­æ·»åŠ æ‰©å®¹æ“ä½œä¸JDK7 ç›¸åŒ list.add(123); //JDK7ä¸­åˆ›å»ºç±»ä¼¼äºå•ä¾‹çš„é¥¿æ±‰å¼ï¼Œè€ŒJDK8ä¸­ç±»ä¼¼æ‡’æ±‰å¼èŠ‚çœå†…å­˜ LinkedListæºç åˆ†æ //LinkedListå†…éƒ¨æ²¡æœ‰å£°æ˜æ•°ç»„ï¼Œè€Œæ˜¯å®šä¹‰äº†Nodeç±»å‹çš„firstå’Œlastï¼Œç”¨äºè®°å½•é¦–æœ«å…ƒç´ ã€‚ //åŒæ—¶ï¼Œå®šä¹‰å†…éƒ¨ç±»Nodeï¼Œä½œä¸ºLinkedListä¸­ä¿å­˜æ•°æ®çš„åŸºæœ¬ç»“æ„ã€‚ //Nodeé™¤äº†ä¿å­˜æ•°æ®ï¼Œè¿˜å®šä¹‰äº†ä¸¤ä¸ªå˜é‡ï¼š //prevå˜é‡è®°å½•å‰ä¸€ä¸ªå…ƒç´ çš„ä½ç½®ï¼Œ //nextå˜é‡è®°å½•ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä½ç½® LinkedList list = new LinkedList(); //å°†123å°è£…åˆ°Nodeä¸­ä¹‹åæ·»åŠ åˆ°é“¾è¡¨å°¾éƒ¨ list.add(123); Vectoræºç åˆ†æ ä¸ArrayListç±»ä¼¼ï¼Œåˆ›å»ºé•¿åº¦ä¸º10çš„æ•°ç»„ï¼Œä½†æ˜¯æ‰©å®¹ä¸º2å€(ArrayListä¸º1.5å€)å…³ç³» Listæ¥å£æ–¹æ³• Listé™¤äº†ä»Collectioné›†åˆç»§æ‰¿çš„æ–¹æ³•å¤–ï¼ŒListé›†åˆé‡Œæ·»åŠ äº†ä¸€äº›æ ¹æ®ç´¢å¼•æ¥æ“ä½œé›†åˆå…ƒç´ çš„æ–¹æ³• ã€‚ æ–¹æ³• æè¿° void add(int index, Object ele) åœ¨indexä½ç½®æ’å…¥eleå…ƒç´  boolean addAll(int index, Collection eles) ä» index ä½ç½®å¼€å§‹å°† eles ä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ è¿›æ¥ Object get( int index) è·å–æŒ‡å®š index ä½ç½®çš„å…ƒç´  int indexOf (Object obj) è¿”å› obj åœ¨é›†åˆä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½® int lastIndexOf (Object obj) è¿”å› obj åœ¨å½“å‰é›†åˆä¸­æœ«æ¬¡å‡ºç°çš„ä½ç½® Object remove( int index) ç§»é™¤æŒ‡å®š index ä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›æ­¤å…ƒç´  Object set( int index, Object ele) è®¾ç½®æŒ‡å®š index ä½ç½®çš„å…ƒç´ ä¸º ele List subList(int fromIndex , int toIndex) è¿”å›ä» fromIndex åˆ° toIndexä½ç½®çš„å­é›†åˆå·¦é—­å³å¼€ å¸¸ç”¨æ–¹æ³• å¢ï¼šadd(Object obj)åˆ ï¼šremove(int index)/remove(Object obj)æ”¹ï¼šset(int index, Object obj)æŸ¥ï¼šget(int index)æ’ï¼šadd(int index, Object obj)é•¿åº¦ï¼šsize()éå†ï¼š1. Iterator 2. foreach 3. æ™®é€šforå¾ªç¯ LinkedListç‰¹æœ‰æ–¹æ³• void addFirst (Object obj)void addLast (Object obj)Object getFirst()Object getLast()Object removeFirst()Object removeLast() Vectorç‰¹æœ‰æ–¹æ³• void addElement (Object obj)void insertElementAt (Object obj,int index)void setElementAt (Object obj,int index)void removeElement (Object obj)void removeAllElements() è¯·é—®ArrayList/LinkedList/Vector çš„å¼‚åŒè°ˆè°ˆä½ çš„ç†è§£ï¼ŸArrayListåº•å±‚æ˜¯ä»€ä¹ˆï¼Ÿæ‰©å®¹æœºåˆ¶ï¼ŸVectorå’ŒArrayListçš„æœ€å¤§åŒºåˆ« ArrayListå’ŒLinkedListçš„å¼‚åŒäºŒè€…éƒ½çº¿ç¨‹ä¸å®‰å…¨ï¼Œç›¸å¯¹çº¿ç¨‹å®‰å…¨çš„Vector ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ã€‚æ­¤å¤–ï¼ŒArrayList æ˜¯å®ç°äº†åŸºäºåŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œ LinkedList åŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ã€‚å¯¹äºéšæœºè®¿é—® get å’Œ setï¼ŒArrayList è§‰å¾—ä¼˜äº LinkedListï¼Œå› ä¸º LinkedList è¦ç§»åŠ¨æŒ‡é’ˆã€‚å¯¹äºæ–°å¢å’Œåˆ é™¤æ“ä½œadd(ç‰¹æŒ‡æ’å…¥)å’Œremoveï¼ŒLinkedListæ¯”è¾ƒå ä¼˜åŠ¿ï¼Œå› ä¸º ArrayList è¦ç§»åŠ¨æ•°æ®ã€‚ ArrayList å’Œ Vector çš„åŒºåˆ«Vectorå’Œ ArrayList å‡ ä¹æ˜¯å®Œå…¨ç›¸åŒçš„å”¯ä¸€çš„åŒºåˆ«åœ¨äº Vector æ˜¯åŒæ­¥ç±» ( synchronized)ï¼Œå±äºå¼ºåŒæ­¥ç±»ã€‚å› æ­¤å¼€é”€å°±æ¯” ArrayList è¦å¤§ï¼Œè®¿é—®è¦æ…¢ã€‚æ­£å¸¸æƒ…å†µä¸‹ å¤§å¤šæ•°çš„ Java ç¨‹åºå‘˜ä½¿ç”¨ArrayList è€Œä¸æ˜¯ Vector, å› ä¸ºåŒæ­¥å®Œå…¨å¯ä»¥ç”±ç¨‹åºå‘˜è‡ªå·±æ¥æ§åˆ¶ã€‚ Vector æ¯æ¬¡æ‰©å®¹è¯·æ±‚å…¶å¤§å°çš„ 2 å€ç©ºé—´ï¼Œè€Œ ArrayList æ˜¯ 1.5 å€ã€‚ Vector è¿˜æœ‰ä¸€ä¸ªå­ ç±» Stackã€‚ Setæ¥å£ Setæ¥å£æ˜¯Collectionçš„å­æ¥å£ï¼Œsetæ¥å£æ²¡æœ‰æä¾›é¢å¤–çš„æ–¹æ³• Seté›†åˆä¸å…è®¸åŒ…å«ä¸‹åŒçš„å…ƒç´ ï¼Œå¦‚æœè¯•æŠŠä¸¤ä¸ªç›¸åŒçš„å…ƒç´ åŠ å…¥åˆ°åŒä¸€ä¸ªSeté›†åˆä¸­ï¼Œåˆ™æ·»åŠ æ“ä½œå¤±è´¥ Setåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸åŒä¸æ˜¯ä½¿ç”¨==è¿ç®—ç¬¦ï¼Œè€Œæ˜¯æ ¹æ®equals()æ–¹æ³• Setæ¥å£ä¸­æ²¡æœ‰å®šä¹‰æ–°çš„æ–¹æ³• HashSetï¼šä¸»è¦å®ç°ç±»ï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼Œå¯ä»¥å­˜å‚¨null LinkedHashSetï¼šHashSetçš„å­ç±»ï¼Œéå†å…¶å†…éƒ¨æ•°æ®æ—¶å¯ä»¥æŒ‰ç…§æ·»åŠ é¡ºåºéå† TreeSetï¼šå¯ä»¥æŒ‰ç…§æ·»åŠ å…ƒç´ çš„æŒ‡å®šå±æ€§è¿›è¡Œæ’åº ç‰¹ç‚¹ æ— åºæ€§ï¼šä¸ç­‰äºéšæœºæ€§(å¤šæ¬¡éå†çš„ç»“æœï¼Œé¡ºåºæ˜¯ç›¸åŒçš„)ï¼Œå­˜å‚¨çš„æ•°æ®åœ¨åº•å±‚æ•°ç»„ä¸­å¹¶éæŒ‰ç…§æ•°ç»„ç´¢å¼•é¡ºåºæ·»åŠ è€Œæ˜¯æŒ‰ç…§æ•°æ®å“ˆå¸Œå€¼æ·»åŠ  ä¸å¯é‡å¤æ€§ï¼šä¿è¯æ·»åŠ çš„å…ƒç´ æŒ‰ç…§equals()åˆ¤æ–­æ—¶ä¸èƒ½è¿”å›trueï¼Œå³ç›¸åŒçš„å…ƒç´ èŒèƒ½æ·»åŠ ä¸€ä¸ª HashSet HashSet æ˜¯ Set æ¥å£çš„å…¸å‹å®ç°ï¼Œå¤§å¤šæ•°æ—¶å€™ä½¿ç”¨ Set é›†åˆæ—¶éƒ½ä½¿ç”¨è¿™ä¸ªå®ç°ç±»ã€‚ HashSetçš„åº•å±‚ä¸ºHashMapï¼Œæ¯ä¸ªentryä¸­çš„keyä¸åŒï¼Œä½†æ˜¯valueè®¾å®šä¸ºåŒä¸€ä¸ªå€¼ HashSet æŒ‰ Hash ç®—æ³•æ¥å­˜å‚¨é›†åˆä¸­çš„å…ƒç´ ï¼Œå› æ­¤å…·æœ‰å¾ˆå¥½çš„å­˜å–ã€æŸ¥æ‰¾ã€åˆ é™¤æ€§èƒ½ ã€‚ HashSet å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š ä¸èƒ½ä¿è¯å…ƒç´ çš„æ’åˆ—é¡ºåº HashSet ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ é›†åˆå…ƒç´ å¯ä»¥æ˜¯ null HashSet é›†åˆåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ ç›¸ç­‰çš„æ ‡å‡†ï¼šä¸¤ä¸ªå¯¹è±¡é€šè¿‡ hashCode () æ–¹æ³•æ¯”è¾ƒç›¸ç­‰ï¼Œå¹¶ä¸”ä¸¤ä¸ªå¯¹è±¡çš„ equals() æ–¹æ³•è¿”å›å€¼ä¹Ÿç›¸ç­‰ ã€‚ å¯¹äºå­˜æ”¾åœ¨ Set å®¹å™¨ä¸­çš„å¯¹è±¡ï¼Œå¯¹åº”çš„ç±»ä¸€å®šè¦é‡å†™ equals() å’Œ hashCode(Object obj) æ–¹æ³•ï¼Œä»¥å®ç°å¯¹è±¡ç›¸ç­‰è§„åˆ™ ã€‚å³ï¼š&quot;ç›¸ç­‰çš„å¯¹è±¡å¿…é¡»å…·æœ‰ç›¸ç­‰çš„æ•£åˆ—ç &quot;ã€‚ å‘ HashSet ä¸­æ·»åŠ å…ƒç´ çš„è¿‡ç¨‹ï¼š å½“å‘ HashSet é›†åˆä¸­å­˜å…¥ä¸€ä¸ªå…ƒç´ æ—¶ HashSet ä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„ hashCode() æ–¹æ³•æ¥å¾—åˆ°è¯¥å¯¹è±¡çš„ hashCode å€¼ ç„¶åæ ¹æ® hashCode å€¼é€šè¿‡æŸç§æ•£åˆ—å‡½æ•°å†³å®šè¯¥å¯¹è±¡åœ¨ HashSet åº•å±‚æ•°ç»„ä¸­çš„å­˜å‚¨ä½ç½®ã€‚ ï¼ˆè¿™ä¸ªæ•£åˆ—å‡½æ•°ä¼šä¸åº•å±‚æ•°ç»„çš„é•¿åº¦ç›¸è®¡ç®—å¾—åˆ°åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡ å¹¶ä¸”è¿™ç§æ•£åˆ—å‡½æ•°è®¡ç®—è¿˜å°½å¯èƒ½ä¿è¯èƒ½å‡åŒ€å­˜å‚¨å…ƒç´ ï¼Œè¶Šæ˜¯æ•£åˆ—åˆ†å¸ƒï¼Œè¯¥æ•£åˆ—å‡½æ•°è®¾è®¡çš„è¶Šå¥½ï¼‰ å¦‚æœä¸¤ä¸ªå…ƒç´ çš„ hashCode() å€¼ç›¸ç­‰ ä¼šå†ç»§ç»­è°ƒç”¨ equals() æ–¹æ³• å¦‚æœ equals() æ–¹æ³•ç»“æœä¸º trueæ·»åŠ å¤±è´¥å¦‚æœä¸ºfalse é‚£ä¹ˆä¼šä¿å­˜è¯¥å…ƒç´  ä½†æ˜¯è¯¥æ•°ç»„çš„ä½ç½®å·²ç»æœ‰å…ƒç´ äº†é‚£ä¹ˆä¼šé€šè¿‡é“¾è¡¨çš„æ–¹å¼ç»§ç»­é“¾æ¥ã€‚(JDK7ä¸­æ–°å…ƒç´ æ”¾åœ¨æ•°ç»„ä¸­å¹¶ä½œä¸ºå¤´èŠ‚ç‚¹æŒ‡å‘æ—§å…ƒç´ ï¼ŒJDK8ä¸­æ—§å…ƒç´ ä»æ”¾åœ¨æ•°ç»„ä¸­ä½œä¸ºå¤´èŠ‚ç‚¹åŒæ—¶é“¾è¡¨å°¾éƒ¨æŒ‡å‘æ–°å…ƒç´ ã€‚ä¸ƒä¸Šå…«ä¸‹) é‡å†™hashCode()æ–¹æ³•çš„åŸºæœ¬åŸåˆ™ åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼ŒåŒä¸€ä¸ªå¯¹è±¡å¤šæ¬¡è°ƒç”¨hashCode()æ–¹æ³•åº”è¯¥è¿”å›ç›¸åŒçš„å€¼ å½“ä¸¤ä¸ªå¯¹è±¡çš„equals()æ–¹æ³•æ¯”è¾ƒè¿”å›trueæ—¶ï¼Œè¿™è¿ä¸ªå¯¹è±¡çš„hashCode()æ–¹æ³•çš„è¿”å›å€¼ä¹Ÿåº”å½“ç›¸ç­‰ å¯¹è±¡ä¸­ç”¨ä½œequals()æ–¹æ³•æ¯”è¾ƒçš„Fieldï¼Œéƒ½åº”è¯¥ç”¨æ¥è®¡ç®—hashCodeå€¼ ä¿®æ”¹equalsæ–¹æ³•æ—¶ä¸€å®šè¦åŒæ—¶ä¿®æ”¹hashCodeæ–¹æ³• å¦‚æœä¸¤ä¸ªå…ƒç´ çš„ equals() æ–¹æ³•è¿”å› true ï¼Œä½†å®ƒä»¬çš„ hashCode () è¿”å›å€¼ä¸ç›¸ç­‰ï¼Œ hashSet å°†ä¼šæŠŠå®ƒä»¬å­˜å‚¨åœ¨ä¸åŒçš„ä½ç½®ï¼Œä½†ä¾ç„¶å¯ä»¥æ·»åŠ æˆåŠŸã€‚ åº•å±‚ä¹Ÿæ˜¯æ•°ç»„ï¼Œåˆå§‹å®¹é‡ä¸º16ï¼Œå½“å¦‚æœä½¿ç”¨ç‡è¶…è¿‡0.75ï¼Œå°±ä¼šæ‰©å¤§å®¹é‡ä¸ºåŸæ¥çš„ä¸¤å€ åº•å±‚ä¸ºHashMap LinkedHashSet LinkedHashSetæ—¶HashSetçš„å­ç±» LinkedHashSetæ ¹æ®å…ƒç´ çš„hashCodeå€¼æ¥å†³å®šå…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼Œä½†å®ƒåŒæ—¶ä½¿ç”¨åŒå‘é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ¬¡åºï¼Œè¿™æ˜¯çš„å…ƒç´ çœ‹èµ·æ¥æ˜¯ä»¥æ’å…¥é¡ºåºä¿å­˜çš„ LinkedHashSetæ’å…¥æ€§èƒ½ç•¥ä½äºHashSetï¼Œä½†åœ¨è¿­ä»£è®¿é—®Seté‡Œçš„å…¨éƒ¨å…ƒç´ æ—¶æœ‰å¾ˆå¥½çš„æ€§èƒ½ LinkedHashSetä¸å…è®¸é›†åˆå…ƒç´ é‡å¤ TreeSet TreeSet æ˜¯ SortedSet æ¥å£çš„å®ç°ç±»ï¼Œ TreeSet å¯ä»¥ç¡®ä¿é›†åˆå…ƒç´ å¤„äºæ’åºçŠ¶æ€ã€‚ TreeSet åº•å±‚ä½¿ç”¨çº¢é»‘æ ‘ç»“æ„å­˜å‚¨æ•°æ® æ–°å¢çš„æ–¹æ³•å¦‚ä¸‹(äº†è§£) Comparator comparator() Object first() Object last() Object lower(Object e) Object higher(Object e) SortedSet subSet (fromElement , toElement) SortedSet headSet (toElement) SortedSet tailSet (fromElement) TreeSet ä¸¤ç§æ’åºæ–¹æ³•ï¼š è‡ªç„¶æ’åº å’Œ å®šåˆ¶æ’åº ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ TreeSet é‡‡ç”¨è‡ªç„¶æ’åºã€‚ å‘TreeSetä¸­æ·»åŠ çš„å¯¹è±¡ï¼Œè¦æ±‚æ˜¯ç›¸åŒç±»çš„å¯¹è±¡ï¼Œä¸”å®ç°comparableæ¥å£ è‡ªç„¶æ’åºä¸­æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸åŒçš„æ ‡å‡†ä¸ºcompareTo()è¿”å›å€¼ï¼Œä¸å†æ˜¯equals() å®šåˆ¶æ’åºTreeSet set = new TreeSet(new comparator(Object o1, Object o2){}); Mapæ¥å£ Map ä¸ Collection å¹¶åˆ—å­˜åœ¨ã€‚ç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ® key-value Map ä¸­çš„keyå’Œvalueéƒ½å¯ä»¥æ˜¯ä»»ä½•å¼•ç”¨ç±»å‹çš„æ•°æ® Map ä¸­çš„keyç”¨Setæ¥å­˜æ”¾ï¼Œ ä¸å…è®¸é‡å¤ ï¼Œå³åŒä¸€ä¸ªMapå¯¹è±¡æ‰€å¯¹åº”çš„ç±»ï¼Œé¡»é‡å†™ hashCode()å’Œ equals()æ–¹æ³•ï¼Œvalueç”¨Collectionå­˜æ”¾ï¼Œkey-valueå¯¹ç”¨Setå­˜æ”¾ å¸¸ç”¨ String ç±»ä½œä¸º Map çš„â€œé”®â€ key å’Œ value ä¹‹é—´å­˜åœ¨å•å‘ä¸€å¯¹ä¸€å…³ç³»ï¼Œå³é€šè¿‡æŒ‡å®šçš„ key æ€»èƒ½æ‰¾åˆ°å”¯ä¸€çš„ã€ç¡®å®šçš„ value Map æ¥å£çš„å¸¸ç”¨å®ç°ç±»ï¼š HashMap ã€ TreeMap ã€ LinkedHashMap å’ŒProperties ã€‚ å…¶ä¸­ï¼Œ HashMapæ˜¯Mapæ¥å£ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„å®ç°ç±» HashMapï¼šä½œä¸ºMapçš„ä¸»è¦å®ç°ç±»ï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼Œå¯ä»¥å­˜å‚¨nullçš„keyå’Œvalue Hashtableï¼šå¤è€çš„å®ç°ç±»ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡ä½ï¼Œä¸å¯ä»¥å­˜å‚¨nullçš„keyå’Œvalue LinkedHashMapï¼šå¯ä»¥æŒ‰ç…§æ·»åŠ é¡ºåºéå†ï¼Œå¯¹äºé¢‘ç¹çš„éå†æ“ä½œï¼Œæ•ˆç‡é«˜äºHashMap TreeMapï¼šæŒ‰key-valueæ’åºå®ç°æ’åºéå†ï¼Œæ­¤æ—¶è€ƒè™‘keyçš„è‡ªç„¶æ’åºæˆ–å®šåˆ¶æ’åºï¼Œåº•å±‚ä½¿ç”¨çº¢é»‘æ ‘ å¸¸ç”¨æ–¹æ³• æ–¹æ³• æè¿° Object put(Object key,Object value) å°†æŒ‡å®škey-valueæ·»åŠ åˆ°æˆ–ä¿®æ”¹å½“å‰ map å¯¹è±¡ä¸­ï¼Œå…ˆå°è£…ä¸ºEntryå†æ·»åŠ åˆ°Mapä¸­ void putAll(Map m) å°† m ä¸­çš„æ‰€æœ‰ key-value å¯¹å­˜æ”¾åˆ°å½“å‰ map ä¸­ Object remove(Object key) ç§»é™¤æŒ‡å®š key çš„ key-value å¯¹ï¼Œå¹¶è¿”å› value void clear() æ¸…ç©ºå½“å‰ map ä¸­çš„æ‰€æœ‰æ•°æ® Object get(Object key) è·å–æŒ‡å®š key å¯¹åº”çš„ value boolean containsKey(Object key) æ˜¯å¦åŒ…å«æŒ‡å®šçš„ key boolean containsValue(Object value) æ˜¯å¦åŒ…å«æŒ‡å®šçš„ value int size() è¿”å› map ä¸­ key-value å¯¹çš„ä¸ªæ•° boolean isEmpty() åˆ¤æ–­å½“å‰ map æ˜¯å¦ä¸ºç©º boolean equals(Object obj) åˆ¤æ–­å½“å‰ map å’Œå‚æ•°å¯¹è±¡ obj æ˜¯å¦ç›¸ç­‰ Set keySet() è¿”å›æ‰€æœ‰ key æ„æˆçš„ Set é›†åˆ Collection values() è¿”å›æ‰€æœ‰ value æ„æˆçš„ Collection é›†åˆ Set entrySet() è¿”å›æ‰€æœ‰ key-value å¯¹æ„æˆçš„ Set é›†åˆ HashMap HashMap æ˜¯ Map æ¥å£ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„å®ç°ç±»ã€‚ å…è®¸ä½¿ç”¨ null é”®å’Œ null å€¼ï¼Œä¸HashSetä¸€æ ·ï¼Œä¸ä¿è¯æ˜ å°„çš„é¡ºåºã€‚ æ‰€æœ‰çš„ key æ„æˆçš„é›†åˆæ˜¯ Set: æ— åºçš„ã€ä¸å¯é‡å¤çš„ã€‚æ‰€ä»¥ï¼Œkeyæ‰€åœ¨çš„ç±»è¦é‡å†™ï¼šequals() å’Œ hashCode() æ‰€æœ‰çš„ value æ„æˆçš„é›†åˆæ˜¯ Collection: æ— åºçš„ã€å¯ä»¥é‡å¤çš„ã€‚æ‰€ä»¥ï¼Œvalue æ‰€åœ¨çš„ç±»è¦é‡å†™ï¼š equals() ä¸€ ä¸ª key-value æ„æˆä¸€ ä¸ª entry æ‰€æœ‰çš„ entry æ„æˆçš„é›†åˆæ˜¯ Set: æ— åºçš„ã€ä¸å¯é‡å¤çš„ HashMap åˆ¤æ–­ä¸¤ä¸ª key ç›¸ç­‰çš„æ ‡å‡†æ˜¯ï¼šä¸¤ä¸ª key é€šè¿‡ equals() æ–¹æ³•è¿”å› trueã€hashCode å€¼ä¹Ÿç›¸ç­‰ã€‚ HashMap åˆ¤æ–­ä¸¤ä¸ª value ç›¸ç­‰çš„æ ‡å‡†æ˜¯ï¼šä¸¤ä¸ª value é€šè¿‡ equals() æ–¹æ³•è¿”å› true ã€‚ JDK7åŠä¹‹å‰ï¼šåº•å±‚ä¸ºæ•°ç»„+é“¾è¡¨ç»“æ„ JDK8åŠä»¥åï¼šåº•å±‚ä¸ºæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘å®ç° åº•å±‚å®ç° JDK7åŠä¹‹å‰ åº•å±‚åˆ›å»ºäº†é»˜è®¤é•¿åº¦ä¸º16çš„ä¸€ç»´æ•°ç»„Entry[] table HashMapçš„å†…éƒ¨å­˜å‚¨ç»“æ„å…¶å®æ˜¯ æ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆã€‚å½“å®ä¾‹åŒ–ä¸€ä¸ª HashMapæ—¶ç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º Capacity çš„ Entry æ•°ç»„ï¼Œè¿™ä¸ªé•¿åº¦åœ¨å“ˆå¸Œè¡¨ä¸­è¢«ç§°ä¸ºå®¹é‡(capacity), åœ¨è¿™ä¸ªæ•°ç»„ä¸­å¯ä»¥å­˜æ”¾å…ƒç´ çš„ä½ç½®æˆ‘ä»¬ç§°ä¹‹ä¸º æ¡¶ (bucket), æ¯ä¸ªbucket éƒ½æœ‰è‡ªå·±çš„ç´¢å¼•ï¼Œç³»ç»Ÿå¯ä»¥æ ¹æ®ç´¢å¼•å¿«é€Ÿçš„æŸ¥æ‰¾ bucket ä¸­çš„å…ƒç´  ã€‚ æ¯ä¸ª bucket ä¸­å­˜å‚¨ä¸€ä¸ªå…ƒç´ ï¼Œå³ä¸€ä¸ª Entry å¯¹è±¡ï¼Œä½†æ¯ä¸€ä¸ª Entry å¯¹è±¡å¯ä»¥å¸¦ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œç”¨äºæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å› æ­¤ï¼Œåœ¨ä¸€ä¸ªæ¡¶ä¸­ï¼Œå°±æœ‰å¯èƒ½ç”Ÿæˆä¸€ä¸ª Entry é“¾ ã€‚è€Œä¸”ï¼Œæ–°æ·»åŠ çš„å…ƒç´ ä½œä¸ºé“¾è¡¨çš„ head ã€‚ æ·»åŠ å…ƒç´ çš„è¿‡ç¨‹ï¼š å‘HashMap ä¸­æ·»åŠ  entry1 (key, value) éœ€è¦é¦–å…ˆè®¡ç®— entry1 ä¸­ key çš„å“ˆå¸Œå€¼(æ ¹æ®key æ‰€åœ¨ç±»çš„ hashCode() è®¡ç®—å¾—åˆ°ï¼Œæ­¤å“ˆå¸Œå€¼ç»è¿‡å¤„ç†ä»¥åï¼Œå¾—åˆ°åœ¨åº•å±‚ Entry[] æ•°ç»„ä¸­è¦å­˜å‚¨çš„ä½ç½® i ã€‚ å¦‚æœï¼Œä½ç½® i ä¸Šæ²¡æœ‰å…ƒç´ ï¼Œåˆ™ entry 1 ç›´æ¥æ·»åŠ æˆåŠŸ ã€‚ å¦‚æœï¼Œä½ç½® i ä¸Šå·²ç»å­˜åœ¨ entry 2ï¼ˆæˆ–è¿˜æœ‰é“¾è¡¨å­˜åœ¨çš„ entry3ï¼Œ entry4ï¼‰åˆ™éœ€è¦é€šè¿‡å¾ªç¯çš„æ–¹æ³•ï¼Œä¾æ¬¡æ¯”è¾ƒ entry1ä¸­ key å’Œ å…¶ä»–çš„ entryã€‚ å¦‚æœå½¼æ­¤ hash å€¼ä¸åŒï¼Œåˆ™ç›´æ¥æ·»åŠ æˆåŠŸã€‚ å¦‚æœhashå€¼ç›¸åŒï¼Œç»§ç»­æ¯”è¾ƒäºŒè€…æ˜¯å¦ equals ã€‚ å¦‚æœï¼Œè¿”å›å€¼ä¸º trueåˆ™ä½¿ç”¨ entry 1 çš„ valueå»æ›¿æ¢ equals ä¸º true çš„ entry çš„ valueã€‚ å¦‚æœéå†ä¸€éä»¥å å‘ç° æ‰€æœ‰çš„ equals è¿”å›éƒ½ä¸º false, åˆ™ entry 1 ä»å¯æ·»åŠ æˆåŠŸ ã€‚ entry 1 æŒ‡å‘åŸæœ‰çš„ entry å…ƒç´  ã€‚ æ‰©å®¹ï¼šå½“å…ƒç´ ä¸ªæ•°è¶…è¿‡ï¼Œæ•°ç»„å¤§å°*LoadFactor(ä¸€èˆ¬ä¸º0.75)æ—¶ï¼Œæ‰©å®¹ä¸ºåŸæ¥2å€ï¼Œå¹¶é‡æ–°è®¡ç®—å…ƒç´ ä½ç½®ï¼Œè€—è´¹èµ„æºï¼Œæ‰€ä»¥å¦‚æœå¼€å§‹çŸ¥é“å…ƒç´ ä¸ªæ•°ï¼Œå¯ä»¥å¯¹å®¹é‡è¿›è¡Œè®¾å®šã€‚ JDK8åŠä¹‹å ä»Entryæ•°ç»„å˜ä¸ºNodeæ•°ç»„ new hashMap()ä¸ä¼šç›´æ¥åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º16çš„æ•°ç»„ï¼Œé¦–æ¬¡ä½¿ç”¨putæ—¶å†åˆ›å»ºé»˜è®¤é•¿åº¦çš„æ•°ç»„ HashMap çš„å†…éƒ¨å­˜å‚¨ç»“æ„å…¶å®æ˜¯æ•°ç»„+é“¾è¡¨+æ ‘çš„ç»“åˆã€‚ å½“å®ä¾‹åŒ–ä¸€ä¸ªHashMap æ—¶ï¼Œä¼šåˆå§‹åŒ– initialCapacity å’Œ loadFactorï¼Œåœ¨ put ç¬¬ä¸€å¯¹æ˜ å°„å…³ç³»æ—¶ï¼Œç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º initialCapacity çš„ Node æ•°ç»„ï¼Œè¿™ä¸ªé•¿åº¦åœ¨å“ˆå¸Œè¡¨ä¸­è¢«ç§°ä¸ºå®¹é‡ (capacity) åœ¨è¿™ä¸ªæ•°ç»„ä¸­å¯ä»¥å­˜æ”¾å…ƒç´ çš„ä½ç½®æˆ‘ä»¬ç§°ä¹‹ä¸ºæ¡¶ (bucket)ï¼Œæ¯ä¸ª bucket éƒ½æœ‰è‡ªå·±çš„ç´¢å¼•ï¼Œç³»ç»Ÿå¯ä»¥æ ¹æ®ç´¢å¼•å¿«é€Ÿçš„æŸ¥æ‰¾ bucket ä¸­çš„å…ƒç´  æ¯ä¸ª bucket ä¸­å­˜å‚¨ä¸€ä¸ªå…ƒç´ ï¼Œå³ä¸€ä¸ª Node å¯¹è±¡ï¼Œä½†æ¯ä¸€ä¸ª Node å¯¹è±¡å¯ä»¥å¸¦ä¸€ä¸ªå¼•ç”¨å˜é‡ next ç”¨äºæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å› æ­¤ï¼Œåœ¨ä¸€ä¸ªæ¡¶ä¸­ï¼Œå°±æœ‰å¯èƒ½ç”Ÿæˆä¸€ä¸ª Node é“¾ã€‚ ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªä¸€ä¸ª TreeNode å¯¹è±¡ï¼Œæ¯ä¸€ä¸ª TreeNode å¯¹è±¡å¯ä»¥æœ‰ä¸¤ä¸ªå¶å­ç»“ç‚¹ left å’Œ right å› æ­¤ åœ¨ä¸€ä¸ªæ¡¶ä¸­ å°±æœ‰å¯èƒ½ç”Ÿæˆä¸€ä¸ªTreeNode æ ‘ã€‚ è€Œæ–°æ·»åŠ çš„å…ƒç´ ä½œä¸ºé“¾è¡¨çš„ last æˆ–æ ‘çš„å¶å­ç»“ç‚¹ ã€‚(ä¸ƒä¸Šå…«ä¸‹) å½“HashMap ä¸­çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡æ•°ç»„å¤§å°(æ•°ç»„æ€»å¤§å° length, ä¸æ˜¯æ•°ç»„ä¸­ä¸ªæ•°)sizeloadFactor æ—¶ï¼Œå°±ä¼šè¿›è¡Œæ•°ç»„æ‰©å®¹ loadFactor çš„é»˜è®¤å€¼DEFAULT_LOAD_FACTOR ä¸º 0.75 è¿™æ˜¯ä¸€ä¸ªæŠ˜ä¸­çš„å–å€¼ ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹æ•°ç»„å¤§å° DEFAULT_INITIAL_CAPACITY ä¸º 16 é‚£ä¹ˆå½“ HashMap ä¸­å…ƒç´ ä¸ªæ•°è¶…è¿‡160.75=12è¿™ä¸ªå€¼å°±æ˜¯ä»£ç ä¸­çš„ threshold å€¼ä¹Ÿå«åšä¸´ç•Œå€¼çš„æ—¶å€™ï¼Œå°±æŠŠæ•°ç»„çš„å¤§å°æ‰©å±•ä¸º 2*16=32ï¼Œå³æ‰©å¤§ä¸€å€ã€‚ç„¶åé‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œè€Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ¶ˆè€—æ€§èƒ½çš„æ“ä½œ æ‰€ä»¥å¦‚æœæˆ‘ä»¬å·²ç»é¢„çŸ¥HashMap ä¸­å…ƒç´ çš„ä¸ªæ•° é‚£ä¹ˆé¢„è®¾å…ƒç´ çš„ä¸ªæ•°èƒ½å¤Ÿæœ‰æ•ˆçš„æé«˜ HashMap çš„æ€§èƒ½ å½“HashMap ä¸­çš„å…¶ä¸­ä¸€ä¸ªé“¾çš„å¯¹è±¡ä¸ªæ•°å¦‚æœè¾¾åˆ°äº† 8 ä¸ªï¼Œæ­¤æ—¶å¦‚æœ capacity æ²¡æœ‰è¾¾åˆ° 64 ï¼Œé‚£ä¹ˆ HashMap ä¼šå…ˆæ‰©å®¹è§£å†³ï¼Œå¦‚æœå·²ç»è¾¾åˆ°äº† 64 ï¼Œé‚£ä¹ˆè¿™ä¸ªé“¾ä¼šå˜æˆæ ‘ï¼Œç»“ç‚¹ç±»å‹ç”± Node å˜æˆ TreeNode ç±»å‹ã€‚å½“ç„¶ï¼Œå¦‚æœå½“æ˜ å°„å…³ç³»è¢«ç§»é™¤åï¼Œä¸‹æ¬¡ resize æ–¹æ³•æ—¶åˆ¤æ–­æ ‘çš„ç»“ç‚¹ä¸ªæ•°ä½äº 6 ä¸ªï¼Œä¹Ÿä¼šæŠŠ æ ‘å†è½¬ä¸ºé“¾è¡¨ã€‚ LinkedHashMap LinkedHashMap æ˜¯ HashMap çš„ å­ç±» åœ¨ HashMap å­˜å‚¨ç»“æ„çš„åŸºç¡€ä¸Šï¼Œä½¿ç”¨äº†ä¸€å¯¹åŒå‘é“¾è¡¨æ¥è®°å½•æ·»åŠ å…ƒç´ çš„é¡ºåº ä¸ LinkedHashSet ç±»ä¼¼ LinkedHashMap å¯ä»¥ç»´æŠ¤ Map çš„è¿­ä»£ã€‚é¡ºåºï¼šè¿­ä»£é¡ºåºä¸ Key-Value å¯¹çš„æ’å…¥é¡ºåºä¸€è‡´ TreeMap TreeMap å­˜å‚¨ Key-Valueå¯¹æ—¶ï¼Œ éœ€è¦æ ¹æ® key-value å¯¹è¿›è¡Œæ’åºã€‚ TreeMap å¯ä»¥ä¿è¯æ‰€æœ‰çš„ Key-Value å¯¹å¤„äº æœ‰åº çŠ¶æ€ ã€‚ TreeSet åº•å±‚ä½¿ç”¨çº¢é»‘æ ‘ç»“æ„å­˜å‚¨æ•°æ® TreeMap çš„ Key çš„æ’åºï¼š è‡ªç„¶æ’åº TreeMap çš„æ‰€æœ‰çš„ Key å¿…é¡»å®ç° Comparable æ¥å£ï¼Œè€Œä¸”æ‰€æœ‰çš„ Key åº”è¯¥æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œå¦åˆ™å°†ä¼šæŠ›å‡º ClasssCastException å®šåˆ¶æ’åº ï¼šåˆ›å»º TreeMap æ—¶ï¼Œä¼ å…¥ä¸€ä¸ª Comparator å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è´Ÿè´£å¯¹TreeMap ä¸­çš„æ‰€æœ‰ key è¿›è¡Œæ’åºã€‚æ­¤æ—¶ä¸éœ€è¦ Map çš„ Key å®ç°Comparable æ¥å£ TreeMap åˆ¤æ–­ ä¸¤ä¸ª key ç›¸ç­‰çš„æ ‡å‡† ï¼šä¸¤ä¸ª key é€šè¿‡ compareTo() æ–¹æ³•æˆ–è€… compare() æ–¹æ³•è¿”å› 0 ã€‚ Hashtable Hashtable æ˜¯ä¸ªå¤è€çš„ Map å®ç°ç±»ï¼Œ JDK1.0 å°±æä¾›äº†ã€‚ä¸åŒäº HashMapï¼ŒHashtable æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ Hashtable å®ç°åŸç†å’Œ HashMap ç›¸åŒï¼ŒåŠŸèƒ½ç›¸åŒã€‚åº•å±‚éƒ½ä½¿ç”¨å“ˆå¸Œè¡¨ç»“æ„ï¼ŒæŸ¥è¯¢é€Ÿåº¦å¿«ï¼Œå¾ˆå¤šæƒ…å†µä¸‹å¯ä»¥äº’ç”¨ ã€‚ ä¸ HashMap ä¸åŒï¼Œ Hashtable ä¸å…è®¸ä½¿ç”¨ null ä½œä¸º key å’Œ value ä¸ HashMap ä¸€æ ·ï¼Œ Hashtable ä¹Ÿä¸èƒ½ä¿è¯å…¶ä¸­ Key Value å¯¹çš„é¡ºåº Hashtable åˆ¤æ–­ä¸¤ä¸ª key ç›¸ç­‰ã€ä¸¤ä¸ª value ç›¸ç­‰çš„æ ‡å‡† ä¸ HashMap ä¸€è‡´ã€‚ Properties Properties ç±»æ˜¯ Hashtable çš„å­ç±»ï¼Œè¯¥å¯¹è±¡ç”¨äºå¤„ç†å±æ€§æ–‡ä»¶ ç”±äºå±æ€§æ–‡ä»¶é‡Œçš„ key ã€ value éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥ Properties é‡Œçš„ keyå’Œ value éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ å­˜å–æ•°æ®æ—¶ï¼Œå»ºè®®ä½¿ç”¨ setProperty (String key,String value) æ–¹æ³•å’ŒgetProperty (String key)æ–¹æ³• Properties pros = new Properties(); pros.load(new FileInputStream(&quot;jdbc.properties)); String user = pros.getProperty(&quot;user&quot;); System.out.println(user); Collectionså·¥å…·ç±» Collections æ˜¯ä¸€ä¸ªæ“ä½œ Set ã€ List å’Œ Map ç­‰é›†åˆçš„å·¥å…·ç±» Collections ä¸­æä¾›äº†ä¸€ç³»åˆ—é™æ€çš„æ–¹æ³•å¯¹é›†åˆå…ƒç´ è¿›è¡Œæ’åºã€æŸ¥è¯¢å’Œä¿®æ”¹ç­‰æ“ä½œï¼Œè¿˜æä¾›äº†å¯¹é›†åˆå¯¹è±¡è®¾ç½®ä¸å¯å˜ã€å¯¹é›†åˆå¯¹è±¡å®ç°åŒæ­¥æ§åˆ¶ç­‰æ–¹æ³•ã€‚ æ–¹æ³•ï¼ˆå‡ä¸º static æ–¹æ³•ï¼‰ æè¿° reverse(List) åè½¬ List ä¸­å…ƒç´ çš„é¡ºåº shuffle(List) å¯¹ List é›†åˆå…ƒç´ è¿›è¡Œéšæœºæ’åº sort(List) æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®š List é›†åˆå…ƒç´ æŒ‰å‡åºæ’åº sort(List, Comparator) æ ¹æ®æŒ‡å®šçš„ Comparator äº§ç”Ÿçš„é¡ºåºå¯¹ List é›†åˆå…ƒç´ è¿›è¡Œæ’åº swap(List, int i, int j) å°†æŒ‡å®š list é›†åˆä¸­çš„ i å¤„å…ƒç´ å’Œ j å¤„å…ƒç´ è¿›è¡Œäº¤æ¢ Object max(Collection) æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´  Object max(Collection Comparator) æ ¹æ® Comparator æŒ‡å®šçš„é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´  Object min(Collection) æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å°å…ƒç´  Object min(Collection Comparator) æ ¹æ® Comparator æŒ‡å®šçš„é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å°å…ƒç´  int frequency(Collection Object) è¿”å›æŒ‡å®šé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„å‡ºç°æ¬¡æ•° void copy(List dest,List src ) å°† src ä¸­çš„å†…å®¹å¤åˆ¶åˆ° dest ä¸­ï¼Œè¦æ±‚dest.size()å¤§äºç­‰äºsrc.size() boolean replaceAll (List list, Object oldVal, Object newVal) ä½¿ç”¨æ–°å€¼æ›¿æ¢Listå¯¹è±¡çš„æ‰€æœ‰æ—§å€¼ copyä¸­å¦‚æœdestå°äºsrcçš„è§£å†³åŠæ³• List dest = Arrays.asList(new Object[src.size()]); copy(dest, src); Collectionç±»ä¸­æä¾›äº†åŒæ­¥æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥è®²æŒ‡å®šé›†åˆåŒ…è£…ä¸ºçº¿ç¨‹åŒæ­¥çš„é›†åˆï¼Œä»è€Œè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ ","link":"https://yeyuan1107.github.io/post/java-ji-he/"},{"title":"Javaå¸¸ç”¨ç±»","content":" å­—ç¬¦ä¸²ç›¸å…³çš„ç±» Stringç±» Stringç±»ï¼šä»£è¡¨å­—ç¬¦ä¸²ã€‚Javaç¨‹åºä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²å­—é¢å€¼éƒ½ä½œä¸ºæ­¤ç±»çš„å®ä¾‹å®ç° Stringç±»æ˜¯ä¸€ä¸ªfinalç±»ï¼Œä»£è¡¨ä¸å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œä¸èƒ½è¢«ç»§æ‰¿ å­—ç¬¦ä¸²æ˜¯å¸¸é‡ï¼Œç”¨åŒå¼•å·å¼•èµ·æ¥è¡¨ç¤ºï¼Œä»–ä»¬çš„å€¼åœ¨åˆ›å»ºä¹‹åä¸èƒ½æ›´æ”¹ Stringå¯¹è±¡çš„å­—ç¬¦å†…å®¹æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªå­—ç¬¦æ•°ç»„value[]ä¸­çš„ Stringå®ç°äº†Serializableæ¥å£ï¼šè¡¨ç¤ºå­—ç¬¦ä¸²äº‹æ”¯æŒåºåˆ—åŒ–çš„ Stringå®ç°äº†comparableæ¥å£ï¼šè¡¨ç¤ºå­—ç¬¦ä¸²å¯ä»¥æ¯”è¾ƒå¤§å° Stringå†…éƒ¨å®šä¹‰äº†final char[] valueç”¨äºå­˜å‚¨å­—ç¬¦ä¸²æ•°æ®ï¼Œæ•°ç»„åŠæ•°ç»„å†…å®¹å‡ä¸å¯å˜ public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSeqence{ // The value is used for character storage private final char value[]; //Cache the hash code for the String. Default to 0 private int hash; } ä¸å¯å˜æ€§ ä¸åŒå­—ç¬¦ä¸²é‡æ–°èµ‹å€¼æ—¶ï¼Œéœ€è¦é‡å†™æŒ‡å®šå†…å­˜åŒºåŸŸèµ‹å€¼ï¼Œä¸èƒ½ä½¿ç”¨åŸæœ‰valueè¿›è¡Œèµ‹å€¼ï¼Œå³ä¸æ›´æ”¹åŸåœ°å€ä¸Šçš„å†…å®¹ï¼Œé‡æ–°å¼€è¾Ÿä¸€å—å†…å­˜èµ‹å€¼ï¼Œåœ°å€æŒ‡å‘æ–°å¼€è¾Ÿçš„å†…å­˜ å½“ç°æœ‰çš„å­—ç¬¦ä¸²è¿›è¡Œè¿æ¥æ“ä½œæ—¶ï¼Œä¹Ÿéœ€è¦æŒ‡å®šå†…å­˜åŒºåŸŸèµ‹å€¼ï¼Œä¸èƒ½ä½¿ç”¨åŸæœ‰çš„valueè¿›è¡Œèµ‹å€¼ å½“è°ƒç”¨Stringçš„ä¿®æ”¹æ–¹æ³•replace()ä¿®æ”¹åˆ¶å®šçš„å­—ç¬¦æˆ–å­—ç¬¦ä¸²æ—¶ï¼Œä¹Ÿå¿…é¡»é‡æ–°æŒ‡å®šå†…å­˜åŒºåŸŸèµ‹å€¼ åˆ›å»ºæ–¹å¼ String str = &quot;hello&quot;; //ç›¸å½“äºthis.value = new char[0] String str = new String(); //ç›¸å½“äºthis.value = original.value String str = new String(String original); //ç›¸å½“äºthis.value = Arrays.copyOf(value, value.length) String str = new String(char[] a); String str = new String(char[] a, int startIndex, int count); å†…å­˜è§£æ å½“Stringä½¿ç”¨å­—é¢é‡çš„å®šä¹‰æ–¹å¼å¦‚ï¼šString xxx = &quot;abc&quot; (&quot;abc&quot;å£°æ˜åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± )å½“ç­‰å·å³ä¾§å†…å®¹ç›¸åŒæ—¶ï¼Œä¸åŒçš„Stringå¯¹è±¡æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªåœ°å€ï¼Œå­—ç¬¦ä¸²æ•äº®æ± ä¸­ä¸ä¼šå­˜æ”¾ç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸² //åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­åˆ›å»ºäº†ä¸€ä¸ªå­—é¢é‡ä¸º&quot;a&quot;çš„å­—ç¬¦ä¸² String s1 = &quot;a&quot;; //å®é™…ä¸ŠåŸæ¥çš„&quot;a&quot;å­—ç¬¦ä¸²å¯¹è±¡å·²ç»ä¸¢å¼ƒäº†ï¼Œç°åœ¨åœ¨å †ç©ºé—´ä¸­äº§ç”Ÿäº†ä¸€ä¸ªå­—ç¬¦ä¸²s1 +&quot;b&quot;å³&quot;ab&quot;ã€‚ //åªè¦å…¶ä¸­ä¸€ä¸ªæ˜¯å˜é‡ï¼Œç»“æœå°±åœ¨å †ä¸­ï¼Œ+=ä¹Ÿæ˜¯è¯¥æƒ…å†µã€‚ //å¦‚æœå¤šæ¬¡æ‰§è¡Œè¿™äº›æ”¹å˜ä¸²å†…å®¹çš„æ“ä½œï¼Œä¼šå¯¼è‡´å¤§é‡å‰¯æœ¬å­—ç¬¦ä¸²å¯¹è±¡å­˜ç•™åœ¨å†…å­˜ä¸­ï¼Œé™ä½æ•ˆç‡ã€‚ //å¦‚æœè¿™æ ·çš„æ“ä½œæ”¾åˆ°å¾ªç¯ä¸­ï¼Œä¼šæå¤§å½±å“ç¨‹åºçš„æ€§èƒ½ s1 = s1 + &quot;b&quot;; //ç›´æ¥åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­åˆ›å»ºä¸€ä¸ªå­—é¢é‡ä¸º&quot;ab&quot;çš„å­—ç¬¦ä¸² String s2 = &quot;ab&quot;; //s3æŒ‡å‘å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å·²ç»åˆ›å»ºçš„&quot;ab&quot;çš„å­—ç¬¦ä¸² String s3 = &quot;a&quot; + &quot;b&quot;; //å †ç©ºé—´çš„s1å¯¹è±¡åœ¨è°ƒç”¨intern()ä¹‹åï¼Œä¼šå°†å¸¸é‡æ± ä¸­å·²ç»å­˜åœ¨çš„&quot;ab&quot;å­—ç¬¦ä¸²èµ‹å€¼ç»™s4 String s4 = s1.intern(); Stringå¸¸ç”¨æ–¹æ³• æ–¹æ³• ä½œç”¨ int length() è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦:return value.length char charAt(int index) è¿”å›æŸç´¢å¼•å¤„çš„å­—ç¬¦:return value[index] boolean isEmpty() åˆ¤æ–­æ˜¯å¦æ˜¯ç©ºå­—ç¬¦ä¸²:return value.length==0 String toLowerCase() ä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒ,å°†Stringä¸­çš„æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå°å†™ String toUpperCase() ä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒ,å°†Stringä¸­çš„æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™ String trim() è¿”å›å­—ç¬¦ä¸²çš„å‰¯æœ¬å¿½ç•¥å‰å¯¼ç©ºç™½å’Œå°¾éƒ¨ç©ºç™½ boolean equals(Object obj) æ¯”è¾ƒå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒ boolean equalsIgnoreCase(String anotherString) ä¸ equals æ–¹æ³•ç±»ä¼¼å¿½ç•¥å¤§å°å†™ String concat(String str) å°†æŒ‡å®šå­—ç¬¦ä¸²è¿æ¥åˆ°æ­¤å­—ç¬¦ä¸²çš„ç»“å°¾ï¼Œç­‰ä»·äºç”¨&quot;+&quot; int compareTo(String anotherString) æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°,&gt;0å½“å‰å¯¹è±¡å¤§ï¼Œå¦åˆ™å½“å‰å¯¹è±¡å° String substring(int beginIndex) è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å®ƒæ˜¯æ­¤å­—ç¬¦ä¸²çš„ä»beginIndexå¼€å§‹æˆªå–åˆ°æœ€åçš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚ String substring(int beginIndex, int endIndex) è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²å®ƒæ˜¯æ­¤å­—ç¬¦ä¸²ä» beginIndexå¼€å§‹æˆªå–åˆ°endIndex(ä¸åŒ…å«)çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚ boolean endsWith(String suffix) æµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„åç¼€ç»“æŸ boolean startsWith(String prefix) æµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å‰ç¼€å¼€å§‹ boolean startsWith(String prefix, int offset) æµ‹è¯•æ­¤å­—ç¬¦ä¸²ä»æŒ‡å®šç´¢å¼•å¼€å§‹çš„å­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å§‹ boolean contains(CharSequence s) å½“ä¸”ä»…å½“æ­¤å­—ç¬¦ä¸²åŒ…å«æŒ‡å®šçš„charå€¼åºåˆ—æ—¶ï¼Œè¿”å›true int indexOf(String str) è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼• int indexOf(String str, int fromIndex) è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹ int lastIndexOf(String str) è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€å³è¾¹å‡ºç°å¤„çš„ç´¢å¼• int lastIndexOf(String str, int fromIndex) è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹åå‘æœç´¢ indexOf å’Œ lastIndexOf æ–¹æ³•å¦‚æœæœªæ‰¾åˆ°éƒ½æ˜¯è¿”å› 1 String replace(char oldChar, char newChar) è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å®ƒæ˜¯é€šè¿‡ç”¨ newChar æ›¿æ¢æ­¤å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ‰€æœ‰ oldChar å¾—åˆ°çš„ String replace(CharSequence target, CharSequence replacement) ä½¿ç”¨æŒ‡å®šçš„å­—é¢å€¼æ›¿æ¢åºåˆ—æ›¿æ¢æ­¤å­—ç¬¦ä¸²æ‰€æœ‰åŒ¹é…å­—é¢å€¼ç›®æ ‡åºåˆ—çš„å­å­—ç¬¦ä¸² String replaceAll(String regex, String replacement) ä½¿ç”¨ç»™å®šçš„replacement æ›¿æ¢æ­¤å­—ç¬¦ä¸²æ‰€æœ‰åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸² String replaceFirst(String regex, String replacement) ä½¿ç”¨ç»™å®šçš„replacement æ›¿æ¢æ­¤å­—ç¬¦ä¸²åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå­å­—ç¬¦ä¸² boolean matches(String regex) å‘ŠçŸ¥æ­¤å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ String[] split(String regex) æ ¹æ®ç»™å®šæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ‹†åˆ†æ­¤å­—ç¬¦ä¸² String[] split(String regex, int limit) æ ¹æ®åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼æ¥æ‹†åˆ†æ­¤å­—ç¬¦ä¸² æœ€å¤šä¸è¶…è¿‡limitä¸ªå¦‚æœè¶…è¿‡äº†å‰©ä¸‹çš„å…¨éƒ¨éƒ½æ”¾åˆ°æœ€åä¸€ä¸ªå…ƒç´ ä¸­ åŒ…è£…ç±».parseXxx(String str) å°†å­—ç¬¦ä¸²è½¬ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ã€åŒ…è£…ç±» String.valueOf(xxx) å°†åŒ…è£…ç±»ã€åŸºæœ¬æ•°æ®ç±»å‹è½¬ä¸ºå­—ç¬¦ä¸² new String(char[] xxx) å°†å­—ç¬¦æ•°ç»„è½¬åŒ–ä¸ºå­—ç¬¦ä¸² new String(char[] xxx, int offset, int length) å°†å­—ç¬¦æ•°ç»„ä»offsetå¼€å§‹ï¼Œé•¿åº¦ä¸ºlengthï¼Œè½¬åŒ–ä¸ºå­—ç¬¦ä¸² str.toCharArray() å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå­—ç¬¦æ•°ç»„ public void getChars(int srcBegin, int srcEnd, char[] dst, int dstBegin) æä¾›äº†å°†æŒ‡å®šç´¢å¼•èŒƒå›´å†…çš„å­—ç¬¦ä¸²å­˜æ”¾åˆ°æ•°ç»„ä¸­çš„æ–¹æ³• String(byte[] xxx) é€šè¿‡å¹³å°é»˜è®¤å­—ç¬¦é›†è§£ç åˆ¶å®šçš„byteæ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„String String(byte[] xxx, int offset, int length) ä»offsetå¼€å§‹é•¿åº¦ä¸ºlengthä¸ªå­—èŠ‚æ„é€ ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ String(byte[] xxx, charsetName æŒ‰ç…§æŒ‡å®šå­—ç¬¦é›†è§£ç å­—èŠ‚æ•°ç»„ public byte[] getBytes() æŒ‰ç…§å¹³å°é»˜è®¤å­—ç¬¦é›†å°†Stringç¼–ç ä¸ºbyteæ•°ç»„ public byte[] getBytes(String charsetName) ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†ï¼Œå°†æ­¤Stringç¼–ç åˆ°byteåºåˆ—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°æ–°çš„byteæ•°ç»„ StringBufferå’ŒStringBuilder ä¸åŒç‚¹ï¼š StringBufferï¼šçº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡åä½ StringBuilderï¼šçº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡æ›´é«˜ï¼ŒJDK1.5ä¸­æ–°å¢ ç›¸åŒç‚¹ï¼š çˆ¶ç±»ç›¸åŒå‡ä¸ºAbstractStringBuilder å‡ä¸ºå¯å˜å­—ç¬¦ä¸² åº•å±‚å‡ä¸ºå­—ç¬¦æ•°ç»„char[] ä¸StringåŒºåˆ« ä¸Stringç±»ä¸åŒï¼Œå…¶å¯¹è±¡å¿…é¡»ä½¿ç”¨æ„é€ å™¨ç”Ÿæˆï¼Œæœ‰ä¸‰ä¸ªæ„é€ å™¨ StringBuffer(), StringBuilder()ï¼šåˆå§‹å®¹é‡ä¸º16çš„å­—ç¬¦ä¸²ç¼“å†²åŒº StringBuffer(int size), StringBuilder(int size)ï¼šæ„é€ æŒ‡å®šå®¹é‡çš„å­—ç¬¦ä¸²ç¼“å†²åŒº StringBuffer(String str), StringBuilder(String str)ï¼šå°†å†…å®¹åˆå§‹åŒ–ä¸ºæŒ‡å®šå­—ç¬¦ä¸²å†…å®¹ï¼Œå­—ç¬¦æ•°ç»„é•¿åº¦ä¸ºstr.length + 16 æ„é€ å™¨ä¸­ str å¦‚æœç­‰äºnullé‚£ä¹ˆæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ å¦‚æœè¦æ·»åŠ çš„æ•°æ®åº•å±‚æ•°ç»„è£…ä¸ä¸‹ï¼Œé‚£å°±è¦æ‰©å®¹åº•å±‚æ•°ç»„ï¼Œä¸€èˆ¬æ‰©å®¹ä¸ºåŸæ¥å®¹é‡çš„2å€+2ï¼ŒåŒæ—¶å°†åŸæœ‰æ•°ç»„ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ å¸¸ç”¨æ–¹æ³• æ–¹æ³• ä½œç”¨ StringBuffer append(xxx) æä¾›äº†å¾ˆå¤šçš„ append() æ–¹æ³•ç”¨äºè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¦‚æœxxxä¸ºnullé‚£ä¹ˆåœ¨å­—ç¬¦ä¸²ä¸­å¢åŠ &quot;null&quot; StringBuffer delete(int start,int end) åˆ é™¤æŒ‡å®šä½ç½®çš„å†…å®¹ï¼Œå·¦é—­å³å¼€ StringBuffer replace(int start, int end, String str) æŠŠ[start,end)ä½ç½®æ›¿æ¢ä¸ºstr StringBuffer insert(int offset, xxx) åœ¨æŒ‡å®šä½ç½®æ’å…¥xxx StringBuffer reverse() æŠŠå½“å‰å­—ç¬¦åºåˆ—é€†è½¬ public int indexOf (String str) public String substring (int start,int end) public int length() public char charAt (int n) public void setCharAt (int n ,char ch) æ—¥æœŸæ—¶é—´API JDK8.0ä¹‹å‰æ—¥æœŸæ—¶é—´API java.lang.Systemç±»Systemç±»æä¾›çš„public static long currentTimeMillis()ç”¨æ¥è¿”å›å½“å‰æ—¶é—´ä¸1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’ä¹‹é—´ä»¥æ¯«ç§’ä¸ºå•ä½çš„æ—¶é—´å·®ã€‚æ­¤æ–¹æ³•é€‚ç”¨äºè®¡ç®—æ—¶é—´å·®ã€‚ java.util.Dateç±»è¡¨ç¤ºç‰¹å®šçš„ç¬é—´ï¼Œç²¾ç¡®åˆ°æ¯«ç§’ æ„é€ å™¨ Date()ï¼šä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºçš„å¯¹è±¡å¯ä»¥è·å–æœ¬åœ°å½“å‰æ—¶é—´ Date(long date)ï¼šåˆ›å»ºæŒ‡å®šæ¯«ç§’æ•°çš„ä¸€ä¸ªå¯¹è±¡ å¸¸ç”¨æ–¹æ³• getTime()ï¼šè¿”å›è‡ª1970å¹´1æœˆ1æ—¥00:00:00 GMT ä»¥æ¥æ¬¡Dateå¯¹è±¡è¡¨ç¤ºçš„æ¯«ç§’æ•° toString()ï¼šæŠŠæ­¤Dateå¯¹è±¡è½¬æ¢ä¸ºä»¥ä¸‹å½¢å¼çš„Stringï¼šdow mon dd hh:mm:ss zzz yyyå…¶ä¸­ï¼šdowæ˜¯æ˜ŸæœŸï¼Œzzzæ˜¯æ—¶é—´æ ‡å‡† java.sql.Date è¯¥ç±»ä¸ºjava.util.Dateç±»çš„å­ç±»ï¼Œå¯¹åº”æ•°æ®åº“ä¸­æ—¥æœŸå˜é‡ æ„é€ å™¨ new Date(long date)ï¼šç”¨æŒ‡å®šæ¯«ç§’æ•°æ„å»ºå¯¹è±¡ æ–¹æ³• toString()åªè¾“å‡ºå¹´æœˆæ—¥ å°†java.util.Dateç±»è½¬åŒ–ä¸ºjava.sql.Dateç±» //æ–¹å¼ä¸€ Date date1 = new java.sql.Date(long time); java.sql.Date date2 = (java.sql.Date)date1; //æ–¹å¼äºŒ Date date3 = new Date(); java.sql.Date date4 = new java.sql.Date(date3.getTime()); java.text.SimpleDateFormatç±» Dateç±»çš„APIä¸æ˜“äºå›½é™…åŒ–ï¼Œå¤§éƒ¨åˆ†è¢«åºŸå¼ƒäº†ï¼Œè¯¥ç±»æ˜¯ä¸€ä¸ªä¸ä¸è¯­è¨€ç¯å¢ƒæœ‰å…³çš„æ–¹å¼æ¥æ ¼å¼åŒ–å’Œè§£ææ—¥æœŸçš„å…·ä½“ç±» å®ƒå…è®¸è¿›è¡Œæ ¼å¼åŒ–ï¼šæ—¥æœŸ -&gt; æ–‡æœ¬ã€è§£æï¼šæ–‡æœ¬ -&gt; æ—¥æœŸ æ ¼å¼åŒ–ï¼š SimpleDateFormat()ï¼šé»˜è®¤çš„æ¨¡å¼å’Œè¯­è¨€ç¯å¢ƒåˆ›å»ºå¯¹è±¡ public SimpleDateFormat(String pattern)ï¼šè¯¥æ„é€ æ–¹æ³•å¯ä»¥ä½¿ç”¨å‚æ•°patternæŒ‡å®šçš„æ ¼å¼åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡è°ƒç”¨public String format(Date date)ï¼šæ–¹æ³•æ ¼å¼åŒ–æ—¶é—´å¯¹è±¡date patternç¤ºä¾‹ï¼šyyyy(4ä½å¹´ä»½)-MM(2ä½æœˆä»½)-dd(2ä½æ—¥æœŸ) hh(2ä½å°æ—¶):mm(2ä½åˆ†é’Ÿ):ss(2ä½ç§’) è§£æï¼š public Date parse(String source)ï¼šä»ç»™å®šå­—ç¬¦ä¸²çš„å¼€å§‹è§£ææ–‡æœ¬ï¼Œä»¥ç”Ÿæˆä¸€ä¸ªæ—¥æœŸ java.util.Calendarç±» Calendarç±»æ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œä¸»è¦ç”¨äºå®Œæˆæ—¥æœŸå­—æ®µä¹‹é—´ç›¸äº’æ“ä½œçš„åŠŸèƒ½è·å–Calendarç±»çš„æ–¹æ³•: ä½¿ç”¨Calendar.getInstance()æ–¹æ³•ï¼Œè¿”å›GregorianCalendarå¯¹è±¡ è°ƒç”¨ä»–çš„å­ç±»GregorianCalendarçš„æ„é€ å™¨ å¸¸ç”¨æ–¹æ³• public int get(int field)æ–¹æ³•æ¥å–å¾—æƒ³è¦çš„æ—¶é—´ä¿¡æ¯ï¼Œæ¯”å¦‚YEARã€MONTHã€DAY_OF_WEEK ã€HOUR_OF_DAYã€MINUTEã€SECOND è·å–æœˆä»½æ—¶ï¼šä¸€æœˆæ˜¯0ï¼ŒäºŒæœˆæ˜¯1... è·å–æ˜ŸæœŸæ—¶ï¼šå‘¨æ—¥æ˜¯1ï¼Œå‘¨ä¸€æ˜¯2... public void set(int field, int value)ï¼šæ›´æ”¹å¯¹åº”fieldå±æ€§ public void add(int field, int amount)ï¼šåœ¨fieldå±æ€§ä¸ŠåŠ amount public final Date getTime()ï¼šæ—¥å†ç±» -&gt; Dateç±» public final void setTime(Date date)ï¼šDateç±» -&gt; æ—¥å†ç±» JDK8ä¸­çš„æ–°æ—¥æœŸAPI Calendarç±»çš„ç¼ºç‚¹ï¼š å¯å˜æ€§ï¼šåƒæ—¥æœŸå’Œæ—¶é—´è¿™æ ·çš„ç±»åº”è¯¥æ˜¯ä¸å¯å˜çš„ åç§»æ€§ï¼šDateä¸­çš„å¹´ä»½æ˜¯ä»1900å¼€å§‹çš„ï¼Œè€Œæœˆä»½éƒ½ä»0å¼€å§‹ æ ¼å¼åŒ–ï¼šæ ¼å¼åŒ–åªå¯¹Dateæœ‰ç”¨ï¼ŒCalendaråˆ™ä¸è¡Œ ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¸èƒ½å¤„ç†é—°ç§’ java.time API LocalDateç±»(æœ¬åœ°æ—¥æœŸ) LocalTimeç±»(æœ¬åœ°æ—¶é—´) LocalDateTimeç±»(æœ¬åœ°æ—¥æœŸæ—¶é—´) ZonedDateTimeç±»(æ—¶åŒº) Durationç±»(æŒç»­æ—¶é—´) java.time åŒ…å«å€¼å¯¹è±¡çš„åŸºç¡€åŒ… java.time.chrono æä¾›å¯¹ä¸åŒçš„æ—¥å†ç³»ç»Ÿçš„è®¿é—® java.time.format æ ¼å¼åŒ–å’Œè§£ææ—¶é—´å’Œæ—¥æœŸ java.time.temporal åŒ…å«åº•å±‚æ¡†æ¶å’Œæ‰©å±•ç±»å‹java.time.zone åŒ…å«æ—¶åŒºæ”¯æŒçš„ç±» LocalDate LocalTime LocalDateTimeç±» è¿™å‡ ä¸ªç±»æ˜¯è¾ƒä¸ºé‡è¦çš„å‡ ä¸ªç±»ï¼Œä»–ä»¬çš„å®ä¾‹æ˜¯ä¸å¯å˜çš„å¯¹è±¡ï¼Œåˆ†åˆ«è¡¨ç¤ºç”¨ISO-8601æ—¥å†ç³»ç»Ÿçš„æ—¥æœŸã€æ—¶é—´ã€æ—¥æœŸå’Œæ—¶é—´ã€‚ LocalDateä»£è¡¨ISOæ ¼å¼(yyyy-MM-dd)çš„æ—¥æœŸï¼Œå¯ä»¥å­˜å‚¨ç”Ÿæ—¥ã€çºªå¿µæ—¥ç­‰æ—¥æœŸ LocalTimeè¡¨ç¤ºä¸€ä¸ªæ—¶é—´ï¼Œè€Œä¸æ˜¯æ—¥æœŸ LocalDateTimeæ˜¯ç”¨æ¥è¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ€å¸¸ç”¨çš„ç±»ä¹‹ä¸€ æ–¹æ³• æè¿° now() /* now(ZoneId zone) é™æ€æ–¹æ³•æ ¹æ®å½“å‰æ—¶é—´åˆ›å»ºå¯¹è±¡/æŒ‡å®šæ—¶åŒºçš„å¯¹è±¡ of() é™æ€æ–¹æ³•æ ¹æ®æŒ‡å®šæ—¥æœŸæ—¶é—´åˆ›å»ºå¯¹è±¡ getDayOfMonth()/getDayOfYear() è·å¾—æœˆä»½å¤©æ•°(1-31)/è·å¾—å¹´ä»½å¤©æ•°(1-366) getDayOfWeek() è·å¾—æ˜ŸæœŸå‡ (è¿”å›ä¸€ä¸ª DayOfWeek æšä¸¾å€¼) getMonth() è·å¾—æœˆä»½(è¿”å›ä¸€ä¸ª Month æšä¸¾å€¼) getMonthValue()/getYear() è·å¾—æœˆä»½(1-12)/è·å¾—å¹´ä»½ getHour()/getMinute()/getSecond() è·å¾—å½“å‰å¯¹è±¡å¯¹åº”çš„å°æ—¶ã€åˆ†é’Ÿ ã€ç§’ withDayOfMonth()/withDayOfYear()/withMonth()/withYear() å°†æœˆä»½å¤©æ•°ã€å¹´ä»½å¤©æ•° ã€æœˆä»½ ã€å¹´ä»½ä¿®æ”¹ä¸ºæŒ‡å®šçš„å€¼å¹¶è¿”å›æ–°çš„å¯¹è±¡ plusDays(), plusWeeks(),plusMonths(), plusYears(),plusHours() å‘å½“å‰å¯¹è±¡æ·»åŠ å‡ å¤©ã€å‡ å‘¨ã€å‡ ä¸ªæœˆã€å‡ å¹´ã€å‡ å°æ—¶ minusMonths()/minusDays()/minusYears()/minusHours() ä»å½“å‰å¯¹è±¡å‡å»å‡ æœˆã€å‡ å‘¨ã€å‡ å¤©ã€å‡ å¹´ã€å‡ å°æ—¶ Instant åœ¨å¤„ç†æ—¶é—´å’Œæ—¥æœŸçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæƒ³åˆ°å¹´æœˆæ—¥æ—¶åˆ†ç§’ã€‚ç„¶è€Œï¼Œè¿™åªæ˜¯æ—¶é—´çš„ä¸€ä¸ªæ¨¡å‹ï¼Œæ˜¯é¢å‘äººç±»çš„ã€‚ç¬¬äºŒç§é€šç”¨æ¨¡å‹æ˜¯é¢å‘æœºå™¨çš„ï¼Œæˆ–è€…è¯´æ˜¯è¿ç»­çš„ã€‚åœ¨æ­¤æ¨¡å‹ä¸­ï¼Œæ—¶é—´çº¿ä¸­çš„ä¸€ä¸ªç‚¹è¡¨ç¤ºä¸ºä¸€ä¸ªå¾ˆå¤§çš„æ•°ï¼Œè¿™æœ‰åˆ©äºè®¡ç®—æœºå¤„ç†ã€‚ åœ¨ UNIX ä¸­ï¼Œè¿™ä¸ªæ•°ä» 1970 å¹´å¼€å§‹ï¼Œä»¥ç§’ä¸ºçš„å•ä½ï¼›åŒæ ·çš„ï¼Œåœ¨ Java ä¸­ï¼Œä¹Ÿæ˜¯ä» 1970 å¹´å¼€å§‹ï¼Œä½†ä»¥æ¯«ç§’ä¸ºå•ä½ã€‚java.time åŒ…é€šè¿‡å€¼ç±»å‹ Instant æä¾›æœºå™¨è§†å›¾ï¼Œä¸æä¾›å¤„ç†äººç±»æ„ä¹‰ä¸Šçš„æ—¶é—´å•ä½ã€‚ Instant è¡¨ç¤ºæ—¶é—´çº¿ä¸Šçš„ä¸€ç‚¹ï¼Œè€Œä¸éœ€è¦ä»»ä½•ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œæ—¶åŒºã€‚æ¦‚å¿µä¸Šè®²ï¼Œ å®ƒåªæ˜¯ç®€å•çš„è¡¨ç¤ºè‡ª 1970 å¹´ 1 æœˆ 1 æ—¥ 0 æ—¶ 0 åˆ† 0 ç§’ï¼ˆ UTC ï¼‰å¼€å§‹çš„ç§’æ•°ã€‚ å› ä¸º java.time åŒ…æ˜¯åŸºäºçº³ç§’è®¡ç®—çš„ï¼Œæ‰€ä»¥ Instant çš„ç²¾åº¦å¯ä»¥è¾¾åˆ°çº³ç§’çº§ã€‚ æ–¹æ³• æè¿° now() é™æ€æ–¹æ³•è¿”å›é»˜è®¤ UTC æ—¶åŒºçš„ Instant ç±»çš„å¯¹è±¡ ofEpochMilli (long epochMilli) é™æ€æ–¹æ³•è¿”å›åœ¨ 1970-01-01 00:00:00 åŸºç¡€ä¸ŠåŠ ä¸ŠæŒ‡å®šæ¯«ç§’æ•°ä¹‹åçš„ Instant ç±»çš„å¯¹è±¡ atOffset(ZoneOffset offset) ç»“åˆå³æ—¶çš„åç§»æ¥åˆ›å»ºä¸€ä¸ªOffsetDateTime toEpochMilli() è¿”å›1970-01-01 00:00:00 åˆ°å½“å‰æ—¶é—´çš„æ¯«ç§’æ•°å³ä¸ºæ—¶é—´æˆ³ï¼Œæ—¶é—´æˆ³æ˜¯æŒ‡æ ¼æ—å¨æ²»æ—¶é—´1970-01-01 00:00:00 åŒ—äº¬æ—¶é—´ 1970-01-01 08:00:00 èµ·è‡³ç°åœ¨çš„æ€»ç§’æ•°ã€‚ java.time.format.DateTimeFormatter è¯¥ç±»æä¾›äº†ä¸‰ç§æ ¼å¼åŒ–æ–¹æ³• é¢„å®šä¹‰çš„æ ‡å‡†æ ¼å¼: ISO_LOCAL_DATE_TIME ISO_LOCAL_DATE ISO_LOCAL_TIME æœ¬åœ°åŒ–ç›¸å…³çš„æ ¼å¼ã€‚å¦‚ï¼šofLocalizedDateTime(FormatStyle.LONG) è‡ªå®šä¹‰çš„æ ¼å¼ã€‚å¦‚ï¼šofPattern(&quot;yyyy-MM-dd hh:mm:ss&quot;) æ–¹æ³• æè¿° ofPattern(String pattern) é™æ€æ–¹æ³•è¿”å›ä¸€ä¸ªæŒ‡å®šå­—ç¬¦ä¸²æ ¼å¼çš„DateTimeFormatter format(TemporalAccessort) æ ¼å¼åŒ–ä¸€ä¸ªæ—¥æœŸã€ æ—¶é—´è¿”å›å­—ç¬¦ä¸² parse(CharSequence text) å°†æŒ‡å®šæ ¼å¼çš„å­—ç¬¦åºåˆ—è§£æä¸ºä¸€ä¸ªæ—¥æœŸã€æ—¶é—´ å…¶ä»–API è½¬æ¢ Javaæ¯”è¾ƒå™¨ java.lang.Comparableä¸java.util.Comparatorä¸¤ä¸ªæ¥å£å®ç°å¯¹è±¡çš„æ¯”è¾ƒ è‡ªç„¶æ’åºjava.lang.Comparable Comparable æ¥å£å¼ºè¡Œå¯¹å®ç°å®ƒçš„æ¯ä¸ªç±»çš„å¯¹è±¡è¿›è¡Œæ•´ä½“æ’åºã€‚è¿™ç§æ’åºè¢«ç§°ä¸ºç±»çš„è‡ªç„¶æ’åº ã€‚ å®ç° Comparable çš„ç±»å¿…é¡»å®ç° compareTo(Object obj) æ–¹æ³•ï¼Œä¸¤ä¸ªå¯¹è±¡å³é€šè¿‡ compareTo(Object obj) æ–¹æ³•çš„è¿”å›å€¼æ¥æ¯”è¾ƒå¤§å° ã€‚ å¦‚æœå½“å‰å¯¹è±¡ this å¤§äºå½¢å‚å¯¹è±¡ obj åˆ™è¿”å›æ­£æ•´æ•°ï¼Œå¦‚æœå½“å‰å¯¹è±¡ this å°äºå½¢å‚å¯¹è±¡ obj åˆ™è¿”å›è´Ÿæ•´æ•°ï¼Œå¦‚æœå½“å‰å¯¹è±¡ this ç­‰äºå½¢å‚å¯¹è±¡ obj åˆ™è¿”å›é›¶ ã€‚ å®ç° Comparable æ¥å£çš„å¯¹è±¡åˆ—è¡¨ï¼ˆå’Œæ•°ç»„ï¼‰å¯ä»¥é€šè¿‡ Collections.sort æˆ–Arrays.sort è¿›è¡Œè‡ªåŠ¨æ’åº(ä»å°åˆ°å¤§)ã€‚å®ç°æ­¤æ¥å£çš„å¯¹è±¡å¯ä»¥ç”¨ä½œæœ‰åºæ˜ å°„ä¸­çš„é”®æˆ–æœ‰åºé›†åˆä¸­çš„å…ƒç´ ï¼Œæ— éœ€æŒ‡å®šæ¯”è¾ƒå™¨ ã€‚ å¯¹äºç±» C çš„æ¯ä¸€ä¸ª e1 å’Œ e2 æ¥è¯´ï¼Œå½“ä¸”ä»…å½“e1.compareTo(e2) == 0ä¸e1.equals(e2) å…·æœ‰ç›¸åŒçš„ boolean å€¼æ—¶ï¼Œç±» C çš„è‡ªç„¶æ’åºæ‰å«åšä¸ equalsä¸€è‡´ ã€‚ å»ºè®®ï¼ˆè™½ç„¶ä¸æ˜¯å¿…éœ€çš„ï¼‰æœ€å¥½ä½¿è‡ªç„¶æ’åºä¸ equals ä¸€è‡´ã€‚ å®šåˆ¶æ’åºjava.util.Comparator å½“å…ƒç´ çš„ç±»å‹æ²¡æœ‰å®ç° java.lang.Comparable æ¥å£è€Œåˆä¸æ–¹ä¾¿ä¿®æ”¹ä»£ç ï¼Œæˆ–è€…å®ç°äº† java.lang.Comparable æ¥å£çš„æ’åºè§„åˆ™ä¸é€‚åˆå½“å‰çš„æ“ä½œï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨ Comparator çš„å¯¹è±¡æ¥æ’åºå¼ºè¡Œå¯¹å¤šä¸ªå¯¹è±¡è¿›è¡Œæ•´ä½“æ’åºçš„æ¯”è¾ƒã€‚ é‡å†™ compare(Object o1,Object o2) æ–¹æ³•ï¼Œæ¯”è¾ƒ o1 å’Œ o2 çš„å¤§å°ï¼š å¦‚æœæ–¹æ³•è¿”å›æ­£æ•´æ•°ï¼Œåˆ™è¡¨ç¤º o1 å¤§äº o2 ï¼›å¦‚æœè¿”å› 0 ï¼Œè¡¨ç¤ºç›¸ç­‰ï¼›è¿”å›è´Ÿæ•´æ•°ï¼Œè¡¨ç¤ºo1 å°äº o2 ã€‚ å¯ä»¥å°† Comparator ä¼ é€’ç»™ sort æ–¹æ³•ï¼ˆå¦‚ Collections.sort æˆ– Arrays.sortï¼‰ä»è€Œå…è®¸åœ¨æ’åºé¡ºåºä¸Šå®ç°ç²¾ç¡®æ§åˆ¶ ã€‚ è¿˜å¯ä»¥ä½¿ç”¨ Comparator æ¥æ§åˆ¶æŸäº›æ•°æ®ç»“æ„ï¼ˆå¦‚æœ‰åº set æˆ–æœ‰åºæ˜ å°„ï¼‰çš„é¡ºåºï¼Œæˆ–è€…ä¸ºé‚£äº›æ²¡æœ‰è‡ªç„¶é¡ºåºçš„å¯¹è±¡ collection æä¾›æ’åº Arrays.sort(Object[] arr, new comparator{ public int compare(Object o1, Object o2){ //å‡åºï¼šå½“o1&gt;o2æ—¶è¿”å›æ­£æ•° //é™åºï¼šå½“o1&gt;o2æ—¶è¿”å›è´Ÿæ•° æ–¹æ³•ä½“; } }); Systemç±» System ç±»ä»£è¡¨ç³»ç»Ÿï¼Œç³»ç»Ÿçº§çš„å¾ˆå¤šå±æ€§å’Œæ§åˆ¶æ–¹æ³•éƒ½æ”¾ç½®åœ¨è¯¥ç±»çš„å†…éƒ¨ã€‚è¯¥ç±»ä½äº java.lang åŒ… ã€‚ ç”±äºè¯¥ç±»çš„æ„é€ å™¨æ˜¯privateçš„ï¼Œæ‰€ä»¥æ— æ³•åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ— æ³•å®ä¾‹åŒ–è¯¥ç±»ã€‚å…¶å†…éƒ¨çš„ æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•éƒ½æ˜¯ static çš„ï¼Œ æ‰€ä»¥ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œè°ƒç”¨ ã€‚ æˆå‘˜å˜é‡ï¼šSystem ç±»å†…éƒ¨åŒ…å« in ã€ out å’Œ err ä¸‰ä¸ªæˆå‘˜å˜é‡ï¼Œåˆ†åˆ«ä»£è¡¨æ ‡å‡†è¾“å…¥æµ(é”®ç›˜è¾“å…¥) ï¼Œæ ‡å‡†è¾“å‡ºæµ(æ˜¾ç¤ºå™¨)å’Œæ ‡å‡†é”™è¯¯è¾“å‡ºæµ(æ˜¾ç¤ºå™¨)ã€‚ æˆå‘˜æ–¹æ³• æ–¹æ³• æè¿° native long currentTimeMillis() è¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯è¿”å›å½“å‰çš„è®¡ç®—æœºæ—¶é—´ï¼Œæ—¶é—´çš„è¡¨è¾¾æ ¼å¼ä¸ºå½“å‰è®¡ç®—æœºæ—¶é—´å’Œ GMT æ—¶é—´(æ ¼æ—å¨æ²»æ—¶é—´)1970å¹´1æœˆ1å·0æ—¶0åˆ†0ç§’æ‰€å·®çš„æ¯«ç§’æ•°ã€‚ void exit(int status) è¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯é€€å‡ºç¨‹åºã€‚å…¶ä¸­ status çš„å€¼ä¸º 0 ä»£è¡¨æ­£å¸¸é€€å‡ºï¼Œéé›¶ä»£è¡¨å¼‚å¸¸é€€å‡ºã€‚ ä½¿ç”¨è¯¥æ–¹æ³•å¯ä»¥åœ¨å›¾å½¢ç•Œé¢ç¼–ç¨‹ä¸­å®ç°ç¨‹åºçš„é€€å‡ºåŠŸèƒ½ç­‰ ã€‚ void gc() è¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯è¯·æ±‚ç³»ç»Ÿè¿›è¡Œåƒåœ¾å›æ”¶ã€‚è‡³äºç³»ç»Ÿæ˜¯å¦ç«‹åˆ»å›æ”¶ï¼Œåˆ™å–å†³äºç³»ç»Ÿä¸­åƒåœ¾å›æ”¶ç®—æ³•çš„å®ç°ä»¥åŠç³»ç»Ÿæ‰§è¡Œæ—¶çš„æƒ…å†µã€‚ String getProperty(String key) è¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯è·å¾—ç³»ç»Ÿä¸­å±æ€§åä¸º key çš„å±æ€§å¯¹åº”çš„å€¼ã€‚ç³»ç»Ÿä¸­å¸¸è§çš„å±æ€§åä»¥åŠå±æ€§çš„ä½œç”¨å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š Mathç±» java.lang.Mathæä¾›äº†ä¸€ç³»åˆ—é™æ€æ–¹æ³•ç”¨äºç§‘å­¦è®¡ç®—ã€‚å…¶æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ä¸€èˆ¬ä¸ºdouble å‹ã€‚ æ–¹æ³• æè¿° abs ç»å¯¹å€¼ acos,asin,atan,cos,sin,tan ä¸‰è§’å‡½æ•° sqrt å¹³æ–¹æ ¹ pow(double a,doble b) açš„bæ¬¡å¹‚(2çš„næ¬¡å¹‚å¯ä»¥é€šè¿‡å·¦ç§»n-1ä½å®Œæˆ) log è‡ªç„¶å¯¹æ•° exp eä¸ºåº•æŒ‡æ•° max(double a,double b) æœ€å¤§å€¼ min(double a,double b) æœ€å°å€¼ random() è¿”å› 0.0 åˆ° 1.0 çš„éšæœºæ•° long round(double a) doubleå‹æ•°æ®aè½¬æ¢ä¸º long å‹ï¼ˆå››èˆäº”å…¥ï¼‰ toDegrees(double angrad) å¼§åº¦ -&gt; è§’åº¦ toRadians(double angdeg) è§’åº¦ -&gt; å¼§åº¦ BigIntegerå’ŒBigDecimal BigInteger java.math åŒ…çš„ BigInteger å¯ä»¥è¡¨ç¤ºä¸å¯å˜çš„ä»»æ„ç²¾åº¦çš„æ•´æ•° ã€‚ BigInteger æä¾›æ‰€æœ‰ Java çš„åŸºæœ¬æ•´æ•°æ“ä½œç¬¦çš„å¯¹åº”ç‰©ï¼Œå¹¶æä¾› java.lang.Math çš„æ‰€æœ‰ç›¸å…³æ–¹æ³•ã€‚å¦å¤–ï¼Œ BigInteger è¿˜æä¾›ä»¥ä¸‹è¿ç®—ï¼šæ¨¡ç®—æœ¯ã€ GCD è®¡ç®—ã€è´¨æ•°æµ‹è¯•ã€ç´ æ•°ç”Ÿæˆã€ä½æ“ä½œä»¥åŠä¸€äº›å…¶ä»–æ“ä½œã€‚ æ„é€ å™¨:BigInteger(String val) æ ¹æ®å­—ç¬¦ä¸²æ„å»º BigInteger å¯¹è±¡ å¸¸ç”¨æ–¹æ³•ï¼š æ–¹æ³• æè¿° public BigInteger abs () è¿”å›æ­¤ BigInteger çš„ç»å¯¹å€¼çš„ BigIntegerã€‚ BigInteger add(BigInteger val) è¿”å›å…¶å€¼ä¸º (this + val) çš„ BigInteger BigInteger subtract(BigInteger val) è¿”å›å…¶å€¼ä¸º (this - val) çš„ BigInteger BigInteger multiply (BigInteger val) è¿”å›å…¶å€¼ä¸º (this * val) çš„ BigInteger BigInteger divide (BigInteger val) è¿”å›å…¶å€¼ä¸º (this / val) çš„ BigIntegerï¼Œæ•´æ•°ç›¸é™¤åªä¿ç•™æ•´æ•°éƒ¨åˆ† BigInteger remainder (BigInteger val) è¿”å›å…¶å€¼ä¸º (this % val) çš„ BigInteger BigInteger [] divideAndRemainder (BigInteger val) è¿”å›åŒ…å« (this / val) åè·Ÿ(this % val) çš„ä¸¤ä¸ª BigInteger çš„æ•°ç»„ BigInteger pow (int exponent) è¿”å›å…¶å€¼ä¸º (this^exponent ) çš„ BigInteger BigDecimalç±» ä¸€èˆ¬çš„ Float ç±»å’Œ Double ç±»å¯ä»¥ç”¨æ¥åšç§‘å­¦è®¡ç®—æˆ–å·¥ç¨‹è®¡ç®—ï¼Œä½†åœ¨å•†ä¸šè®¡ç®—ä¸­ï¼Œè¦æ±‚æ•°å­—ç²¾åº¦æ¯”è¾ƒé«˜ï¼Œæ•…ç”¨åˆ° java.math.BigDecimal ç±» ã€‚BigDecimal ç±»æ”¯æŒ**ä¸å¯å˜çš„ã€ä»»æ„ç²¾åº¦çš„æœ‰ç¬¦å·åè¿›åˆ¶å®šç‚¹æ•° **ã€‚ æ„é€ å™¨: public BigDecimal(double val) public BigDecimal (String val) å¸¸ç”¨æ–¹æ³•: æ–¹æ³• æè¿° public BigDecimal add (BigDecimal augend) ç›¸åŠ  public BigDecimal subtract (BigDecimal subtrahend) ç›¸å‡ public BigDecimal multiply (BigDecimal multiplicand) ä¹˜æ³• public BigDecimal divide (BigDecimal divisor, int scale, int roundingMode) é™¤æ³• æšä¸¾ç±» æšä¸¾ç±»çš„ä½¿ç”¨ ç±»çš„å¯¹è±¡åªèƒ½æœ‰æœ‰é™ä¸ªï¼Œä¾‹å¦‚æ˜ŸæœŸã€æ€§åˆ«ã€å­£èŠ‚ç­‰ï¼Œå½“éœ€è¦å®šä¹‰ä¸€ç»„å¸¸é‡æ—¶ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨æšä¸¾ç±» æšä¸¾ç±»å®šä¹‰ JDK1.5ä¹‹å‰éœ€è¦è‡ªå®šä¹‰æšä¸¾ç±» å£°æ˜å¯¹è±¡çš„å±æ€§ï¼Œprivate finalä¿®é¥° ç§æœ‰åŒ–ç±»çš„æ„é€ å™¨ï¼Œå¹¶ç»™å±æ€§åˆå§‹åŒ– æä¾›å½“å‰æšä¸¾ç±»çš„å¤šä¸ªå¯¹è±¡ï¼Œpublic static finalä¿®é¥°public static final xxx = new Xxx() å…¶ä»–éœ€æ±‚ï¼šè·å–å¯¹è±¡å±æ€§çš„getter()å’ŒtoString()æ–¹æ³• JDK1.5åŠä¹‹åEnumå…³é”®å­—æ¥å®šä¹‰æšä¸¾ç±» æä¾›å½“å‰æšä¸¾ç±»å¯¹è±¡ï¼Œç”¨&quot;,&quot;éš”å¼€å¯¹è±¡ï¼Œæœ€åä¸€ä¸ªå¯¹è±¡ç”¨&quot;;&quot;ç»“å°¾ï¼Œç³»ç»Ÿè‡ªåŠ¨æ·»åŠ public static finalä¿®é¥°ï¼Œå¿…é¡»åœ¨æšä¸¾ç±»çš„ç¬¬ä¸€è¡Œå£°æ˜æšä¸¾ç±»å¯¹è±¡ å£°æ˜å±æ€§ ç§æœ‰åŒ–æ„é€ å™¨ é»˜è®¤toString()æ‰“å°å¯¹è±¡åæšä¸¾ç±»åªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯ä»¥ä½œä¸ºä¸€ç§å•ä¾‹æ¨¡å¼çš„å®ç°æ–¹å¼ enumé»˜è®¤ç»§æ‰¿äºjava.lang.Enumæ‰€ä»¥ä¸èƒ½å†ç»§æ‰¿å…¶ä»–ç±»ï¼ŒJDK1.5ä¸­å¯ä»¥åœ¨switchè¡¨è¾¾å¼ä¸­ä½¿ç”¨Enumå®šä¹‰çš„æšä¸¾ç±»å¯¹è±¡ä½œä¸ºè¡¨è¾¾å¼ï¼Œcaseå­å¥å¯ä»¥ç›´æ¥ä½¿ç”¨æšä¸¾å€¼çš„åå­—ï¼Œæ— éœ€æ·»åŠ æšä¸¾ç±»ä½œä¸ºé™å®š æšä¸¾ç±»ä¸»è¦æ–¹æ³• æ–¹æ³• æè¿° toString å¾—åˆ°å½“å‰æšä¸¾å¸¸é‡çš„åç§° valueOf(String str) è¿”å›æšä¸¾ç±»ä¸­å¯¹è±¡åæ˜¯strçš„å¯¹è±¡ values() è¿”å›æšä¸¾ç±»çš„å¯¹è±¡æ•°ç»„ equals() åœ¨æšä¸¾ç±»ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨&quot;&quot;æ¥æ¯”è¾ƒä¸¤ä¸ªæšä¸¾ç±»æ˜¯å¦ç›¸åŒï¼ŒEnumæä¾›è¿™ä¸ªequalsæ–¹æ³•ï¼Œä¹Ÿæ˜¯ç›´æ¥ç”¨&quot;&quot;å®ç°çš„ï¼Œå®ƒçš„å­˜åœ¨æ˜¯ä¸ºäº†åœ¨Setã€Listå’ŒMapä¸­ä½¿ç”¨ï¼Œequals()æ˜¯ä¸å¯å˜çš„ hashCode Enum()å®ç°äº†hashCode()æ¥ä¸equals()ä¿æŒä¸€è‡´ï¼Œä¹Ÿä¸å¯å˜ getDeclaringClass å¾—åˆ°æšä¸¾å¸¸é‡æ‰€å±æšä¸¾ç±»å‹çš„Classå¯¹è±¡ã€‚å¯ä»¥ç”¨å®ƒæ¥åˆ¤æ–­ä¸¤ä¸ªæšä¸¾å¸¸é‡æ˜¯å¦å±äºåŒä¸€ä¸ªæšä¸¾ç±»å‹ name å¾—åˆ°å½“å‰æšä¸¾å¸¸é‡çš„åç§°ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨toString() ordinal å¾—åˆ°å½“å‰æšä¸¾å¸¸é‡çš„æ¬¡åº compareTo æšä¸¾ç±»å‹å®ç°äº†comparableæ¥å£ï¼Œè¿™æ ·å¯ä»¥æ¯”è¾ƒä¸¤ä¸ªæšä¸¾å¸¸é‡çš„å¤§å° clone æšä¸¾ç±»å‹ä¸èƒ½è¢«Cloneã€‚ä¸ºäº†é˜²æ­¢å­ç±»å®ç°å…‹éš†æ–¹æ³•ï¼ŒEnumå®ç°äº†ä¸€ä¸ªä»…æŠ›å‡ºCloneNotSupportedExceptionå¼‚å¸¸çš„ä¸å˜Clone() æšä¸¾ç±»å®ç°æ¥å£ Enum ç±»å implements æ¥å£å æ¥ç€å®ç°å¯¹åº”æ–¹æ³• è®©æšä¸¾ç±»ä¸­çš„å¯¹è±¡åˆ†åˆ«å®ç°æŠ½è±¡æ–¹æ³• å¯¹è±¡å(){ é‡å†™æ–¹æ³•; } interface info{ void show(); } //æšä¸¾ç±» enum Season1 implements info{ SPRING(&quot;æ˜¥å¤©&quot;, &quot;æ˜¥æš–èŠ±å¼€&quot;){ public void show() { System.out.println(&quot;æ˜¥å¤©åœ¨å“ªé‡Œï¼Ÿ&quot;); } }, SUMMER(&quot;å¤å¤©&quot;, &quot;å¤æ—¥ç‚ç‚&quot;) { public void show() { System.out.println(&quot;ç”Ÿå¦‚å¤èŠ±&quot;); } } , AUTUTO(&quot;ç§‹å¤©&quot;, &quot;ç¡•æœç´¯ç´¯&quot;) { public void show() { System.out.println(&quot;ç§‹å¤©æ˜¯ç”¨æ¥åˆ†æ‰‹çš„å­£èŠ‚&quot;); } }, WINTER(&quot;å†¬å¤©&quot;, &quot;ç™½é›ªçš‘çš‘&quot;) { public void show() { System.out.println(&quot;å†¬å¤©é‡Œçš„ä¸€æŠŠç«&quot;); } }; //1.æä¾›ç±»çš„å±æ€§ï¼Œå£°æ˜ä¸ºprivate final private final String seasonName; private final String seasonDesc; //2.å£°æ˜ä¸ºfinalçš„å±æ€§ï¼Œåœ¨æ„é€ å™¨ä¸­åˆå§‹åŒ– private Season1(String seasonName,String seasonDesc) { this.seasonName = seasonName; this.seasonDesc = seasonDesc; } //3.é€šè¿‡å…¬å…±çš„æ–¹æ³•æ¥è°ƒç”¨å±æ€§ public final String getSeasonName() { return seasonName; } public final String getSeasonDesc() { return seasonDesc; } @Override public String toString() { return &quot;Season [seasonName=&quot; + seasonName + &quot;, seasonDesc=&quot; + seasonDesc + &quot;]&quot;; } } æ³¨è§£ ç®€ä»‹ JDK1.5å¼€å§‹æ”¯æŒ æ³¨è§£(Annotation)ï¼šå…¶å®å°±æ˜¯ä»£ç é‡Œçš„ç‰¹æ®Šæ ‡è®°ï¼Œè¿™äº›æ ‡è®°å¯ä»¥åœ¨ç¼–è¯‘ï¼Œç±»åŠ è½½è¿è¡Œæ—¶è¢«è¯»å–ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„å¤„ç†ã€‚é€šè¿‡ä½¿ç”¨Annotationï¼Œç¨‹åºå‘˜å¯ä»¥åœ¨ä¸æ”¹å˜åŸæœ‰é€»è¾‘çš„æƒ…å†µä¸‹ï¼Œåœ¨åŸæ–‡ä»¶ä¸­åµŒå…¥ä¸€äº›è¡¥å……ä¿¡æ¯ã€‚ä»£ç åˆ†æå·¥å…·ã€å¼€å‘å·¥å…·å’Œéƒ¨ç½²å·¥å…·å¯ä»¥é€šè¿‡è¿™äº›è¡¥å……ä¿¡æ¯è¿›è¡ŒéªŒè¯æˆ–è€…è¿›è¡Œéƒ¨ç½² æ³¨è§£å¯ä»¥åƒä¿®é¥°ç¬¦ä¸€æ ·è¢«ä½¿ç”¨ï¼Œå¯ç”¨äºä¿®é¥°åŒ…ï¼Œç±»ï¼Œæ„é€ å™¨ï¼Œæ–¹æ³•ï¼Œæˆå‘˜å˜é‡ï¼Œå‚æ•°ï¼Œå±€éƒ¨å˜é‡çš„å£°æ˜ï¼Œè¿™äº›ä¿¡æ¯è¢«ä¿å­˜åœ¨Annotationçš„&quot;name = value&quot;å¯¹ä¸­ åœ¨JavaSEä¸­ï¼Œæ³¨è§£çš„ä½¿ç”¨ç›®çš„æ¯”è¾ƒç®€å•ï¼Œä¾‹å¦‚æ ‡è®°è¿‡æ—¶çš„åŠŸèƒ½ï¼Œå¿½ç•¥è­¦å‘Šç­‰ã€‚åœ¨JavaEE/Androidä¸­æ³¨è§£å æ®äº†æ›´é‡è¦çš„è§’è‰²ï¼Œä¾‹å¦‚ç”¨æ¥é…ç½®åº”ç”¨ç¨‹åºçš„Beanå’Œåˆ‡é¢ï¼Œä»£æ›¿JavaEEæ—§ç‰ˆä¸­æ‰€é—ç•™çš„ç¹å†—ä»£ç å’ŒXMLé…ç½®ç­‰ æ¡†æ¶ = æ³¨è§£ + åå°„ + è®¾è®¡æ¨¡å¼ å¸¸è§Annotationå®ä¾‹ å®ä¾‹ä¸€ï¼šç”Ÿæˆæ–‡æ¡£çš„ç›¸å…³æ³¨è§£ @authorï¼šæ ‡æ˜å¼€å‘è¯¥ç±»æ¨¡å—çš„ä½œè€… å¤šä¸ªä½œè€…ä¹‹é—´ä½¿ç”¨åˆ†å‰²@versionï¼šæ ‡æ˜è¯¥ç±»æ¨¡å—çš„ç‰ˆæœ¬@seeï¼šå‚è€ƒè½¬å‘ä¹Ÿå°±æ˜¯ç›¸å…³ä¸»é¢˜@sinceï¼šä»å“ªä¸ªç‰ˆæœ¬å¼€å§‹å¢åŠ çš„@paramï¼šå¯¹æ–¹æ³•ä¸­æŸå‚æ•°çš„è¯´æ˜ å¦‚æœæ²¡æœ‰å‚æ•°å°±ä¸èƒ½å†™@returnï¼šå¯¹æ–¹æ³•è¿”å›å€¼çš„è¯´æ˜ å¦‚æœæ–¹æ³•çš„è¿”å›å€¼ç±»å‹æ˜¯ void å°±ä¸èƒ½å†™@exceptionï¼šå¯¹æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸è¿›è¡Œè¯´æ˜ å¦‚æœæ–¹æ³•æ²¡æœ‰ç”¨ throws æ˜¾å¼æŠ›å‡ºçš„å¼‚å¸¸å°±ä¸èƒ½å†™å…¶ä¸­ï¼š@param @return å’Œ @exception è¿™ä¸‰ä¸ªæ ‡è®°éƒ½æ˜¯åªç”¨äºæ–¹æ³•çš„ ã€‚@paramçš„æ ¼å¼è¦æ±‚ï¼š@param å½¢å‚å å½¢å‚ç±»å‹ å½¢å‚è¯´æ˜@returnçš„æ ¼å¼è¦æ±‚ï¼š@return è¿”å›å€¼ç±»å‹ è¿”å›å€¼è¯´æ˜@exceptionçš„æ ¼å¼è¦æ±‚ï¼š@exception å¼‚å¸¸ç±»å‹ å¼‚å¸¸è¯´æ˜@paramå’Œ @exception å¯ä»¥å¹¶åˆ—å¤šä¸ª å®ä¾‹äºŒï¼šåœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ ¼å¼æ£€æŸ¥ @Override: é™å®šé‡å†™çˆ¶ç±»æ–¹æ³• , è¯¥æ³¨è§£åªèƒ½ ç”¨äºæ–¹æ³•@Deprecated : ç”¨äºè¡¨ç¤ºæ‰€ä¿®é¥°çš„å…ƒç´ ç±» , æ–¹æ³•ç­‰å·²è¿‡æ—¶ã€‚é€šå¸¸æ˜¯å› ä¸ºæ‰€ä¿®é¥°çš„ç»“æ„å±é™©æˆ–å­˜åœ¨æ›´å¥½çš„é€‰æ‹©@SuppressWarnings : æŠ‘åˆ¶ç¼–è¯‘å™¨è­¦å‘Š å®ä¾‹ä¸‰ï¼šè·Ÿè¸ªä»£ç ä¾èµ–æ€§ï¼Œå®ç°æ›¿ä»£é…ç½®æ–‡ä»¶åŠŸèƒ½ Servlet3.0æä¾›äº†æ³¨è§£(annotation)ï¼Œä½¿å¾—ä¸å†éœ€è¦åœ¨web.xmlæ–‡ä»¶ä¸­éƒ¨ç½² @WebServlet(&quot;/login&quot;) public class LoginServlet extends HttpServlet { private static final long serialVersionUID = 1Lï¼› protected void doGet(HttpServletRequest request , HttpServletResponse response) throws ServletException, IOException{} protected void doPost(HttpServletRequest request , HttpServletResponse response) throws ServletException, IOException { doGet(request , response); } } æ—§ç‰ˆweb.xmlæ–‡ä»¶ &lt;servlet&gt; &lt;servlet-name&gt;LoginServlet&lt;/servlet-name&gt; &lt;servlet-class&gt;com.servlet.LoginServlet&lt;/servlet-class&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;LoginServlet&lt;/servlet-name&gt; &lt;url-pattern &gt;/login&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; è‡ªå®šä¹‰Annotation å®šä¹‰æ–°çš„ Annotationç±»å‹ä½¿ç”¨@interfaceå…³é”®å­— è‡ªå®šä¹‰æ³¨è§£è‡ªåŠ¨ç»§æ‰¿äº†java.lang.annotation.Annotationæ¥å£ Annotation çš„æˆå‘˜å˜é‡åœ¨ Annotation å®šä¹‰ä¸­ä»¥æ— å‚æ•°æ–¹æ³•çš„å½¢å¼æ¥å£°æ˜ã€‚å…¶æ–¹æ³•åå’Œè¿”å›å€¼å®šä¹‰äº†è¯¥æˆå‘˜çš„åå­—å’Œç±»å‹ã€‚ æˆ‘ä»¬ç§°ä¸ºé…ç½®å‚æ•°ã€‚ç±»å‹åªèƒ½æ˜¯å…«ç§åŸºæœ¬æ•°æ®ç±»å‹ã€String ç±»å‹ã€Class ç±»å‹ã€enum ç±»å‹ã€Annotation ç±»å‹ä»¥ä¸Šæ‰€æœ‰ç±»å‹çš„æ•°ç»„ ã€‚ å¯ä»¥åœ¨å®šä¹‰ Annotation çš„æˆå‘˜å˜é‡æ—¶ä¸ºå…¶æŒ‡å®šåˆå§‹å€¼ æŒ‡å®šæˆå‘˜å˜é‡çš„åˆå§‹å€¼å¯ä½¿ç”¨ default å…³é”®å­— å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°æˆå‘˜å»ºè®®ä½¿ç”¨å‚æ•°åä¸ºvalue å¦‚æœå®šä¹‰çš„æ³¨è§£å«æœ‰é…ç½®å‚æ•°é‚£ä¹ˆä½¿ç”¨æ—¶å¿…é¡»æŒ‡å®šå‚æ•°å€¼é™¤éå®ƒæœ‰é»˜è®¤å€¼ã€‚æ ¼å¼æ˜¯&quot;å‚æ•°å=å‚æ•°å€¼&quot;å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°æˆå‘˜ä¸”åç§°ä¸ºvalueå¯ä»¥çœç•¥&quot;value=&quot; æ²¡æœ‰æˆå‘˜å®šä¹‰çš„ Annotation ç§°ä¸ºæ ‡è®°åŒ…å«æˆå‘˜å˜é‡çš„ Annotation ç§°ä¸ºå…ƒæ•°æ® Annotation æ³¨æ„ï¼šè‡ªå®šä¹‰æ³¨è§£å¿…é¡»é…ä¸Šæ³¨è§£çš„ä¿¡æ¯å¤„ç†æµç¨‹æ‰æœ‰æ„ä¹‰ ã€‚ @MyAnnotation(value=&quot;å°šç¡…è°·&quot;) public class MyAnnotationTest { public static void main(String[] args ){ Class clazz = MyAnnotationTest.class Annotation a = clazz.getAnnotation(MyAnnotation.class); MyAnnotation m = (MyAnnotation) a; String info = m.value(); System.out.println(info); } } @Retention(RetentionPolicy.RUNTIME) @Target({ElementType.TYPE, ElementType.PARAMETER}) @interface MyAnnotation{ String value() default &quot;&quot;; } JDKä¸­çš„å…ƒæ³¨è§£ JDKçš„å…ƒAnnotationç”¨äºä¿®é¥°å…¶ä»–Annotationå®šä¹‰JDK5.0æä¾›äº†4ä¸ªæ ‡å‡†çš„meta-annotationç±»å‹ï¼Œåˆ†åˆ«ä¸ºï¼š Retention:åªèƒ½ç”¨äºä¿®é¥°ä¸€ä¸ªAnnotationå®šä¹‰ï¼Œç”¨äºæŒ‡å®šè¯¥Annotationçš„ç”Ÿå‘½å‘¨æœŸ@RetentionåŒ…å«ä¸€ä¸ªRetentionPolicyç±»å‹çš„æˆå‘˜å˜é‡ï¼Œä½¿ç”¨æ—¶å¿…é¡»ä¸ºè¯¥valueæˆå‘˜å˜é‡æŒ‡å®šå€¼ RetentionPolicy.SOURCEï¼šåœ¨æºæ–‡ä»¶ä¸­æœ‰æ•ˆ(å³æºæ–‡ä»¶ä¿ç•™)ï¼Œç¼–è¯‘å™¨ç›´æ¥ä¸¢å¼ƒè¿™ç§ç­–ç•¥çš„æ³¨è§£ RetentionPolicy.CLASSï¼šåœ¨classæ–‡ä»¶ä¸­æœ‰æ•ˆ(å³classä¿ç•™)ï¼Œå½“è¿è¡ŒJavaç¨‹åºæ—¶ï¼ŒJVMä¸ä¼šä¿ç•™æ³¨è§£ï¼Œè¿™æ˜¯é»˜è®¤å€¼ RetentionPolicy.RUNTIMEï¼šï¼šåœ¨è¿è¡Œæ—¶æœ‰æ•ˆ(å³è¿è¡Œæ—¶ä¿ç•™)ï¼Œå½“è¿è¡ŒJavaç¨‹åºæ—¶ï¼ŒJVMä¼šä¿ç•™ä½æ—¶ï¼Œç¨‹åºå¯ä»¥é€šè¿‡åå°„è·å–è¯¥æ³¨è§£ Targetï¼šç”¨äºä¿®é¥°Annotationå®šä¹‰ï¼Œç”¨äºæŒ‡å®šè¢«ä¿®é¥°çš„Annotationèƒ½ç”¨äºä¿®é¥°å“ªäº›ç¨‹åºå…ƒç´ ã€‚@Targetä¹ŸåŒ…å«ä¸€ä¸ªåä¸ºvalueçš„æˆå‘˜å˜é‡ ElementType.CONSTRUCTORï¼šç”¨äºæè¿°æ„é€ å™¨ ElementType.FIELDï¼šç”¨äºæè¿°åŸŸ ElementType.LOCAL_VARIABLEï¼šç”¨äºæè¿°å±€éƒ¨å˜é‡ ElementType.METHODï¼šç”¨äºæè¿°æ–¹æ³• ElementType.PACKAGEï¼šç”¨äºæè¿°åŒ… ElementType.PARAMETERï¼šç”¨äºæè¿°å‚æ•° ElementType.TYPEï¼šç”¨äºæè¿°ç±»ã€æ¥å£(åŒ…æ‹¬æ³¨è§£ç±»å‹)æˆ–enumå£°æ˜ Documentedï¼šç”¨äºæŒ‡å®šè¢«è¯¥å…ƒAnnotationä¿®é¥°çš„Annotationç±»å°†è¢«Javadocå·¥å…·æå–æˆæ–‡æ¡£ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œjavadocæ˜¯ä¸åŒ…æ‹¬æ³¨è§£çš„ å®šä¹‰ä¸ºDocumentedçš„æ³¨è§£å¿…é¡»è®¾ç½®Retentionå€¼ä½RUNTIME Inheritedï¼šè¢«å®ƒä¿®é¥°çš„Annotationå°†å…·æœ‰ç»§æ‰¿æ€§ã€‚å¦‚æœæŸä¸ªç±»ä½¿ç”¨äº†è¢«@Inheritedä¿®é¥°çš„Annotationï¼Œåˆ™å…¶å­ç±»å°†è‡ªåŠ¨å…·æœ‰è¯¥æ³¨è§£ æ¯”å¦‚æŠŠæ ‡æœ‰@Inheritedæ³¨è§£çš„è‡ªå®šä¹‰æ³¨è§£æ ‡æ³¨åœ¨ç±»çº§åˆ«ä¸Šï¼Œå­ç±»åˆ™å¯ä»¥ç»§æ‰¿çˆ¶ç±»ç±»çº§åˆ«çš„æ³¨è§£ å®é™…åº”ç”¨ä¸­ä½¿ç”¨è¾ƒå°‘ é€šè¿‡åå°„è·å–æ³¨è§£ä¿¡æ¯ JDK 5.0 åœ¨ java.lang.reflect åŒ…ä¸‹æ–°å¢äº† AnnotatedElement æ¥å£ , è¯¥æ¥å£ä»£è¡¨ç¨‹åºä¸­å¯ä»¥æ¥å—æ³¨è§£çš„ç¨‹åºå…ƒç´  å½“ä¸€ä¸ª Annotation ç±»å‹è¢«å®šä¹‰ä¸ºè¿è¡Œæ—¶ Annotationå , è¯¥æ³¨è§£æ‰æ˜¯è¿è¡Œæ—¶å¯è§ , å½“classæ–‡ä»¶è¢«è½½å…¥æ—¶ä¿å­˜åœ¨ class æ–‡ä»¶ä¸­çš„ Annotation æ‰ä¼šè¢«è™šæ‹Ÿæœºè¯»å– ç¨‹åºå¯ä»¥è°ƒç”¨ AnnotatedElement å¯¹è±¡çš„å¦‚ä¸‹æ–¹æ³•æ¥è®¿é—® Annotation ä¿¡æ¯ JDK8.0ä¸­æ–°ç‰¹æ€§ JDK8.0ä¹‹å‰ JDK8.0åŠä¹‹å ç±»å‹æ³¨è§£ JDK1.8 ä¹‹åï¼Œå…³äºå…ƒæ³¨è§£ @Target çš„å‚æ•°ç±»å‹ElementTypeæšä¸¾å€¼å¤šäº†ä¸¤ä¸ªï¼šTYPE_PARAMETER, TYPE_USEã€‚ åœ¨ Java 8 ä¹‹å‰ æ³¨è§£åªèƒ½æ˜¯åœ¨å£°æ˜çš„åœ°æ–¹æ‰€ä½¿ç”¨ Java 8 å¼€å§‹ æ³¨è§£å¯ä»¥åº”ç”¨åœ¨ä»»ä½•åœ°æ–¹ ElementType TYPE_PARAMETER è¡¨ç¤ºè¯¥æ³¨è§£èƒ½å†™åœ¨ç±»å‹å˜é‡çš„å£°æ˜è¯­å¥ä¸­å¦‚æ³›å‹å£°æ˜ ã€‚ ElementType TYPE_USE è¡¨ç¤ºè¯¥æ³¨è§£èƒ½å†™åœ¨ä½¿ç”¨ç±»å‹çš„ä»»ä½•è¯­å¥ä¸­ ã€‚ TYPE_PARAMETER public class TestTypeDefine&lt;@TypeDefine() U&gt;{ private U u; public &lt;@TypeDefine() T&gt; void test(T t){ } } @Target({ElementType.TYPE_PARAMETER}) @interface TypeDefine{ } TYPE_USE @MyAnnotation public class AnnotationTest&lt;U&gt; { @MyAnnotation private String name; public static void main(String[] args){ AnnotationTest&lt;@MyAnnotation String&gt; t = null; int a = (@MyAnnotation int) 2L; @MyAnnotation int b = 10; } public static &lt;@MyAnnotation T&gt; void method(T t){ } public static void test(@MyAnnotation String arg) throws @MyAnnotation Exception{ } } @Target(ElementType.TYPE_USE) @interface MyAnnotation{ } ","link":"https://yeyuan1107.github.io/post/java-chang-yong-lei/"},{"title":"Javaå¤šçº¿ç¨‹","content":" ç®€ä»‹ ç¨‹åºï¼šä¸ºå®Œæˆç‰¹å®šä»»åŠ¡ã€ç”¨æŸç§è¯­è¨€ç¼–å†™çš„ä¸€ç»„æŒ‡ä»¤çš„é›†åˆã€‚å³æŒ‡ä¸€æ®µé™æ€çš„ä»£ç ï¼Œé™æ€å¯¹è±¡ã€‚ è¿›ç¨‹ï¼šæ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ–æ˜¯æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªç¨‹åºã€‚æ˜¯ä¸€ä¸ªåŠ¨æ€çš„è¿‡ç¨‹ï¼šæœ‰è‡ªèº«çš„äº§ç”Ÿã€å­˜åœ¨å’Œæ¶ˆäº¡çš„è¿‡ç¨‹ã€‚ ç¨‹åºæ˜¯é™æ€çš„ï¼Œè¿›ç¨‹æ˜¯åŠ¨æ€çš„ è¿›ç¨‹ä½œä¸ºèµ„æºåˆ†é…çš„å•ä½ï¼Œç³»ç»Ÿåœ¨è¿è¡Œæ—¶ä¼šä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸åŒçš„å†…å­˜åŒºåŸŸ(æ–¹æ³•åŒºå’Œå †) çº¿ç¨‹ï¼šè¿›ç¨‹å¯è¿›ä¸€æ­¥ç»†åŒ–ä¸ºçº¿ç¨‹ï¼Œæ˜¯ä¸€ä¸ªç¨‹åºå†…éƒ¨çš„ä¸€æ¡æ‰§è¡Œè·¯å¾„ã€‚ è‹¥ä¸€ä¸ªè¿›ç¨‹åŒä¸€æ—¶é—´å¹¶è¡Œæ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œå°±æ˜¯æ”¯æŒå¤šçº¿ç¨‹çš„ çº¿ç¨‹ä½œä¸ºè°ƒåº¦å’Œæ‰§è¡Œçš„å•ä½ï¼Œæ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰ç‹¬ç«‹çš„è¿è¡Œæ ˆå’Œç¨‹åºè®¡æ•°å™¨(PC)ï¼Œçº¿ç¨‹åˆ‡æ¢çš„å¼€é”€å° ä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹å…±äº«ç›¸åŒçš„å†…å­˜å•å…ƒ/å†…å­˜åœ°å€ç©ºé—´ -&gt; ä»–ä»¬ä»åŒä¸€å †ä¸­åˆ†é…å¯¹è±¡ï¼Œå¯ä»¥è®¿é—®ç›¸åŒçš„å˜é‡å’Œå¯¹è±¡ã€‚è¿™å°±ä½¿å¾—çº¿ç¨‹é—´é€šä¿¡æ›´ç®€ä¾¿ã€é«˜æ•ˆã€‚ä½†å¤šä¸ªçº¿ç¨‹æ“ä½œå…±äº«çš„ç³»ç»Ÿèµ„æºå¯èƒ½å°±ä¼šå¸¦æ¥å®‰å…¨çš„éšæ‚£ ä¸€ä¸ªJavaåº”ç”¨ç¨‹åºè‡³å°‘æœ‰ä¸‰ä¸ªçº¿ç¨‹ï¼šmain()ä¸»çº¿ç¨‹ã€gc()åƒåœ¾å›æ”¶çº¿ç¨‹ã€å¼‚å¸¸å¤„ç†çº¿ç¨‹ ä¼˜ç‚¹ æé«˜ç¨‹åºå“åº”å¯¹å›¾å½¢åŒ–ç•Œé¢æ„ä¹‰é‡å¤§ï¼Œå¢å¼ºç”¨æˆ·ä½“éªŒ æé«˜è®¡ç®—æœºCPUåˆ©ç”¨ç‡ æ”¹å–„ç¨‹åºç»“æ„ï¼Œå°†æ—¢é•¿åˆå¤æ‚çš„è¿›ç¨‹åˆ†ä¸ºå¤šä¸ªçº¿ç¨‹ï¼Œç‹¬ç«‹è¿è¡Œåˆ©äºç†è§£å’Œä¿®æ”¹ ç¼ºç‚¹ èµ„æºå®‰å…¨é—®é¢˜ çº¿ç¨‹é—´åˆ‡æ¢æœ‰å¼€é”€ï¼Œå¦‚æœåªä½¿ç”¨å•ä¸ªçº¿ç¨‹å…ˆåå®Œæˆå¤šä¸ªä»»åŠ¡(è°ƒç”¨å¤šä¸ªæ–¹æ³•)ï¼Œè‚¯å®šæ¯”ç”¨å¤šä¸ªçº¿ç¨‹æ¥å®Œæˆç”¨çš„æ—¶é—´æ›´çŸ­ ä½•æ—¶éœ€è¦å¤šçº¿ç¨‹ ç¨‹åºéœ€è¦åŒæ—¶æ‰§è¡Œä¸¤ä¸ªæˆ–å¤šä¸ªä»»åŠ¡ ç¨‹åºéœ€è¦å®ç°ä¸€äº›éœ€è¦ç­‰å¾…çš„ä»»åŠ¡æ—¶ï¼Œå¦‚ç”¨æˆ·è¾“å…¥ã€æ–‡ä»¶è¯»å†™æ“ä½œã€ç½‘ç»œæ“ä½œã€æœç´¢ç­‰ éœ€è¦ä¸€äº›åå°è¿è¡Œçš„ç¨‹åºæ—¶ çº¿ç¨‹çš„åˆ›å»ºå’Œä½¿ç”¨ JVMå…è®¸ç¨‹åºè¿è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œå®ƒé€šè¿‡java.lang.Threadç±»æ¥ä½“ç°Threadç±»çš„ç‰¹æ€§ æ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯é€šè¿‡æŸä¸ªç‰¹å®šThreadå¯¹è±¡çš„run()æ–¹æ³•æ¥å®Œæˆæ“ä½œçš„ï¼Œç»å¸¸æŠŠrun()æ–¹æ³•çš„ä¸»ä½“ç§°ä¸ºçº¿ç¨‹ä½“ é€šè¿‡è¯¥Threadå¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨è¿™ä¸ªçº¿ç¨‹ï¼Œè€Œéç›´æ¥è°ƒç”¨run() Threadç±» æ„é€ å™¨ Thread()ï¼šåˆ›å»ºæ–°çš„Threadå¯¹è±¡ Thread(String threadname)ï¼šåˆ›å»ºçº¿ç¨‹å¹¶æŒ‡å®šçº¿ç¨‹å®ä¾‹å Thread(Tunnable target)ï¼šæŒ‡å®šåˆ›å»ºçº¿ç¨‹çš„ç›®æ ‡å¯¹è±¡ï¼Œå®ƒå®ç°äº†Runableæ¥å£ä¸­çš„runæ–¹æ³• Thread(Runnable target, String name)ï¼šåˆ›å»ºæ–°çš„Threadå¯¹è±¡ æ–¹æ³• void start()ï¼šå¯åŠ¨çº¿ç¨‹ï¼Œå¹¶æ‰§è¡Œrun()æ–¹æ³• run()ï¼šçº¿ç¨‹åœ¨è¢«è°ƒåº¦æ—¶æ‰§è¡Œçš„æ“ä½œ String getName()ï¼šè¿”å›çº¿ç¨‹çš„åç§° void setName(String name)ï¼šè®¾ç½®çº¿ç¨‹çš„åç§° static Thread currentThread()ï¼šè¿”å›å½“å‰çº¿ç¨‹ static void yield()ï¼šé‡Šæ”¾å½“å‰CPUæ‰§è¡Œæƒï¼Œåœ¨ä¸‹ä¸€åˆ»å¯èƒ½åˆè¢«åˆ†é…åˆ°æ‰§è¡Œæƒ join()ï¼šåœ¨çº¿ç¨‹Aä¸­è°ƒç”¨çº¿ç¨‹Bçš„join()æ–¹æ³•ï¼Œçº¿ç¨‹Aè¿›å…¥é˜»å¡çŠ¶æ€ï¼ŒçŸ¥é“çº¿ç¨‹Bå®Œå…¨æ‰§è¡Œå®Œæ¯•åçº¿ç¨‹Aç»“æŸé˜»å¡çŠ¶æ€ stop()ï¼šå¼ºåˆ¶çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸç»“æŸï¼Œä¸æ¨èä½¿ç”¨ isAlive()ï¼šåˆ¤æ–­çº¿ç¨‹æ˜¯å¦è¿˜å­˜æ´» static void sleep(long milltime)ï¼šè®©å½“å‰çº¿ç¨‹ç¡çœ åˆ¶å®šçš„æ¯«ç§’æ•°ï¼Œåœ¨æŒ‡å®šæ—¶é—´å†…è¯¥çº¿ç¨‹ä¸ºé˜»å¡çŠ¶æ€ï¼Œæ—¶é—´ç»“æŸåç­‰CPUåˆ†é…èµ„æºå†ç»§ç»­æ‰§è¡Œ å±æ€§ çº¿ç¨‹ä¼˜å…ˆçº§Priority ä»10 -&gt; 1(é«˜ -&gt; ä½) MAX_PRIORITY -&gt; NORM_PRIORITY -&gt; MIN_PRIORITYgetPriority()setPriority()ä¼˜å…ˆçº§è¶Šé«˜åªä»£è¡¨è¢«CPUåˆ†é…èµ„æºæ¦‚ç‡é«˜ï¼Œä¸ä¸€å®šæ˜¯ä»–æ‰§è¡Œå®Œæ‰æ‰§è¡Œä¼˜å…ˆçº§ä½çš„ åˆ›å»ºçº¿ç¨‹çš„æ–¹æ³• JDK1.5ä¹‹å‰ å¼€å‘ä¸­ä¼˜å…ˆé€‰æ‹©å®ç°Runnableæ–¹å¼åŒºåˆ«ï¼š ç»§æ‰¿Threadç±»ï¼šçº¿ç¨‹ä»£ç å­˜æ”¾Threadå­ç±»run()æ–¹æ³•ä¸­å®ç°Runnableï¼šçº¿ç¨‹ä»£ç å­˜åœ¨æ¥å£çš„å­ç±»çš„run()æ–¹æ³• è”ç³»ï¼š Threadä¹Ÿå®ç°äº†Runnableä¸¤ç§æ–¹å¼éƒ½è¦é‡å†™run()æ–¹æ³• ç»§æ‰¿Threadç±» æ³¨æ„ ä¸èƒ½ç›´æ¥è°ƒç”¨run()æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹ï¼Œå¦‚æœç›´æ¥è°ƒç”¨å°±åªæ˜¯æ™®é€šæ–¹æ³•ï¼Œå¹¶æ²¡æœ‰å¯åŠ¨å¤šçº¿ç¨‹æ¨¡å¼run()æ–¹æ³•ç”±JVMè°ƒç”¨ï¼Œä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Œæ‰§è¡Œçš„è¿‡ç¨‹æ§åˆ¶éƒ½æœ‰æ“ä½œç³»ç»Ÿçš„CPUè°ƒåº¦å†³å®šæƒ³è¦å¯åŠ¨å¤šçº¿ç¨‹ï¼Œå¿…é¡»è°ƒç”¨startæ–¹æ³•ä¸èƒ½è®©å·²ç»start()çš„çº¿ç¨‹å†æ¬¡start()ï¼Œå¦‚æœå¤šæ¬¡å¯åŠ¨æŠ›å‡ºå¼‚å¸¸IllegalThreadStateException //1.å®šä¹‰å­ç±»ç»§æ‰¿Threadç±» class MyThread extends Thread{ public MyThread(){ super(); } //2.å­ç±»ä¸­é‡å†™run()æ–¹æ³•ï¼Œè¯¥çº¿ç¨‹è¦è¿›è¡Œçš„æ“ä½œå†™åœ¨run()æ–¹æ³•ä¸­ @override public void run(){ æ–¹æ³•ä½“; } } public class TestThread{ public static void main(String[] args){ //3.åˆ›å»ºThreadç±»çš„å­ç±»çš„å¯¹è±¡ MyThread mt = new MyThread(); //4.é€šè¿‡å¯¹è±¡è°ƒç”¨start()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä½œç”¨ä¸º //4.1 å¯åŠ¨å½“å‰çº¿ç¨‹ //4.2 è°ƒç”¨å½“å‰çº¿ç¨‹çš„run() mt.start(); } } å®ç°Runnableæ¥å£ ä¼˜ç‚¹ï¼š é¿å…äº†ä½†ç»§æ‰¿çš„å±€é™æ€§å¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€ä¸ªæ¥å£å®ç°ç±»çš„å¯¹è±¡ï¼Œéå¸¸é€‚åˆå¤šä¸ªç›¸åŒçº¿ç¨‹æ¥å¤„ç†åŒä¸€ä»½èµ„æº //1. åˆ›å»ºä¸€ä¸ªå®ç°äº†Runnableæ¥å£çš„ç±» class MyThread implements Runnable{ //2. å®ç°run()æ–¹æ³• public void run(){ æ–¹æ³•ä½“; } } public class TestThread{ public static void main(String[] args){ //3. åˆ›å»ºå®ç°ç±»å¯¹è±¡ //4. å°†æ­¤å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°Threadç±»çš„æœ‰å‚æ„é€ å™¨ä¸­ï¼Œåˆ›å»ºThreadç±»å¯¹è±¡ //4.1 åœ¨Threadç±»ä¸­æœ‰ä¸€ä¸ªæ„é€ å™¨ä¸ºThread(Runnable target)å½“target!=nullæ—¶run()ä¸­æ‰§è¡Œtarget.run() Thread mt = new Thread(new MyThread()); //5. é€šè¿‡Threadç±»çš„å¯¹è±¡è°ƒç”¨start()æ–¹æ³• mt.start(); } } JDK1.5åŠä¹‹å å®ç°Callabelæ¥å£ ä¸Runnableç›¸æ¯”CallableåŠŸèƒ½æ›´å¼ºå¤§äº›ï¼š ç›¸æ¯”run()æ–¹æ³•ï¼Œå¯ä»¥æœ‰è¿”å›å€¼ æ–¹æ³•å¯ä»¥æŠ›å‡ºå¼‚å¸¸ æ”¯æŒæ³›å‹çš„è¿”å›å€¼ éœ€è¦å€ŸåŠ©FutureTaskç±»ï¼Œæ¯”å¦‚è·å–è¿”å›ç»“æœ Futureæ¥å£ï¼šå¯ä»¥å¯¹å…·ä½“Runnableã€Callableä»»åŠ¡çš„æ‰§è¡Œç»“æœè¿›è¡Œå–æ¶ˆã€æŸ¥è¯¢æ—¶å¦å®Œæˆã€è·å–ç»“æœç­‰ã€‚ FutureTaskæ˜¯Futureæ¥å£çš„å”¯ä¸€å®ç°ç±» FutureTaskåŒæ—¶å®ç°äº†Runnableï¼ŒFutureæ¥å£ã€‚ä»–æ—¢å¯ä»¥ä½œä¸ºRunnableè¢«çº¿ç¨‹æ‰§è¡Œï¼Œåˆå¯ä»¥ä½œä¸ºFutureå¾—åˆ°Callableçš„è¿”å›å€¼ï¼šfuturetask.get() //1. åˆ›å»ºä¸€ä¸ªå®ç°Callableçš„å®ç°ç±» class CallableExample implements Callable { //2. å®ç°call()æ–¹æ³•å°†æ­¤çº¿ç¨‹éœ€è¦æ‰§è¡Œçš„æ“ä½œæ˜¯ç°åœ¨call()æ–¹æ³•ä¸­ public Object call() throws Exception { Random generator = new Random(); Integer randomNumber = generator.nextInt(5); Thread.sleep(randomNumber * 1000); return randomNumber; } } public class CallableFutureTest { public static void main(String[] args) throws Exception { FutureTask[] randomNumberTasks = new FutureTask[5]; for (int i = 0; i &lt; 5; i++) { //3. åˆ›å»ºCallableæ¥å£å®ç°ç±»å¯¹è±¡ Callable callable = new CallableExample(); //4. å°†Callableæ¥å£å®ç°ç±»å¯¹è±¡ä½œä¸ºFutureTaskæ„é€ å™¨å‚æ•°æ¥åˆ›å»ºFutureTaskå¯¹è±¡ randomNumberTasks[i] = new FutureTask(callable); //5. å°†FutureTaskå¯¹è±¡æœ€ä¸ºThreadæ„é€ å™¨å‚æ•°æ¥åˆ›å»ºThreadå¯¹è±¡ Thread t = new Thread(randomNumberTasks[i]); //6. å¯åŠ¨çº¿ç¨‹ t.start(); } for (int i = 0; i &lt; 5; i++){ //7. é€šè¿‡get()çš„åˆ°Callableä¸­call()æ–¹æ³•çš„è¿”å›å€¼ System.out.println(randomNumberTasks[i].get()); } } } ä½¿ç”¨çº¿ç¨‹æ±  èƒŒæ™¯ï¼šç»å¸¸åˆ›å»ºå’Œé”€æ¯ã€ä½¿ç”¨é‡ç‰¹åˆ«å¤§çš„èµ„æºï¼Œæ¯”å¦‚å…µæ³•æƒ…å†µä¸‹çš„çº¿ç¨‹ï¼Œå¯¹æ€§èƒ½å½±å“å¾ˆå¤§ æ€è·¯ï¼šæå‰åˆ›å»ºå¥½å¤šä¸ªçº¿ç¨‹ï¼Œæ”¾å…¥çº¿ç¨‹æ± ä¸­ï¼Œä½¿ç”¨æ—¶ç›´æ¥è·å–ï¼Œä½¿ç”¨å®Œæ”¾å›æ± ä¸­ã€‚å°±å¯ä»¥é¿å…é¢‘ç¹åˆ›å»ºé”€æ¯ã€å®ç°é‡å¤åˆ©ç”¨ã€‚ç±»ä¼¼ç”Ÿæ´»ä¸­çš„å…¬å…±äº¤é€šå·¥å…· ä¼˜ç‚¹ï¼š æé«˜å“åº”é€Ÿåº¦(å‡å°‘äº†åˆ›å»ºæ–°çº¿ç¨‹çš„æ—¶é—´) é™ä½èµ„æºæ¶ˆè€—(é‡å¤åˆ©ç”¨çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½åˆ›å»º) ä¾¿äºçº¿ç¨‹ç®¡ç† corePoolSizeï¼šæ ¸å¿ƒæ± çš„å¤§å° maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•° keepAliveTimeï¼šçº¿ç¨‹æ²¡æœ‰ä»»åŠ¡æ˜¯æœ€å¤šä¿æŒå¤šé•¿æ—¶é—´ä¼šç»ˆæ­¢ çº¿ç¨‹æ± çš„ç›¸å…³APIï¼šExecutorServiceå’ŒExecutorsExecutorServiceï¼šçœŸæ­£çš„çº¿ç¨‹æ± æ¥å£ã€‚å¸¸è§å­ç±»ThreadPoolExecutor void execute(Runnable command)ï¼šæ‰§è¡Œä»»åŠ¡/å‘½ä»¤ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œä¸€èˆ¬ç”¨æ¥æ‰§è¡ŒRunnable &lt;T&gt; Future &lt;T&gt; submit(Callable&lt;T&gt; task)ï¼šæ‰§è¡Œä»»åŠ¡ï¼Œæœ‰è¿”å›å€¼ï¼Œä¸€èˆ¬ç”¨æ¥æ‰§è¡ŒCallable void shutdown()ï¼šå…³é—­çº¿ç¨‹æ±  Executorsï¼šå·¥å…·ç±»ã€çº¿ç¨‹æ± çš„å·¥å‚ç±»ï¼Œç”¨äºåˆ›å»ºå¹¶è¿”å›ä¸åŒç±»å‹çš„çº¿ç¨‹æ±  Executors.newCachedThreadPool()ï¼šåˆ›å»ºä¸€ä¸ªå¯æ ¹æ®éœ€è¦åˆ›å»ºæ–°çº¿ç¨‹çš„çº¿ç¨‹æ±  Executors.newFixedThreadPool(n)ï¼šåˆ›å»ºä¸€ä¸ªå¯é‡ç”¨å›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ±  Executors.newSingleThreadExecutor()ï¼šåˆ›å»ºä¸€ä¸ªåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ±  Executors.newScheduledThreadPool(n)ï¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå®ƒå¯å®‰æ’åœ¨ç»™å®šå»¶è¿Ÿåè¿è¡Œå‘½ä»¤æˆ–è€…å®šæœŸåœ°æ‰§è¡Œã€‚ public void poolTest(){ //1. åˆ›å»ºçº¿ç¨‹æ± ï¼Œè¿”å›ç±»å‹ä¸ºThreadPoolExecutor //ThreadPoolExecutoræ˜¯çº¿ç¨‹æ± çš„ç±»ï¼Œå¯ä»¥é€šè¿‡å¼ºè½¬æ¥è®¾ç½®çº¿ç¨‹æ± å±æ€§ ExecutorService es = Executors.newCachedThreadPool(); //2. è®¾ç½®çº¿ç¨‹æ± å‚æ•°ï¼Œä¾‹å¦‚corePoolSizeç­‰ //3. çº¿ç¨‹æ‰§è¡Œ //é€‚ç”¨äºRunnbale es.execute(Runnable xx); //é€‚ç”¨äºCallable es.submit(Callable&lt;T&gt; xx); //å…³é—­çº¿ç¨‹æ±  es.shutdown(); } çº¿ç¨‹çš„è°ƒåº¦ å¸¸è§çš„ç­–ç•¥ä¸ºï¼šæ—¶é—´ç‰‡ã€æŠ¢å å¼ Javaçš„è°ƒåº¦æ–¹æ³•ï¼š åŒä¼˜å…ˆçº§çº¿ç¨‹ç»„æˆå…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—(å…ˆåˆ°å…ˆæœåŠ¡)ï¼Œä½¿ç”¨æ—¶é—´ç‰‡ç­–ç•¥ å¯¹é«˜ä¼˜å…ˆçº§ï¼Œä½¿ç”¨ä¼˜å…ˆè°ƒåº¦çš„æŠ¢å å¼ç­–ç•¥ çº¿ç¨‹çš„åˆ†ç±» Javaä¸­çº¿ç¨‹åˆ†ä¸ºä¸¤ç±» å®ˆæŠ¤çº¿ç¨‹ï¼šç”¨æ¥æœåŠ¡ç”¨æˆ·çº¿ç¨‹ï¼Œé€šè¿‡åœ¨start()æ–¹æ³•å‰è°ƒç”¨thread.setDaemon(true)å¯ä»¥æŠŠä¸€ä¸ªç”¨æˆ·çº¿ç¨‹å˜æˆä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹ï¼ŒJavaåƒåœ¾å›æ”¶å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å®ˆæŠ¤çº¿ç¨‹ ç”¨æˆ·çº¿ç¨‹ä»–ä»¬åœ¨å‡ ä¹æ¯ä¸ªæ–¹é¢éƒ½æ˜¯ç›¸åŒçš„ï¼Œå”¯ä¸€åŒºåˆ«å°±æ˜¯åˆ¤æ–­JVMä½•æ—¶ç¦»å¼€è‹¥JVMä¸­éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œå½“å‰JVMå°†é€€å‡º çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ æ–°å»ºï¼š å½“ ä¸€ä¸ª Thread ç±»æˆ–å…¶å­ç±»çš„å¯¹è±¡è¢«å£°æ˜å¹¶åˆ›å»ºæ—¶ï¼Œæ–°ç”Ÿçš„çº¿ç¨‹å¯¹è±¡å¤„äºæ–°å»ºçŠ¶æ€ å°±ç»ªï¼š å¤„äºæ–°å»ºçŠ¶æ€çš„çº¿ç¨‹è¢«start()åï¼Œå°†è¿›å…¥çº¿ç¨‹é˜Ÿåˆ—ç­‰å¾…CPUæ—¶é—´ç‰‡ï¼Œæ­¤æ—¶å®ƒå·²å…·å¤‡äº†è¿è¡Œ çš„æ¡ä»¶ ï¼Œåªæ˜¯æ²¡åˆ†é…åˆ° CPU èµ„æº è¿è¡Œï¼š å½“å°±ç»ªçš„çº¿ç¨‹è¢«è°ƒåº¦å¹¶è·å¾— CPU èµ„æºæ—¶ä¾¿è¿›å…¥è¿è¡ŒçŠ¶æ€ï¼Œ run() æ–¹æ³•å®šä¹‰äº†çº¿ç¨‹çš„æ“ä½œå’ŒåŠŸèƒ½ é˜»å¡ï¼š åœ¨æŸç§ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œè¢«äººä¸ºæŒ‚èµ·æˆ–æ‰§è¡Œè¾“å…¥è¾“å‡ºæ“ä½œæ—¶ï¼Œè®©å‡º CPU å¹¶ä¸´æ—¶ä¸­æ­¢è‡ªå·±çš„æ‰§è¡Œï¼Œè¿›å…¥é˜»å¡çŠ¶æ€ æ­»äº¡ï¼š çº¿ç¨‹å®Œæˆäº†å®ƒçš„å…¨éƒ¨å·¥ä½œæˆ–çº¿ç¨‹è¢«æå‰å¼ºåˆ¶æ€§åœ°ä¸­æ­¢æˆ–å‡ºç°å¼‚å¸¸å¯¼è‡´ç»“æŸ çº¿ç¨‹çš„åŒæ­¥ å¤šä¸ªçº¿ç¨‹çš„ä¸ç¡®å®šæ€§å¼•èµ·æ‰§è¡Œç»“æœçš„ä¸ç¨³å®šï¼Œå¤šä¸ªçº¿ç¨‹å¯¹èµ„æºå…±äº«ï¼Œä¼šé€ æˆæ“ä½œçš„ä¸å®Œæ•´æ€§ï¼Œä¼šç ´åæ•°æ®ã€‚åŒæ­¥è§£å†³äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä½†æ“ä½œåŒæ­¥ä»£ç æ—¶åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å‚ä¸ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ï¼Œç›¸å½“äºä¸€ä¸ªå•çº¿ç¨‹è¿‡ç¨‹ã€‚ åŒæ­¥ä»£ç å— //åŒæ­¥ç›‘è§†å™¨ç›¸å½“äºä¸€æŠŠé”ï¼Œä»»ä½•ä¸€ä¸ªç±»çš„å¯¹è±¡éƒ½å¯ä»¥å……å½“é”ï¼Œè¦æ±‚è¦åŒæ­¥çš„å¤šä¸ªçº¿ç¨‹å…±ç”¨ä¸€æŠŠé” //åœ¨å®ç°Runnableæ¥å£æ–¹æ³•ä¸­åŒæ­¥ç›‘è§†å™¨å¯ä»¥è€ƒè™‘å†™thiså³å¯ //åœ¨ç»§æ‰¿Threadç±»æ–¹æ³•ä¸­åŒæ­¥ç›‘è§†å™¨å¯ä»¥è€ƒè™‘å†™xx.class(å¯ä»¥ä¸ºå½“å‰ç±»)ï¼Œæ…ç”¨this synchronized(åŒæ­¥ç›‘è§†å™¨){ //æ“ä½œå…±äº«æ•°æ®çš„ä»£ç  //å…±äº«æ•°æ®ï¼šå¤šä¸ªçº¿ç¨‹å…±åŒæ“ä½œçš„å˜é‡ éœ€è¦åŒæ­¥çš„ä»£ç ; } åŒæ­¥æ–¹æ³• å¦‚æœæ“ä½œå…±äº«æ•°æ®çš„ä»£ç å®Œæ•´çš„ç”Ÿå‘½åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¸å¦¨å°†æ­¤æ–¹æ³•å£°æ˜ä¸ºåŒæ­¥æ–¹æ³• JDK1.5ä¹‹å‰ å®ç°Runableæ–¹æ³•çš„åŒæ­¥æ–¹æ³• //è¯¥æ–¹æ³•ä¸­ä¹Ÿæœ‰åŒæ­¥ç›‘è§†å™¨ä¸ºthis æƒé™ä¿®é¥°ç¬¦ synchronized è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å½¢å‚åˆ—è¡¨){ éœ€è¦åŒæ­¥çš„ä»£ç ; } ç»§æ‰¿Threadç±»æ–¹æ³•çš„åŒæ­¥æ–¹æ³• //è¯¥æ–¹æ³•ä¸­åŒæ­¥ç›‘è§†å™¨ä¸º å½“å‰ç±».class æƒé™ä¿®é¥°ç¬¦ static synchronized è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å½¢å‚åˆ—è¡¨){ éœ€è¦åŒæ­¥çš„ä»£ç ; } æ³¨æ„ åŒæ­¥æ–¹æ³•ä¸­ä»éœ€è¦åŒæ­¥ç›‘è§†å™¨ï¼Œåªä¸è¿‡ä¸éœ€è¦æˆ‘ä»¬æ˜¾å¼å£°æ˜éé™æ€çš„åŒæ­¥æ–¹æ³•ï¼ŒåŒæ­¥ç›‘è§†å™¨ï¼šthisé™æ€çš„åŒæ­¥æ–¹æ³•ï¼ŒåŒæ­¥ç›‘è§†å™¨ï¼šå½“å‰ç±»æœ¬èº« JDK1.5åŠä¹‹å Locké” class A{ //1. å®ä¾‹åŒ–ReentrantLockç±»ï¼Œè¯¥ç±»å®ç°äº†java.util.concurrent.locks.lockæ¥å£ private final ReentrantLock lock = new ReenTrantLock(); public void m(){ //3. è°ƒç”¨lock()æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨tryä¸­ lock.lock(); //2. å°†éœ€è¦åŒæ­¥çš„ä»£ç ç”¨try-finallyåŒ…å›´ try{ éœ€è¦åŒæ­¥çš„ä»£ç å—; }finally{ //4. finllyä¸­è°ƒç”¨unlock()æ–¹æ³• lock.unlock(); } } } synchronizedä¸Lockçš„å¯¹æ¯” Lock æ˜¯æ˜¾å¼é”ï¼ˆæ‰‹åŠ¨å¼€å¯å’Œå…³é—­é”ï¼Œåˆ«å¿˜è®°å…³é—­é”ï¼‰ï¼Œsynchronized æ˜¯éšå¼é”ï¼Œå‡ºäº†ä½œç”¨åŸŸè‡ªåŠ¨é‡Šæ”¾ Lock åªæœ‰ä»£ç å—é”ï¼Œ synchronizedæœ‰ä»£ç å—é”å’Œæ–¹æ³•é” ä½¿ç”¨Locké”ï¼Œ JVM å°†èŠ±è´¹è¾ƒå°‘çš„æ—¶é—´æ¥è°ƒåº¦çº¿ç¨‹ï¼Œæ€§èƒ½æ›´å¥½ã€‚å¹¶ä¸”å…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ï¼ˆæä¾›æ›´å¤šçš„å­ç±»ï¼‰ä¼˜å…ˆä½¿ç”¨é¡ºåºï¼šLock -&gt; åŒæ­¥ä»£ç å—(å·²ç»è¿›å…¥äº†æ–¹æ³•ä½“ï¼Œåˆ†é…äº†ç›¸åº”èµ„æº ) -&gt;åŒæ­¥æ–¹æ³•(åœ¨æ–¹æ³•ä½“ä¹‹å¤–) åŒæ­¥é” é‡Šæ”¾é”çš„å‡ ç§æ“ä½œ å½“å‰çº¿ç¨‹çš„åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—æ‰§è¡Œç»“æŸã€‚ å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­é‡åˆ° breakã€ return ç»ˆæ­¢äº†è¯¥ä»£ç å—ã€è¯¥æ–¹æ³•çš„ç»§ç»­æ‰§è¡Œã€‚ å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­å‡ºç°äº†æœªå¤„ç†çš„ Error æˆ– Exception å¯¼è‡´å¼‚å¸¸ç»“æŸã€‚ å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­æ‰§è¡Œäº†çº¿ç¨‹å¯¹è±¡çš„ wait() æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹æš‚åœï¼Œå¹¶é‡Šæ”¾é”ã€‚ ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•æ—¶ï¼Œç¨‹åºè°ƒç”¨ Thread.sleep ã€Thread.yield æ–¹æ³•æš‚åœå½“å‰çº¿ç¨‹çš„æ‰§è¡Œ çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¯¥çº¿ç¨‹çš„ suspend() æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ·ï¼Œè¯¥çº¿ç¨‹ä¸ä¼šé‡Šæ”¾é”ï¼ˆåŒæ­¥ç›‘è§†å™¨ï¼‰ã€‚åº”å°½é‡é¿å…ä½¿ç”¨ suspend() å’Œ resume() æ¥æ§åˆ¶çº¿ç¨‹ æ­»é” æ­»é”ï¼šä¸åŒçš„çº¿ç¨‹åˆ†åˆ«å ç”¨å¯¹æ–¹éœ€è¦çš„åŒæ­¥èµ„æºä¸æ”¾å¼ƒï¼Œéƒ½åœ¨ç­‰å¾…å¯¹æ–¹æ”¾å¼ƒè‡ªå·±éœ€è¦çš„åŒæ­¥èµ„æºï¼Œå°±å½¢æˆäº†çº¿ç¨‹çš„æ­»é”ã€‚å‡ºç°æ­»é”åï¼Œä¸ä¼šå‡ºç°å¼‚å¸¸ï¼Œä¸ä¼šå‡ºç°æç¤ºï¼Œåªæ˜¯æ‰€æœ‰çš„çº¿ç¨‹éƒ½å¤„äºé˜»å¡çŠ¶æ€ï¼Œæ— æ³•ç»§ç»­è§£å†³æ–¹æ³• ä¸“é—¨çš„ç®—æ³•ã€åŸåˆ™ å°½é‡å‡å°‘åŒæ­¥èµ„æºçš„å®šä¹‰ å°½é‡é¿å…åµŒå¥—åŒæ­¥ çº¿ç¨‹çš„é€šä¿¡ wait()notify()å’ŒnotifyAll() wait()ï¼šä»¤å½“å‰çº¿ç¨‹æŒ‚èµ·å¹¶æ”¾å¼ƒCPUã€åŒæ­¥èµ„æºå¹¶ç­‰å¾…ï¼Œä½¿åˆ«çš„çº¿ç¨‹å¯è®¿é—®å¹¶ä¿®æ”¹å…±äº«èµ„æºï¼Œè€Œå½“å‰çº¿ç¨‹æ’é˜Ÿç­‰å€™å…¶ä»–çº¿ç¨‹è°ƒç”¨notify()å’ŒnotifyAll()æ–¹æ³•å”¤é†’ï¼Œå”¤é†’åç­‰å¾…é‡æ–°è·å¾—å¯¹ç›‘è§†å™¨çš„æ‰€æœ‰æƒåæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚ notify()ï¼šå”¤é†’æ­£åœ¨æ’é˜Ÿç­‰å¾…åŒæ­¥èµ„æºçš„çº¿ç¨‹ä¸­ä¼˜å…ˆçº§æœ€é«˜è€…ç»“æŸç­‰å¾… notifyAll()ï¼šå”¤é†’æ­£åœ¨æ’é˜Ÿç­‰å¾…èµ„æºçš„æ‰€æœ‰çº¿ç¨‹ç»“æŸç­‰å¾… æ³¨æ„ è¿™ä¸‰ç§æ–¹æ³•åªèƒ½åœ¨åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥ä»£ç å—ä¸­æ‰èƒ½ä½¿ç”¨ï¼Œä¸èƒ½ä½¿ç”¨Locké”ï¼Œå¦åˆ™ä¼šæŠ¥java.lang.IllegalMonitorStateExceptionå¼‚å¸¸å› ä¸ºè¿™ä¸‰ä¸ªæ–¹æ³•å¿…é¡»æœ‰é”å¯¹è±¡è°ƒç”¨ï¼Œè€Œä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºsynchronizedçš„åŒæ­¥é”ï¼Œå› æ­¤è¿™ä¸‰ä¸ªæ–¹æ³•åªèƒ½åœ¨Objectç±»ä¸­å£°æ˜ ","link":"https://yeyuan1107.github.io/post/java-duo-xian-cheng/"},{"title":"Javaå¼‚å¸¸å¤„ç†","content":" ç®€ä»‹ å¼‚å¸¸ï¼šåœ¨Javaè¯­è¨€ä¸­ï¼Œå°†ç¨‹åºæ‰§è¡Œæ—¶å‘ç”Ÿçš„ä¸æ­£å¸¸æƒ…å†µç§°ä¸ºå¼‚å¸¸ï¼Œå¼€å‘ä¸­çš„è¯­æ³•é”™è¯¯å’Œé€»è¾‘é”™è¯¯ä¸æ˜¯å¼‚å¸¸ã€‚ å¼‚å¸¸äº‹ä»¶çš„åˆ†ç±» Errorï¼šJavaè™šæ‹Ÿæœºæ— æ³•è§£å†³çš„ä¸¥é‡é—®é¢˜ã€‚ä¾‹å¦‚ï¼šJVMç³»ç»Ÿå†…éƒ¨é”™è¯¯ã€èµ„æºè€—å°½ç­‰ä¸¥é‡æƒ…å†µã€‚æ¯”å¦‚ï¼šStackOverflowErrorå’ŒOutofMemoryError(OOMå †æº¢å‡º)ã€‚ä¸€èˆ¬ä¸å˜å†™é’ˆå¯¹æ€§çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚ Exceptionï¼šå…¶ä»–å› å˜æˆé”™è¯¯æˆ–å¶ç„¶çš„å¤–åœ¨å› ç´ å¯¼è‡´çš„ä¸€èˆ¬æ€§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨é’ˆå¯¹æ€§çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚ä¾‹å¦‚ï¼šç©ºæŒ‡é’ˆå¼‚å¸¸ã€è¯•å›¾è¯»å–ä¸å­˜åœ¨çš„æ–‡ä»¶ã€ç½‘ç»œè¿æ¥ä¸­æ–­ã€æ•°ç»„è§’æ ‡è¶Šç•Œç­‰ã€‚ å¼‚å¸¸äº‹ä»¶çš„å¤„ç† é‡åˆ°é”™è¯¯å°±ç»ˆæ­¢ç¨‹åºçš„è¿è¡Œ ç”±ç¨‹åºå‘˜åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œå°±è€ƒè™‘åˆ°é”™è¯¯çš„æ£€æµ‹ã€é”™è¯¯æ¶ˆæ¯çš„æç¤ºã€ä»¥åŠé”™è¯¯çš„å¤„ç†ã€‚ Exceptionåˆ†ç±» ç¼–è¯‘æ—¶å¼‚å¸¸(å—æ£€å¼‚å¸¸ï¼Œé™¤RuntimeExceptionå¤–çš„å¼‚å¸¸) IOException FileNotFoundException ClassNotFoundException è¿è¡Œæ—¶å¼‚å¸¸(éå—æ£€å¼‚å¸¸ï¼ŒRuntimeException) NullPointerException(ç©ºæŒ‡é’ˆå¼‚å¸¸) ArrayIndexOutOfBoundsException(è§’æ ‡è¶Šç•Œ) ClassCastException(ç±»å‹è½¬æ¢å¼‚å¸¸) NumberFormatException InputMismatchException ArithmaticException(é™¤é›¶å¼‚å¸¸) å¼‚å¸¸å¤„ç† æŠ“æŠ›æ¨¡å‹ï¼š æŠ›ï¼šç¨‹åºåœ¨æ­£å¸¸æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‡ºç°å¼‚å¸¸ï¼Œå°±ä¼šåœ¨å¼‚å¸¸ä»£ç å¤„ç”Ÿæˆä¸€ä¸ªå¯¹åº”å¼‚å¸¸ç±»çš„å¯¹è±¡ï¼Œå¹¶å°†æ­¤å¯¹è±¡æŠ›å‡ºï¼Œä¸€æ—¦æŠ›å‡ºå¯¹è±¡åï¼Œå…¶åçš„ä»£ç å°±ä¸å†æ‰§è¡Œã€‚ æŠ“ï¼šå¼‚å¸¸çš„å¤„ç†æ–¹å¼ï¼š try-catch-finally throws try-catch-finally try{ ä»£ç å—; }catch(Exception e){ å¼‚å¸¸çš„å¤„ç†æ–¹æ³•; }finally{ ä¸€å®šä¼šæ‰§è¡Œçš„ä»£ç ; } ä½¿ç”¨ finallyæ˜¯å¯é€‰çš„ï¼Œå¯ä»¥ä¸å†™ï¼Œä¸è®ºåœ¨tryä»£ç å—ä¸­æ˜¯å¦å‘ç”Ÿäº†å¼‚å¸¸äº‹ä»¶ï¼Œcatchè¯­å¥æ˜¯å¦æ‰§è¡Œï¼Œcatchè¯­å¥æ˜¯å¦æœ‰å¼‚å¸¸ï¼Œcatchè¯­å¥ä¸­æ˜¯å¦æœ‰returnï¼Œfinallyå—ä¸­çš„è¯­å¥éƒ½ä¼šè¢«æ‰§è¡Œ æ•°æ®åº“è¿æ¥ è¾“å…¥è¾“å‡ºæµ ç½‘ç»œç¼–ç¨‹ä¸­Socketç­‰èµ„æº è¿™äº›èµ„æºä¸ä¼šè¢«JVMè‡ªåŠ¨å›æ”¶éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è¿›è¡Œé‡Šæ”¾ï¼Œæ­¤æ—¶èµ„æºçš„é‡Šæ”¾åº”å½“é˜²åœ¨finallyä¸­ tryå°†å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç åŒ…è£…èµ·æ¥ï¼Œä¸€æ—¦å‡ºç°å¼‚å¸¸å°±ç”Ÿæˆä¸€ä¸ªå¯¹åº”å¼‚å¸¸ç±»çš„å¯¹è±¡ï¼Œæ ¹æ®è¯¥å¯¹è±¡ç±»å‹å»catchä¸­è¿›è¡ŒåŒ¹é… ä¸€æ—¦tryçš„å¼‚å¸¸å¯¹è±¡åŒ¹é…æŸä¸€ä¸ªcatchæ—¶ï¼Œå°±è¿›å…¥catchä¸­è¿›è¡Œå¼‚å¸¸çš„å¤„ç†ï¼Œä¸€æ—¦å¤„ç†å®Œæˆï¼Œå°±è·³å‡ºå½“å‰çš„try-catchç»“æ„(åœ¨æ²¡æœ‰å†™finallyçš„æƒ…å†µ)ï¼Œç»§ç»­æ‰§è¡Œå…¶åçš„ä»£ç  catchä¸­çš„å¼‚å¸¸ï¼Œå¦‚æœæ²¡æœ‰å­çˆ¶ç±»å…³ç³»ï¼Œåˆ™é¡ºåºæ²¡æœ‰å…³ç³»ï¼Œå¦‚æœå­˜åœ¨å­çˆ¶ç±»å…³ç³»ï¼Œåˆ™å­ç±»åº”è¯¥å£°æ˜åœ¨çˆ¶ç±»ä¹‹ä¸Šï¼Œå¦åˆ™æŠ¥é”™ å¸¸ç”¨å¼‚å¸¸å¤„ç†æ–¹æ³• getMessage()è¿”å›Stringï¼Œå¼‚å¸¸ä¿¡æ¯ printStackTrace()è·å–å¼‚å¸¸ç±»åå’Œå¼‚å¸¸ä¿¡æ¯ï¼Œä»¥åŠå¼‚å¸¸å‡ºç°åœ¨ç¨‹åºä¸­çš„ä½ç½®ï¼Œè¿”å›å€¼ä¸ºç©ºï¼Œæ–¹æ³•å†…è‡ªå¸¦è¾“å‡º tryç»“æ„ä¸­å£°æ˜çš„å˜é‡ï¼Œåœ¨tryç»“æ„å¤–æ— æ³•è°ƒç”¨ try-catch-finallyç»“æ„å¯ä»¥äº’ç›¸åµŒå¥— ä½“ä¼š åœ¨ä½¿ç”¨try-catch-finallyå¤„ç†ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œä½¿å¾—ç¨‹åºåœ¨ç¼–è¯‘æ—¶ä¸å†æŠ¥é”™ï¼Œä½†è¿è¡Œæ—¶ä»å¯èƒ½æŠ¥é”™ç›¸å½“äºæˆ‘ä»¬è®²ä¸€ä¸ªç¼–è¯‘æ—¶å¼‚å¸¸å»¶è¿Ÿåˆ°è¿è¡Œæ—¶å‡ºç°äº† throws å¦‚æœä¸€ä¸ªæ–¹æ³•å¯èƒ½ç”ŸæˆæŸç§å¼‚å¸¸ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ç¡®å®šå¦‚ä½•å¤„ç†è¿™ç§å¼‚å¸¸ï¼Œåˆ™æ­¤æ–¹æ³•åº”æ˜¾ç¤ºåœ°å£°æ˜æŠ›å‡ºå¼‚å¸¸ï¼Œè¡¨æ˜è¯¥æ–¹æ³•å°†ä¸å¯¹è¿™äº›å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œè€Œç”±è¯¥æ–¹æ³•çš„è°ƒç”¨è€…è´Ÿè´£å¤„ç†ã€‚åœ¨æ–¹æ³•å£°æ˜ä¸­ç”¨throwsè¯­å¥å¯ä»¥å£°æ˜æŠ›å‡ºå¼‚å¸¸çš„åˆ—è¡¨ï¼Œthrowsåé¢çš„å¼‚å¸¸ç±»å‹å¯ä»¥æ˜¯æ–¹æ³•ä¸­äº§ç”Ÿçš„å¼‚å¸¸ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å®ƒçš„çˆ¶ç±»ã€‚ public void æ–¹æ³•å() throws FileNotFoundException, Exception{ æ–¹æ³•ä½“; } ä½¿ç”¨ ä¸€æ—¦æ–¹æ³•ä½“æ‰§è¡Œæ—¶ï¼Œå‡ºç°å¼‚å¸¸ä»ä¼šåœ¨å¼‚å¸¸ä»£ç å¤„ç”Ÿæˆä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œæ­¤å¯¹è±¡æ»¡è¶³throwsåçš„å¼‚å¸¸ç±»å‹æ—¶å°±è¢«æŠ›å‡ºï¼Œå¼‚å¸¸ä»£ç åç»­çš„ä»£ç ä¸å†æ‰§è¡Œã€‚ é‡å†™æ–¹æ³•ä¸èƒ½æŠ›å‡ºæ¯”è¢«é‡å†™æ–¹æ³•èŒƒå›´æ›´å¤§çš„å¼‚å¸¸ç±»å‹ çˆ¶ç±»æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸å­ç±»ä¹Ÿä¸èƒ½æŠ›å‡ºå¼‚å¸¸ æ‰§è¡Œçš„æ–¹æ³•ä¸­ï¼Œå…ˆåè°ƒç”¨äº†å¦å¤–çš„å‡ ä¸ªæ–¹æ³•ï¼Œè¿™å‡ ä¸ªæ–¹æ³•æ˜¯é€’è¿›å…³ç³»æ‰§è¡Œçš„æˆ‘ä»¬å»ºè®®è¿™å‡ ä¸ªæ–¹æ³•ä½¿ç”¨throwsçš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œæœ€å¤–å±‚æ–¹æ³•ä½¿ç”¨try-catch-finallyå¤„ç† ä½“ä¼š try-catch-finallyçœŸæ­£çš„å°†å¼‚å¸¸å¤„ç†æ‰äº†throwsåªæ˜¯æŠŠå¼‚å¸¸æŠ›ç»™äº†æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œæ²¡æœ‰å°†å¼‚å¸¸çœŸæ­£å¤„ç†æ‰ æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸ Javaå¼‚å¸¸ç±»å¯¹è±¡é™¤åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸æ—¶ç”±ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆå¹¶æŠ›å‡ºï¼Œä¹Ÿå¯æ ¹æ®éœ€è¦ä½¿ç”¨äººå·¥åˆ›å»ºå¹¶æŠ›å‡º //1.ç”Ÿæˆå¼‚å¸¸ç±»å¯¹è±¡ï¼Œç„¶åé€šè¿‡throwè¯­å¥å®ç°æŠ›å‡ºæ“ä½œ //2.å¯ä»¥æŠ›å‡ºçš„å¼‚å¸¸å¿…é¡»æ˜¯Throwableæˆ–å…¶å­ç±»çš„å®ä¾‹ throw new Exception(&quot;message&quot;); ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ç±» ä¸€èˆ¬ç”¨æˆ·å®šä¹‰å¼‚å¸¸ç±»éƒ½æ˜¯RuntimeExceptionçš„å­ç±» è‡ªå®šä¹‰å¼‚å¸¸ç±»é€šå¸¸éœ€è¦ç¼–å†™å‡ ä¸ªé‡è½½çš„æ„é€ å™¨ è‡ªå®šä¹‰å¼‚å¸¸éœ€è¦æä¾›serialVersionUID è‡ªå®šä¹‰çš„å¼‚å¸¸é€šè¿‡throwæŠ›å‡º è‡ªå®šä¹‰å¼‚å¸¸ç±»æœ€é‡è¦çš„æ˜¯å¼‚å¸¸ç±»çš„åå­—ï¼Œå½“å¼‚å¸¸å‡ºç°æ—¶ï¼Œå¯ä»¥æ ¹æ®åå­—åˆ¤æ–­å¼‚å¸¸ç±»å‹ //å¯ä»¥ç»§æ‰¿Exceptionæˆ–RuntimeException class MyException extends Exception{ //å•ç‹¬æ ‡è¯†è¯¥ç±» static final long serialVersionUID = 32453426235L; å±æ€§; æ–¹æ³•; } throwsä¸throwçš„åŒºåˆ« throwï¼šä½œç”¨ä¸ºç”Ÿæˆå¼‚å¸¸å¯¹è±¡ï¼Œå£°æ˜åœ¨æ–¹æ³•ä½“å†… throwsï¼šå¤„ç†å¼‚å¸¸ï¼Œå£°æ˜åœ¨æ–¹æ³•å£°æ˜å¤„ ","link":"https://yeyuan1107.github.io/post/java-yi-chang-chu-li/"},{"title":"Javaé¢å‘å¯¹è±¡","content":" é¢å‘å¯¹è±¡å†…å®¹çš„ä¸‰æ¡ä¸»çº¿ Javaç±»åŠç±»çš„æˆå‘˜ å±æ€§ æ–¹æ³• æ„é€ å™¨ ä»£ç å— å†…éƒ¨ç±» é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ å°è£…æ€§ ç»§æ‰¿æ€§ å¤šæ€æ€§ å…¶ä»–ç±»å…³é”®å­— this super static final abstract interface package import ç±»å’Œå¯¹è±¡ ç±»ï¼šæ˜¯å¯¹ä¸€ç±»äº‹ç‰©çš„æè¿°ï¼Œæ˜¯æŠ½è±¡çš„ã€æ¦‚å¿µä¸Šçš„å®šä¹‰å¯¹è±¡ï¼šæ˜¯å®é™…å­˜åœ¨çš„è¯¥ç±»é£Ÿç‰©çš„æ¯ä¸ªä¸ªä½“ï¼Œå› è€Œä¹Ÿç§°ä¸ºå®ä¾‹ å¯¹è±¡çš„åŠŸèƒ½å–å†³äºç±»çš„è®¾è®¡è®¾è®¡ç±»ç›¸å½“äºè®¾è®¡ç±»çš„æˆå‘˜ ç±»ï¼š å±æ€§ï¼šæˆå‘˜å˜é‡ field(åŸŸï¼Œå­—æ®µ) æ–¹æ³•ï¼šå‡½æ•° mehod(æˆå‘˜å‡½æ•°) JavaBeanï¼šæ˜¯ä¸€ç§Javaè¯­è¨€å†™æˆçš„å¯é‡ç”¨ç»„å»ºæ‰€è°“JavaBeanæ˜¯æŒ‡ç¬¦åˆå¦‚ä¸‹æ ‡å‡†çš„Javaç±» ç±»æ˜¯å…¬å…±çš„ æœ‰ä¸€ä¸ªæ— å‚çš„å…¬å…±æ„é€ å™¨ æœ‰å±æ€§ä¸”æœ‰å¯¹åº”çš„get/setæ–¹æ³• å±æ€§vså±€éƒ¨å˜é‡ä¸åŒç‚¹ï¼šå£°æ˜ä½ç½®ä¸åŒï¼Œå±æ€§ç›´æ¥å®šä¹‰åœ¨ç±»çš„ä¸€å¯¹å¤§æ‹¬å·å†…ï¼Œå±€éƒ¨å˜é‡å£°æ˜åœ¨æ–¹æ³•å†…ä»¥åŠæ–¹æ³•å½¢å‚ä¸­ä¿®é¥°ç¬¦ï¼Œå±æ€§å¯ä»¥ä½¿ç”¨ä¿®é¥°ç¬¦ï¼Œå±€éƒ¨å˜é‡ä¸èƒ½ä½¿ç”¨é™¤finalå¤–çš„ä¿®é¥°ç¬¦é»˜è®¤åˆå§‹åŒ–ï¼Œç±»çš„å±æ€§åœ¨ç±»å®ä¾‹åŒ–æ—¶æ ¹æ®å…¶ç±»å‹æœ‰åˆå§‹åŒ–å€¼ï¼Œå±€éƒ¨å˜é‡æ— åˆå§‹åŒ–å€¼å†…å­˜ä½ç½®ä¸åŒï¼Œå±æ€§åœ¨å †ä¸­æˆ–é™æ€åŸŸä¸­ï¼Œå±€éƒ¨å˜é‡åœ¨æ ˆä¸­ç›¸åŒç‚¹ï¼šå®šä¹‰å˜é‡çš„æ ¼å¼ç›¸åŒéƒ½éœ€è¦å…ˆå£°æ˜åä½¿ç”¨éƒ½æœ‰å…¶å¯¹åº”çš„ä½œç”¨åŸŸ Objectç±»çš„ä½¿ç”¨ Objectç±»æ˜¯æ‰€æœ‰Javaç±»çš„æ ¹çˆ¶ç±»ï¼Œå¦‚æœåœ¨ç±»çš„å£°æ˜ä¸­æœªä½¿ç”¨extendsæŒ‡æ˜å…¶çˆ¶ç±»ï¼Œåˆ™é»˜è®¤çˆ¶ç±»ä¸ºjava.lang.Objectç±»æ•°ç»„å¯ä»¥çœ‹ä½œä¸€ä¸ªç‰¹æ®Šçš„Objectç±» Objectç±»ä¸­çš„ä¸»è¦ç»“æ„ No æ–¹æ³•åç§° ç±»å‹ æè¿° 1 public Object() æ„é€  æ„é€ å™¨ 2 public boolean equals(Object obj) æ™®é€š å¯¹è±¡æ¯”è¾ƒ 3 public int hashCode() æ™®é€š å–å¾—Hashç  4 public String toString() æ™®é€š å¯¹è±¡æ‰“å°æ—¶è°ƒç”¨ ==ä¸equals()åŒºåˆ« ==è¿ç®—ç¬¦ å¯ä»¥ä½¿ç”¨åœ¨åŸºæœ¬æ•°æ®ç±»å‹å˜é‡å’Œå¼•ç”¨æ•°æ®ç±»å‹å˜é‡ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å¯ä»¥è‡ªåŠ¨æå‡ç±»å‹æ¥è¿›è¡Œæ¯”è¾ƒ å¦‚æœä¸ºåŸºæœ¬æ•°æ®ç±»å‹å˜é‡æ˜¯æ¯”è¾ƒä¸¤ä¸ªå˜é‡æ•°æ®æ˜¯å¦ç›¸ç­‰(ä¸ä¸€å®šç±»å‹ç›¸åŒ) å¦‚æœä¸ºå¼•ç”¨æ•°æ®ç±»å‹å˜é‡æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„åœ°å€å€¼æ˜¯å¦ç›¸åŒ equals()æ–¹æ³• æ˜¯ä¸€ä¸ªæ–¹æ³•è€Œä¸æ˜¯è¿ç®—ç¬¦ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å˜é‡æ— æ³•ä½¿ç”¨ Objectç±»ä¸­equalså®šä¹‰ï¼šreturn this == obj ä¸==è¿ç®—ç¬¦ç›¸åŒï¼ŒåŒä¸ºæ¯”è¾ƒä¸¤ä¸ªå¼•ç”¨æ•°æ®ç±»å‹å˜é‡çš„åœ°å€ åƒStringï¼ŒDateï¼ŒFileï¼Œç­‰åŒ…è£…ç±»æ¯”è¾ƒçš„ä¸æ˜¯ä¸¤ä¸ªå¼•ç”¨çš„åœ°å€æ˜¯å¦ç›¸åŒï¼Œè€Œæ˜¯æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å®ä½“å†…å®¹æ˜¯å¦ç›¸åŒã€‚å…·ä½“ä¸ºå…ˆåˆ¤æ–­åœ°å€æ˜¯å¦ç›¸åŒï¼Œå†çœ‹æ˜¯å¦ä¸ºåŒä¸€ç±»ï¼Œæœ€åçœ‹æ¯”è¾ƒå…³æ³¨çš„å±æ€§å³å®ä½“å†…å®¹ã€‚ å½“è‡ªå®šä¹‰ä½¿ç”¨equals()æ—¶ï¼Œå¯ä»¥é‡å†™ã€‚ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦éƒ½ç›¸ç­‰ã€‚ toString()æ–¹æ³• å½“è¾“å‡ºä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯è°ƒç”¨å½“å‰å¯¹è±¡çš„toString()æ–¹æ³• Stringä¸å…¶ä»–ç±»å‹æ•°æ®è¿æ¥æ—¶ï¼Œè°ƒç”¨è¯¥ç±»å‹çš„toString()æ–¹æ³• Objectç±»ä¸­çš„toString()æ–¹æ³•ä¸ºreturn getClass().getName() + &quot;@&quot; + Integer.toHexString(hashCode()); String Date FileåŒ…è£…ç±»éƒ½é‡å†™äº†toString()æ–¹æ³•ï¼Œä½¿å¾—åœ¨è°ƒç”¨å¯¹è±¡çš„toString()æ–¹æ³•æ—¶è¿”å›å®ä½“å†…å®¹çš„ä¿¡æ¯ åŒ…è£…ç±» Javaæä¾›äº†8ç§åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»ï¼Œä½¿å¾—åŸºæœ¬æ•°æ®ç±»å‹å˜é‡å…·æœ‰ç±»çš„ç‰¹å¾JDK5åæœ‰è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®± int num2 = 10; Integer int1 = num2; int num1 = int1; æ³¨æ„ Integerä¸­æœ‰Cacheæ•°ç»„ä»-128 - 127ï¼Œå¦‚æœä¸ºè¯¥èŒƒå›´å†…çš„æ•°ï¼Œåˆ™ç›´æ¥æŒ‡å‘æ•°ç»„ä½ç½®ï¼Œå¦‚æœè¶…è¿‡åˆ™ç”¨newæ¥æ„é€ ä¸€ä¸ªæ–°å¯¹è±¡ å¯¹äºå½¢å‚æ˜¯Object objçš„å‡½æ•°ï¼ŒJDK5ä¹‹åå¯ä»¥ç”¨åŸºæœ¬æ•°æ®ç±»å‹æ•°æ®é€šè¿‡è‡ªåŠ¨è£…ç®±æ¥ä½œä¸ºå®å‚ä¼ å…¥ã€‚ ç±»çš„è¯­æ³•æ ¼å¼ //åˆ›å»ºä¸€ä¸ªç±» ä¿®é¥°ç¬¦ class ç±»å { ä¿®é¥°ç¬¦ å±æ€§ç±»å‹ å±æ€§å = (æ˜¯å¦æ˜¾å¼åˆå§‹åŒ–); ä¿®é¥°ç¬¦ è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å½¢å‚åˆ—è¡¨) { æ–¹æ³•ä½“; } } //å®ä¾‹åŒ–ä¸€ä¸ªç±» ç±»å å¯¹è±¡å = new ç±»å(); //åŒ¿åå¯¹è±¡ï¼šåˆ›å»ºçš„å¯¹è±¡æ²¡æœ‰æ˜¾ç¤ºç¬¦ç»™ä¸€ä¸ªå˜é‡å //åŒ¿åå¯¹è±¡ç‰¹å¾ï¼šåªèƒ½è°ƒç”¨ä¸€æ¬¡ new ç±»å(); //å¸¸ç”¨åœ¨æ–¹æ³•çš„å‚æ•°ä¹‹ä¸­ ä¿®é¥°ç¬¦ æƒé™ä¿®é¥°ç¬¦ï¼šåœ¨å°è£…æ€§ä¸­è¯¦ç»†è®²è§£ private ç¼ºçœ protected public å…¶ä»–ä¿®é¥°ç¬¦ï¼šåœ¨å…¶ä»–å…³é”®å­—ä¸­è®²è§£ static final æ–¹æ³• æ–¹æ³•çš„é‡è½½ åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œå…è®¸å­˜åœ¨ä¸€ä¸ªä»¥ä¸Šçš„åŒåæ–¹æ³•ï¼Œåªè¦å®ƒä»¬çš„å‚æ•°ä¸ªæ•°æˆ–è€…å‚æ•°ç±»å‹ä¸åŒå³å¯ ä¸è¿”å›å€¼ç±»å‹æ— å…³ï¼Œåªçœ‹å‚æ•°åˆ—è¡¨ï¼Œä¸”å‚æ•°åˆ—è¡¨å¿…é¡»ä¸åŒã€‚è°ƒç”¨æ—¶ï¼Œæ ¹æ®æ–¹æ³•å‚æ•°åˆ—è¡¨çš„ä¸åŒæ¥åŒºåˆ« æ€»ç»“ï¼šä¸¤åŒä¸€ä¸åŒï¼ŒåŒç±»åŒæ–¹æ³•åï¼Œå‚æ•°ä¸åŒ(å‚æ•°é¡ºåºä¸åŒä¹Ÿå¯ä»¥)ã€‚æ”¹å˜è¿”å›å€¼ä¸”å‚æ•°ä¹Ÿæ”¹å˜ä¹Ÿç®—é‡è½½ å¯å˜ä¸ªæ•°å½¢å‚ JDK5ä¹‹å‰ï¼šé‡‡ç”¨æ•°ç»„å½¢å‚æ¥å®šä¹‰æ–¹æ³•ï¼Œä¼ å…¥å¤šä¸ªåŒä¸€ç±»å‹å˜é‡å˜é‡ç±»å‹[] å˜é‡å JDK5åŠä¹‹åï¼šé‡‡ç”¨å¯å˜ä¸ªæ•°å½¢å‚æ¥å®šä¹‰æ–¹æ³•ï¼Œä¼ å…¥å¤šä¸ªåŒä¸€ç±»å‹å˜é‡å˜é‡ç±»å‹...å˜é‡å æ³¨æ„ï¼š å¯å˜ä¸ªæ•°å½¢å‚çš„å‚æ•°ä¸ªæ•°å¯ä»¥ä¸º0ä¸ªï¼Œ1ä¸ªï¼Œ2ä¸ª...å¯å˜å½¢å‚çš„æ–¹æ³•ä¸æœ¬ç±»ä¸­æ–¹æ³•åç›¸åŒï¼Œå½¢å‚ä¸åŒçš„æ–¹æ³•æ„æˆé‡è½½ï¼Œä¼˜å…ˆä½¿ç”¨å›ºå®šå‚æ•°åŒ¹é…çš„å¯å˜ä¸ªæ•°çš„å½¢å‚ä¸å¯¹åº”æ•°ç»„å†²çªå¦‚æ–¹æ³•å(String[] args) ä¸ æ–¹æ³•å(String...args)å†²çªè®¿é—®å¯å˜å‚æ•°å½¢å‚æ—¶å°†å…¶çœ‹ä½œä¸€ä¸ªæ•°ç»„å³å¯å¯å˜ä¸ªæ•°å½¢å‚åœ¨æ–¹æ³•çš„å½¢å‚åˆ—è¡¨ä¸­ï¼Œå¿…é¡»å£°æ˜åœ¨æœ«å°¾ï¼Œä¸”åªèƒ½æœ‰ä¸€ä¸ªå¯å˜ä¸ªæ•°å½¢å‚ æ–¹æ³•å‚æ•°çš„ä¼ é€’æœºåˆ¶ Javaä¸­åªæœ‰å€¼ä¼ é€’ï¼šå³å°†å®é™…å‚æ•°å€¼çš„å‰¯æœ¬ä¼ å…¥æ–¹æ³•å†…ï¼Œè€Œå‚æ•°æœ¬èº«ä¸å—å½±å“ å½¢å‚æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼šå°†å®å‚åŸºæœ¬æ•°æ®ç±»å‹å˜é‡çš„â€œæ•°æ®å€¼â€ä¼ é€’ç»™å½¢å‚ å½¢å‚æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼šå°†å®å‚å¼•ç”¨æ•°æ®ç±»å‹å˜é‡çš„â€œåœ°å€å€¼â€ä¼ é€’ç»™å½¢å‚ æ–¹æ³•çš„é‡å†™(Override/Overwrite) åœ¨å­ç±»ä¸­å¯ä»¥æ ¹æ®éœ€è¦ä»çˆ¶ç±»ä¸­ç»§æ‰¿æ¥çš„æ–¹æ³•è¿›è¡Œæ”¹é€ ï¼Œä¹Ÿæˆä¸ºæ–¹æ³•çš„é‡ç½®ã€è¦†ç›–ã€‚åœ¨ç¨‹åºæ‰§è¡Œæ—¶ï¼Œå­ç±»çš„æ–¹æ³•å°†è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•ã€‚ è¦æ±‚ å­ç±»é‡å†™çš„æ–¹æ³•å¿…é¡»å’Œçˆ¶ç±»è¢«é‡å†™çš„æ–¹æ³•å…·æœ‰ç›¸åŒçš„æ–¹æ³•åç§°ã€å‚æ•°åˆ—è¡¨ å­ç±»é‡å†™çš„æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ä¸èƒ½å¤§äºçˆ¶ç±»è¢«é‡å†™çš„æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ çˆ¶ç±»ä¸ºvoidï¼Œå­ç±»å¿…é¡»ä¹Ÿä¸ºvoid çˆ¶ç±»ä¸ºAç±»å‹ï¼Œå­ç±»è¿”å›å€¼å¯ä»¥ä¸ºAç±»æˆ–è€…Açš„å­ç±» çˆ¶ç±»ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå­ç±»è¿”å›å€¼è¦æ±‚ä¸çˆ¶ç±»ç›¸åŒ å­ç±»é‡å†™çš„æ–¹æ³•ä½¿ç”¨çš„è®¿é—®æƒé™ä¸èƒ½å°äºçˆ¶ç±»è¢«é‡å†™æ–¹æ³•çš„è®¿é—®æƒé™ å­ç±»ä¸èƒ½é‡å†™çˆ¶ç±»ä¸­å£°æ˜ä¸ºprivateæƒé™çš„æ–¹æ³• å­ç±»ä¸çˆ¶ç±»ä¸­åŒååŒå‚æ•°çš„æ–¹æ³•å¿…é¡»åŒæ—¶å£°æ˜ä¸ºéstaticçš„ï¼Œæˆ–è€…åŒæ—¶å£°æ˜ä¸ºstaticçš„(ä½†æ˜¯ä¸æ˜¯é‡å†™)ï¼Œå› ä¸ºstaticæ–¹æ³•æ˜¯å±äºç±»çš„ï¼Œå­ç±»æ— æ³•è¦†ç›–çˆ¶ç±»çš„æ–¹æ³• å­ç±»æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ä¸èƒ½å¤§äºçˆ¶ç±»è¢«é‡å†™æ–¹æ³•çš„å¼‚å¸¸ åœ¨å¤šæ€æƒ…å†µä¸‹ï¼Œå¯¹æ–¹æ³•çš„è°ƒç”¨å’Œå¼‚å¸¸çš„æ•è·æŒ‰çˆ¶ç±»å£°æ˜çš„å¼‚å¸¸å¤„ç†ï¼Œå¦‚æœå¤§äºçˆ¶ç±»çš„å¼‚å¸¸åˆ™å‡ºé”™ çˆ¶ç±»æ²¡æœ‰æŠ›å¼‚å¸¸å­ç±»ä¹Ÿä¸èƒ½æŠ›å‡ºå¼‚å¸¸ é‡å†™å’Œé‡è½½çš„åŒºåˆ« æ¦‚å¿µ å…·ä½“è§„åˆ™ é‡è½½ä¸è¡¨ç°ä¸ºå¤šæ€ï¼Œé‡å†™è¡¨ç°ä¸ºå¤šæ€ æ„é€ å™¨ åˆ›å»ºç±»çš„æ–¹æ³•ï¼šnew + æ„é€ å™¨; ç‰¹å¾ï¼š å®ƒå…·æœ‰ä¸ç±»ç›¸åŒçš„åç§° ä»–ä¸å£°æ˜è¿”å›å€¼ç±»å‹ ä¸èƒ½è¢«static, final, synchronized, abstrat, nativeä¿®é¥°ï¼Œä¸èƒ½æœ‰returnè¯­å¥è¿”å›å€¼ ä½œç”¨ï¼š åˆ›å»ºå¯¹è±¡ï¼Œç»™å¯¹è±¡è¿›è¡Œåˆå§‹åŒ– æ„é€ å™¨è¯­æ³•æ ¼å¼ï¼š ä¿®é¥°ç¬¦ ç±»å(å½¢å‚åˆ—è¡¨) { åˆå§‹åŒ–è¯­å¥; } å±æ€§èµ‹å€¼é¡ºåº é»˜è®¤åˆå§‹åŒ– æ˜¾å¼åˆå§‹åŒ–æˆ–ä»£ç å—ï¼Œçœ‹ä½ç½®å…ˆå æ„é€ å™¨ä¸­èµ‹å€¼ é€šè¿‡å¯¹è±¡.æ–¹æ³•æˆ–å¯¹è±¡.å±æ€§çš„æ–¹æ³•èµ‹å€¼ æ³¨æ„ï¼šå¦‚æœæ— æ˜¾å¼å£°æ˜æ„é€ å™¨ï¼Œç³»ç»Ÿæä¾›ä¸€ä¸ªæ— å‚æ„é€ å™¨ä½¿ç”¨ï¼Œå¦‚æœå­˜åœ¨æ˜¾å¼æ„é€ å™¨ï¼Œåˆ™ä¸ä¼šæä¾›é»˜è®¤æ„é€ å™¨çš„ä¿®é¥°ç¬¦ä¸æ‰€è¿°ç±»çš„ä¿®é¥°ç¬¦ä¸€è‡´ä¸€ä¸ªç±»å¯ä»¥åˆ›å»ºå¤šä¸ªé‡è½½çš„æ„é€ å™¨çˆ¶ç±»çš„æ„é€ å™¨ä¸å¯è¢«å­ç±»ç»§æ‰¿ ä»£ç å— ç®€ä»‹ ä»£ç å—çš„ä½œç”¨ï¼šå¯¹Javaç±»æˆ–å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼Œåªèƒ½ç”¨staticä¿®é¥°ä»£ç å—çš„åˆ†ç±»ï¼š è¢«staticä¿®é¥°ï¼Œç§°ä¸ºé™æ€ä»£ç å—ï¼šé€šå¸¸ç”¨äºåˆå§‹åŒ–staticçš„å±æ€§ æ²¡æœ‰ä½¿ç”¨staticä¿®é¥°çš„ï¼Œç§°ä¸ºéé™æ€ä»£ç å— é™æ€ä»£ç å— å¯ä»¥æœ‰è¾“å‡ºè¯­å¥ã€‚ å¯ä»¥å¯¹ç±»çš„å±æ€§ã€ç±»çš„å£°æ˜è¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚ ä¸å¯ä»¥å¯¹éé™æ€çš„å±æ€§åˆå§‹åŒ–ã€‚å³ï¼šä¸å¯ä»¥è°ƒç”¨éé™æ€çš„å±æ€§å’Œæ–¹æ³•ã€‚ è‹¥æœ‰å¤šä¸ªé™æ€çš„ä»£ç å—ï¼Œé‚£ä¹ˆæŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚ é™æ€ä»£ç å—çš„æ‰§è¡Œè¦å…ˆäºéé™æ€ä»£ç å—ã€‚ é™æ€ä»£ç å—éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œä¸”åªæ‰§è¡Œä¸€æ¬¡ã€‚ éé™æ€ä»£ç å— å¯ä»¥æœ‰è¾“å‡ºè¯­å¥ ã€‚ å¯ä»¥å¯¹ç±»çš„å±æ€§ ã€ ç±»çš„å£°æ˜è¿›è¡Œåˆå§‹åŒ–æ“ä½œ ã€‚ é™¤äº†è°ƒç”¨éé™æ€çš„ç»“æ„å¤– è¿˜å¯ä»¥è°ƒç”¨é™æ€çš„å˜é‡æˆ–æ–¹æ³• ã€‚ è‹¥æœ‰å¤šä¸ªéé™æ€çš„ä»£ç å— é‚£ä¹ˆæŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºä¾æ¬¡æ‰§è¡Œ ã€‚ æ¯æ¬¡åˆ›å»ºå¯¹è±¡çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ ã€‚ä¸”å…ˆäºæ„é€ å™¨æ‰§è¡Œ å†…éƒ¨ç±» ç®€ä»‹ å½“ä¸€ä¸ªäº‹ç‰©çš„å†…éƒ¨ï¼Œè¿˜æœ‰ä¸€ä¸ªéƒ¨åˆ†éœ€è¦ä¸€ä¸ªå®Œæ•´çš„ç»“æ„è¿›è¡Œæè¿°ï¼Œè€Œè¿™ä¸ªå†…éƒ¨çš„å®Œæ•´ç»“æ„åˆåªä¸ºå¤–éƒ¨äº‹ç‰©æä¾›æœåŠ¡ï¼Œé‚£ä¹ˆæ•´ä¸ªå†…éƒ¨çš„å®Œæ•´ç»“æ„æœ€å¥½ä½¿ç”¨å†…éƒ¨ç±»ã€‚ åˆ†ç±» æˆå‘˜å†…éƒ¨ç±»(staticæˆå‘˜å†…éƒ¨ç±»å’Œéstaticæˆå‘˜å†…éƒ¨ç±») ä¸€æ–¹é¢ä½œä¸ºå¤–éƒ¨ç±»çš„æˆå‘˜ è°ƒç”¨å¤–éƒ¨ç±»çš„ç»“æ„å¤–éƒ¨ç±»å.this.å¤–éƒ¨ç±»ç»“æ„ å¯ä»¥è¢«staticä¿®é¥°ï¼Œå¤–éƒ¨ç±»ä¸å¯ä»¥ å¯ä»¥ä¿®é¥°ä¸ºpublicæˆ–è€…protected å¦ä¸€æ–¹é¢ä½œä¸ºä¸€ä¸ªç±» å†…éƒ¨ç±»å¯ä»¥å£°æ˜å±æ€§ã€æ–¹æ³•ã€æ„é€ å™¨ç­‰ç»“æ„ å¯ä»¥å£°æ˜ä¸ºabstractç±»ï¼Œå› æ­¤å¯ä»¥è¢«å…¶ä»–å†…éƒ¨ç±»ç»§æ‰¿ å¯ä»¥å£°æ˜ä¸ºfinalçš„ æ³¨æ„ éstaticçš„æˆå‘˜å†…éƒ¨ç±»ä¸­çš„æˆå‘˜ä¸èƒ½å£°æ˜ä¸ºstaticçš„ï¼Œåªæœ‰åœ¨å¤–éƒ¨ç±»æˆ–staticçš„æˆå‘˜å†…éƒ¨ç±»ä¸­æ‰å¯å£°æ˜staticæˆå‘˜ å¤–éƒ¨ç±»è®¿é—®æˆå‘˜å†…éƒ¨ç±»çš„æˆå‘˜éœ€è¦é€šè¿‡å†…éƒ¨ç±».æˆå‘˜æˆ–è€…å†…éƒ¨ç±»å¯¹è±¡.æˆå‘˜çš„æ–¹å¼ æˆå‘˜å†…éƒ¨ç±»å¯ä»¥ä½¿ç”¨å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰çš„æ•°æ® å½“æƒ³è¦åœ¨å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜éƒ¨åˆ†ä½¿ç”¨å†…éƒ¨ç±»æ—¶ï¼Œå¯ä»¥è€ƒè™‘å°†å†…éƒ¨ç±»å£°æ˜ä¸ºé™æ€çš„ å±€éƒ¨å†…éƒ¨ç±»(æ–¹æ³•å†…ã€ä»£ç å—å†…ã€æ„é€ å™¨å†…) ä½¿ç”¨ åªèƒ½åœ¨å£°æ˜ä»–çš„æ–¹æ³•æˆ–ä»£ç å—ä¸­ä½¿ç”¨ï¼Œä¸”ä¸ºå…ˆå£°æ˜åä½¿ç”¨ã€‚é™¤æ­¤ä¹‹å¤–ä»»ä½•åœ°æ–¹éƒ½ä¸èƒ½ä½¿ç”¨è¯¥ç±» ä½†æ˜¯ä»–çš„å¯¹è±¡å¯ä»¥é€šè¿‡å¤–éƒ¨æ–¹æ³•çš„è¿”å›å€¼è¿”å›ä½¿ç”¨ï¼Œè¿”å›å€¼ç±»å‹åªèƒ½æ˜¯å±€éƒ¨å†…éƒ¨ç±»çš„çˆ¶ç±»æˆ–çˆ¶ç±»æ¥å£ç±»å‹ ç‰¹ç‚¹ å†…éƒ¨ç±»ä»ç„¶æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç±»ï¼Œåœ¨ç¼–è¯‘ä¹‹åå†…éƒ¨ç±»ä¼šè¢«ç¼–è¯‘æˆç‹¬ç«‹çš„ .class æ–‡ä»¶ï¼Œä½†æ˜¯å‰é¢å† ä»¥å¤–éƒ¨ç±»çš„ç±»åå’Œç¬¦å·ï¼Œä»¥åŠæ•°å­—ç¼–å·ã€‚ åªèƒ½åœ¨å£°æ˜å®ƒçš„æ–¹æ³•æˆ–ä»£ç å—ä¸­ä½¿ç”¨ï¼Œè€Œä¸”æ˜¯å…ˆå£°æ˜åä½¿ç”¨ã€‚é™¤æ­¤ä¹‹å¤–çš„ä»»ä½•åœ°æ–¹éƒ½ä¸èƒ½ä½¿ç”¨è¯¥ç±»ã€‚ å±€éƒ¨å†…éƒ¨ç±»å¯ä»¥ä½¿ç”¨å¤–éƒ¨ç±»çš„æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰çš„ ã€‚ å±€éƒ¨å†…éƒ¨ç±»å¯ä»¥ä½¿ç”¨å¤–éƒ¨æ–¹æ³•çš„å±€éƒ¨å˜é‡ï¼Œä½†æ˜¯å¿…é¡»æ˜¯ final çš„ã€‚ ç”±å±€éƒ¨å†…éƒ¨ç±»å’Œå±€éƒ¨å˜é‡çš„å£°æ˜å‘¨æœŸä¸åŒæ‰€è‡´ã€‚ å±€éƒ¨å†…éƒ¨ç±»å’Œå±€éƒ¨å˜é‡åœ°ä½ç±»ä¼¼ï¼Œä¸èƒ½ä½¿ç”¨ public,protected, ç¼ºçœ ,private å±€éƒ¨å†…éƒ¨ç±»ä¸èƒ½ä½¿ç”¨ static ä¿®é¥°ï¼Œå› æ­¤ä¹Ÿä¸èƒ½åŒ…å«é™æ€æˆå‘˜ åŒ¿åå†…éƒ¨ç±» åŒ¿åå†…éƒ¨ç±»ä¸èƒ½å®šä¹‰ä»»ä½•é™æ€æˆå‘˜ã€æ–¹æ³•å’Œç±»ï¼Œåªèƒ½åˆ›å»ºåŒ¿åå†…éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ä¸€å®šæ˜¯åœ¨newçš„åé¢ï¼Œç”¨å…¶éšå«å®ç°ä¸€ä¸ªæ¥å£æˆ–å®ç°ä¸€ä¸ªç±»ã€‚ æ ¼å¼ new çˆ¶ç±»æ„é€ å™¨(å®å‚åˆ—è¡¨)|å®ç°æ¥å£(){ //åŒ¿åå†…éƒ¨ç±»çš„ç±»ä½“éƒ¨åˆ† } ç‰¹ç‚¹ åŒ¿åå†…éƒ¨ç±»å¿…é¡»ç»§æ‰¿çˆ¶ç±»æˆ–å®ç°æ¥å£ åŒ¿åå†…éƒ¨ç±»åªèƒ½æœ‰ä¸€ä¸ªå¯¹è±¡ åŒ¿åå†…éƒ¨ç±»å¯¹è±¡åªèƒ½ä½¿ç”¨å¤šæ€å½¢å¼å¼•ç”¨ å†…éƒ¨ç±»çš„ä½¿ç”¨ å®ä¾‹åŒ–æˆå‘˜å†…éƒ¨ç±»å¯¹è±¡ é™æ€å†…éƒ¨ç±» å¤–éƒ¨ç±»å.å†…éƒ¨ç±»å å†…éƒ¨å¯¹è±¡å = new å¤–éƒ¨ç±»å.å†…éƒ¨ç±»å(); éé™æ€ å¤–éƒ¨ç±»å å¤–éƒ¨ç±»å¯¹è±¡ = new å¤–éƒ¨ç±»å(); å¤–éƒ¨ç±»å.å†…éƒ¨ç±»å å†…éƒ¨å¯¹è±¡å = å¤–éƒ¨å¯¹è±¡å.new å†…éƒ¨ç±»å() åœ¨æˆå‘˜å†…éƒ¨ç±»ä¸­åŒºåˆ†è°ƒç”¨å¤–éƒ¨ç±»ç»“æ„ï¼Œå½“å˜é‡ååŠå½¢å‚é‡åæ—¶å†…éƒ¨ç±» this.å˜é‡å å¤–éƒ¨ç±» å¤–éƒ¨ç±»å.this.å˜é‡å å¼€å‘ä¸­å±€éƒ¨å†…éƒ¨ç±»çš„ä½¿ç”¨ï¼šå¸¸è§äºè¿”å›å€¼ç±»å‹ä¸ºæ¥å£çš„æƒ…å†µ ç¨‹åºä¸­æˆå‘˜å˜é‡èµ‹å€¼çš„æ‰§è¡Œé¡ºåº å£°æ˜å˜é‡çš„é»˜è®¤åˆå§‹åŒ– æ˜¾å¼åˆå§‹åŒ–ã€å¤šä¸ªä»£ç åŒ–å—ä¾æ¬¡è¢«æ‰§è¡Œ(åŒçº§åˆ«ä¸‹æŒ‰å…ˆåé¡ºåºæ‰§è¡Œ) æ„é€ å™¨å†å¯¹æˆå‘˜è¿›è¡Œåˆå§‹åŒ–æ“ä½œ é€šè¿‡&quot;å¯¹è±¡.å±æ€§&quot;æˆ–&quot;å¯¹è±¡.æ–¹æ³•&quot;çš„æ–¹å¼ï¼Œå¯å¤šæ¬¡ç»™å±æ€§èµ‹å€¼ åˆ›å»ºå­ç±»(å­ç±»çš„å®ä¾‹åŒ–) å…ˆä»Objectå¼€å§‹åŠ è½½ï¼Œç„¶ååŠ è½½åˆ°å­ç±» ç”±çˆ¶åŠå­ï¼Œé™æ€å…ˆè¡Œ çˆ¶çš„é™æ€ä»£ç å— --&gt; å­çš„é™æ€ä»£ç å— --&gt; çˆ¶çš„éé™æ€ --&gt; çˆ¶çš„æ„é€ å™¨ --&gt; å­çš„éé™æ€ --&gt; å­çš„æ„é€ å™¨ åœ¨æ­¤åˆ›å»ºå¯¹è±¡æ—¶ä¸å†æ‰§è¡Œé™æ€ä»£ç å— mainå‡½æ•°å¼€å§‹å‰å…ˆæ‰§è¡Œæ‰€å±ç±»çš„é™æ€ä»£ç å— ç®€å•çš„å†…å­˜è§£æ ç¼–è¯‘å®Œæºç ä¹‹åï¼Œç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ç æ–‡ä»¶ï¼Œæˆ‘ä»¬ä½¿ç”¨JVMä¸­çš„ç±»åŠ è½½å™¨å¯¹ç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶è¿›è¡Œè§£é‡Šè¿è¡Œï¼Œæ„å‘³ç€éœ€è¦å°†å­—èŠ‚ç ä¸­çš„å¯¹åº”çš„ç±»åŠ è½½åˆ°å†…å­˜ä¸­ã€‚è™šæ‹Ÿæœºæ ˆï¼šå³æ ˆï¼Œå±€éƒ¨å˜é‡å­˜æ”¾åœ¨æ ˆä¸­å †ï¼šnewå‡ºæ¥çš„ç»“æ„ï¼Œå¯¹è±¡çš„éstaticå±æ€§ä¹Ÿæ”¾åœ¨å †ä¸­æ–¹æ³•åŒºï¼šç±»çš„åŠ è½½ä¿¡æ¯ï¼Œå¸¸é‡æ± ï¼Œé™æ€åŸŸ ä¸‡äº‹ä¸‡ç‰©çš†å¯¹è±¡çš„ç†è§£ Javaä¸­ï¼Œæˆ‘ä»¬å°†åŠŸèƒ½ç»“æ„å°è£…åˆ°ç±»ä¸­ï¼Œé€šè¿‡ç±»çš„å®ä¾‹åŒ–æ¥è°ƒç”¨å…·ä½“çš„åŠŸèƒ½ æ¶‰åŠåˆ°Javaä¸å‰ç«¯Htmlåç«¯çš„æ•°æ®åº“äº¤äº’å¼éƒ½ä½“ç°ä¸ºç±»å¯¹è±¡ï¼Œæ¯”å¦‚æ•°æ®åº“ä¸­ä¸€ä¸ªè¡¨å¯ä»¥çœ‹ä½œä¸€ä¸ªç±»ï¼Œè¡¨çš„å­—æ®µå¯ä»¥çœ‹ä½œä¸ºç±»çš„å±æ€§ï¼Œè¡¨çš„æ¯ä¸€è¡Œæ•°æ®å¯ä»¥çœ‹ä½œä¸€ä¸ªå¯¹è±¡ã€‚ instanceofæ“ä½œç¬¦ //æ£€æŸ¥xæ˜¯å¦ä¸ºç±»Açš„å¯¹è±¡ï¼Œè¿”å›å€¼ä¸ºbooleanç±»å‹ã€‚ //å¦‚æœxå±äºç±»Açš„å­ç±»Bé‚£ä¹ˆä¹Ÿè¿”å›true x instanceof A; å¯¹è±¡ç±»å‹è½¬æ¢ ä»å­ç±»åˆ°çˆ¶ç±»çš„ç±»å‹è½¬æ¢å¯ä»¥è‡ªåŠ¨è¿›è¡Œ ä»çˆ¶ç±»åˆ°å­ç±»çš„ç±»å‹è½¬æ¢å¿…é¡»é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢å®ç° æ— ç»§æ‰¿å…³ç³»çš„å¼•ç”¨ç±»å‹é—´çš„è½¬æ¢æ˜¯éæ³•çš„ åœ¨å¼ºåˆ¶ç±»å‹è½¬æ¢å‰å¯ä»¥ä½¿ç”¨instanceofæ“ä½œç¬¦æµ‹è¯•ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹ é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹å¾ å°è£…å’Œéšè—(å°è£…æ€§) ä¸ºä»€ä¹ˆè¦å°è£…å’Œéšè—è®¾è®¡è¿½æ±‚ï¼šé«˜å†…èšï¼Œä½è€¦åˆéšè—å¯¹è±¡å†…éƒ¨çš„å¤æ‚æ€§ï¼Œåªå¯¹å¤–å…¬å¼€ç®€å•çš„æ¥å£ã€‚ä¾¿äºå¤–ç•Œè°ƒç”¨ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€å¯ç»´æŠ¤æ€§ å°è£…æ€§éœ€è¦æœ‰æƒé™ä¿®é¥°ç¬¦æ¥é…åˆï¼Œé¢å‘å¯¹è±¡çš„ä¸»è¦ä½“ç°åœ¨ï¼š å±æ€§ç§æœ‰åŒ–(æä¾›ç›¸å¯¹åº”çš„Getter/Setteræ–¹æ³•) æ–¹æ³•ç§æœ‰åŒ–(ä»…ç±»å†…éƒ¨ä½¿ç”¨) å•ä¾‹æ¨¡å¼(è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§ï¼Œæ¶æ±‰å¼/æ‡’æ±‰å¼) å››ç§æƒé™ä¿®é¥°ç¬¦ï¼Œå¯ä»¥ä¿®é¥°ç±»çš„å†…éƒ¨ç»“æ„ï¼šå±æ€§ï¼Œæ–¹æ³•ï¼Œå†…éƒ¨ç±»ï¼Œæ„é€ å™¨ã€‚å…¶ä¸­åªæœ‰publicå’Œç¼ºçœå¯ä»¥ä¿®é¥°ç±» æƒé™ä¿®é¥°ç¬¦ ç±»å†…éƒ¨ åŒä¸€ä¸ªåŒ… ä¸åŒåŒ…çš„å­ç±» åŒä¸€ä¸ªå·¥ç¨‹ private Yes No No No ç¼ºçœ Yes Yes No No protected Yes Yes Yes No public Yes Yes Yes Yes ç»§æ‰¿æ€§ class A extends B{ å­ç±»ç‰¹æœ‰çš„å±æ€§ å­ç±»ç‰¹æœ‰çš„æ–¹æ³• } å¤šä¸ªç±»ä¸­å­˜åœ¨ç›¸åŒçš„å±æ€§å’Œè¡Œä¸ºæ—¶ï¼Œå°†è¿™äº›å†…å®¹æŠ½å–åˆ°å•ç‹¬ä¸€ä¸ªç±»ä¸­ï¼Œé‚£ä¹ˆå¤šä¸ªç±»æ— éœ€å†å®šä¹‰è¿™äº›å±æ€§å’Œè¡Œä¸ºï¼Œåªè¦ç»§æ‰¿é‚£ä¸ªç±»å³å¯ã€‚ä¸€æ—¦å­ç±»ç»§æ‰¿äº†çˆ¶ç±»ä¹‹åï¼Œå­ç±»å°±è·å¾—äº†çˆ¶ç±»ä¸­å£°æ˜çš„æ‰€æœ‰ç»“æ„ï¼Œå±æ€§ï¼Œæ–¹æ³•ã€‚å­ç±»å¯ä»¥è·å¾—privateæƒé™çš„å±æ€§ï¼Œæ–¹æ³•ï¼Œåªä¸è¿‡å› ä¸ºå°è£…æ€§å½±å“ä¸èƒ½ç›´æ¥è°ƒç”¨è€Œå·²ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»åå¯ä»¥å£°æ˜è‡ªå·±ç‰¹æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œå®ç°åŠŸèƒ½çš„æ‹“å±•ã€‚ å¥½å¤„: å‡å°‘ä»£ç å†—ä½™æé«˜å¤ç”¨æ€§ ä¾¿äºåŠŸèƒ½çš„æ‰©å±• ä¸ºä¹‹åå¤šæ€æ€§æä¾›äº†å‰æ æ³¨æ„ï¼š å•ç»§æ‰¿æ€§ï¼šä¸€ä¸ªçˆ¶ç±»å¯ä»¥æœ‰å¤šä¸ªå­ç±»ï¼Œä¸€ä¸ªå­ç±»åªèƒ½æœ‰ä¸€ä¸ªçˆ¶ç±» å­çˆ¶ç±»æ˜¯ç›¸å¯¹çš„æ¦‚å¿µï¼šå­ç±» ==&gt; ç›´æ¥çˆ¶ç±» ==&gt; é—´æ¥çˆ¶ç±» ==&gt; é—´æ¥çˆ¶ç±» æ‰€æœ‰çš„Javaç±»(é™¤Java.lang.Objectç±»ä¹‹å¤–)éƒ½ç›´æ¥æˆ–é—´æ¥çš„ç»§æ‰¿äºJava.lang.Objectç±» çˆ¶ç±»ä¸­çš„æ–¹æ³•å¦‚æœä½¿ç”¨äº†thiså…³é”®å­—ï¼Œå­ç±»ç»§æ‰¿åè¯¥thisæŒ‡ä»£å­ç±»çš„å¯¹è±¡ å¯»æ‰¾ä¸€ä¸ªå±æ€§æˆ–æ–¹æ³•æ˜¯ï¼Œå…ˆæŸ¥çœ‹å­ç±»ï¼Œå¦‚æœæ²¡æœ‰åˆ™çœ‹ç›´æ¥çˆ¶ç±»ï¼Œå¦‚æœä¾æ—§æ²¡æœ‰æŸ¥çœ‹é—´æ¥çˆ¶ç±»ï¼Œä»¥æ­¤ç±»æ¨ å¤šæ€æ€§ ç®€ä»‹ å¤šæ€æ€§å¯ä»¥ç†è§£ä¸ºä¸€ç§äº‹ç‰©çš„å¤šç§å½¢æ€å¯¹è±¡çš„å¤šæ€æ€§ï¼šçˆ¶ç±»çš„å¼•ç”¨çº¸ç®±å­ç±»çš„å¯¹è±¡å®ä¾‹ çˆ¶ç±»å C1 = new å­ç±»å(); Javaå¼•ç”¨å˜é‡æœ‰ä¸¤ä¸ªç±»å‹ï¼šç¼–è¯‘æ—¶ç±»å‹å’Œè¿è¡Œæ—¶ç±»å‹ã€‚ç¼–è¯‘æ—¶ç±»å‹ç”±å£°æ˜è¯¥å˜é‡æ—¶ä½¿ç”¨çš„ç±»å‹å†³å®šï¼Œè¿è¡Œæ—¶ç±»å‹ç”±å®é™…èµ‹äºˆè¯¥å˜é‡çš„å¯¹è±¡å†³å®šã€‚ç®€å•æ¥è¯´ï¼šç¼–è¯‘æ—¶ï¼Œçœ‹å·¦è¾¹ï¼›è¿è¡Œæ—¶ï¼Œçœ‹å³è¾¹ã€‚ ä½¿ç”¨ å½“è°ƒç”¨å­çˆ¶ç±»ä¸­åŒååŒå‚æ•°çš„æ–¹æ³•æ—¶ï¼Œå®é™…æ‰§è¡Œçš„æ˜¯å­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œå³è™šæ‹Ÿæ–¹æ³•è°ƒç”¨ï¼Œä¸èƒ½è°ƒç”¨å­ç±»ç‰¹æœ‰çš„æ–¹æ³•(å³çˆ¶ç±»ä¸­æ²¡æœ‰çš„æ–¹æ³•)è™šæ‹Ÿæ–¹æ³•è°ƒç”¨(åŠ¨æ€ç»‘å®š)ï¼šåœ¨ç¼–è¯‘å™¨åªèƒ½è°ƒç”¨çˆ¶ç±»ä¸­å£°æ˜çš„æ–¹æ³•ï¼Œä½†åœ¨è¿è¡Œæ—¶æˆ‘ä»¬å®é™…æ‰§è¡Œå­ç±»çš„æ–¹æ³•ã€‚çˆ¶ç±»çš„æ–¹æ³•æˆ‘ä»¬ç§°ä¸ºè™šæ‹Ÿæ–¹æ³•ï¼ŒåŠ¨æ€è°ƒç”¨å­ç±»çš„æ–¹æ³•ã€‚ å­˜åœ¨çš„å‰æ æœ‰ç±»çš„ç»§æ‰¿å…³ç³» æ–¹æ³•çš„é‡å†™ å¤šæ€çš„æ„ä¹‰ ä»£ç å¤ç”¨ï¼Œå¯ä»¥åœ¨å®šä¹‰æ–¹æ³•æ—¶å†™çˆ¶ç±»ã€‚ æ³¨æ„ å±æ€§æ— å¤šæ€æ€§ï¼Œå±æ€§çš„ç¼–è¯‘å’Œè¿è¡Œéƒ½çœ‹ç­‰å·å·¦è¾¹ã€‚ å¤šæ€æ˜¯è¿è¡Œæ—¶è¡Œä¸ºã€‚ ä¸€ä¸ªå¼•ç”¨ç±»å‹å˜é‡å¦‚æœç”Ÿå‘½ä¸ºçˆ¶ç±»çš„ç±»å‹ï¼Œä½†å®é™…å¼•ç”¨çš„æ˜¯å­ç±»çš„å¯¹è±¡ï¼Œé‚£ä¹ˆè¯¥å˜é‡å°±ä¸èƒ½å†è®¿é—®å­ç±»ä¸­æ·»åŠ çš„å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœéœ€è¦è°ƒç”¨å­ç±»ç‰¹æœ‰çš„å±æ€§æˆ–æ–¹æ³•ï¼Œåˆ™éœ€è¦ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚ åœ¨ä½¿ç”¨ç±»å¼ºåˆ¶è½¬æ¢æ—¶å¯èƒ½å‡ºç°ClassCastException å…³é”®å­— thiså…³é”®å­— thisç†è§£ä¸ºå½“å‰çš„å¯¹è±¡ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨thiså…³é”®å­—ï¼š åœ¨ç±»çš„æ–¹æ³•æˆ–è€…æ„é€ å™¨ä¸­å¯ä»¥ä½¿ç”¨this.å±æ€§æˆ–this.æ–¹æ³•çš„æ–¹å¼ã€‚ è°ƒç”¨å½“å‰å¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•ï¼Œä½†åœ¨é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬éƒ½é€‰æ‹©çœç•¥thisã€‚ ç‰¹æ®Šæƒ…å†µä¸‹å½“æ–¹æ³•å½¢å‚äºˆå±æ€§é‡åï¼Œæˆ‘ä»¬å¿…é¡»æ˜¾å¼çš„ä½¿ç”¨thisï¼Œè¡¨æ˜ä¸ºå±æ€§è€Œä¸æ˜¯å½¢å‚ã€‚ ä½¿ç”¨thisè®¿é—®å±æ€§å’Œæ–¹æ³•æ—¶ï¼Œå¦‚æœåœ¨æœ¬ç±»ä¸­æœªæ‰¾åˆ°ï¼Œä¼šä»çˆ¶ç±»ä¸­æŸ¥æ‰¾ã€‚ thiså¯ä»¥ä½œä¸ºä¸€ä¸ªç±»ä¸­æ„é€ å™¨ç›¸äº’è°ƒç”¨çš„ç‰¹æ®Šæ ¼å¼ ä¸€ä¸ªç±»ä¸­æœ‰nä¸ªæ„é€ å™¨æœ€å¤šæœ‰n-1ä¸ªæ„é€ å™¨ä¸­ä½¿ç”¨äº†this(xxx)è§„å®šthisè°ƒç”¨æ„é€ å™¨æ—¶ï¼Œå¿…é¡»æ”¾åœ¨æ„é€ å™¨çš„é¦–è¡Œï¼Œä¸”åªèƒ½æœ‰ä¸€ä¸ªthis(xxx)æ„é€ å™¨ä¸èƒ½é€šè¿‡this(xxx)è°ƒç”¨è‡ªèº« superå…³é”®å­— superå¯ç”¨äºè®¿é—®çˆ¶ç±»ä¸­å®šä¹‰çš„å±æ€§ superå¯ç”¨äºè°ƒç”¨çˆ¶ç±»ä¸­å®šä¹‰çš„æˆå‘˜æ–¹æ³• superå¯ç”¨äºåœ¨å­ç±»æ„é€ å™¨ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨ å­ç±»ä¸­æ‰€æœ‰çš„æ„é€ å™¨é»˜è®¤éƒ½ä¼šè®¿é—®çˆ¶ç±»ä¸­ç©ºå‚æ•°çš„æ„é€ å™¨ å¯ä»¥åœ¨å­ç±»çš„æ„é€ å™¨ä¸­æ˜¾å¼çš„ä½¿ç”¨â€œsuper(å½¢å‚åˆ—è¡¨)â€çš„æ–¹å¼ï¼Œè°ƒç”¨çˆ¶ç±»ä¸­å£°æ˜çš„åˆ¶å®šçš„æ„é€ å™¨ super(å½¢å‚åˆ—è¡¨)çš„ä½¿ç”¨å¿…é¡»å£°æ˜åœ¨å­ç±»æ„é€ å™¨çš„é¦–è¡Œ this(å½¢å‚åˆ—è¡¨)å’Œsuper(å½¢å‚åˆ—è¡¨)åªèƒ½äºŒé€‰ä¸€ åœ¨æ„é€ å™¨é¦–è¡Œæ²¡æœ‰æ˜¾å¼çš„å£°æ˜this(å½¢å‚åˆ—è¡¨)æˆ–super(å½¢å‚åˆ—è¡¨)åˆ™é»˜è®¤ä½¿ç”¨çˆ¶ç±»çš„ç©ºå‚æ„é€ å™¨ åœ¨ç±»çš„æ„é€ å™¨ä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ„é€ å™¨ä½¿ç”¨äº†super æ³¨æ„å°¤å…¶å½“å­çˆ¶ç±»å‡ºç°åŒåæˆå‘˜æ—¶ï¼Œå¯ä»¥ç”¨superè¡¨æ˜è°ƒç”¨çš„æ˜¯çˆ¶ç±»ä¸­çš„æˆå‘˜superçš„è¿½æº¯ä¸ä»…é™äºç›´æ¥çˆ¶ç±»superå’Œthisçš„ç”¨æ³•å¾ˆåƒï¼Œthisä»£è¡¨æœ¬ç±»å¯¹è±¡çš„å¼•ç”¨ï¼Œsuperä»£è¡¨çˆ¶ç±»çš„å†…å­˜ç©ºé—´çš„æ ‡è¯†å½“å­ç±»é‡å†™äº†çˆ¶ç±»ä¸­çš„æ–¹æ³•ä»¥åï¼Œæˆ‘ä»¬æƒ³åœ¨å­ç±»ä¸­è°ƒç”¨çˆ¶ç±»ä¸­è¢«é‡å†™çš„æ–¹æ³•æ—¶ç”¨superè°ƒç”¨ï¼Œå¦‚æœç›´æ¥çˆ¶ç±»é‡å†™äº†é—´æ¥çˆ¶ç±»çš„æ–¹æ³•superè°ƒç”¨çš„æ˜¯ç›´æ¥çˆ¶ç±»çš„æ–¹æ³• å­ç±»å¯¹è±¡å®ä¾‹åŒ–å…¨è¿‡ç¨‹ ä»ç»“æœä¸Šçœ‹å­ç±»ç»§æ‰¿çˆ¶ç±»åå°±è·å¾—äº†çˆ¶ç±»ä¸­å£°æ˜çš„å±æ€§æˆ–æ–¹æ³•ï¼Œåˆ›å»ºè¯¥å­ç±»å¯¹è±¡ï¼Œåœ¨å †ç©ºé—´ä¸­å°±ä¼šåŠ è½½çˆ¶ç±»ä¸­çš„æ‰€æœ‰å±æ€§ ä»è¿‡ç¨‹ä¸Šçœ‹å½“é€šè¿‡å­ç±»çš„æ„é€ å™¨åˆ›å»ºç±»ç±»å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ä¸€å®šä¼šç›´æ¥æˆ–é—´æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨ï¼Œè¿›è€Œè°ƒç”¨çˆ¶ç±»çš„çˆ¶ç±»çš„æ„é€ å™¨ï¼Œç›´åˆ°è°ƒç”¨äº†Objectç±»ä¸­çš„æ„é€ å™¨ä½ç½®ã€‚æ­£å› ä¸ºåŠ è½½è¿‡æ‰€æœ‰çš„çˆ¶ç±»çš„ç»“æ„ï¼Œæ‰€ä»¥æ‰å¯ä»¥çœ‹åˆ°å†…å­˜ä¸­æœ‰çˆ¶ç±»çš„ç»“æ„ï¼Œå­ç±»å¯¹è±¡æ‰å¯ä»¥è€ƒè™‘è¿›è¡Œè°ƒç”¨ã€‚ thiså’Œsuperçš„å¯¹æ¯” No åŒºåˆ«ç‚¹ this super 1 è®¿é—®å±æ€§ è®¿é—®æœ¬ç±»ä¸­çš„å±æ€§ï¼Œå¦‚æœæœ¬ç±»æ²¡æœ‰æ­¤å±æ€§åˆ™ä»çˆ¶ç±»ä¸­ç»§ç»­æŸ¥æ‰¾ ç›´æ¥è®¿é—®çˆ¶ç±»ä¸­çš„å±æ€§ 2 è°ƒç”¨æ–¹æ³• è®¿é—®æœ¬ç±»ä¸­çš„æ–¹æ³•ï¼Œå¦‚æœæœ¬ç±»æ²¡æœ‰æ­¤æ–¹æ³•åˆ™ä»çˆ¶ç±»ä¸­ç»§ç»­æŸ¥æ‰¾ ç›´æ¥è®¿é—®çˆ¶ç±»ä¸­çš„æ–¹æ³• 3 è°ƒç”¨æ„é€ å™¨ è°ƒç”¨æœ¬ç±»æ„é€ å™¨ï¼Œå¿…é¡»æ”¾åœ¨æ„é€ å™¨çš„é¦–è¡Œ è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œå¿…é¡»æ”¾åœ¨å­ç±»æ„é€ å™¨çš„é¦–è¡Œ staticå…³é”®å­— ç®€ä»‹ æ— è®ºæ˜¯å¦äº§ç”Ÿäº†å¯¹è±¡æˆ–æ— è®ºäº§ç”Ÿäº†å¤šå°‘å¯¹è±¡çš„æƒ…å†µä¸‹ï¼ŒæŸäº›ç‰¹å®šçš„æ•°æ®åœ¨å†…å­˜ç©ºé—´é‡Œåªæœ‰ä¸€ä»½ã€‚ é™æ€çš„ å¯ä»¥ç”¨æ¥ä¿®é¥°ï¼šå±æ€§ã€æ–¹æ³•ã€ä»£ç å—ã€å†…éƒ¨ç±» è¢«ä¿®é¥°åçš„æˆå‘˜å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ ä¼˜å…ˆäºå¯¹è±¡å­˜åœ¨ ä¿®é¥°çš„æˆå‘˜ï¼Œè¢«æ‰€æœ‰å¯¹è±¡æ‰€å…±äº« è®¿é—®æƒé™å…è®¸äº‹ï¼Œå¯ä¸åˆ›å»ºå¯¹è±¡ï¼Œç›´æ¥è¢«ç±»è°ƒç”¨ã€‚ ç±»å±æ€§ã€ç±»æ–¹æ³•çš„è®¾è®¡æ€è·¯ ç±»å±æ€§ä½œä¸ºè¯¥ç±»å„ä¸ªå¯¹è±¡ä¹‹é—´å…±äº«çš„å˜é‡ã€‚åœ¨è®¾è®¡ç±»æ—¶ï¼Œåˆ†æå“ªäº›å±æ€§ä¸å› å¯¹è±¡çš„ä¸åŒè€Œæ”¹å˜ï¼Œå°†è¿™äº›å±æ€§è®¾ç½®ä¸ºç±»å±æ€§ã€‚ç›¸åº”çš„æ–¹æ³•è®¾ç½®ä¸ºç±»æ–¹æ³• å¦‚æœæ–¹æ³•ä¸è°ƒç”¨è€…æ— å…³ï¼Œåˆ™è¿™æ ·çš„æ–¹æ³•é€šå¸¸è¢«å£°æ˜ä¸ºç±»æ–¹æ³•ï¼Œç”±äºä¸éœ€è¦åˆ›å»ºå¯¹è±¡å°±å¯ä»¥è°ƒç”¨ç±»æ–¹æ³•ï¼Œä»è€Œç®€åŒ–äº†æ–¹æ³•çš„è°ƒç”¨ã€‚ é™æ€å˜é‡ä¸å®ä¾‹å˜é‡ å±æ€§æ˜¯å¦ä½¿ç”¨staticä¿®é¥°å¯ä»¥åˆ†ä¸ºï¼šé™æ€å±æ€§(ç±»å˜é‡)ï¼Œéé™æ€å±æ€§(å®ä¾‹å˜é‡) å®ä¾‹å˜é‡ï¼šæˆ‘ä»¬åˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ç‹¬ç«‹æ‹¥æœ‰ä¸€å°ç±»ä¸­çš„éé™æ€å±æ€§ï¼Œå½“ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå¯¹è±¡ä¸­çš„éé™æ€å±æ€§æ—¶ï¼Œä¸ä¼šå¯¼è‡´å…¶ä»–å¯¹è±¡ä¸­åŒæ ·çš„å±æ€§å€¼çš„ä¿®æ”¹ã€‚ é™æ€å±æ€§ï¼šå¤šä¸ªå¯¹è±¡å…±äº«åŒä¸€ä¸ªé™æ€å˜é‡ï¼Œå½“é€šè¿‡æŸä¸€ä¸ªå¯¹è±¡ä¿®æ”¹é™æ€å˜é‡æ—¶ï¼Œä¼šå¯¼è‡´å…¶ä»–å¯¹è±¡è°ƒç”¨æ­¤é™æ€å˜é‡æ—¶æ—¶ä¿®æ”¹è¿‡äº†çš„ã€‚ é™æ€å˜é‡éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œéé™æ€å˜é‡éšç€å¯¹è±¡çš„åˆ›å»ºè€ŒåŠ è½½ é™æ€å˜é‡çš„åŠ è½½æ—©äºå¯¹è±¡çš„åˆ›å»º å¯ä»¥é€šè¿‡ç±»å.é™æ€å˜é‡åçš„æ–¹å¼è€Œè°ƒç”¨ ç±»åªä¼šåŠ è½½ä¸€æ¬¡ï¼Œé™æ€å˜é‡ä¹Ÿåªä¼šåŠ è½½ä¸€æ¬¡ï¼Œå­˜åœ¨æ–¹æ³•åŒºçš„é™æ€åŸŸä¸­ ç±»å˜é‡ å®ä¾‹å˜é‡ ç±» YES NO å¯¹è±¡ YES YES é™æ€å˜é‡çš„å†…å­˜è§£æ é™æ€æ–¹æ³• éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œå¯é€šè¿‡ç±»å.é™æ€æ–¹æ³•å()çš„æ–¹å¼è°ƒç”¨ é™æ€æ–¹æ³•ä¸­åªèƒ½è°ƒç”¨é™æ€çš„æ–¹æ³•æˆ–å±æ€§ éé™æ€æ–¹æ³•ä¸­æ—¢å¯ä»¥è°ƒç”¨éé™æ€çš„æ–¹æ³•å’Œå±æ€§ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨é™æ€çš„æ–¹æ³•ä¸å±æ€§ é™æ€æ–¹æ³• éé™æ€æ–¹æ³• ç±» YES NO å¯¹è±¡ YES YES æ³¨æ„ åœ¨é™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨thiså…³é”®å­—ã€superå…³é”®å­—(å› ä¸ºä¸éœ€è¦å®ä¾‹å°±å¯ä»¥è®¿é—®staticæ–¹æ³•) staticä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™ ä½•æ—¶ä½¿ç”¨staticå…³é”®å­— å±æ€§ å±æ€§ä¸éšå¯¹è±¡ä¸åŒè€Œä¸åŒï¼Œæ˜¯å¤šä¸ªå¯¹è±¡å…±äº«çš„ å¸¸é‡ä¸€èˆ¬ä¹Ÿå¸¸å£°æ˜ä¸ºstatic æ–¹æ³• æ“ä½œé™æ€å±æ€§çš„æ–¹æ³• å·¥å…·ç±»çš„æ–¹æ³• ç†è§£main()æ–¹æ³•çš„è¯­æ³• ç”±äº Java è™šæ‹Ÿæœºéœ€è¦è°ƒç”¨ç±»çš„ main() æ–¹æ³•ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•çš„è®¿é—®æƒé™å¿…é¡»æ˜¯ public åˆå› ä¸º Java è™šæ‹Ÿæœºåœ¨æ‰§è¡Œ main() æ–¹æ³•æ—¶ä¸å¿…åˆ›å»ºå¯¹è±¡ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•å¿…é¡»æ˜¯ static çš„ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ª String ç±»å‹çš„æ•°ç»„å‚æ•°ï¼Œè¯¥æ•°ç»„ä¸­ä¿å­˜æ‰§è¡Œ Java å‘½ä»¤æ—¶ä¼ é€’ç»™æ‰€è¿è¡Œçš„ç±»çš„å‚æ•° åˆå› ä¸º main () æ–¹æ³•æ˜¯é™æ€çš„ ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥è®¿é—®è¯¥ç±»ä¸­çš„éé™æ€æˆå‘˜ï¼Œå¿…é¡»åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡åï¼Œæ‰èƒ½é€šè¿‡è¿™ä¸ªå¯¹è±¡å»è®¿é—®ç±»ä¸­çš„éé™æ€æˆå‘˜ï¼Œè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­å¤šæ¬¡ç¢°åˆ°ã€‚ å‚æ•°ç”¨æ³•java XXX &quot;å‚æ•°ä¸€&quot; &quot;å‚æ•°äºŒ&quot; &quot;å‚æ•°ä¸‰&quot; mainå‡½æ•°å¼€å§‹å‰å…ˆæ‰§è¡Œæ‰€å±ç±»çš„é™æ€ä»£ç å— finalå…³é”®å­— finalå…³é”®å­—å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡è¡¨ç¤ºæœ€ç»ˆçš„ ä½œç”¨ finalæ ‡è®°çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚æé«˜å®‰å…¨æ€§ï¼Œæé«˜ç¨‹åºçš„å¯èƒ½æ€§ finalä¿®é¥°çš„ç±»å¯¹åº”çš„å®ä¾‹ä¸­çš„å±æ€§å¯ä»¥æ”¹å˜ã€‚ Stringç±»ã€Systemç±»ã€StringBufferç±» finalæ ‡è®°çš„æ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™ å¦‚Objectç±»ä¸­çš„getClass() finalæ ‡è®°çš„å˜é‡(æˆå‘˜å˜é‡æˆ–å±€éƒ¨å˜é‡)å³ç§°ä¸ºå¸¸é‡ finalæ ‡è®°çš„æˆå‘˜å˜é‡å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–åœ¨æ¯ä¸ªæ„é€ å™¨ä¸­æˆ–ä»£ç å—ä¸­æ˜¾å¼èµ‹å€¼ï¼Œç„¶åæ‰èƒ½ä½¿ç”¨ final double MY_PI = 3.14 static ä¸ final ä¸€èµ·ä½¿ç”¨å¯ä»¥ä¿®é¥°æ–¹æ³•å’Œå±æ€§è¡¨ç¤ºå…¨å±€å¸¸é‡ abstractå…³é”®å­— ç”¨abstractå…³é”®å­—å¯ä»¥ç”¨æ¥ä¿®é¥°æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³• abstractä¸èƒ½ä¿®é¥°å±æ€§ã€æ„é€ å™¨ã€ä»£ç å—ç­‰ ä¸èƒ½ä¿®é¥°ç§æœ‰æ–¹æ³•ã€é™æ€æ–¹æ³•ã€finalçš„æ–¹æ³• å¯ä»¥å¤šæ€ æŠ½è±¡ç±»çš„åŒ¿åå­ç±» //æŠ½è±¡ç±»çš„åŒ¿åå­ç±» new æŠ½è±¡ç±»å(){ é‡å†™æ–¹æ³•ï¼› } æŠ½è±¡ç±» æŠ½è±¡ç±»ï¼šéšç€ç»§æ‰¿å±‚æ¬¡ä¸­ä¸€ä¸ªä¸ªæ–°å­ç±»çš„å®šä¹‰ï¼Œç±»ç¼–çš„è¶Šæ¥è¶Šå…·ä½“ï¼Œè€Œçˆ¶ç±»åˆ™æ›´ä¸€èˆ¬ï¼Œæ›´é€šç”¨ã€‚ç±»çš„è®¾è®¡åº”è¯¥ä¿è¯çˆ¶ç±»å’Œå­ç±»èƒ½å¤Ÿå…±äº«ç‰¹å¾ã€‚æœ‰æ—¶å°†ä¸€ä¸ªçˆ¶ç±»è®¾è®¡çš„éå¸¸æŠ½è±¡ï¼Œä»¥è‡³äºä»–æ²¡æœ‰å…·ä½“çš„å®ä¾‹ï¼Œè¿™æ ·çš„ç±»å«æŠ½è±¡ç±»ã€‚ æŠ½è±¡ç±»ç‰¹å¾ æ­¤ç±»ä¸èƒ½å®ä¾‹åŒ– ç±»ä¸­ä»ç„¶æœ‰æ„é€ å™¨ä¾¿äºå­ç±»å®ä¾‹åŒ–æ—¶ä½¿ç”¨ å¼€å‘ä¸­éƒ½ä¼šæä¾›æŠ½è±¡ç±»çš„å­ç±»ï¼Œè®©å­ç±»å®ä¾‹åŒ–å®Œæˆç›¸å…³çš„æ“ä½œ æŠ½è±¡ç±»åº”ç”¨ æŠ½è±¡ç±»æ˜¯ç”¨æ¥æ¨¡å‹åŒ–é‚£äº›çˆ¶ç±»æ— æ³•ç¡®å®šå…¨éƒ¨å®ç°ï¼Œè€Œæ˜¯ç”±å…¶å­ç±»æä¾›å…·ä½“å®ç°çš„å¯¹è±¡çš„ç±» æŠ½è±¡æ–¹æ³• æƒé™ä¿®é¥°ç¬¦+abstract+è¿”å›å€¼ç±»å‹+æ–¹æ³•å(å½¢å‚åˆ—è¡¨); æŠ½è±¡æ–¹æ³•åªæœ‰æ–¹æ³•å£°æ˜æ— æ–¹æ³•ä½“ åŒ…å«æŠ½è±¡æ–¹æ³•çš„ç±»ä¸€å®šæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä½†æ˜¯æŠ½è±¡ç±»å¯ä»¥æ²¡æœ‰æŠ½è±¡æ–¹æ³• è‹¥å­ç±»é‡å†™äº†çˆ¶ç±»ä¸­æ‰€æœ‰æŠ½è±¡æ–¹æ³•åï¼Œæ­¤å­ç±»å¯å®ä¾‹åŒ– è‹¥å­ç±»æ²¡æœ‰é‡å†™æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œé‚£è¯¥å­ç±»ä¹Ÿåº”å½“ä¸ºæŠ½è±¡ç±» interfaceå…³é”®å­—(æ¥å£) æ¥å£ï¼šæŠ½è±¡æ–¹æ³•å’Œå¸¸é‡å®šä¹‰çš„é›†åˆã€‚æ¥å£ä¸å­˜åœ¨is-aå…³ç³»ï¼Œä½†æ˜¯å…·æœ‰ç›¸åŒçš„è¡Œä¸ºç‰¹å¾ã€‚ç»§æ‰¿æ˜¯ä¸€ä¸ªæ˜¯ä¸æ˜¯çš„å…³ç³»ï¼Œæ¥å£å®ç°åˆ™æ˜¯èƒ½ä¸èƒ½çš„å…³ç³»ã€‚æ¥å£çš„æœ¬è´¨æ˜¯å¥‘çº¦ï¼Œæ ‡å‡†ï¼Œè§„èŒƒã€‚ æ¥å£çš„ä½¿ç”¨ æ¥å£ä½¿ç”¨interfaceæ¥å®šä¹‰ Javaä¸­æ¥å£å’Œç±»æ˜¯ä¸¤ä¸ªå¹¶åˆ—ç»“æ„ æ¥å£ä¸­çš„æˆå‘˜å˜é‡éƒ½æ˜¯é»˜è®¤ç”±public static finalä¿®é¥°çš„(ä¿®é¥°å¯ä»¥çœç•¥) æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•éƒ½æ˜¯é»˜è®¤ç”±public abstractä¿®é¥°çš„(ä¿®é¥°å¯ä»¥çœç•¥) æ¥å£ä¸­æ²¡æœ‰æ„é€ å™¨ JDK7åŠä¹‹å‰åªèƒ½åŒ…å«å¸¸é‡å’Œæ–¹æ³•çš„å®šä¹‰ï¼ŒJDK8åŠä¹‹åè¿˜å¯ä»¥å®šä¹‰é™æ€æ–¹æ³•å’Œé»˜è®¤æ–¹æ³• æ¥å£ä¸èƒ½å®ä¾‹åŒ– Javaå¼€å‘ä¸­é€šè¿‡è®©ç±»å»å®ç°æ¥å£æ¥ä½¿ç”¨ï¼Œå¦‚æœå®ç°äº†æ‰€æœ‰æŠ½è±¡æ–¹æ³•åˆ™å¯ä»¥å®ä¾‹åŒ–ï¼Œå¦åˆ™ä»ä¸ºæŠ½è±¡ç±» æ¥å£å¯ä»¥å¤šç»§æ‰¿ æ¥å£ä¸æ¥å£é—´ä¹Ÿå¯ä»¥ç»§æ‰¿ï¼Œä¸”å¯ä»¥å¤šç»§æ‰¿ æ¥å£ä¹Ÿæœ‰å¤šæ€æ€§ æ¥å£å®é™…ä¸Šå¯ä»¥çœ‹ä½œä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œä¸€ç§è§„èŒƒ æ¥å£å¯ä»¥ä½œä¸ºå½¢å‚ï¼Œä½†ä¼ å…¥çš„å®å‚åº”å½“å®ç°æŠ½è±¡æ–¹æ³• å¦‚æœä¸€ä¸ªæ¥å£ä¸­å®šä¹‰äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³•ï¼Œå¦ä¸€ä¸ªæ¥å£ä¸­ä¹Ÿå®šä¹‰äº†åŒååŒå‚çš„æ–¹æ³•ï¼Œåœ¨å®ç°ç±»ä¸­åŒæ—¶å®ç°è¿™ä¸¤ä¸ªæ¥å£æ—¶ä¼šå‡ºç°æ¥å£å†²çªï¼Œå®ç°ç±»å¿…é¡»è¦†ç›–æ¥å£ä¸­åŒååŒå‚çš„æ–¹æ³•ï¼Œæ¥è§£å†³å†²çª è‹¥ä¸€ä¸ªæ¥å£ä¸­å®šä¹‰äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³•ï¼Œè€Œçˆ¶ç±»ä¸­ä¹Ÿå®šä¹‰äº†ä¸€ä¸ªåŒååŒå‚çš„éæŠ½è±¡æ–¹æ³•ï¼Œåˆ™ä¸ä¼šå‡ºç°å†²çªé—®é¢˜ã€‚æ­¤æ—¶éµå®ˆç±»ä¼˜å…ˆåŸåˆ™æ¥å£ä¸­å…·æœ‰åŒååŒå‚çš„é»˜è®¤æ–¹æ³•ä¼šè¢«å¿½ç•¥ã€‚ æ¥å£ä¸­å®šä¹‰çš„é™æ€æ–¹æ³•åªèƒ½é€šè¿‡æ¥å£å.æ–¹æ³•å()ä½¿ç”¨ é»˜è®¤æ–¹æ³•é‡å†™æ—¶ä¸éœ€è¦å¸¦defaultä¿®é¥°ç¬¦ å¦‚æœå®ç°ç±»é‡å†™äº†é»˜è®¤æ–¹æ³•ï¼Œåˆ™ä½¿ç”¨é‡å†™åçš„æ–¹æ³• å®ç°ç±»ä¸­è°ƒç”¨æ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•æ¥å£å.super.æ–¹æ³•å() ä»£ç ç¤ºä¾‹ interface name{ è¿”å›ç±»å‹ æ–¹æ³•å();//çœç•¥äº†public abstract æ•°æ®ç±»å‹ å˜é‡å;//çœç•¥äº†public static final //publicå¯ä»¥çœç•¥ public default è¿”å›ç±»å‹ æ–¹æ³•å();//é»˜è®¤æ–¹æ³• public static è¿”å›ç±»å‹ æ–¹æ³•å();//é™æ€æ–¹æ³• } æ¥å£ä¸æŠ½è±¡ç±»çš„å¯¹æ¯” No. åŒºåˆ«ç‚¹ æŠ½è±¡ç±» æ¥å£ 1 å®šä¹‰ åŒ…å«æŠ½è±¡æ–¹æ³•çš„ç±» ä¸»è¦æ˜¯æŠ½è±¡æ–¹æ³•å’Œå…¨å±€å¸¸é‡çš„é›†åˆ 2 ç»„æˆ æ„é€ æ–¹æ³•ã€æŠ½è±¡æ–¹æ³•ã€æ™®é€šæ–¹æ³•ã€å¸¸é‡ã€å˜é‡ å¸¸é‡ã€æŠ½è±¡æ–¹æ³•ã€(JDK8é»˜è®¤æ–¹æ³•ã€é™æ€æ–¹æ³•) 3 ä½¿ç”¨ å­ç±»ç»§æ‰¿æŠ½è±¡ç±»extends å­ç±»å®ç°æ¥å£implents 4 å…³ç³» æŠ½è±¡ç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ æ¥å£ä¸èƒ½ç»§æ‰¿æŠ½è±¡ç±»ï¼Œä½†å…è®¸ç»§æ‰¿å¤šä¸ªæ¥å£ 5 å¸¸è§è®¾è®¡æ¨¡å¼ æ¨¡æ¿æ–¹æ³• ç®€å•å·¥å‚ã€å·¥å‚æ–¹æ³•ã€ä»£ç†æ¨¡å¼ 6 å¯¹è±¡ éƒ½é€šè¿‡å¯¹è±¡çš„å¤šæ€æ€§äº§ç”Ÿå®ä¾‹åŒ–å¯¹è±¡ 7 å±€é™ æŠ½è±¡ç±»æœ‰å•ç»§æ‰¿çš„å±€é™ æ¥å£æ²¡æœ‰æ­¤å±€é™ 8 å®é™… ä½œä¸ºä¸€ä¸ªæ¨¡æ¿ æ˜¯ä½œä¸ºä¸€ä¸ªæ ‡å‡†æˆ–æ˜¯è¡¨ç¤ºä¸€ç§èƒ½åŠ› 9 é€‰æ‹© å¦‚æœæŠ½è±¡ç±»å’Œæ¥å£éƒ½å¯ä»¥ä½¿ç”¨çš„è¯ï¼Œä¼˜å…ˆä½¿ç”¨æ¥å£ï¼Œå› ä¸ºé¿å…å•ç»§æ‰¿çš„å±€é™ packageå…³é”®å­— ackageè¯­å¥ä½œä¸ºJavaæºæ–‡ä»¶çš„ç¬¬ä¸€æ¡è¯­å¥ï¼ŒæŒ‡æ˜è¯¥æ–‡ä»¶ä¸­å®šä¹‰çš„ç±»æ‰€åœ¨çš„åŒ… è¯­æ³•æ ¼å¼ä¸ºpackage é¡¶å±‚åŒ…å.å­åŒ…å åŒ…çš„ä½œç”¨ï¼š åŒ…å¸®åŠ©ç®¡ç†å¤§å‹è½¯ä»¶ç³»ç»Ÿï¼šå°†åŠŸèƒ½ç›¸è¿‘çš„ç±»åˆ’åˆ†åˆ°åŒä¸€ä¸ªåŒ…ä¸­(æ¯”å¦‚MVCçš„è®¾è®¡æ¨¡å¼) åŒ…å¯ä»¥åŒ…å«ç±»å’Œå­åŒ…ï¼Œåˆ’åˆ†é¡¹ç›®å±‚æ¬¡ï¼Œä¾¿äºç®¡ç† è§£å†³ç±»å‘½åå†²çªé—®é¢˜ æ§åˆ¶è®¿é—®æƒé™ MVCè®¾è®¡æ¨¡å¼ Mï¼šæ•°æ®æ¨¡å‹å±‚ model æ•°æ®å¯¹è±¡å°è£… model.bran\\domain æ•°æ®åº“æ“ä½œç±» model.dao æ•°æ®åº“ model.db Vï¼šè§†å›¾æ¨¡å‹å±‚ view ç›¸å…³å·¥å…·ç±» view.utils è‡ªå®šä¹‰view view.ui Cï¼šæ§åˆ¶å™¨å±‚ control åº”ç”¨ç•Œé¢ç›¸å…³ contrloler.activity å­˜æ”¾fragment controller.fragment æ˜¾ç¤ºåˆ—è¡¨çš„é€‚é…å™¨ controller.adapter æœåŠ¡ç›¸å…³çš„ controller.service æŠ½å–çš„åŸºç±» controller.base importå…³é”®å­— ä¸ºä½¿ç”¨å®šä¹‰åœ¨ä¸åŒåŒ…ä¸­çš„Javaç±»ï¼Œéœ€ç”¨importè¯­å¥æ¥å¼•å…¥æŒ‡å®šåŒ…å±‚æ¬¡çæ‰€éœ€è¦çš„ç±»æˆ–å…¨éƒ¨ç±»ã€‚importè¯­å¥å‘Šè¯‰ç¼–è¯‘å™¨åˆ°å“ªé‡Œå»å¯»æ‰¾ç±»ã€‚import åŒ…å.ç±»å æ³¨æ„å£°æ˜åœ¨åŒ…çš„å£°æ˜ä¸ç±»çš„å£°æ˜ä¹‹é—´å¦‚æœå¯¼å…¥å¤šä¸ªï¼Œå¹¶åˆ—å†™å‡ºå³å¯å¯ä»¥ä½¿ç”¨åŒ…å.*çš„æ–¹å¼è¡¨ç¤ºå¯¼å…¥è¯¥åŒ…åä¸‹çš„æ‰€æœ‰ç»“æ„æ ¸å¿ƒåŒ…ä¸éœ€è¦å¯¼å…¥(java.lang.*)å¦‚æœä½¿ç”¨çš„ç±»æˆ–ç»“æ„åœ¨å½“å‰åŒ…ä¸­åˆ™ä¸éœ€è¦å¯¼å…¥å¦‚æœæºæ–‡ä»¶ä¸­ä½¿ç”¨äº†ä¸åŒåŒ…ä¸‹çš„åŒåçš„ç±»ï¼Œåˆ™å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªç±»ä½¿ç”¨å¸¦åŒ…åçš„å…¨ç±»åå¦‚æœä½¿ç”¨åŒ…å.*çš„æ–¹å¼è¡¨æ˜å¯ä»¥è°ƒç”¨è¯¥åŒ…ä¸‹çš„æ‰€æœ‰ç»“æ„(ç±»æˆ–æ¥å£)ä½†ä½¿ç”¨çš„å¦‚æœæ˜¯è¯¥åŒ…çš„å­åŒ…ä¸­çš„ç»“æ„åˆ™ä»ç„¶éœ€è¦æ˜¾ç¤ºçš„è°ƒç”¨æ‰å¯ä»¥import static åŒ…å.ç±»å å¯¼å…¥æŒ‡å®šç±»æˆ–æ¥å£ä¸­çš„é™æ€å±æ€§æˆ–æ–¹æ³• ","link":"https://yeyuan1107.github.io/post/java-mian-xiang-dui-xiang/"},{"title":"Javaæ•°ç»„","content":" æ•°ç»„çš„æ¦‚è¿° æ•°ç»„æ˜¯å¤šä¸ªç›¸åŒç±»å‹çš„æ•°æ®æŒ‰ç…§ä¸€å®šé¡ºåºæ’åˆ—çš„é›†åˆï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªåå­—å‘½åï¼Œå¹¶é€šè¿‡å˜å¥½çš„æ–¹å¼å¯¹è¿™äº›æ•°æ®è¿›è¡Œç»Ÿä¸€ç®¡ç† å¸¸è§æ¦‚å¿µï¼šæ•°ç»„åä¸‹è¡¨(ç´¢å¼•)å…ƒç´ æ•°ç»„çš„é•¿åº¦ æ•°ç»„å±äºå¼•ç”¨æ•°æ®ç±»å‹å˜é‡æ•°ç»„ä¸­çš„å…ƒç´ åŠå¯ä»¥ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ä¹Ÿå¯ä»¥ä¸ºå¼•ç”¨æ•°æ®ç±»å‹æ•°ç»„å ç”¨å†…å­˜ä¸­ä¸€å—è¿ç»­çš„ç©ºé—´æ•°ç»„é•¿åº¦ä¸€æ—¦ç¡®å®šå°±ä¸èƒ½ä¿®æ”¹ æ•°ç»„çš„å£°æ˜ åŠ¨æ€åˆå§‹åŒ–æ•°æ®ç±»å‹ æ•°ç»„å[] = new æ•°æ®ç±»å‹[æ•°ç»„é•¿åº¦]; é™æ€åˆå§‹åŒ–æ•°æ®ç±»å‹ æ•°ç»„å[] = new æ•°æ®ç±»å‹[]{æ•°ç»„å†…å®¹};æ•°æ®ç±»å‹ æ•°ç»„å[] = {æ•°ç»„å†…å®¹}; æ•°ç»„å±æ€§æ•°ç»„å.length è¿”å›æ•°ç»„é•¿åº¦ æ•°ç»„ä¸€ç»åˆ†é…ç©ºé—´ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ ä¹Ÿè¢«æŒ‰ç…§æˆå‘˜å˜é‡åŒæ ·çš„æ–¹å¼è¢«éšå¼åˆå§‹åŒ–å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹è€Œè¨€ï¼Œåˆå§‹åŒ–å³ä¸ºå¯¹åº”ç±»å‹çš„åˆå§‹åŒ–å€¼å¯¹äºå¼•ç”¨æ•°æ®ç±»å‹è€Œè¨€ï¼Œé»˜è®¤åˆå§‹åŒ–å€¼ä¸ºnull Arrayså·¥å…·ç±» Xxxxxsä¸€èˆ¬ä¸ºæ“ä½œæç»“æ„çš„å·¥å…·ç±» è¿”å›ç±»å‹ æ–¹æ³•å ä½œç”¨ å¤‡æ³¨ boolean equals[int[] a, int[] b] åˆ¤æ–­ä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸åŒ æºç çº¿æ¯”è¾ƒåœ°å€å†çœ‹æ˜¯å¦æœ‰nullå†çœ‹é•¿åº¦æœ€åå†ä¸€ä¸€å¯¹æ¯” String toString() è¾“å‡ºæ•°ç»„ä¿¡æ¯ ä¼šåœ¨æ•°ç»„å…ƒç´ é—´æ·»åŠ ç©ºæ ¼ void fill(int[] a, int val) å°†æŒ‡å®šå€¼å¡«å……åˆ°æ•°ç»„ä¹‹ä¸­ void sort(int[] a) å¯¹æ•°ç»„è¿›è¡Œæ’åº å¿«é€Ÿæ’åº int binarySearch(int[] a, int key) å¯¹æ’åºåçš„æ•°ç»„è¿›è¡ŒäºŒåˆ†æ³•æ£€ç´¢æŒ‡å®šçš„å€¼ æ•°ç»„ä¸­çš„å¸¸è§å¼‚å¸¸ ArrayIndexOutOfBoundsException æ•°ç»„è§’æ ‡è¶Šç•Œå¼‚å¸¸ NullPointerException ç©ºæŒ‡é’ˆå¼‚å¸¸ å‡ºç°å¼‚å¸¸ä¸”æœªå¤„ç†å¼‚å¸¸æ—¶ï¼Œç¨‹åºåœæ­¢æ‰§è¡Œ ","link":"https://yeyuan1107.github.io/post/java-shu-zu/"},{"title":"JavaåŸºæœ¬è¯­æ³•","content":" å…³é”®å­— å®šä¹‰ï¼šè¢«Javaè¯­è¨€èµ‹äºˆäº†ç‰¹æ®Šå«ä¹‰ï¼Œç”¨ä½œä¸“é—¨ç”¨é€”çš„å­—ç¬¦ä¸²ç‰¹ç‚¹ï¼šå…³é”®å­—ä¸­æ‰€æœ‰å­—æ¯éƒ½ä¸ºå°å†™ ç”¨äºå®šä¹‰æ•°æ®ç±»å‹çš„å…³é”®å­—ï¼šclass, interface, enum, byte, short, int, long, float, double, char, boolean, void ç”¨äºå®šä¹‰æµç¨‹æ§åˆ¶çš„å…³é”®å­—ï¼šif, else, switch, case, default, while, do, for, break, continue, return ç”¨äºå®šä¹‰è®¿é—®æƒé™ä¿®é¥°ç¬¦çš„å…³é”®å­—ï¼šprivate, protected, public ç”¨äºå®šä¹‰ç±»ï¼Œå‡½æ•°ï¼Œå˜é‡ä¿®é¥°ç¬¦çš„å…³é”®å­—ï¼šabstract, final, static, synchronized ç”¨äºå®šä¹‰ç±»ä¸ç±»ä¹‹é—´å…³ç³»çš„å…³é”®å­—ï¼šextends, implements ç”¨äºå®šä¹‰å»ºç«‹å®ä¾‹åŠå¼•ç”¨å®ä¾‹ï¼šnew, this, super, instanceof ç”¨äºå¼‚å¸¸å¤„ç†çš„å…³é”®å­—ï¼štry, catch, finally, throws, throw, throws ç”¨äºåŒ…çš„å…³é”®å­—ï¼špackage, import å…¶ä»–ä¿®é¥°ç¬¦å…³é”®å­—ï¼šnative, strictfp, transient, volatile, assert ç”¨äºå®šä¹‰æ•°æ®ç±»å‹å€¼çš„å­—é¢å€¼ï¼štrue, false, null ä¿ç•™å­—ï¼šgoto, const æ ‡è¯†ç¬¦ Javaå¯¹å„ç§å˜é‡ã€æ–¹æ³•å’Œç±»ç­‰è¦ç´ å‘½åæ—¶ä½¿ç”¨çš„å­—ç¬¦åºåˆ—ç§°ä¸ºæ ‡è¯†ç¬¦å‡¡äº‹è‡ªå·±å¯ä»¥èµ·åå­—çš„åœ°æ–¹éƒ½å«æ ‡è¯†ç¬¦ æ ‡è¯†ç¬¦è§„åˆ™ ç”±26ä¸ªè‹±æ–‡å­—æ¯å¤§å°å†™ï¼Œ0-9ï¼Œ_æˆ–$ç»„æˆæ•°å­—ä¸å¯ä»¥å¼€å¤´ä¸å¯ä»¥ä½¿ç”¨å…³é”®å­—å’Œä¿ç•™å­—ï¼Œä½†å¯ä»¥åŒ…å«å…³é”®å­—å’Œä¿ç•™å­—Javaä¸­ä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼Œé•¿åº¦æ— é™åˆ¶æ ‡è¯†ç¬¦ä¸èƒ½åŒ…å«ç©ºæ ¼ æ ‡è¯†ç¬¦è§„èŒƒ åŒ…åï¼šå¤šå•è¯ç»„æˆæ—¶æ‰€æœ‰å­—æ¯éƒ½å°å†™ï¼šxxxyyyzzzç±»åã€æ¥å£åï¼šå¤šå•è¯ç»„æˆæ—¶ï¼Œæ‰€æœ‰å•è¯çš„é¦–å­—æ¯å¤§å†™ï¼šXxxYyyZzzå˜é‡åã€æ–¹æ³•åï¼šå¤šå•è¯ç»„æˆæ—¶ï¼Œç¬¬ä¸€ä¸ªå•è¯é¦–å­—æ¯å°å†™ï¼Œç¬¬äºŒä¸ªå•è¯å¼€å§‹æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼šxxxYyyZzzå¸¸é‡åï¼šæ‰€æœ‰å­—å¹•éƒ½å¤§å†™ï¼Œå¤šå•è¯æ—¶æ¯ä¸ªå•è¯ç”¨ä¸‹åˆ’çº¿é“¾æ¥ï¼šXXX_YYY_ZZZ å˜é‡çš„åˆ†ç±» å˜é‡çš„åˆ†ç±»-æŒ‰æ•°æ®ç±»å‹åˆ†ç±» åŸºæœ¬æ•°æ®ç±»å‹ æ•°å€¼å‹ æ•´æ•°ç±»å‹(byte, short, int, long) æµ®ç‚¹ç±»å‹(float, double) å­—ç¬¦å‹(char) å¸ƒå°”å‹(boolean) å¼•ç”¨æ•°æ®ç±»å‹ ç±»(class) æ¥å£(interface) æ•°ç»„(*[]) å˜é‡çš„åˆ†ç±»-æŒ‰å£°æ˜çš„ä½ç½® æˆå‘˜å˜é‡ å®ä¾‹å˜é‡(ä¸ä»¥staticä¿®é¥°) ç±»å˜é‡(ä»¥staticä¿®é¥°) å±€éƒ¨å˜é‡ å½¢å‚(æ–¹æ³•ã€æ„é€ å™¨ä¸­å®šä¹‰çš„å˜é‡) æ–¹æ³•å±€éƒ¨å˜é‡(åœ¨æ–¹æ³•å†…å®šä¹‰) ä»£ç å—å±€éƒ¨å˜é‡(åœ¨ä»£ç å—å†…å®šä¹‰) äºŒè€…å¼‚åŒ åŒï¼šéƒ½æœ‰ç”Ÿå‘½å‘¨æœŸ å¼‚ï¼šå±€éƒ¨å˜é‡é™¤å½¢å‚å¤–ï¼Œéœ€æ˜¾å¼åˆå§‹åŒ– åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ byte, short, char -&gt; int -&gt; long -&gt; float -&gt; double æœ‰å¤šç§ç±»å‹çš„æ•°æ®æ··åˆè¿ç®—æ—¶ï¼Œç³»ç»Ÿé¦–å…ˆè‡ªåŠ¨å°†æ‰€æœ‰æ•°æ®è½¬æ¢æˆå®¹é‡æœ€å¤§çš„é‚£ç§æ•°æ®ç±»å‹ï¼Œç„¶åå†è¿›è¡Œè®¡ç®— byte, shor, charé—´ä¸ä¼šç›¸äº’è½¬æ¢ï¼Œä»–ä»¬ä¸‰è€…åœ¨è®¡ç®—æ—¶é¦–å…ˆè½¬æ¢ä¸ºintç±»å‹ booleanç±»å‹ä¸èƒ½ä¸å…¶ä»–æ•°æ®ç±»å‹è®¡ç®— å½“ä»»ä½•åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼å’Œå­—ç¬¦ä¸²(String)è¿›è¡Œè¿æ¥è¿ç®—æ—¶ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼è‡ªåŠ¨è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ç±»å‹ è¿ç®—ç¬¦ ç®—æ•°è¿ç®—ç¬¦ è¿ç®—ç¬¦ è¿ç®— å¤‡æ³¨ + æ­£å· - è´Ÿå· + åŠ  short, byteç±»å‹ + å¸¸æ•°è½¬æ¢ä¸ºintå‹ - å‡ * ä¹˜ / é™¤ % å–ä½™ ä½™æ•°ç¬¦å·å–å†³äºè¢«æ¨¡æ•° ++ è‡ªå¢ short, byteç±»å‹ä¸+1ä¸åŒï¼Œä¸ä¼šæ”¹å˜ä¸ºintå‹ -- è‡ªå‡ è‡ªå¢ä¸è‡ªå‡ä¸ä¼šæ”¹å˜åŸå˜é‡æ•°æ®ç±»å‹ + è¿æ¥ èµ‹å€¼è¿ç®—ç¬¦ è¿ç®—ç¬¦ è¿ç®— å¤‡æ³¨ = èµ‹å€¼ ä¸¤ä¾§æ•°æ®ä¸ä¸€è‡´æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è‡ªåŠ¨/å¼ºåˆ¶ç±»å‹è½¬æ¢ +=, -=, *=, /=, %= ä¸ä¼šæ”¹å˜å˜é‡ç±»å‹ï¼Œä¸ä¼šè‡ªåŠ¨ç±»å‹è½¬æ¢ æ¯”è¾ƒè¿ç®—ç¬¦ è¿ç®—ç¬¦ è¿ç®— å¤‡æ³¨ == ç›¸ç­‰äº åœ¨é™¤äº†æ•°å€¼ç±»å‹å˜é‡é—´ä½¿ç”¨æ—¶ï¼Œæ¯”è¾ƒçš„æ˜¯åœ°å€ != ä¸ç­‰äº åœ¨é™¤äº†æ•°å€¼ç±»å‹å˜é‡é—´ä½¿ç”¨æ—¶ï¼Œæ¯”è¾ƒçš„æ˜¯åœ°å€ &lt; å°äº åªèƒ½åœ¨æ•°å€¼ç±»å‹å˜é‡é—´ä½¿ç”¨ &gt; å¤§äº åªèƒ½åœ¨æ•°å€¼ç±»å‹å˜é‡é—´ä½¿ç”¨ &lt;= å°äºç­‰äº åªèƒ½åœ¨æ•°å€¼ç±»å‹å˜é‡é—´ä½¿ç”¨ &gt;= å¤§äºç­‰äº åªèƒ½åœ¨æ•°å€¼ç±»å‹å˜é‡é—´ä½¿ç”¨ instanceof æ£€æŸ¥æ˜¯å¦æ˜¯ç±»çš„å¯¹è±¡ é€»è¾‘è¿ç®—ç¬¦ è¿ç®—ç¬¦ è¿ç®— &amp; é€»è¾‘ä¸ | é€»è¾‘æˆ– &amp;&amp; çŸ­è·¯ä¸ || çŸ­è·¯æˆ– ! é€»è¾‘é ^ é€»è¾‘å¼‚æˆ– çŸ­è·¯ä¸ä¸çŸ­è·¯æˆ–å¯ä»¥ç”¨æ¥ç¼–å†™é€’å½’æ¡ä»¶ å¼€å‘è¿‡ç¨‹ä¸­ä¸€èˆ¬ä½¿ç”¨çŸ­è·¯é€»è¾‘è¿ç®—ç¬¦ ä½è¿ç®—ç¬¦ è¿ç®—ç¬¦ è¿ç®— &lt;&lt; å·¦ç§» &gt;&gt; å³ç§» &gt;&gt;&gt; æ— ç¬¦å·å³ç§»ä¸ç®¡ç¬¦å·ä½ï¼Œç›´æ¥è¡¥0 &amp; ä¸è¿ç®— ^ å¼‚æˆ–è¿ç®— | æˆ–è¿ç®— ~ å–åè¿ç®— //äº¤æ¢å˜é‡å€¼ æ–¹å¼ä¸€ï¼š temp = num1; num1 = num2; num2 = temp; æ–¹å¼äºŒï¼š num1 = num1 + num2; num2 = num1 - num2; num1 = num1 - num2; æ–¹å¼ä¸‰ï¼š num1 = num1 ^ num2; num2 = num1 ^ num2; num1 = num1 ^ num2; ä¸‰å…ƒè¿ç®—ç¬¦ æ¡ä»¶è¡¨è¾¾å¼ ? è¡¨è¾¾å¼1 : è¡¨è¾¾å¼2å…¶ä¸­è¡¨è¾¾å¼1ä¸è¡¨è¾¾å¼2ä¸ºåŒç§ç±»å‹ä¸‰å…ƒè¿ç®—ç¬¦å¯ä»¥è½¬åŒ–ä¸ºif-elseï¼Œä½†if-elseä¸ä¸€å®šèƒ½è½¬åŒ–ä¸ºä¸‰å…ƒè¿ç®—ç¬¦å¦‚æœå¯ä»¥ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦ åœ¨æ§åˆ¶å°ä»é”®ç›˜è¾“å…¥ import java.util.Scanner; Scanner in = new scanner(System.in); xxx num = in.nextXxx(); Stringç±»å‹ç”¨next()æˆ–nextLine(); Javaäº§ç”Ÿéšæœºæ•° Math.random() =&gt; [0,1) æ±‚[a, b] =&gt; (int) (Math.random()\\*(b-a+1)+a) æµç¨‹ç»“æ„ é¡ºåºç»“æ„ åˆ†æ”¯ç»“æ„ å¾ªç¯ç»“æ„ åˆ†æ”¯ç»“æ„ ifè¯­å¥ if if-else if-elseif-else switchè¯­å¥ è¯­æ³•æ ¼å¼switch(è¡¨è¾¾å¼){ case 1: case 2:} è¡¨è¾¾å¼çš„å€¼å¿…é¡»ä¸º byte, short, char, int, æšä¸¾, String caseå­å¥ä¸­çš„å€¼å¿…é¡»ä¸ºå¸¸é‡ ä¼˜å…ˆä½¿ç”¨switchï¼Œswitchæ•ˆç‡æ›´é«˜ å¾ªç¯ç»“æ„ for while do-while breakä»¥åŠcontinueå¯ä»¥è·³å‡ºåˆ°å›ºå®šlabel, ä¸”ä¹‹åä¸èƒ½å†™æ‰§è¡Œè¯­å¥ labelçš„å£°æ˜ä¸º label:{} ","link":"https://yeyuan1107.github.io/post/java-ji-ben-yu-fa/"},{"title":"JavaåŸºç¡€æ¦‚è¿°","content":" å¸¸ç”¨DOSå‘½ä»¤ dirï¼šåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹ mdï¼šåˆ›å»ºç›®å½• rdï¼šåˆ é™¤ç›®å½• cdï¼šè¿›å…¥åˆ¶å®šç›®å½• cd\\ï¼šé€€å›åˆ°è·Ÿç›®å½• cd..ï¼šé€€å›åˆ°ä¸Šä¸€çº§ç›®å½• delï¼šåˆ é™¤æ–‡ä»¶ exitï¼šæ¨å‡ºDOSå‘½ä»¤è¡Œ Javaè¯­è¨€ç‰¹ç‚¹ é¢å‘å¯¹è±¡ ä¸¤ä¸ªåŸºæœ¬æ¦‚å¿µï¼šç±»ã€å¯¹è±¡ ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…æ€§ã€ç»§æ‰¿æ€§ã€å¤šæ€æ€§ å¥å£®æ€§ å¸æ”¶äº†C/C++è¯­è¨€çš„æœ‰ç‚¹ï¼Œä½†å»æ‰äº†å½±å“ç¨‹åºå¥å£®æ€§çš„éƒ¨åˆ†(å¦‚æŒ‡é’ˆã€å†…å­˜çš„ç”³è¯·ä¸é‡Šæ”¾ç­‰)ï¼Œæä¾›äº†ä¸€ä¸ªç›¸å¯¹å®‰å…¨çš„å†…å­˜ç®¡ç†å’Œè®¿é—®æœºåˆ¶ è·¨å¹³å°æ€§ é€šè¿‡Javaç¼–å†™çš„åº”ç”¨ç¨‹åºåœ¨ä¸åŒçš„ç³»ç»Ÿå¹³å°ä¸Šéƒ½å¯ä»¥è¿è¡Œ åŸç†ï¼šåªéœ€è¦åœ¨è¿è¡ŒJavaåº”ç”¨ç¨‹åºçš„æ“ä½œç³»ç»Ÿä¸Šï¼Œå…ˆå®‰è£…ä¸€ä¸ªJavaè™šæ‹Ÿæœºå³å¯ã€‚ç”±JVMæ¥è´Ÿè´£Javaç¨‹åºåœ¨è¯¥ç³»ç»Ÿçš„è¿è¡Œã€‚ Javaçš„ä¸¤ç§æ ¸å¿ƒæœºåˆ¶ Javaè™šæ‹Ÿæœº åƒåœ¾å›æ”¶æœºåˆ¶GC è™½ç„¶æœ‰åƒåœ¾å›æ”¶æœºåˆ¶ä½†æ˜¯ä»ç„¶ä¼šå‡ºç°å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡º JDKã€JREå’ŒJVMå…³ç³» JDK(Java Development Kit)ï¼šJavaå¼€å‘å·¥å…·åŒ… JRE(Java Runtime Environment)ï¼šJavaè¿è¡Œç¯å¢ƒ JVM(Java Virtual Machine)ï¼šJavaè™šæ‹Ÿæœº JDK = JRE + å¼€å‘å·¥å…·é›† (å¦‚Javacç¼–è¯‘å·¥å…·ç­‰) JRE = JVM + JavaSEæ ‡å‡†ç±»åº“ Javaæºæ–‡ä»¶ ä¸€ä¸ªæºæ–‡ä»¶å¯ä»¥æœ‰å¤šä¸ªç±»ï¼Œä½†åªæœ‰ä¸€ä¸ªç±»å¯ä»¥æ˜¯publicï¼Œä¸”publicç±»çš„ç±»åä¸æ–‡ä»¶åè¦ç›¸åŒæºæ–‡ä»¶ä¸­æœ‰å¤šä¸ªclassï¼Œç¼–è¯‘åç”Ÿæˆå¤šä¸ª.classæ–‡ä»¶è¿è¡Œæ—¶æ‰§è¡ŒåŒ…å«mainæ–¹æ³•çš„ç±» Javaåº”ç”¨ç¨‹åº *.javaæ–‡ä»¶ç»è¿‡ javac.exe ç¼–è¯‘ç”Ÿæˆ *.class æ–‡ä»¶ å†é€šè¿‡ java.exe è¿è¡Œ *.class æ–‡ä»¶ API API(Application Programing Interface)ï¼šåº”ç”¨ç¼–ç¨‹æ¥å£ï¼Œæ˜¯Javaæä¾›çš„åŸºæœ¬ç¼–ç¨‹æ¥å£ ","link":"https://yeyuan1107.github.io/post/java-ji-chu-gai-shu/"}]}